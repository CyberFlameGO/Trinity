/*
 jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(b.call(c,g,e,a))return{i:e,v:g}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6-impl","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var g in e)$jscomp.owns(e,g)&&(a[g]=e[g])}return a}},"es6-impl","es3");$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6-impl","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3");$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,g=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<g&&c<e;)if(b[c++]!=a[h++])return!1;return h>=g}},"es6-impl","es3");
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a,b,f){var c,l=(b=b||aa).createElement("script");if(l.text=a,f)for(c in ob)f[c]&&(l[c]=f[c]);b.head.appendChild(l).parentNode.removeChild(l)}function d(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ta[ca.call(a)]||
"object":typeof a}function e(a){var b=!!a&&"length"in a&&a.length,f=d(a);return!T(a)&&!V(a)&&("array"===f||0===b||"number"==typeof b&&0<b&&b-1 in a)}function g(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function h(a,b,f){return T(b)?u.grep(a,function(a,c){return!!b.call(a,c,a)!==f}):b.nodeType?u.grep(a,function(a){return a===b!==f}):"string"!=typeof b?u.grep(a,function(a){return-1<Da.call(b,a)!==f}):u.filter(b,a,f)}function k(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function m(a){var b=
{};return u.each(a.match(Xa)||[],function(a,f){b[f]=!0}),b}function n(a){return a}function p(a){throw a;}function q(a,b,f,c){var l;try{a&&T(l=a.promise)?l.call(a).done(b).fail(f):a&&T(l=a.then)?l.call(a,b,f):b.apply(void 0,[a].slice(c))}catch(jc){f.apply(void 0,[jc])}}function t(){aa.removeEventListener("DOMContentLoaded",t);a.removeEventListener("load",t);u.ready()}function f(a,b){return b.toUpperCase()}function l(a){return a.replace(Cb,"ms-").replace(kc,f)}function r(){this.expando=u.expando+r.uid++}
function w(a,b,f){var c;if(void 0===f&&1===a.nodeType)if(c="data-"+b.replace(Ya,"-$&").toLowerCase(),"string"==typeof(f=a.getAttribute(c))){try{c=f,f="true"===c||"false"!==c&&("null"===c?null:c===+c+""?+c:vb.test(c)?JSON.parse(c):c)}catch(Ze){}va.set(a,b,f)}else f=void 0;return f}function v(a,b,f,c){var l,d,e=20,g=c?function(){return c.cur()}:function(){return u.css(a,b,"")},r=g(),h=f&&f[3]||(u.cssNumber[b]?"":"px"),w=(u.cssNumber[b]||"px"!==h&&+r)&&Ka.exec(u.css(a,b));if(w&&w[3]!==h){r/=2;h=h||w[3];
for(w=+r||1;e--;)u.style(a,b,w+h),0>=(1-d)*(1-(d=g()/r||.5))&&(e=0),w/=d;w*=2;u.style(a,b,w+h);f=f||[]}return f&&(w=+w||+r||0,l=f[1]?w+(f[1]+1)*f[2]:+f[2],c&&(c.unit=h,c.start=w,c.end=l)),l}function y(a,b){for(var f,c,l=[],d=0,e=a.length;d<e;d++)if((c=a[d]).style)if(f=c.style.display,b){if("none"===f&&(l[d]=ba.get(c,"display")||null,l[d]||(c.style.display="")),""===c.style.display&&wb(c)){f=d;var g=void 0;var r=c.ownerDocument;var h=c.nodeName;r=(c=Hc[h])||(g=r.body.appendChild(r.createElement(h)),
c=u.css(g,"display"),g.parentNode.removeChild(g),"none"===c&&(c="block"),Hc[h]=c,c);l[f]=r}}else"none"!==f&&(l[d]="none",ba.set(c,"display",f));for(d=0;d<e;d++)null!=l[d]&&(a[d].style.display=l[d]);return a}function F(a,b){var f;return f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&g(a,b)?u.merge([a],f):f}function z(a,b){for(var f=0,c=a.length;f<c;f++)ba.set(a[f],"globalEval",!b||ba.get(b[f],
"globalEval"))}function E(a,b,f,c,l){for(var e,g,r,h,w=b.createDocumentFragment(),k=[],v=0,y=a.length;v<y;v++)if((e=a[v])||0===e)if("object"===d(e))u.merge(k,e.nodeType?[e]:e);else if(Bd.test(e)){g=g||w.appendChild(b.createElement("div"));r=(Cd.exec(e)||["",""])[1].toLowerCase();r=Qa[r]||Qa._default;g.innerHTML=r[1]+u.htmlPrefilter(e)+r[2];for(r=r[0];r--;)g=g.lastChild;u.merge(k,g.childNodes);(g=w.firstChild).textContent=""}else k.push(b.createTextNode(e));w.textContent="";for(v=0;e=k[v++];)if(c&&
-1<u.inArray(e,c))l&&l.push(e);else if(h=u.contains(e.ownerDocument,e),g=F(w.appendChild(e),"script"),h&&z(g),f)for(r=0;e=g[r++];)Dd.test(e.type||"")&&f.push(e);return w}function G(){return!0}function O(){return!1}function P(){try{return aa.activeElement}catch(ma){}}function L(a,b,f,c,l,d){var e,g;if("object"==typeof b){"string"!=typeof f&&(c=c||f,f=void 0);for(g in b)L(a,g,f,c,b[g],d);return a}if(null==c&&null==l?(l=f,c=f=void 0):null==l&&("string"==typeof f?(l=c,c=void 0):(l=c,c=f,f=void 0)),!1===
l)l=O;else if(!l)return a;return 1===d&&(e=l,(l=function(a){return u().off(a),e.apply(this,arguments)}).guid=e.guid||(e.guid=u.guid++)),a.each(function(){u.event.add(this,b,l,c,f)})}function I(a,b){return g(a,"table")&&g(11!==b.nodeType?b:b.firstChild,"tr")?u(a).children("tbody")[0]||a:a}function B(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function M(a){return"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type"),a}function R(a,b){var f,c,l,d,e,g;if(1===
b.nodeType){if(ba.hasData(a)&&(f=ba.access(a),c=ba.set(b,f),g=f.events))for(l in delete c.handle,c.events={},g)for(f=0,c=g[l].length;f<c;f++)u.event.add(b,l,g[l][f]);va.hasData(a)&&(d=va.access(a),e=u.extend({},d),va.set(b,e))}}function S(a,b,f,l){b=Ra.apply([],b);var d,e,g,r=0,h=a.length,w=h-1,v=b[0],k=T(v);if(k||1<h&&"string"==typeof v&&!Y.checkClone&&Ed.test(v))return a.each(function(c){var d=a.eq(c);k&&(b[0]=v.call(this,c,d.html()));S(d,b,f,l)});if(h&&(d=E(b,a[0].ownerDocument,!1,a,l),e=d.firstChild,
1===d.childNodes.length&&(d=e),e||l)){for(g=(e=u.map(F(d,"script"),B)).length;r<h;r++){var y=d;r!==w&&(y=u.clone(y,!0,!0),g&&u.merge(e,F(y,"script")));f.call(a[r],y,r)}if(g)for(d=e[e.length-1].ownerDocument,u.map(e,M),r=0;r<g;r++)y=e[r],Dd.test(y.type||"")&&!ba.access(y,"globalEval")&&u.contains(d,y)&&(y.src&&"module"!==(y.type||"").toLowerCase()?u._evalUrl&&u._evalUrl(y.src):c(y.textContent.replace(Ic,""),d,y))}return a}function J(a,b,f){for(var c=b?u.filter(b,a):a,l=0;null!=(b=c[l]);l++)f||1!==
b.nodeType||u.cleanData(F(b)),b.parentNode&&(f&&u.contains(b.ownerDocument,b)&&z(F(b,"script")),b.parentNode.removeChild(b));return a}function Q(a,b,f){var c,l,d,e,g=a.style;return(f=f||lc(a))&&(""!==(e=f.getPropertyValue(b)||f[b])||u.contains(a.ownerDocument,a)||(e=u.style(a,b)),!Y.pixelBoxStyles()&&mc.test(e)&&Fd.test(b)&&(c=g.width,l=g.minWidth,d=g.maxWidth,g.minWidth=g.maxWidth=g.width=e,e=f.width,g.width=c,g.minWidth=l,g.maxWidth=d)),void 0!==e?e+"":e}function D(a,b){return{get:function(){if(!a())return(this.get=
b).apply(this,arguments);delete this.get}}}function H(a){var b=u.cssProps[a];if(!b){var b=u.cssProps;a:{var f=a;if(!(f in eb)){for(var c=f[0].toUpperCase()+f.slice(1),l=Jc.length;l--;)if((f=Jc[l]+c)in eb)break a;f=void 0}}b=b[a]=f||a}return b}function C(a,b,f){return(a=Ka.exec(b))?Math.max(0,a[2]-(f||0))+(a[3]||"px"):b}function N(a,b,f,c,l,d){var e="width"===b?1:0,g=0,r=0;if(f===(c?"border":"content"))return 0;for(;4>e;e+=2)"margin"===f&&(r+=u.css(a,f+La[e],!0,l)),c?("content"===f&&(r-=u.css(a,"padding"+
La[e],!0,l)),"margin"!==f&&(r-=u.css(a,"border"+La[e]+"Width",!0,l))):(r+=u.css(a,"padding"+La[e],!0,l),"padding"!==f?r+=u.css(a,"border"+La[e]+"Width",!0,l):g+=u.css(a,"border"+La[e]+"Width",!0,l));return!c&&0<=d&&(r+=Math.max(0,Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-d-r-g-.5))),r}function ka(a,b,f){var c=lc(a),l=Q(a,b,c),d="border-box"===u.css(a,"boxSizing",!1,c),e=d;if(mc.test(l)){if(!f)return l;l="auto"}return e=e&&(Y.boxSizingReliable()||l===a.style[b]),("auto"===l||!parseFloat(l)&&
"inline"===u.css(a,"display",!1,c))&&(l=a["offset"+b[0].toUpperCase()+b.slice(1)],e=!0),(l=parseFloat(l)||0)+N(a,b,f||(d?"border":"content"),e,c,l)+"px"}function ha(a,b,f,c,l){return new ha.prototype.init(a,b,f,c,l)}function ga(){Lb&&(!1===aa.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(ga):a.setTimeout(ga,u.fx.interval),u.fx.tick())}function qa(){return a.setTimeout(function(){Za=void 0}),Za=Date.now()}function X(a,b){var f,c=0,l={height:a};for(b=b?1:0;4>c;c+=2-b)l["margin"+(f=La[c])]=
l["padding"+f]=a;return b&&(l.opacity=l.width=a),l}function Aa(a,b,f){for(var c,l=(da.tweeners[b]||[]).concat(da.tweeners["*"]),d=0,e=l.length;d<e;d++)if(c=l[d].call(f,b,a))return c}function ya(a,b){var f,c,d,e,g;for(f in a)if(c=l(f),d=b[c],e=a[f],Array.isArray(e)&&(d=e[1],e=a[f]=e[0]),f!==c&&(a[c]=e,delete a[f]),(g=u.cssHooks[c])&&"expand"in g)for(f in e=g.expand(e),delete a[c],e)f in a||(a[f]=e[f],b[f]=d);else b[c]=d}function da(a,b,f){var c,l=0,d=da.prefilters.length,e=u.Deferred().always(function(){delete g.elem}),
g=function(){if(c)return!1;for(var b=Za||qa(),b=Math.max(0,r.startTime+r.duration-b),f=1-(b/r.duration||0),l=0,d=r.tweens.length;l<d;l++)r.tweens[l].run(f);return e.notifyWith(a,[r,f,b]),1>f&&d?b:(d||e.notifyWith(a,[r,1,0]),e.resolveWith(a,[r]),!1)},r=e.promise({elem:a,props:u.extend({},b),opts:u.extend(!0,{specialEasing:{},easing:u.easing._default},f),originalProperties:b,originalOptions:f,startTime:Za||qa(),duration:f.duration,tweens:[],createTween:function(b,f){b=u.Tween(a,r.opts,b,f,r.opts.specialEasing[b]||
r.opts.easing);return r.tweens.push(b),b},stop:function(b){var f=0,l=b?r.tweens.length:0;if(c)return this;for(c=!0;f<l;f++)r.tweens[f].run(1);return b?(e.notifyWith(a,[r,1,0]),e.resolveWith(a,[r,b])):e.rejectWith(a,[r,b]),this}});f=r.props;for(ya(f,r.opts.specialEasing);l<d;l++)if(b=da.prefilters[l].call(r,a,f,r.opts))return T(b.stop)&&(u._queueHooks(r.elem,r.opts.queue).stop=b.stop.bind(b)),b;return u.map(f,Aa,r),T(r.opts.start)&&r.opts.start.call(a,r),r.progress(r.opts.progress).done(r.opts.done,
r.opts.complete).fail(r.opts.fail).always(r.opts.always),u.fx.timer(u.extend(g,{elem:a,anim:r,queue:r.opts.queue})),r}function ea(a){return(a.match(Xa)||[]).join(" ")}function fa(a){return a.getAttribute&&a.getAttribute("class")||""}function za(a){return Array.isArray(a)?a:"string"==typeof a?a.match(Xa)||[]:[]}function Ha(a,b,f,c){var l;if(Array.isArray(b))u.each(b,function(b,l){f||Gd.test(a)?c(a,l):Ha(a+"["+("object"==typeof l&&null!=l?b:"")+"]",l,f,c)});else if(f||"object"!==d(b))c(a,b);else for(l in b)Ha(a+
"["+l+"]",b[l],f,c)}function pa(a){return function(b,f){"string"!=typeof b&&(f=b,b="*");var c=0,l=b.toLowerCase().match(Xa)||[];if(T(f))for(;b=l[c++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(f)):(a[b]=a[b]||[]).push(f)}}function xb(a,b,f,c){function l(g){var r;return d[g]=!0,u.each(a[g]||[],function(a,g){a=g(b,f,c);return"string"!=typeof a||e||d[a]?e?!(r=a):void 0:(b.dataTypes.unshift(a),l(a),!1)}),r}var d={},e=a===Kc;return l(b.dataTypes[0])||!d["*"]&&l("*")}function fb(a,b){var f,
c,l=u.ajaxSettings.flatOptions||{};for(f in b)void 0!==b[f]&&((l[f]?a:c||(c={}))[f]=b[f]);return c&&u.extend(!0,a,c),a}var Ma=[],aa=a.document,Sa=Object.getPrototypeOf,Ta=Ma.slice,Ra=Ma.concat,$a=Ma.push,Da=Ma.indexOf,ta={},ca=ta.toString,ab=ta.hasOwnProperty,K=ab.toString,ja=K.call(Object),Y={},T=function(a){return"function"==typeof a&&"number"!=typeof a.nodeType},V=function(a){return null!=a&&a===a.window},ob={type:!0,src:!0,noModule:!0},u=function(a,b){return new u.fn.init(a,b)},bb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
u.fn=u.prototype={jquery:"3.3.1",constructor:u,length:0,toArray:function(){return Ta.call(this)},get:function(a){return null==a?Ta.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){a=u.merge(this.constructor(),a);return a.prevObject=this,a},each:function(a){return u.each(this,a)},map:function(a){return this.pushStack(u.map(this,function(b,f){return a.call(b,f,b)}))},slice:function(){return this.pushStack(Ta.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:$a,sort:Ma.sort,splice:Ma.splice};u.extend=u.fn.extend=function(){var a,b,f,c,l,d=arguments[0]||{},e=1,g=arguments.length,r=!1;"boolean"==typeof d&&(r=d,d=arguments[e]||{},e++);"object"==typeof d||T(d)||(d={});for(e===g&&(d=this,e--);e<g;e++)if(null!=(a=arguments[e]))for(b in a){var h=d[b];d!==(f=a[b])&&(r&&f&&(u.isPlainObject(f)||(c=Array.isArray(f)))?
(c?(c=!1,l=h&&Array.isArray(h)?h:[]):l=h&&u.isPlainObject(h)?h:{},d[b]=u.extend(r,l,f)):void 0!==f&&(d[b]=f))}return d};u.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){var b,f;return!(!a||"[object Object]"!==ca.call(a))&&(!(b=Sa(a))||"function"==typeof(f=ab.call(b,"constructor")&&b.constructor)&&K.call(f)===ja)},isEmptyObject:function(a){for(var b in a)return!1;return!0},globalEval:function(a){c(a)},
each:function(a,b){var f,c=0;if(e(a))for(f=a.length;c<f&&!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a},trim:function(a){return null==a?"":(a+"").replace(bb,"")},makeArray:function(a,b){b=b||[];return null!=a&&(e(Object(a))?u.merge(b,"string"==typeof a?[a]:a):$a.call(b,a)),b},inArray:function(a,b,f){return null==b?-1:Da.call(b,a,f)},merge:function(a,b){for(var f=+b.length,c=0,l=a.length;c<f;c++)a[l++]=b[c];return a.length=l,a},grep:function(a,b,f){var c=
[],l=0,d=a.length;for(f=!f;l<d;l++)!b(a[l],l)!==f&&c.push(a[l]);return c},map:function(a,b,f){var c,l,d=0,g=[];if(e(a))for(c=a.length;d<c;d++)null!=(l=b(a[d],d,f))&&g.push(l);else for(d in a)null!=(l=b(a[d],d,f))&&g.push(l);return Ra.apply([],g)},guid:1,support:Y});"function"==typeof Symbol&&(u.fn[Symbol.iterator]=Ma[Symbol.iterator]);u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ta["[object "+b+"]"]=b.toLowerCase()});var sa=function(a){function b(a,
b,f,c){var l,d,e,g,r=b&&b.ownerDocument,h=b?b.nodeType:9;if(f=f||[],"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return f;if(!c&&((b?b.ownerDocument||b:Q)!==H&&Ka(b),b=b||H,O)){if(11!==h&&(g=ea.exec(a)))if(l=g[1])if(9===h){if(!(d=b.getElementById(l)))return f;if(d.id===l)return f.push(d),f}else{if(r&&(d=r.getElementById(l))&&D(b,d)&&d.id===l)return f.push(d),f}else{if(g[2])return qa.apply(f,b.getElementsByTagName(a)),f;if((l=g[3])&&V.getElementsByClassName&&b.getElementsByClassName)return qa.apply(f,
b.getElementsByClassName(l)),f}if(!(!V.qsa||Ja[a+" "]||C&&C.test(a))){if(1!==h){r=b;var w=a}else if("object"!==b.nodeName.toLowerCase()){(e=b.getAttribute("id"))?e=e.replace(nb,Y):b.setAttribute("id",e=I);for(l=(d=La(a)).length;l--;)d[l]="#"+e+" "+y(d[l]);w=d.join(",");r=ya.test(a)&&v(b.parentNode)||b}if(w)try{return qa.apply(f,r.querySelectorAll(w)),f}catch(we){}finally{e===I&&b.removeAttribute("id")}}}return u(a.replace(vb,"$1"),b,f,c)}function f(){function a(f,c){return b.push(f+" ")>q.cacheLength&&
delete a[b.shift()],a[f+" "]=c}var b=[];return a}function c(a){return a[I]=!0,a}function l(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(Hd){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function d(a,b){a=a.split("|");for(var f=a.length;f--;)q.attrHandle[a[f]]=b}function e(a,b){var f=b&&a,c=f&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(c)return c;if(f)for(;f=f.nextSibling;)if(f===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===
b.nodeName.toLowerCase()&&b.type===a}}function r(a){return function(b){var f=b.nodeName.toLowerCase();return("input"===f||"button"===f)&&b.type===a}}function h(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ca(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function w(a){return c(function(b){return b=+b,c(function(f,c){for(var l,d=a([],f.length,b),e=d.length;e--;)f[l=
d[e]]&&(f[l]=!(c[l]=f[l]))})})}function v(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function k(){}function y(a){for(var b=0,f=a.length,c="";b<f;b++)c+=a[b].value;return c}function ma(a,b,f){var c=b.dir,l=b.next,d=l||c,e=f&&"parentNode"===d,g=na++;return b.first?function(b,f,l){for(;b=b[c];)if(1===b.nodeType||e)return a(b,f,l);return!1}:function(b,f,r){var h,w,v,k=[M,g];if(r)for(;b=b[c];){if((1===b.nodeType||e)&&a(b,f,r))return!0}else for(;b=b[c];)if(1===b.nodeType||e)if(v=b[I]||(b[I]=
{}),w=v[b.uniqueID]||(v[b.uniqueID]={}),l&&l===b.nodeName.toLowerCase())b=b[c]||b;else{if((h=w[d])&&h[0]===M&&h[1]===g)return k[2]=h[2];if(w[d]=k,k[2]=a(b,f,r))return!0}return!1}}function z(a){return 1<a.length?function(b,f,c){for(var l=a.length;l--;)if(!a[l](b,f,c))return!1;return!0}:a[0]}function m(a,b,f,c,l){for(var d,e=[],g=0,r=a.length,h=null!=b;g<r;g++)(d=a[g])&&(f&&!f(d,c,l)||(e.push(d),h&&b.push(g)));return e}function n(a,f,l,d,e,g){return d&&!d[I]&&(d=n(d)),e&&!e[I]&&(e=n(e,g)),c(function(c,
g,r,h){var w,v=[],k=[],y=g.length,ma;if(!(ma=c)){ma=f||"*";for(var z=r.nodeType?[r]:r,n=[],F=0,q=z.length;F<q;F++)b(ma,z[F],n);ma=n}ma=!a||!c&&f?ma:m(ma,v,a,r,h);z=l?e||(c?a:y||d)?[]:g:ma;if(l&&l(ma,z,r,h),d){var p=m(z,k);d(p,[],r,h);for(r=p.length;r--;)(w=p[r])&&(z[k[r]]=!(ma[k[r]]=w))}if(c){if(e||a){if(e){p=[];for(r=z.length;r--;)(w=z[r])&&p.push(ma[r]=w);e(null,z=[],p,h)}for(r=z.length;r--;)(w=z[r])&&-1<(p=e?va(c,w):v[r])&&(c[p]=!(g[p]=w))}}else z=m(z===g?z.splice(y,z.length):z),e?e(null,g,z,h):
qa.apply(g,z)})}function F(a){var b,f,c=a.length,l=q.relative[a[0].type];var d=l||q.relative[" "];for(var e=l?1:0,g=ma(function(a){return a===b},d,!0),r=ma(function(a){return-1<va(b,a)},d,!0),h=[function(a,f,c){a=!l&&(c||f!==G)||((b=f).nodeType?g(a,f,c):r(a,f,c));return b=null,a}];e<c;e++)if(d=q.relative[a[e].type])h=[ma(z(h),d)];else{if((d=q.filter[a[e].type].apply(null,a[e].matches))[I]){for(f=++e;f<c&&!q.relative[a[f].type];f++);return n(1<e&&z(h),1<e&&y(a.slice(0,e-1).concat({value:" "===a[e-
2].type?"*":""})).replace(vb,"$1"),d,e<f&&F(a.slice(e,f)),f<c&&F(a=a.slice(f)),f<c&&y(a))}h.push(d)}return z(h)}function p(a,f){var l=0<f.length,d=0<a.length,e=function(c,e,g,r,h){var w,v,k=0,y="0",ma=c&&[],z=[],n=G,F=c||d&&q.find.TAG("*",h),p=M+=null==n?1:Math.random()||.1,t=F.length;for(h&&(G=e===H||e||h);y!==t&&null!=(w=F[y]);y++){if(d&&w){var E=0;for(e||w.ownerDocument===H||(Ka(w),g=!O);v=a[E++];)if(v(w,e||H,g)){r.push(w);break}h&&(M=p)}l&&((w=!v&&w)&&k--,c&&ma.push(w))}if(k+=y,l&&y!==k){for(E=
0;v=f[E++];)v(ma,z,e,g);if(c){if(0<k)for(;y--;)ma[y]||z[y]||(z[y]=K.call(r));z=m(z)}qa.apply(r,z);h&&!c&&0<z.length&&1<k+f.length&&b.uniqueSort(r)}return h&&(M=p,G=n),ma};return l?c(e):e}var t,q,E,u,G,B,L,H,P,O,C,N,J,D,I="sizzle"+1*new Date,Q=a.document,M=0,na=0,ka=f(),R=f(),Ja=f(),S=function(a,b){return a===b&&(L=!0),0},ha={}.hasOwnProperty,Va=[],K=Va.pop,ga=Va.push,qa=Va.push,X=Va.slice,va=function(a,b){for(var f=0,c=a.length;f<c;f++)if(a[f]===b)return f;return-1},fa=/[\x20\t\r\n\f]+/g,vb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
ba=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,T=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ha=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,da=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,za=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Cb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},kc=/^(?:input|select|textarea|button)$/i,mb=/^h\d$/i,Aa=
/^[^{]+\{\s*\[native \w/,ea=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ya=/[+~]/,pa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Ya=function(a,b,f){a="0x"+b-65536;return a!==a||f?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},nb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Y=function(a,b){return b?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},aa=function(){Ka()},ca=ma(function(a){return!0===a.disabled&&("form"in
a||"label"in a)},{dir:"parentNode",next:"legend"});try{qa.apply(Va=X.call(Q.childNodes),Q.childNodes),Va[Q.childNodes.length].nodeType}catch(se){qa={apply:Va.length?function(a,b){ga.apply(a,X.call(b))}:function(a,b){for(var f=a.length,c=0;a[f++]=b[c++];);a.length=f-1}}}var V=b.support={};var ja=b.isXML=function(a){a=a&&(a.ownerDocument||a).documentElement;return!!a&&"HTML"!==a.nodeName};var Ka=b.setDocument=function(a){var b,f;a=a?a.ownerDocument||a:Q;return a!==H&&9===a.nodeType&&a.documentElement?
(H=a,P=H.documentElement,O=!ja(H),Q!==H&&(f=H.defaultView)&&f.top!==f&&(f.addEventListener?f.addEventListener("unload",aa,!1):f.attachEvent&&f.attachEvent("onunload",aa)),V.attributes=l(function(a){return a.className="i",!a.getAttribute("className")}),V.getElementsByTagName=l(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),V.getElementsByClassName=Aa.test(H.getElementsByClassName),V.getById=l(function(a){return P.appendChild(a).id=I,!H.getElementsByName||
!H.getElementsByName(I).length}),V.getById?(q.filter.ID=function(a){var b=a.replace(pa,Ya);return function(a){return a.getAttribute("id")===b}},q.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&O)return(a=b.getElementById(a))?[a]:[]}):(q.filter.ID=function(a){var b=a.replace(pa,Ya);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}},q.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&O){var f,c=b.getElementById(a);
if(c){if((f=c.getAttributeNode("id"))&&f.value===a)return[c];var l=b.getElementsByName(a);for(b=0;c=l[b++];)if((f=c.getAttributeNode("id"))&&f.value===a)return[c]}return[]}}),q.find.TAG=V.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):V.qsa?b.querySelectorAll(a):void 0}:function(a,b){var f=[],c=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[c++];)1===a.nodeType&&f.push(a);return f}return b},q.find.CLASS=V.getElementsByClassName&&function(a,
b){if("undefined"!=typeof b.getElementsByClassName&&O)return b.getElementsByClassName(a)},N=[],C=[],(V.qsa=Aa.test(H.querySelectorAll))&&(l(function(a){P.appendChild(a).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&C.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||C.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+I+"-]").length||C.push("~=");a.querySelectorAll(":checked").length||C.push(":checked");a.querySelectorAll("a#"+I+"+*").length||C.push(".#.+[+~]")}),l(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&C.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==a.querySelectorAll(":enabled").length&&
C.push(":enabled",":disabled");P.appendChild(a).disabled=!0;2!==a.querySelectorAll(":disabled").length&&C.push(":enabled",":disabled");a.querySelectorAll("*,:x");C.push(",.*:")})),(V.matchesSelector=Aa.test(J=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&l(function(a){V.disconnectedMatch=J.call(a,"*");J.call(a,"[s!='']:x");N.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
C=C.length&&new RegExp(C.join("|")),N=N.length&&new RegExp(N.join("|")),b=Aa.test(P.compareDocumentPosition),D=b||Aa.test(P.contains)?function(a,b){var f=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!(!b||1!==b.nodeType||!(f.contains?f.contains(b):a.compareDocumentPosition&&16&a.compareDocumentPosition(b)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},S=b?function(a,b){if(a===b)return L=!0,0;var f=!a.compareDocumentPosition-!b.compareDocumentPosition;
return f||(1&(f=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!V.sortDetached&&b.compareDocumentPosition(a)===f?a===H||a.ownerDocument===Q&&D(Q,a)?-1:b===H||b.ownerDocument===Q&&D(Q,b)?1:B?va(B,a)-va(B,b):0:4&f?-1:1)}:function(a,b){if(a===b)return L=!0,0;var f=0,c=a.parentNode,l=b.parentNode,d=[a],g=[b];if(!c||!l)return a===H?-1:b===H?1:c?-1:l?1:B?va(B,a)-va(B,b):0;if(c===l)return e(a,b);for(;a=a.parentNode;)d.unshift(a);for(a=b;a=a.parentNode;)g.unshift(a);for(;d[f]===
g[f];)f++;return f?e(d[f],g[f]):d[f]===Q?-1:g[f]===Q?1:0},H):H};b.matches=function(a,f){return b(a,null,null,f)};b.matchesSelector=function(a,f){if((a.ownerDocument||a)!==H&&Ka(a),f=f.replace(Ha,"='$1']"),!(!V.matchesSelector||!O||Ja[f+" "]||N&&N.test(f)||C&&C.test(f)))try{var c=J.call(a,f);if(c||V.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(Lc){}return 0<b(f,H,null,[a]).length};b.contains=function(a,b){return(a.ownerDocument||a)!==H&&Ka(a),D(a,b)};b.attr=function(a,b){(a.ownerDocument||
a)!==H&&Ka(a);var f=q.attrHandle[b.toLowerCase()],f=f&&ha.call(q.attrHandle,b.toLowerCase())?f(a,b,!O):void 0;return void 0!==f?f:V.attributes||!O?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null};b.escape=function(a){return(a+"").replace(nb,Y)};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,f=[],c=0,l=0;if(L=!V.detectDuplicates,B=!V.sortStable&&a.slice(0),a.sort(S),L){for(;b=a[l++];)b===a[l]&&(c=f.push(l));for(;c--;)a.splice(f[c],
1)}return B=null,a};var wb=b.getText=function(a){var b,f="",c=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)f+=wb(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[c++];)f+=wb(b);return f};(q=b.selectors={cacheLength:50,createPseudo:c,match:Cb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=
a[1].replace(pa,Ya),a[3]=(a[3]||a[4]||a[5]||"").replace(pa,Ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,f=!a[6]&&a[2];return Cb.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":f&&da.test(f)&&(b=La(f,!0))&&(b=f.indexOf(")",f.length-b)-f.length)&&(a[0]=a[0].slice(0,
b),a[2]=f.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(pa,Ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ka[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ka(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,f,c){return function(l){l=b.attr(l,
a);return null==l?"!="===f:!f||(l+="","="===f?l===c:"!="===f?l!==c:"^="===f?c&&0===l.indexOf(c):"*="===f?c&&-1<l.indexOf(c):"$="===f?c&&l.slice(-c.length)===c:"~="===f?-1<(" "+l.replace(fa," ")+" ").indexOf(c):"|="===f&&(l===c||l.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,f,c,l){var d="nth"!==a.slice(0,3),e="last"!==a.slice(-4),g="of-type"===b;return 1===c&&0===l?function(a){return!!a.parentNode}:function(b,f,r){var h,w,v,k;f=d!==e?"nextSibling":"previousSibling";var y=b.parentNode,ma=g&&
b.nodeName.toLowerCase(),z=!r&&!g,m=!1;if(y){if(d){for(;f;){for(v=b;v=v[f];)if(g?v.nodeName.toLowerCase()===ma:1===v.nodeType)return!1;var n=f="only"===a&&!n&&"nextSibling"}return!0}if(n=[e?y.firstChild:y.lastChild],e&&z)for(m=(k=(h=(r=(w=(v=y)[I]||(v[I]={}))[v.uniqueID]||(w[v.uniqueID]={}))[a]||[])[0]===M&&h[1])&&h[2],v=k&&y.childNodes[k];v=++k&&v&&v[f]||(m=k=0)||n.pop();){if(1===v.nodeType&&++m&&v===b){r[a]=[M,k,m];break}}else if(z&&(m=k=(h=((w=(v=b)[I]||(v[I]={}))[v.uniqueID]||(w[v.uniqueID]={}))[a]||
[])[0]===M&&h[1]),!1===m)for(;(v=++k&&v&&v[f]||(m=k=0)||n.pop())&&((g?v.nodeName.toLowerCase()!==ma:1!==v.nodeType)||!++m||(z&&((r=(w=v[I]||(v[I]={}))[v.uniqueID]||(w[v.uniqueID]={}))[a]=[M,m]),v!==b)););return(m-=l)===c||0==m%c&&0<=m/c}}},PSEUDO:function(a,f){var l,d=q.pseudos[a]||q.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return d[I]?d(f):1<d.length?(l=[a,a,"",f],q.setFilters.hasOwnProperty(a.toLowerCase())?c(function(a,b){for(var c,l=d(a,f),e=l.length;e--;)a[c=va(a,l[e])]=
!(b[c]=l[e])}):function(a){return d(a,0,l)}):d}},pseudos:{not:c(function(a){var b=[],f=[],l=E(a.replace(vb,"$1"));return l[I]?c(function(a,b,f,c){var d;f=l(a,null,c,[]);for(c=a.length;c--;)(d=f[c])&&(a[c]=!(b[c]=d))}):function(a,c,d){return b[0]=a,l(b,null,d,f),b[0]=null,!f.pop()}}),has:c(function(a){return function(f){return 0<b(a,f).length}}),contains:c(function(a){return a=a.replace(pa,Ya),function(b){return-1<(b.textContent||b.innerText||wb(b)).indexOf(a)}}),lang:c(function(a){return za.test(a||
"")||b.error("unsupported lang: "+a),a=a.replace(pa,Ya).toLowerCase(),function(b){var f;do if(f=O?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(f=f.toLowerCase())===a||0===f.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var f=a.location&&a.location.hash;return f&&f.slice(1)===b.id},root:function(a){return a===P},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:h(!1),disabled:h(!0),
checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!q.pseudos.empty(a)},header:function(a){return mb.test(a.nodeName)},input:function(a){return kc.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===
a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:w(function(){return[0]}),last:w(function(a,b){return[b-1]}),eq:w(function(a,b,f){return[0>f?f+b:f]}),even:w(function(a,b){for(var f=0;f<b;f+=2)a.push(f);return a}),odd:w(function(a,b){for(var f=1;f<b;f+=2)a.push(f);return a}),lt:w(function(a,b,f){for(b=0>f?f+b:f;0<=--b;)a.push(b);return a}),gt:w(function(a,b,f){for(f=0>f?f+b:f;++f<
b;)a.push(f);return a})}}).pseudos.nth=q.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})q.pseudos[t]=g(t);for(t in{submit:!0,reset:!0})q.pseudos[t]=r(t);k.prototype=q.filters=q.pseudos;q.setFilters=new k;var La=b.tokenize=function(a,f){var c,l,d,e,g;if(e=R[a+" "])return f?0:e.slice(0);e=a;var r=[];for(g=q.preFilter;e;){h&&!(c=ba.exec(e))||(c&&(e=e.slice(c[0].length)||e),r.push(l=[]));var h=!1;(c=T.exec(e))&&(h=c.shift(),l.push({value:h,type:c[0].replace(vb," ")}),e=e.slice(h.length));
for(d in q.filter)!(c=Cb[d].exec(e))||g[d]&&!(c=g[d](c))||(h=c.shift(),l.push({value:h,type:d,matches:c}),e=e.slice(h.length));if(!h)break}return f?e.length:e?b.error(a):R(a,r).slice(0)};return E=b.compile=function(a,b){var f,c=[],l=[],d=Ja[a+" "];if(!d){b||(b=La(a));for(f=b.length;f--;)(d=F(b[f]))[I]?c.push(d):l.push(d);(d=Ja(a,p(l,c))).selector=a}return d},u=b.select=function(a,b,f,c){var l,d,e,g,r,h="function"==typeof a&&a,w=!c&&La(a=h.selector||a);if(f=f||[],1===w.length){if(2<(d=w[0]=w[0].slice(0)).length&&
"ID"===(e=d[0]).type&&9===b.nodeType&&O&&q.relative[d[1].type]){if(!(b=(q.find.ID(e.matches[0].replace(pa,Ya),b)||[])[0]))return f;h&&(b=b.parentNode);a=a.slice(d.shift().value.length)}for(l=Cb.needsContext.test(a)?0:d.length;l--&&(e=d[l],!q.relative[g=e.type]);)if((r=q.find[g])&&(c=r(e.matches[0].replace(pa,Ya),ya.test(d[0].type)&&v(b.parentNode)||b))){if(d.splice(l,1),!(a=c.length&&y(d)))return qa.apply(f,c),f;break}}return(h||E(a,w))(c,b,!O,f,!b||ya.test(a)&&v(b.parentNode)||b),f},V.sortStable=
I.split("").sort(S).join("")===I,V.detectDuplicates=!!L,Ka(),V.sortDetached=l(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),l(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||d("type|href|height|width",function(a,b,f){if(!f)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),V.attributes&&l(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||d("value",
function(a,b,f){if(!f&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),l(function(a){return null==a.getAttribute("disabled")})||d("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,f){var c;if(!f)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null}),b}(a);u.find=sa;u.expr=sa.selectors;u.expr[":"]=u.expr.pseudos;u.uniqueSort=u.unique=sa.uniqueSort;u.text=sa.getText;u.isXMLDoc=
sa.isXML;u.contains=sa.contains;u.escapeSelector=sa.escape;var qb=function(a,b,f){for(var c=[],l=void 0!==f;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(l&&u(a).is(f))break;c.push(a)}return c},Qb=function(a,b){for(var f=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&f.push(a);return f},yb=u.expr.match.needsContext,lb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;u.filter=function(a,b,f){var c=b[0];return f&&(a=":not("+a+")"),1===b.length&&1===c.nodeType?u.find.matchesSelector(c,
a)?[c]:[]:u.find.matches(a,u.grep(b,function(a){return 1===a.nodeType}))};u.fn.extend({find:function(a){var b,f=this.length,c=this;if("string"!=typeof a)return this.pushStack(u(a).filter(function(){for(b=0;b<f;b++)if(u.contains(c[b],this))return!0}));var l=this.pushStack([]);for(b=0;b<f;b++)u.find(a,c[b],l);return 1<f?u.uniqueSort(l):l},filter:function(a){return this.pushStack(h(this,a||[],!1))},not:function(a){return this.pushStack(h(this,a||[],!0))},is:function(a){return!!h(this,"string"==typeof a&&
yb.test(a)?u(a):a||[],!1).length}});var Eb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(u.fn.init=function(a,b,f){var c,l;if(!a)return this;if(f=f||rb,"string"==typeof a){if(!(c="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Eb.exec(a))||!c[1]&&b)return!b||b.jquery?(b||f).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof u?b[0]:b,u.merge(this,u.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:aa,!0)),lb.test(c[1])&&u.isPlainObject(b))for(c in b)T(this[c])?this[c](b[c]):this.attr(c,
b[c]);return this}return(l=aa.getElementById(c[2]))&&(this[0]=l,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):T(a)?void 0!==f.ready?f.ready(a):a(u):u.makeArray(a,this)}).prototype=u.fn;var rb=u(aa);var Fb=/^(?:parents|prev(?:Until|All))/,bc={children:!0,contents:!0,next:!0,prev:!0};u.fn.extend({has:function(a){var b=u(a,this),f=b.length;return this.filter(function(){for(var a=0;a<f;a++)if(u.contains(this,b[a]))return!0})},closest:function(a,b){var f,c=0,l=this.length,d=[],e=
"string"!=typeof a&&u(a);if(!yb.test(a))for(;c<l;c++)for(f=this[c];f&&f!==b;f=f.parentNode)if(11>f.nodeType&&(e?-1<e.index(f):1===f.nodeType&&u.find.matchesSelector(f,a))){d.push(f);break}return this.pushStack(1<d.length?u.uniqueSort(d):d)},index:function(a){return a?"string"==typeof a?Da.call(u(a),this[0]):Da.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(u.uniqueSort(u.merge(this.get(),u(a,b))))},addBack:function(a){return this.add(null==
a?this.prevObject:this.prevObject.filter(a))}});u.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return qb(a,"parentNode")},parentsUntil:function(a,b,f){return qb(a,"parentNode",f)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return qb(a,"nextSibling")},prevAll:function(a){return qb(a,"previousSibling")},nextUntil:function(a,b,f){return qb(a,"nextSibling",f)},prevUntil:function(a,b,f){return qb(a,
"previousSibling",f)},siblings:function(a){return Qb((a.parentNode||{}).firstChild,a)},children:function(a){return Qb(a.firstChild)},contents:function(a){return g(a,"iframe")?a.contentDocument:(g(a,"template")&&(a=a.content||a),u.merge([],a.childNodes))}},function(a,b){u.fn[a]=function(f,c){var l=u.map(this,b,f);return"Until"!==a.slice(-5)&&(c=f),c&&"string"==typeof c&&(l=u.filter(c,l)),1<this.length&&(bc[a]||u.uniqueSort(l),Fb.test(a)&&l.reverse()),this.pushStack(l)}});var Xa=/[^\x20\t\r\n\f]+/g;
u.Callbacks=function(a){a="string"==typeof a?m(a):u.extend({},a);var b,f,c,l,e=[],g=[],r=-1,h=function(){l=l||a.once;for(c=b=!0;g.length;r=-1)for(f=g.shift();++r<e.length;)!1===e[r].apply(f[0],f[1])&&a.stopOnFalse&&(r=e.length,f=!1);a.memory||(f=!1);b=!1;l&&(e=f?[]:"")},w={add:function(){return e&&(f&&!b&&(r=e.length-1,g.push(f)),function Ad(b){u.each(b,function(b,f){T(f)?a.unique&&w.has(f)||e.push(f):f&&f.length&&"string"!==d(f)&&Ad(f)})}(arguments),f&&!b&&h()),this},remove:function(){return u.each(arguments,
function(a,b){for(var f;-1<(f=u.inArray(b,e,f));)e.splice(f,1),f<=r&&r--}),this},has:function(a){return a?-1<u.inArray(a,e):0<e.length},empty:function(){return e&&(e=[]),this},disable:function(){return l=g=[],e=f="",this},disabled:function(){return!e},lock:function(){return l=g=[],f||b||(e=f=""),this},locked:function(){return!!l},fireWith:function(a,f){return l||(f=[a,(f=f||[]).slice?f.slice():f],g.push(f),b||h()),this},fire:function(){return w.fireWith(this,arguments),this},fired:function(){return!!c}};
return w};u.extend({Deferred:function(b){var f=[["notify","progress",u.Callbacks("memory"),u.Callbacks("memory"),2],["resolve","done",u.Callbacks("once memory"),u.Callbacks("once memory"),0,"resolved"],["reject","fail",u.Callbacks("once memory"),u.Callbacks("once memory"),1,"rejected"]],c="pending",l={state:function(){return c},always:function(){return d.done(arguments).fail(arguments),this},"catch":function(a){return l.then(null,a)},pipe:function(){var a=arguments;return u.Deferred(function(b){u.each(f,
function(f,c){var l=T(a[c[4]])&&a[c[4]];d[c[1]](function(){var a=l&&l.apply(this,arguments);a&&T(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[c[0]+"With"](this,l?[a]:arguments)})});a=null}).promise()},then:function(b,c,l){function d(b,f,c,l){return function(){var g=this,r=arguments,h=function(){var a;if(!(b<e)){if((a=c.apply(g,r))===f.promise())throw new TypeError("Thenable self-resolution");var h=a&&("object"==typeof a||"function"==typeof a)&&a.then;T(h)?l?h.call(a,
d(e,f,n,l),d(e,f,p,l)):(e++,h.call(a,d(e,f,n,l),d(e,f,p,l),d(e,f,n,f.notifyWith))):(c!==n&&(g=void 0,r=[a]),(l||f.resolveWith)(g,r))}},w=l?h:function(){try{h()}catch(Ob){u.Deferred.exceptionHook&&u.Deferred.exceptionHook(Ob,w.stackTrace),b+1>=e&&(c!==p&&(g=void 0,r=[Ob]),f.rejectWith(g,r))}};b?w():(u.Deferred.getStackHook&&(w.stackTrace=u.Deferred.getStackHook()),a.setTimeout(w))}}var e=0;return u.Deferred(function(a){f[0][3].add(d(0,a,T(l)?l:n,a.notifyWith));f[1][3].add(d(0,a,T(b)?b:n));f[2][3].add(d(0,
a,T(c)?c:p))}).promise()},promise:function(a){return null!=a?u.extend(a,l):l}},d={};return u.each(f,function(a,b){var e=b[2],g=b[5];l[b[1]]=e.add;g&&e.add(function(){c=g},f[3-a][2].disable,f[3-a][3].disable,f[0][2].lock,f[0][3].lock);e.add(b[3].fire);d[b[0]]=function(){return d[b[0]+"With"](this===d?void 0:this,arguments),this};d[b[0]+"With"]=e.fireWith}),l.promise(d),b&&b.call(d,d),d},when:function(a){var b=arguments.length,f=b,c=Array(f),l=Ta.call(arguments),d=u.Deferred(),e=function(a){return function(f){c[a]=
this;l[a]=1<arguments.length?Ta.call(arguments):f;--b||d.resolveWith(c,l)}};if(1>=b&&(q(a,d.done(e(f)).resolve,d.reject,!b),"pending"===d.state()||T(l[f]&&l[f].then)))return d.then();for(;f--;)q(l[f],e(f),d.reject);return d.promise()}});var na=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;u.Deferred.exceptionHook=function(b,f){a.console&&a.console.warn&&b&&na.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,f)};u.readyException=function(b){a.setTimeout(function(){throw b;
})};var Va=u.Deferred();u.fn.ready=function(a){return Va.then(a)["catch"](function(a){u.readyException(a)}),this};u.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--u.readyWait:u.isReady)||(u.isReady=!0,!0!==a&&0<--u.readyWait||Va.resolveWith(aa,[u]))}});u.ready.then=Va.then;"complete"===aa.readyState||"loading"!==aa.readyState&&!aa.documentElement.doScroll?a.setTimeout(u.ready):(aa.addEventListener("DOMContentLoaded",t),a.addEventListener("load",t));var Ja=function(a,b,f,c,l,e,g){var r=
0,h=a.length,w=null==f;if("object"===d(f))for(r in l=!0,f)Ja(a,b,r,f[r],!0,e,g);else if(void 0!==c&&(l=!0,T(c)||(g=!0),w&&(g?(b.call(a,c),b=null):(w=b,b=function(a,b,f){return w.call(u(a),f)})),b))for(;r<h;r++)b(a[r],f,g?c:c.call(a[r],r,b(a[r],f)));return l?a:w?b.call(a):h?b(a[0],f):e},Cb=/^-ms-/,kc=/-([a-z])/g,mb=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};r.uid=1;r.prototype={cache:function(a){var b=a[this.expando];return b||(b={},mb(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,
this.expando,{value:b,configurable:!0}))),b},set:function(a,b,f){var c;a=this.cache(a);if("string"==typeof b)a[l(b)]=f;else for(c in b)a[l(c)]=b[c];return a},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][l(b)]},access:function(a,b,f){return void 0===b||b&&"string"==typeof b&&void 0===f?this.get(a,b):(this.set(a,b,f),void 0!==f?f:b)},remove:function(a,b){var f=a[this.expando];if(void 0!==f){if(void 0!==b){var c=(b=Array.isArray(b)?b.map(l):(b=l(b))in f?[b]:b.match(Xa)||
[]).length;for(;c--;)delete f[b[c]]}(void 0===b||u.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){a=a[this.expando];return void 0!==a&&!u.isEmptyObject(a)}};var ba=new r,va=new r,vb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ya=/[A-Z]/g;u.extend({hasData:function(a){return va.hasData(a)||ba.hasData(a)},data:function(a,b,f){return va.access(a,b,f)},removeData:function(a,b){va.remove(a,b)},_data:function(a,b,f){return ba.access(a,b,f)},_removeData:function(a,
b){ba.remove(a,b)}});u.fn.extend({data:function(a,b){var f,c,d,e=this[0],g=e&&e.attributes;if(void 0===a){if(this.length&&(d=va.get(e),1===e.nodeType&&!ba.get(e,"hasDataAttrs"))){for(f=g.length;f--;)g[f]&&0===(c=g[f].name).indexOf("data-")&&(c=l(c.slice(5)),w(e,c,d[c]));ba.set(e,"hasDataAttrs",!0)}return d}return"object"==typeof a?this.each(function(){va.set(this,a)}):Ja(this,function(b){var f;if(e&&void 0===b){if(void 0!==(f=va.get(e,a))||void 0!==(f=w(e,a)))return f}else this.each(function(){va.set(this,
a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){va.remove(this,a)})}});u.extend({queue:function(a,b,f){var c;if(a)return b=(b||"fx")+"queue",c=ba.get(a,b),f&&(!c||Array.isArray(f)?c=ba.access(a,b,u.makeArray(f)):c.push(f)),c||[]},dequeue:function(a,b){b=b||"fx";var f=u.queue(a,b),c=f.length,l=f.shift(),d=u._queueHooks(a,b),e=function(){u.dequeue(a,b)};"inprogress"===l&&(l=f.shift(),c--);l&&("fx"===b&&f.unshift("inprogress"),delete d.stop,l.call(a,e,d));
!c&&d&&d.empty.fire()},_queueHooks:function(a,b){var f=b+"queueHooks";return ba.get(a,f)||ba.access(a,f,{empty:u.Callbacks("once memory").add(function(){ba.remove(a,[b+"queue",f])})})}});u.fn.extend({queue:function(a,b){var f=2;return"string"!=typeof a&&(b=a,a="fx",f--),arguments.length<f?u.queue(this[0],a):void 0===b?this:this.each(function(){var f=u.queue(this,a,b);u._queueHooks(this,a);"fx"===a&&"inprogress"!==f[0]&&u.dequeue(this,a)})},dequeue:function(a){return this.each(function(){u.dequeue(this,
a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var f,c=1,l=u.Deferred(),d=this,e=this.length,g=function(){--c||l.resolveWith(d,[d])};"string"!=typeof a&&(b=a,a=void 0);for(a=a||"fx";e--;)(f=ba.get(d[e],a+"queueHooks"))&&f.empty&&(c++,f.empty.add(g));return g(),l.promise(b)}});var Qc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ka=new RegExp("^(?:([+-])=|)("+Qc+")([a-z%]*)$","i"),La=["Top","Right","Bottom","Left"],wb=function(a,b){return"none"===(a=b||a).style.display||
""===a.style.display&&u.contains(a.ownerDocument,a)&&"none"===u.css(a,"display")},Rc=function(a,b,f,c){var l,d={};for(l in b)d[l]=a.style[l],a.style[l]=b[l];f=f.apply(a,c||[]);for(l in b)a.style[l]=d[l];return f},Hc={};u.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){wb(this)?u(this).show():u(this).hide()})}});var Qd=/^(?:checkbox|radio)$/i,Cd=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
Dd=/^$|^module$|\/(?:java|ecma)script/i,Qa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qa.optgroup=Qa.option;Qa.tbody=Qa.tfoot=Qa.colgroup=Qa.caption=Qa.thead;Qa.th=Qa.td;var Bd=/<|&#?\w+;/;!function(){var a=aa.createDocumentFragment().appendChild(aa.createElement("div")),b=aa.createElement("input");
b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);Y.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";Y.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue}();var nb=aa.documentElement,Ge=/^key/,Ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Rd=/^([^.]*)(?:\.(.+)|)/;u.event={global:{},add:function(a,b,f,c,l){var d,e,g,r,h,w,v,k,y;if(h=ba.get(a))for(f.handler&&(f=(d=f).handler,l=d.selector),
l&&u.find.matchesSelector(nb,l),f.guid||(f.guid=u.guid++),(r=h.events)||(r=h.events={}),(e=h.handle)||(e=h.handle=function(b){return"undefined"!=typeof u&&u.event.triggered!==b.type?u.event.dispatch.apply(a,arguments):void 0}),h=(b=(b||"").match(Xa)||[""]).length;h--;){var z=y=(g=Rd.exec(b[h])||[])[1];g=(g[2]||"").split(".").sort();z&&(v=u.event.special[z]||{},z=(l?v.delegateType:v.bindType)||z,v=u.event.special[z]||{},w=u.extend({type:z,origType:y,data:c,handler:f,guid:f.guid,selector:l,needsContext:l&&
u.expr.match.needsContext.test(l),namespace:g.join(".")},d),(k=r[z])||((k=r[z]=[]).delegateCount=0,v.setup&&!1!==v.setup.call(a,c,g,e)||a.addEventListener&&a.addEventListener(z,e)),v.add&&(v.add.call(a,w),w.handler.guid||(w.handler.guid=f.guid)),l?k.splice(k.delegateCount++,0,w):k.push(w),u.event.global[z]=!0)}},remove:function(a,b,f,c,l){var d,e,g,r,h,w,v,k,y=ba.hasData(a)&&ba.get(a);if(y&&(r=y.events)){for(h=(b=(b||"").match(Xa)||[""]).length;h--;)if(g=Rd.exec(b[h])||[],w=k=g[1],v=(g[2]||"").split(".").sort(),
w){var z=u.event.special[w]||{};var m=r[w=(c?z.delegateType:z.bindType)||w]||[];g=g[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)");for(e=d=m.length;d--;){var n=m[d];!l&&k!==n.origType||f&&f.guid!==n.guid||g&&!g.test(n.namespace)||c&&c!==n.selector&&("**"!==c||!n.selector)||(m.splice(d,1),n.selector&&m.delegateCount--,z.remove&&z.remove.call(a,n))}e&&!m.length&&(z.teardown&&!1!==z.teardown.call(a,v,y.handle)||u.removeEvent(a,w,y.handle),delete r[w])}else for(w in r)u.event.remove(a,w+
b[h],f,c,!0);u.isEmptyObject(r)&&ba.remove(a,"handle events")}},dispatch:function(a){var b=u.event.fix(a),f,c,l,d,e=Array(arguments.length);var g=(ba.get(this,"events")||{})[b.type]||[];var r=u.event.special[b.type]||{};e[0]=b;for(f=1;f<arguments.length;f++)e[f]=arguments[f];if(b.delegateTarget=this,!r.preDispatch||!1!==r.preDispatch.call(this,b)){var h=u.event.handlers.call(this,b,g);for(f=0;(l=h[f++])&&!b.isPropagationStopped();)for(b.currentTarget=l.elem,g=0;(d=l.handlers[g++])&&!b.isImmediatePropagationStopped();)b.rnamespace&&
!b.rnamespace.test(d.namespace)||(b.handleObj=d,b.data=d.data,void 0!==(c=((u.event.special[d.origType]||{}).handle||d.handler).apply(l.elem,e))&&!1===(b.result=c)&&(b.preventDefault(),b.stopPropagation()));return r.postDispatch&&r.postDispatch.call(this,b),b.result}},handlers:function(a,b){var f,c,l,d=[],e=b.delegateCount,g=a.target;if(e&&g.nodeType&&!("click"===a.type&&1<=a.button))for(;g!==this;g=g.parentNode||this)if(1===g.nodeType&&("click"!==a.type||!0!==g.disabled)){var r=[];var h={};for(f=
0;f<e;f++)void 0===h[l=(c=b[f]).selector+" "]&&(h[l]=c.needsContext?-1<u(l,this).index(g):u.find(l,this,null,[g]).length),h[l]&&r.push(c);r.length&&d.push({elem:g,handlers:r})}return g=this,e<b.length&&d.push({elem:g,handlers:b.slice(e)}),d},addProp:function(a,b){Object.defineProperty(u.Event.prototype,a,{enumerable:!0,configurable:!0,get:T(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,
a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[u.expando]?a:new u.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==P()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===P()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g(this,"input"))return this.click(),!1},_default:function(a){return g(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==
a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};u.removeEvent=function(a,b,f){a.removeEventListener&&a.removeEventListener(b,f)};u.Event=function(a,b){if(!(this instanceof u.Event))return new u.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?G:O,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):
this.type=a;b&&u.extend(this,b);this.timeStamp=a&&a.timeStamp||Date.now();this[u.expando]=!0};u.Event.prototype={constructor:u.Event,isDefaultPrevented:O,isPropagationStopped:O,isImmediatePropagationStopped:O,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=G;a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=G;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=
this.originalEvent;this.isImmediatePropagationStopped=G;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};u.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;
return null==a.which&&Ge.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&Ea.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},u.event.addProp);u.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){u.event.special[a]={delegateType:b,bindType:b,handle:function(a){var f,c=a.relatedTarget,l=a.handleObj;return c&&(c===this||u.contains(this,c))||(a.type=l.origType,f=l.handler.apply(this,arguments),a.type=b),f}}});u.fn.extend({on:function(a,
b,f,c){return L(this,a,b,f,c)},one:function(a,b,f,c){return L(this,a,b,f,c,1)},off:function(a,b,f){var c,l;if(a&&a.preventDefault&&a.handleObj)return c=a.handleObj,u(a.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if("object"==typeof a){for(l in a)this.off(l,b,a[l]);return this}return!1!==b&&"function"!=typeof b||(f=b,b=void 0),!1===f&&(f=O),this.each(function(){u.event.remove(this,a,f,b)})}});var Sd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
cc=/<script|<style|<link/i,Ed=/checked\s*(?:[^=]|=\s*.checked.)/i,Ic=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;u.extend({htmlPrefilter:function(a){return a.replace(Sd,"<$1></$2>")},clone:function(a,b,f){var c,l,d=a.cloneNode(!0),e=u.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||u.isXMLDoc(a))){var g=F(d);var r=0;for(c=(l=F(a)).length;r<c;r++){var h=l[r],w=g[r],v=w.nodeName.toLowerCase();"input"===v&&Qd.test(h.type)?w.checked=h.checked:"input"!==v&&"textarea"!==
v||(w.defaultValue=h.defaultValue)}}if(b)if(f)for(l=l||F(a),g=g||F(d),r=0,c=l.length;r<c;r++)R(l[r],g[r]);else R(a,d);return 0<(g=F(d,"script")).length&&z(g,!e&&F(a,"script")),d},cleanData:function(a){for(var b,f,c,l=u.event.special,d=0;void 0!==(f=a[d]);d++)if(mb(f)){if(b=f[ba.expando]){if(b.events)for(c in b.events)l[c]?u.event.remove(f,c):u.removeEvent(f,c,b.handle);f[ba.expando]=void 0}f[va.expando]&&(f[va.expando]=void 0)}}});u.fn.extend({detach:function(a){return J(this,a,!0)},remove:function(a){return J(this,
a)},text:function(a){return Ja(this,function(a){return void 0===a?u.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return S(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||I(this,a).appendChild(a)})},prepend:function(){return S(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=I(this,a);b.insertBefore(a,
b.firstChild)}})},before:function(){return S(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return S(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(u.cleanData(F(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return u.clone(this,a,b)})},html:function(a){return Ja(this,
function(a){var b=this[0]||{},f=0,c=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!cc.test(a)&&!Qa[(Cd.exec(a)||["",""])[1].toLowerCase()]){a=u.htmlPrefilter(a);try{for(;f<c;f++)1===(b=this[f]||{}).nodeType&&(u.cleanData(F(b,!1)),b.innerHTML=a);b=0}catch(jc){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return S(this,arguments,function(b){var f=this.parentNode;0>u.inArray(this,a)&&(u.cleanData(F(this)),f&&f.replaceChild(b,
this))},a)}});u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){u.fn[a]=function(a){for(var f=[],c=u(a),l=c.length-1,d=0;d<=l;d++)a=d===l?this:this.clone(!0),u(c[d])[b](a),$a.apply(f,a.get());return this.pushStack(f)}});var mc=new RegExp("^("+Qc+")(?!px)[a-z%]+$","i"),lc=function(b){var f=b.ownerDocument.defaultView;return f&&f.opener||(f=a),f.getComputedStyle(b)},Fd=new RegExp(La.join("|"),"i");!function(){function b(){if(r){g.style.cssText=
"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";r.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";nb.appendChild(g).appendChild(r);var b=a.getComputedStyle(r);f="1%"!==b.top;e=12===Math.round(parseFloat(b.marginLeft));r.style.right="60%";d=36===Math.round(parseFloat(b.right));c=36===Math.round(parseFloat(b.width));r.style.position="absolute";l=36===r.offsetWidth||"absolute";nb.removeChild(g);
r=null}}var f,c,l,d,e,g=aa.createElement("div"),r=aa.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===r.style.backgroundClip,u.extend(Y,{boxSizingReliable:function(){return b(),c},pixelBoxStyles:function(){return b(),d},pixelPosition:function(){return b(),f},reliableMarginLeft:function(){return b(),e},scrollboxSize:function(){return b(),l}}))}();var Td=/^(none|table(?!-c[ea]).+)/,Rb=/^--/,sb={position:"absolute",
visibility:"hidden",display:"block"},tc={letterSpacing:"0",fontWeight:"400"},Jc=["Webkit","Moz","ms"],eb=aa.createElement("div").style;u.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=Q(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,b,f,c){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var d,e,g,
r=l(b),h=Rb.test(b),w=a.style;if(h||(b=H(r)),g=u.cssHooks[b]||u.cssHooks[r],void 0===f)return g&&"get"in g&&void 0!==(d=g.get(a,!1,c))?d:w[b];"string"==(e=typeof f)&&(d=Ka.exec(f))&&d[1]&&(f=v(a,b,d),e="number");null!=f&&f===f&&("number"===e&&(f+=d&&d[3]||(u.cssNumber[r]?"":"px")),Y.clearCloneStyle||""!==f||0!==b.indexOf("background")||(w[b]="inherit"),g&&"set"in g&&void 0===(f=g.set(a,f,c))||(h?w.setProperty(b,f):w[b]=f))}},css:function(a,b,f,c){var d,e,g,r=l(b);return Rb.test(b)||(b=H(r)),(g=u.cssHooks[b]||
u.cssHooks[r])&&"get"in g&&(d=g.get(a,!0,f)),void 0===d&&(d=Q(a,b,c)),"normal"===d&&b in tc&&(d=tc[b]),""===f||f?(e=parseFloat(d),!0===f||isFinite(e)?e||0:d):d}});u.each(["height","width"],function(a,b){u.cssHooks[b]={get:function(a,f,c){if(f)return!Td.test(u.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?ka(a,b,c):Rc(a,sb,function(){return ka(a,b,c)})},set:function(a,f,c){var l,d=lc(a),e="border-box"===u.css(a,"boxSizing",!1,d);c=c&&N(a,b,c,e,d);return e&&Y.scrollboxSize()===
d.position&&(c-=Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(d[b])-N(a,b,"border",!1,d)-.5)),c&&(l=Ka.exec(f))&&"px"!==(l[3]||"px")&&(a.style[b]=f,f=u.css(a,b)),C(a,f,c)}}});u.cssHooks.marginLeft=D(Y.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Q(a,"marginLeft"))||a.getBoundingClientRect().left-Rc(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"});u.each({margin:"",padding:"",border:"Width"},function(a,b){u.cssHooks[a+b]={expand:function(f){var c=
0,l={};for(f="string"==typeof f?f.split(" "):[f];4>c;c++)l[a+La[c]+b]=f[c]||f[c-2]||f[0];return l}};"margin"!==a&&(u.cssHooks[a+b].set=C)});u.fn.extend({css:function(a,b){return Ja(this,function(a,b,f){var c,l={},d=0;if(Array.isArray(b)){f=lc(a);for(c=b.length;d<c;d++)l[b[d]]=u.css(a,b[d],!1,f);return l}return void 0!==f?u.style(a,b,f):u.css(a,b)},a,b,1<arguments.length)}});u.Tween=ha;ha.prototype={constructor:ha,init:function(a,b,f,c,l,d){this.elem=a;this.prop=f;this.easing=l||u.easing._default;
this.options=b;this.start=this.now=this.cur();this.end=c;this.unit=d||(u.cssNumber[f]?"":"px")},cur:function(){var a=ha.propHooks[this.prop];return a&&a.get?a.get(this):ha.propHooks._default.get(this)},run:function(a){var b,f=ha.propHooks[this.prop];return this.options.duration?this.pos=b=u.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):
ha.propHooks._default.set(this),this}};ha.prototype.init.prototype=ha.prototype;ha.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=u.css(a.elem,a.prop,""))&&"auto"!==b?b:0},set:function(a){u.fx.step[a.prop]?u.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[u.cssProps[a.prop]]&&!u.cssHooks[a.prop]?a.elem[a.prop]=a.now:u.style(a.elem,a.prop,a.now+a.unit)}}};ha.propHooks.scrollTop=ha.propHooks.scrollLeft=
{set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};u.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};u.fx=ha.prototype.init;u.fx.step={};var Za,Lb,Ud=/^(?:toggle|show|hide)$/,Sc=/queueHooks$/;u.Animation=u.extend(da,{tweeners:{"*":[function(a,b){var f=this.createTween(a,b);return v(f.elem,a,Ka.exec(b),f),f}]},tweener:function(a,b){T(a)?(b=a,a=["*"]):a=a.match(Xa);for(var f,c=0,l=a.length;c<l;c++)f=a[c],da.tweeners[f]=
da.tweeners[f]||[],da.tweeners[f].unshift(b)},prefilters:[function(a,b,f){var c,l,d,e,g,r,h,w="width"in b||"height"in b,v=this,k={},z=a.style,m=a.nodeType&&wb(a),n=ba.get(a,"fxshow");f.queue||(null==(e=u._queueHooks(a,"fx")).unqueued&&(e.unqueued=0,g=e.empty.fire,e.empty.fire=function(){e.unqueued||g()}),e.unqueued++,v.always(function(){v.always(function(){e.unqueued--;u.queue(a,"fx").length||e.empty.fire()})}));for(c in b)if(l=b[c],Ud.test(l)){if(delete b[c],d=d||"toggle"===l,l===(m?"hide":"show")){if("show"!==
l||!n||void 0===n[c])continue;m=!0}k[c]=n&&n[c]||u.style(a,c)}if((b=!u.isEmptyObject(b))||!u.isEmptyObject(k))for(c in w&&1===a.nodeType&&(f.overflow=[z.overflow,z.overflowX,z.overflowY],null==(r=n&&n.display)&&(r=ba.get(a,"display")),"none"===(h=u.css(a,"display"))&&(r?h=r:(y([a],!0),r=a.style.display||r,h=u.css(a,"display"),y([a]))),("inline"===h||"inline-block"===h&&null!=r)&&"none"===u.css(a,"float")&&(b||(v.done(function(){z.display=r}),null==r&&(h=z.display,r="none"===h?"":h)),z.display="inline-block")),
f.overflow&&(z.overflow="hidden",v.always(function(){z.overflow=f.overflow[0];z.overflowX=f.overflow[1];z.overflowY=f.overflow[2]})),b=!1,k)b||(n?"hidden"in n&&(m=n.hidden):n=ba.access(a,"fxshow",{display:r}),d&&(n.hidden=!m),m&&y([a],!0),v.done(function(){m||y([a]);ba.remove(a,"fxshow");for(c in k)u.style(a,c,k[c])})),b=Aa(m?n[c]:0,c,v),c in n||(n[c]=b.start,m&&(b.end=b.start,b.start=0))}],prefilter:function(a,b){b?da.prefilters.unshift(a):da.prefilters.push(a)}});u.speed=function(a,b,f){var c=a&&
"object"==typeof a?u.extend({},a):{complete:f||!f&&b||T(a)&&a,duration:a,easing:f&&b||b&&!T(b)&&b};return u.fx.off?c.duration=0:"number"!=typeof c.duration&&(c.duration in u.fx.speeds?c.duration=u.fx.speeds[c.duration]:c.duration=u.fx.speeds._default),null!=c.queue&&!0!==c.queue||(c.queue="fx"),c.old=c.complete,c.complete=function(){T(c.old)&&c.old.call(this);c.queue&&u.dequeue(this,c.queue)},c};u.fn.extend({fadeTo:function(a,b,f,c){return this.filter(wb).css("opacity",0).show().end().animate({opacity:b},
a,f,c)},animate:function(a,b,f,c){var l=u.isEmptyObject(a),d=u.speed(b,f,c);b=function(){var b=da(this,u.extend({},a),d);(l||ba.get(this,"finish"))&&b.stop(!0)};return b.finish=b,l||!1===d.queue?this.each(b):this.queue(d.queue,b)},stop:function(a,b,f){var c=function(a){var b=a.stop;delete a.stop;b(f)};return"string"!=typeof a&&(f=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,l=null!=a&&a+"queueHooks",d=u.timers,e=ba.get(this);if(l)e[l]&&e[l].stop&&c(e[l]);else for(l in e)e[l]&&
e[l].stop&&Sc.test(l)&&c(e[l]);for(l=d.length;l--;)d[l].elem!==this||null!=a&&d[l].queue!==a||(d[l].anim.stop(f),b=!1,d.splice(l,1));!b&&f||u.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b=ba.get(this),f=b[a+"queue"];var c=b[a+"queueHooks"];var l=u.timers,d=f?f.length:0;b.finish=!0;u.queue(this,a,[]);c&&c.stop&&c.stop.call(this,!0);for(c=l.length;c--;)l[c].elem===this&&l[c].queue===a&&(l[c].anim.stop(!0),l.splice(c,1));for(c=0;c<d;c++)f[c]&&f[c].finish&&
f[c].finish.call(this);delete b.finish})}});u.each(["toggle","show","hide"],function(a,b){var f=u.fn[b];u.fn[b]=function(a,c,l){return null==a||"boolean"==typeof a?f.apply(this,arguments):this.animate(X(b,!0),a,c,l)}});u.each({slideDown:X("show"),slideUp:X("hide"),slideToggle:X("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){u.fn[a]=function(a,f,c){return this.animate(b,a,f,c)}});u.timers=[];u.fx.tick=function(){var a,b=0,f=u.timers;for(Za=Date.now();b<
f.length;b++)(a=f[b])()||f[b]!==a||f.splice(b--,1);f.length||u.fx.stop();Za=void 0};u.fx.timer=function(a){u.timers.push(a);u.fx.start()};u.fx.interval=13;u.fx.start=function(){Lb||(Lb=!0,ga())};u.fx.stop=function(){Lb=null};u.fx.speeds={slow:600,fast:200,_default:400};u.fn.delay=function(b,f){return b=u.fx?u.fx.speeds[b]||b:b,f=f||"fx",this.queue(f,function(f,c){var l=a.setTimeout(f,b);c.stop=function(){a.clearTimeout(l)}})};(function(){var a=aa.createElement("input"),b=aa.createElement("select").appendChild(aa.createElement("option"));
a.type="checkbox";Y.checkOn=""!==a.value;Y.optSelected=b.selected;(a=aa.createElement("input")).value="t";a.type="radio";Y.radioValue="t"===a.value})();var gb=u.expr.attrHandle;u.fn.extend({attr:function(a,b){return Ja(this,u.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){u.removeAttr(this,a)})}});u.extend({attr:function(a,b,f){var c,l,d=a.nodeType;if(3!==d&&8!==d&&2!==d)return"undefined"==typeof a.getAttribute?u.prop(a,b,f):(1===d&&u.isXMLDoc(a)||(l=u.attrHooks[b.toLowerCase()]||
(u.expr.match.bool.test(b)?hb:void 0)),void 0!==f?null===f?void u.removeAttr(a,b):l&&"set"in l&&void 0!==(c=l.set(a,f,b))?c:(a.setAttribute(b,f+""),f):l&&"get"in l&&null!==(c=l.get(a,b))?c:null==(c=u.find.attr(a,b))?void 0:c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&g(a,"input")){var f=a.value;return a.setAttribute("type",b),f&&(a.value=f),b}}}},removeAttr:function(a,b){var f=0,c=b&&b.match(Xa);if(c&&1===a.nodeType)for(;b=c[f++];)a.removeAttribute(b)}});var hb={set:function(a,
b,f){return!1===b?u.removeAttr(a,f):a.setAttribute(f,f),f}};u.each(u.expr.match.bool.source.match(/\w+/g),function(a,b){var f=gb[b]||u.find.attr;gb[b]=function(a,b,c){var l,d,e=b.toLowerCase();return c||(d=gb[e],gb[e]=l,l=null!=f(a,b,c)?e:null,gb[e]=d),l}});var Vd=/^(?:input|select|textarea|button)$/i,Wd=/^(?:a|area)$/i;u.fn.extend({prop:function(a,b){return Ja(this,u.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[u.propFix[a]||a]})}});u.extend({prop:function(a,
b,f){var c,l,d=a.nodeType;if(3!==d&&8!==d&&2!==d)return 1===d&&u.isXMLDoc(a)||(b=u.propFix[b]||b,l=u.propHooks[b]),void 0!==f?l&&"set"in l&&void 0!==(c=l.set(a,f,b))?c:a[b]=f:l&&"get"in l&&null!==(c=l.get(a,b))?c:a[b]},propHooks:{tabIndex:{get:function(a){var b=u.find.attr(a,"tabindex");return b?parseInt(b,10):Vd.test(a.nodeName)||Wd.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});Y.optSelected||(u.propHooks.selected={get:function(a){a=a.parentNode;return a&&a.parentNode&&
a.parentNode.selectedIndex,null},set:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}});u.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){u.propFix[this.toLowerCase()]=this});u.fn.extend({addClass:function(a){var b,f,c,l,d,e,g,r=0;if(T(a))return this.each(function(b){u(this).addClass(a.call(this,b,fa(this)))});if((b=za(a)).length)for(;f=this[r++];)if(l=fa(f),c=1===f.nodeType&&
" "+ea(l)+" "){for(e=0;d=b[e++];)0>c.indexOf(" "+d+" ")&&(c+=d+" ");l!==(g=ea(c))&&f.setAttribute("class",g)}return this},removeClass:function(a){var b,f,c,l,d,e,g,r=0;if(T(a))return this.each(function(b){u(this).removeClass(a.call(this,b,fa(this)))});if(!arguments.length)return this.attr("class","");if((b=za(a)).length)for(;f=this[r++];)if(l=fa(f),c=1===f.nodeType&&" "+ea(l)+" "){for(e=0;d=b[e++];)for(;-1<c.indexOf(" "+d+" ");)c=c.replace(" "+d+" "," ");l!==(g=ea(c))&&f.setAttribute("class",g)}return this},
toggleClass:function(a,b){var f=typeof a,c="string"===f||Array.isArray(a);return"boolean"==typeof b&&c?b?this.addClass(a):this.removeClass(a):T(a)?this.each(function(f){u(this).toggleClass(a.call(this,f,fa(this),b),b)}):this.each(function(){var b,l;if(c){var d=0;var e=u(this);for(l=za(a);b=l[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==f||((b=fa(this))&&ba.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":ba.get(this,"__className__")||
""))})},hasClass:function(a){var b,f=0;for(a=" "+a+" ";b=this[f++];)if(1===b.nodeType&&-1<(" "+ea(fa(b))+" ").indexOf(a))return!0;return!1}});var Xd=/\r/g;u.fn.extend({val:function(a){var b,f,c,l=this[0];if(arguments.length)return c=T(a),this.each(function(f){var l;1===this.nodeType&&(null==(l=c?a.call(this,f,u(this).val()):a)?l="":"number"==typeof l?l+="":Array.isArray(l)&&(l=u.map(l,function(a){return null==a?"":a+""})),(b=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()])&&"set"in
b&&void 0!==b.set(this,l,"value")||(this.value=l))});if(l)return(b=u.valHooks[l.type]||u.valHooks[l.nodeName.toLowerCase()])&&"get"in b&&void 0!==(f=b.get(l,"value"))?f:"string"==typeof(f=l.value)?f.replace(Xd,""):null==f?"":f}});u.extend({valHooks:{option:{get:function(a){var b=u.find.attr(a,"value");return null!=b?b:ea(u.text(a))}},select:{get:function(a){var b,f,c=a.options,l=a.selectedIndex,d="select-one"===a.type,e=d?null:[],r=d?l+1:c.length;for(f=0>l?r:d?l:0;f<r;f++)if(!(!(b=c[f]).selected&&
f!==l||b.disabled||b.parentNode.disabled&&g(b.parentNode,"optgroup"))){if(a=u(b).val(),d)return a;e.push(a)}return e},set:function(a,b){var f,c,l=a.options;b=u.makeArray(b);for(var d=l.length;d--;)((c=l[d]).selected=-1<u.inArray(u.valHooks.option.get(c),b))&&(f=!0);return f||(a.selectedIndex=-1),b}}}});u.each(["radio","checkbox"],function(){u.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=-1<u.inArray(u(a).val(),b)}};Y.checkOn||(u.valHooks[this].get=function(a){return null===
a.getAttribute("value")?"on":a.value})});Y.focusin="onfocusin"in a;var Sb=/^(?:focusinfocus|focusoutblur)$/,Tc=function(a){a.stopPropagation()};u.extend(u.event,{trigger:function(b,f,c,l){var d,e,g,r,h,w,v=[c||aa],k=ab.call(b,"type")?b.type:b;var y=ab.call(b,"namespace")?b.namespace.split("."):[];if(d=w=e=c=c||aa,3!==c.nodeType&&8!==c.nodeType&&!Sb.test(k+u.event.triggered)&&(-1<k.indexOf(".")&&(k=(y=k.split(".")).shift(),y.sort()),g=0>k.indexOf(":")&&"on"+k,b=b[u.expando]?b:new u.Event(k,"object"==
typeof b&&b),b.isTrigger=l?2:3,b.namespace=y.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=c),f=null==f?[b]:u.makeArray(f,[b]),h=u.event.special[k]||{},l||!h.trigger||!1!==h.trigger.apply(c,f))){if(!l&&!h.noBubble&&!V(c)){var z=h.delegateType||k;for(Sb.test(z+k)||(d=d.parentNode);d;d=d.parentNode)v.push(d),e=d;e===(c.ownerDocument||aa)&&v.push(e.defaultView||e.parentWindow||a)}for(y=0;(d=v[y++])&&!b.isPropagationStopped();)w=
d,b.type=1<y?z:h.bindType||k,(r=(ba.get(d,"events")||{})[b.type]&&ba.get(d,"handle"))&&r.apply(d,f),(r=g&&d[g])&&r.apply&&mb(d)&&(b.result=r.apply(d,f),!1===b.result&&b.preventDefault());return b.type=k,l||b.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),f)||!mb(c)||g&&T(c[k])&&!V(c)&&((e=c[g])&&(c[g]=null),u.event.triggered=k,b.isPropagationStopped()&&w.addEventListener(k,Tc),c[k](),b.isPropagationStopped()&&w.removeEventListener(k,Tc),u.event.triggered=void 0,e&&(c[g]=e)),b.result}},
simulate:function(a,b,f){a=u.extend(new u.Event,f,{type:a,isSimulated:!0});u.event.trigger(a,null,b)}});u.fn.extend({trigger:function(a,b){return this.each(function(){u.event.trigger(a,b,this)})},triggerHandler:function(a,b){var f=this[0];if(f)return u.event.trigger(a,b,f,!0)}});Y.focusin||u.each({focus:"focusin",blur:"focusout"},function(a,b){var f=function(a){u.event.simulate(b,a.target,u.event.fix(a))};u.event.special[b]={setup:function(){var c=this.ownerDocument||this,l=ba.access(c,b);l||c.addEventListener(a,
f,!0);ba.access(c,b,(l||0)+1)},teardown:function(){var c=this.ownerDocument||this,l=ba.access(c,b)-1;l?ba.access(c,b,l):(c.removeEventListener(a,f,!0),ba.remove(c,b))}}});var Tb=a.location,uc=Date.now(),Ub=/\?/;u.parseXML=function(b){if(!b||"string"!=typeof b)return null;try{var f=(new a.DOMParser).parseFromString(b,"text/xml")}catch(pe){f=void 0}return f&&!f.getElementsByTagName("parsererror").length||u.error("Invalid XML: "+b),f};var Gd=/\[\]$/,vc=/\r?\n/g,ib=/^(?:submit|button|image|reset|file)$/i,
Yd=/^(?:input|select|textarea|keygen)/i;u.param=function(a,b){var f,c=[],l=function(a,b){b=T(b)?b():b;c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==b?"":b)};if(Array.isArray(a)||a.jquery&&!u.isPlainObject(a))u.each(a,function(){l(this.name,this.value)});else for(f in a)Ha(f,a[f],b,l);return c.join("&")};u.fn.extend({serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=u.prop(this,"elements");return a?u.makeArray(a):
this}).filter(function(){var a=this.type;return this.name&&!u(this).is(":disabled")&&Yd.test(this.nodeName)&&!ib.test(a)&&(this.checked||!Qd.test(a))}).map(function(a,b){a=u(this).val();return null==a?null:Array.isArray(a)?u.map(a,function(a){return{name:b.name,value:a.replace(vc,"\r\n")}}):{name:b.name,value:a.replace(vc,"\r\n")}}).get()}});var Uc=/%20/g,Vc=/#.*$/,Zd=/([?&])_=[^&]*/,$d=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wc=/^(?:GET|HEAD)$/,He=/^\/\//,ae={},Kc={},zb="*/".concat("*"),Gb=aa.createElement("a");
Gb.href=Tb.href;u.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",
json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":u.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?fb(fb(a,u.ajaxSettings),b):fb(u.ajaxSettings,a)},ajaxPrefilter:pa(ae),ajaxTransport:pa(Kc),ajax:function(b,f){function c(b,f,c,e){var h,w,F,q=f;if(!G){G=!0;g&&a.clearTimeout(g);l=void 0;d=e||"";t.readyState=0<b?4:0;e=200<=b&&300>b||304===b;if(c){var p=v;for(var B=t,H,L,P,O,C=p.contents,N=p.dataTypes;"*"===N[0];)N.shift(),void 0===
H&&(H=p.mimeType||B.getResponseHeader("Content-Type"));if(H)for(L in C)if(C[L]&&C[L].test(H)){N.unshift(L);break}if(N[0]in c)P=N[0];else{for(L in c){if(!N[0]||p.converters[L+" "+N[0]]){P=L;break}O||(O=L)}P=P||O}c=P?(P!==N[0]&&N.unshift(P),c[P]):void 0;p=c}a:{c=v;H=p;L=t;P=e;var J,I,D;p={};B=c.dataTypes.slice();if(B[1])for(J in c.converters)p[J.toLowerCase()]=c.converters[J];for(O=B.shift();O;)if(c.responseFields[O]&&(L[c.responseFields[O]]=H),!D&&P&&c.dataFilter&&(H=c.dataFilter(H,c.dataType)),D=
O,O=B.shift())if("*"===O)O=D;else if("*"!==D&&D!==O){if(!(J=p[D+" "+O]||p["* "+O]))for(Q in p)if((I=Q.split(" "))[1]===O&&(J=p[D+" "+I[0]]||p["* "+I[0]])){!0===J?J=p[Q]:!0!==p[Q]&&(O=I[0],B.unshift(I[1]));break}if(!0!==J)if(J&&c["throws"])H=J(H);else try{H=J(H)}catch(Od){var Q={state:"parsererror",error:J?Od:"No conversion from "+D+" to "+O};break a}}Q={state:"success",data:H}}p=Q;e?(v.ifModified&&((F=t.getResponseHeader("Last-Modified"))&&(u.lastModified[E]=F),(F=t.getResponseHeader("etag"))&&(u.etag[E]=
F)),204===b||"HEAD"===v.type?q="nocontent":304===b?q="notmodified":(q=p.state,h=p.data,e=!(w=p.error))):(w=q,!b&&q||(q="error",0>b&&(b=0)));t.status=b;t.statusText=(f||q)+"";e?z.resolveWith(k,[h,q,t]):z.rejectWith(k,[t,q,w]);t.statusCode(n);n=void 0;r&&y.trigger(e?"ajaxSuccess":"ajaxError",[t,v,e?h:w]);m.fireWith(k,[t,q]);r&&(y.trigger("ajaxComplete",[t,v]),--u.active||u.event.trigger("ajaxStop"))}}"object"==typeof b&&(f=b,b=void 0);f=f||{};var l,d,e,g,r,h,w,v=u.ajaxSetup({},f),k=v.context||v,y=v.context&&
(k.nodeType||k.jquery)?u(k):u.event,z=u.Deferred(),m=u.Callbacks("once memory"),n=v.statusCode||{},F={},q={},p="canceled",t={readyState:0,getResponseHeader:function(a){var b;if(G){if(!e)for(e={};b=$d.exec(d);)e[b[1].toLowerCase()]=b[2];b=e[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return G?d:null},setRequestHeader:function(a,b){return null==G&&(a=q[a.toLowerCase()]=q[a.toLowerCase()]||a,F[a]=b),this},overrideMimeType:function(a){return null==G&&(v.mimeType=a),this},
statusCode:function(a){var b;if(a)if(G)t.always(a[t.status]);else for(b in a)n[b]=[n[b],a[b]];return this},abort:function(a){a=a||p;return l&&l.abort(a),c(0,a),this}};if(z.promise(t),v.url=((b||v.url||Tb.href)+"").replace(He,Tb.protocol+"//"),v.type=f.method||f.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(Xa)||[""],null==v.crossDomain){b=aa.createElement("a");try{b.href=v.url,b.href=b.href,v.crossDomain=Gb.protocol+"//"+Gb.host!=b.protocol+"//"+b.host}catch(rc){v.crossDomain=
!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=u.param(v.data,v.traditional)),xb(ae,v,f,t),G)return t;(r=u.event&&v.global)&&0==u.active++&&u.event.trigger("ajaxStart");v.type=v.type.toUpperCase();v.hasContent=!Wc.test(v.type);var E=v.url.replace(Vc,"");v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Uc,"+")):(w=v.url.slice(E.length),v.data&&(v.processData||"string"==typeof v.data)&&(E+=(Ub.test(E)?"&":
"?")+v.data,delete v.data),!1===v.cache&&(E=E.replace(Zd,"$1"),w=(Ub.test(E)?"&":"?")+"_="+uc++ +w),v.url=E+w);v.ifModified&&(u.lastModified[E]&&t.setRequestHeader("If-Modified-Since",u.lastModified[E]),u.etag[E]&&t.setRequestHeader("If-None-Match",u.etag[E]));(v.data&&v.hasContent&&!1!==v.contentType||f.contentType)&&t.setRequestHeader("Content-Type",v.contentType);t.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zb+"; q=0.01":
""):v.accepts["*"]);for(h in v.headers)t.setRequestHeader(h,v.headers[h]);if(v.beforeSend&&(!1===v.beforeSend.call(k,t,v)||G))return t.abort();if(p="abort",m.add(v.complete),t.done(v.success),t.fail(v.error),l=xb(Kc,v,f,t)){if(t.readyState=1,r&&y.trigger("ajaxSend",[t,v]),G)return t;v.async&&0<v.timeout&&(g=a.setTimeout(function(){t.abort("timeout")},v.timeout));try{var G=!1;l.send(F,c)}catch(rc){if(G)throw rc;c(-1,rc)}}else c(-1,"No Transport");return t},getJSON:function(a,b,f){return u.get(a,b,
f,"json")},getScript:function(a,b){return u.get(a,void 0,b,"script")}});u.each(["get","post"],function(a,b){u[b]=function(a,f,c,l){return T(f)&&(l=l||c,c=f,f=void 0),u.ajax(u.extend({url:a,type:b,dataType:l,data:f,success:c},u.isPlainObject(a)&&a))}});u._evalUrl=function(a){return u.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};u.fn.extend({wrapAll:function(a){var b;return this[0]&&(T(a)&&(a=a.call(this[0])),b=u(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&
b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return T(a)?this.each(function(b){u(this).wrapInner(a.call(this,b))}):this.each(function(){var b=u(this),f=b.contents();f.length?f.wrapAll(a):b.append(a)})},wrap:function(a){var b=T(a);return this.each(function(f){u(this).wrapAll(b?a.call(this,f):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){u(this).replaceWith(this.childNodes)}),
this}});u.expr.pseudos.hidden=function(a){return!u.expr.pseudos.visible(a)};u.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)};u.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(ma){}};var Xc={0:200,1223:204},Hb=u.ajaxSettings.xhr();Y.cors=!!Hb&&"withCredentials"in Hb;Y.ajax=Hb=!!Hb;u.ajaxTransport(function(b){var f,c;if(Y.cors||Hb&&!b.crossDomain)return{send:function(l,d){var e,g=b.xhr();if(g.open(b.type,b.url,b.async,b.username,
b.password),b.xhrFields)for(e in b.xhrFields)g[e]=b.xhrFields[e];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType);b.crossDomain||l["X-Requested-With"]||(l["X-Requested-With"]="XMLHttpRequest");for(e in l)g.setRequestHeader(e,l[e]);f=function(a){return function(){f&&(f=c=g.onload=g.onerror=g.onabort=g.ontimeout=g.onreadystatechange=null,"abort"===a?g.abort():"error"===a?"number"!=typeof g.status?d(0,"error"):d(g.status,g.statusText):d(Xc[g.status]||g.status,g.statusText,"text"!==(g.responseType||
"text")||"string"!=typeof g.responseText?{binary:g.response}:{text:g.responseText},g.getAllResponseHeaders()))}};g.onload=f();c=g.onerror=g.ontimeout=f("error");void 0!==g.onabort?g.onabort=c:g.onreadystatechange=function(){4===g.readyState&&a.setTimeout(function(){f&&c()})};f=f("abort");try{g.send(b.hasContent&&b.data||null)}catch(yd){if(f)throw yd;}},abort:function(){f&&f()}}});u.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return u.globalEval(a),a}}});u.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});u.ajaxTransport("script",function(a){if(a.crossDomain){var b,f;return{send:function(c,l){b=u("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",f=function(a){b.remove();f=null;a&&l("error"===a.type?404:200,a.type)});aa.head.appendChild(b[0])},abort:function(){f&&f()}}}});
var Yc=[],dc=/(=)\?(?=&|$)|\?\?/;u.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Yc.pop()||u.expando+"_"+uc++;return this[a]=!0,a}});u.ajaxPrefilter("json jsonp",function(b,f,c){var l,d,e,g=!1!==b.jsonp&&(dc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&dc.test(b.data)&&"data");if(g||"jsonp"===b.dataTypes[0])return l=b.jsonpCallback=T(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g?b[g]=b[g].replace(dc,"$1"+l):!1!==
b.jsonp&&(b.url+=(Ub.test(b.url)?"&":"?")+b.jsonp+"="+l),b.converters["script json"]=function(){return e||u.error(l+" was not called"),e[0]},b.dataTypes[0]="json",d=a[l],a[l]=function(){e=arguments},c.always(function(){void 0===d?u(a).removeProp(l):a[l]=d;b[l]&&(b.jsonpCallback=f.jsonpCallback,Yc.push(l));e&&T(d)&&d(e[0]);e=d=void 0}),"script"});Y.createHTMLDocument=function(){var a=aa.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}();
u.parseHTML=function(a,b,f){if("string"!=typeof a)return[];"boolean"==typeof b&&(f=b,b=!1);var c,l,d;return b||(Y.createHTMLDocument?((c=(b=aa.implementation.createHTMLDocument("")).createElement("base")).href=aa.location.href,b.head.appendChild(c)):b=aa),l=lb.exec(a),d=!f&&[],l?[b.createElement(l[1])]:(l=E([a],b,d),d&&d.length&&u(d).remove(),u.merge([],l.childNodes))};u.fn.load=function(a,b,f){var c,l,d,e=this,g=a.indexOf(" ");return-1<g&&(c=ea(a.slice(g)),a=a.slice(0,g)),T(b)?(f=b,b=void 0):b&&
"object"==typeof b&&(l="POST"),0<e.length&&u.ajax({url:a,type:l||"GET",dataType:"html",data:b}).done(function(a){d=arguments;e.html(c?u("<div>").append(u.parseHTML(a)).find(c):a)}).always(f&&function(a,b){e.each(function(){f.apply(this,d||[a.responseText,b,a])})}),this};u.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){u.fn[b]=function(a){return this.on(b,a)}});u.expr.pseudos.animated=function(a){return u.grep(u.timers,function(b){return a===b.elem}).length};
u.offset={setOffset:function(a,b,f){var c,l,d,e=u.css(a,"position"),g=u(a),r={};"static"===e&&(a.style.position="relative");var h=g.offset();var w=u.css(a,"top");var v=u.css(a,"left");("absolute"===e||"fixed"===e)&&-1<(w+v).indexOf("auto")?(d=(c=g.position()).top,l=c.left):(d=parseFloat(w)||0,l=parseFloat(v)||0);T(b)&&(b=b.call(a,f,u.extend({},h)));null!=b.top&&(r.top=b.top-h.top+d);null!=b.left&&(r.left=b.left-h.left+l);"using"in b?b.using.call(a,r):g.css(r)}};u.fn.extend({offset:function(a){if(arguments.length)return void 0===
a?this:this.each(function(b){u.offset.setOffset(this,a,b)});var b,f,c=this[0];if(c)return c.getClientRects().length?(b=c.getBoundingClientRect(),f=c.ownerDocument.defaultView,{top:b.top+f.pageYOffset,left:b.left+f.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var a,b=this[0],f={top:0,left:0};if("fixed"===u.css(b,"position"))var c=b.getBoundingClientRect();else{c=this.offset();var l=b.ownerDocument;for(a=b.offsetParent||l.documentElement;a&&(a===l.body||a===l.documentElement)&&"static"===
u.css(a,"position");)a=a.parentNode;a&&a!==b&&1===a.nodeType&&((f=u(a).offset()).top+=u.css(a,"borderTopWidth",!0),f.left+=u.css(a,"borderLeftWidth",!0))}return{top:c.top-f.top-u.css(b,"marginTop",!0),left:c.left-f.left-u.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===u.css(a,"position");)a=a.offsetParent;return a||nb})}});u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var f="pageYOffset"===b;u.fn[a]=
function(c){return Ja(this,function(a,c,l){var d;if(V(a)?d=a:9===a.nodeType&&(d=a.defaultView),void 0===l)return d?d[b]:a[c];d?d.scrollTo(f?d.pageXOffset:l,f?l:d.pageYOffset):a[c]=l},a,c,arguments.length)}});u.each(["top","left"],function(a,b){u.cssHooks[b]=D(Y.pixelPosition,function(a,f){if(f)return f=Q(a,b),mc.test(f)?u(a).position()[b]+"px":f})});u.each({Height:"height",Width:"width"},function(a,b){u.each({padding:"inner"+a,content:b,"":"outer"+a},function(f,c){u.fn[c]=function(l,d){var e=arguments.length&&
(f||"boolean"!=typeof l),g=f||(!0===l||!0===d?"margin":"border");return Ja(this,function(b,f,l){var d;return V(b)?0===c.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):void 0===l?u.css(b,f,g):u.style(b,f,l,g)},b,e?l:void 0,e)}})});u.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(a,b){u.fn[b]=function(a,f){return 0<arguments.length?this.on(b,null,a,f):this.trigger(b)}});u.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});u.fn.extend({bind:function(a,b,f){return this.on(a,null,b,f)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,f,c){return this.on(b,a,f,c)},undelegate:function(a,b,f){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",f)}});u.proxy=function(a,b){var f,c,l;if("string"==typeof b&&(f=a[b],
b=a,a=f),T(a))return c=Ta.call(arguments,2),l=function(){return a.apply(b||this,c.concat(Ta.call(arguments)))},l.guid=a.guid=a.guid||u.guid++,l};u.holdReady=function(a){a?u.readyWait++:u.ready(!0)};u.isArray=Array.isArray;u.parseJSON=JSON.parse;u.nodeName=g;u.isFunction=T;u.isWindow=V;u.camelCase=l;u.type=d;u.now=Date.now;u.isNumeric=function(a){var b=u.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))};"function"==typeof define&&define.amd&&define("jquery",[],function(){return u});
var Ib=a.jQuery,Jb=a.$;return u.noConflict=function(b){return a.$===u&&(a.$=Jb),b&&a.jQuery===u&&(a.jQuery=Ib),u},b||(a.jQuery=a.$=u),u});/*
 jQuery UI - v1.12.1 - 2018-11-11
 http://jqueryui.com
 Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
 Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function b(a){for(var b,f;a.length&&a[0]!==document;){if(b=a.css("position"),("absolute"===b||"relative"===b||"fixed"===b)&&(f=parseInt(a.css("zIndex"),10),!isNaN(f)&&0!==f))return f;a=a.parent()}return 0}function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass=
"ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,
navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,
this.regional[""]);this.regional.en=a.extend(!0,{},this.regional[""]);this.regional["en-US"]=a.extend(!0,{},this.regional.en);this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){return b.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",function(){a(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");
-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",e)}function e(){a.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),
-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function g(b,c){a.extend(b,c);for(var f in c)null==c[f]&&(b[f]=c[f]);return b}function h(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.ui=a.ui||{};a.ui.version="1.12.1";var k=0,m=Array.prototype.slice;a.cleanData=function(b){return function(f){var c,l,d;for(d=0;null!=(l=f[d]);d++)try{(c=a._data(l,"events"))&&c.remove&&
a(l).triggerHandler("remove")}catch(y){}b(f)}}(a.cleanData);a.widget=function(b,c,d){var f,l,e,g={},r=b.split(".")[0];b=b.split(".")[1];var h=r+"-"+b;return d||(d=c,c=a.Widget),a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d))),a.expr[":"][h.toLowerCase()]=function(b){return!!a.data(b,h)},a[r]=a[r]||{},f=a[r][b],l=a[r][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new l(a,b)},a.extend(l,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),
e=new c,e.options=a.widget.extend({},e.options),a.each(d,function(b,f){return a.isFunction(f)?(g[b]=function(){function a(){return c.prototype[b].apply(this,arguments)}function l(a){return c.prototype[b].apply(this,a)}return function(){var b,c=this._super,d=this._superApply;return this._super=a,this._superApply=l,b=f.apply(this,arguments),this._super=c,this._superApply=d,b}}(),void 0):(g[b]=f,void 0)}),l.prototype=a.widget.extend(e,{widgetEventPrefix:f?e.widgetEventPrefix||b:b},g,{constructor:l,namespace:r,
widgetName:b,widgetFullName:h}),f?(a.each(f._childConstructors,function(b,f){b=f.prototype;a.widget(b.namespace+"."+b.widgetName,l,f._proto)}),delete f._childConstructors):c._childConstructors.push(l),a.widget.bridge(b,l),l};a.widget.extend=function(b){for(var f,c,d=m.call(arguments,1),e=0,g=d.length;g>e;e++)for(f in d[e])c=d[e][f],d[e].hasOwnProperty(f)&&void 0!==c&&(b[f]=a.isPlainObject(c)?a.isPlainObject(b[f])?a.widget.extend({},b[f],c):a.widget.extend({},c):c);return b};a.widget.bridge=function(b,
c){var f=c.prototype.widgetFullName||b;a.fn[b]=function(l){var d="string"==typeof l,e=m.call(arguments,1),g=this;return d?this.length||"instance"!==l?this.each(function(){var c,d=a.data(this,f);return"instance"===l?(g=d,!1):d?a.isFunction(d[l])&&"_"!==l.charAt(0)?(c=d[l].apply(d,e),c!==d&&void 0!==c?(g=c&&c.jquery?g.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+l+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+
l+"'")}):g=void 0:(e.length&&(l=a.widget.extend.apply(null,[l].concat(e))),this.each(function(){var b=a.data(this,f);b?(b.option(l||{}),b._init&&b._init()):a.data(this,f,new c(l,this))})),g}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0];this.element=a(c);this.uuid=k++;this.eventNamespace="."+this.widgetName+
this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();this.classesElementLookup={};c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);
this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy();a.each(this.classesElementLookup,function(a,f){b._removeClass(f,a)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},
option:function(b,c){var f,l,d=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(d={},f=b.split("."),b=f.shift(),f.length){var e=d[b]=a.widget.extend({},this.options[b]);for(l=0;f.length-1>l;l++)e[f[l]]=e[f[l]]||{},e=e[f[l]];if(b=f.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];d[b]=c}return this._setOptions(d),this},_setOptions:function(a){for(var b in a)this._setOption(b,
a[b]);return this},_setOption:function(a,b){return"classes"===a&&this._setOptionClasses(b),this.options[a]=b,"disabled"===a&&this._setOptionDisabled(b),this},_setOptionClasses:function(b){var f,c;for(f in b){var d=this.classesElementLookup[f];b[f]!==this.options.classes[f]&&d&&d.length&&(c=a(d.get()),this._removeClass(d,f),c.addClass(this._classes({element:c,keys:f,classes:b,add:!0})))}},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);a&&(this._removeClass(this.hoverable,
null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function f(f,l){var e;for(e=0;f.length>e;e++){var g=d.classesElementLookup[f[e]]||a();g=b.add?a(a.unique(g.get().concat(b.element.get()))):a(g.not(b.element).get());d.classesElementLookup[f[e]]=g;c.push(f[e]);l&&b.classes[f[e]]&&c.push(b.classes[f[e]])}}var c=[],d=this;return b=a.extend({element:this.element,
classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&f(b.keys.match(/\S+/g)||[],!0),b.extra&&f(b.extra.match(/\S+/g)||[]),c.join(" ")},_untrackClassesElement:function(b){var f=this;a.each(f.classesElementLookup,function(c,l){-1!==a.inArray(b.target,l)&&(f.classesElementLookup[c]=a(l.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,
b,c,d){d="boolean"==typeof d?d:c;var f="string"==typeof a||null===a;a={extra:f?b:c,keys:f?a:b,element:f?this.element:a,add:d};return a.element.toggleClass(this._classes(a),d),this},_on:function(b,c,d){var f,l=this;"boolean"!=typeof b&&(d=c,c=b,b=!1);d?(c=f=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,f=this.widget());a.each(d,function(d,e){function g(){return b||!0!==l.options.disabled&&!a(this).hasClass("ui-state-disabled")?("string"==typeof e?l[e]:e).apply(l,arguments):void 0}"string"!=
typeof e&&(g.guid=e.guid=e.guid||g.guid||a.guid++);var r=d.match(/^([\w:-]*)\s*(.*)$/);d=r[1]+l.eventNamespace;(r=r[2])?f.on(d,r,g):c.on(d,g)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;b.off(c).off(c);this.bindings=a(this.bindings.not(b).get());this.focusable=a(this.focusable.not(b).get());this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){var f=this;return setTimeout(function(){return("string"==typeof a?f[a]:a).apply(f,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,
c,d){var f,l=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],b=c.originalEvent)for(f in b)f in c||(c[f]=b[f]);return this.element.trigger(c,d),!(a.isFunction(l)&&!1===l.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(f,l,d){"string"==typeof l&&(l={effect:l});var e=l?!0===l||"number"==typeof l?c:l.effect||
c:b;l=l||{};"number"==typeof l&&(l={duration:l});var g=!a.isEmptyObject(l);l.complete=d;l.delay&&f.delay(l.delay);g&&a.effects&&a.effects.effect[e]?f[b](l):e!==b&&f[e]?f[e](l.duration,l.easing,d):f.queue(function(c){a(this)[b]();d&&d.call(f[0]);c()})}});a.widget;(function(){function b(a,b,f){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?f/100:1)]}function c(b){var f=b[0];return 9===f.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(f)?{width:b.width(),
height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:f.preventDefault?{width:0,height:0,offset:{top:f.pageY,left:f.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var d,e=Math.max,g=Math.abs,h=/left|center|right/,k=/top|center|bottom/,z=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,q=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==d)return d;var b,f,c=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
l=c.children()[0];return a("body").append(c),b=l.offsetWidth,c.css("overflow","scroll"),f=l.offsetWidth,b===f&&(f=c[0].clientWidth),c.remove(),d=b-f},getScrollInfo:function(b){var f=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),c=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),f="scroll"===f||"auto"===f&&b.width<b.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},
getWithinInfo:function(b){var f=a(b||window),c=a.isWindow(f[0]),l=!!f[0]&&9===f[0].nodeType;return{element:f,isWindow:c,isDocument:l,offset:c||l?{left:0,top:0}:a(b).offset(),scrollLeft:f.scrollLeft(),scrollTop:f.scrollTop(),width:f.outerWidth(),height:f.outerHeight()}}};a.fn.position=function(f){if(!f||!f.of)return q.apply(this,arguments);f=a.extend({},f);var l,d,r,w,v,y,n=a(f.of),F=a.position.getWithinInfo(f.within),p=a.position.getScrollInfo(F),t=(f.collision||"flip").split(" "),E={};return y=c(n),
n[0].preventDefault&&(f.at="left top"),d=y.width,r=y.height,w=y.offset,v=a.extend({},w),a.each(["my","at"],function(){var a=(f[this]||"").split(" ");1===a.length&&(a=h.test(a[0])?a.concat(["center"]):k.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=k.test(a[1])?a[1]:"center";var b=z.exec(a[0]);var c=z.exec(a[1]);E[this]=[b?b[0]:0,c?c[0]:0];f[this]=[m.exec(a[0])[0],m.exec(a[1])[0]]}),1===t.length&&(t[1]=t[0]),"right"===f.at[0]?v.left+=d:"center"===f.at[0]&&
(v.left+=d/2),"bottom"===f.at[1]?v.top+=r:"center"===f.at[1]&&(v.top+=r/2),l=b(E.at,d,r),v.left+=l[0],v.top+=l[1],this.each(function(){var c,h=a(this),k=h.outerWidth(),y=h.outerHeight(),z=parseInt(a.css(this,"marginLeft"),10)||0,m=parseInt(a.css(this,"marginTop"),10)||0,q=k+z+(parseInt(a.css(this,"marginRight"),10)||0)+p.width,G=y+m+(parseInt(a.css(this,"marginBottom"),10)||0)+p.height,H=a.extend({},v),B=b(E.my,h.outerWidth(),h.outerHeight());"right"===f.my[0]?H.left-=k:"center"===f.my[0]&&(H.left-=
k/2);"bottom"===f.my[1]?H.top-=y:"center"===f.my[1]&&(H.top-=y/2);H.left+=B[0];H.top+=B[1];var O={marginLeft:z,marginTop:m};a.each(["left","top"],function(b,c){a.ui.position[t[b]]&&a.ui.position[t[b]][c](H,{targetWidth:d,targetHeight:r,elemWidth:k,elemHeight:y,collisionPosition:O,collisionWidth:q,collisionHeight:G,offset:[l[0]+B[0],l[1]+B[1]],my:f.my,at:f.at,within:F,elem:h})});f.using&&(c=function(a){var b=w.left-H.left,c=b+d-k,l=w.top-H.top,v=l+r-y,z={target:{element:n,left:w.left,top:w.top,width:d,
height:r},element:{element:h,left:H.left,top:H.top,width:k,height:y},horizontal:0>c?"left":0<b?"right":"center",vertical:0>v?"top":0<l?"bottom":"middle"};k>d&&d>g(b+c)&&(z.horizontal="center");y>r&&r>g(l+v)&&(z.vertical="middle");z.important=e(g(b),g(c))>e(g(l),g(v))?"horizontal":"vertical";f.using.call(this,a,z)});h.offset(a.extend(H,{using:c}))})};a.ui.position={fit:{left:function(a,b){var f,c=b.within,l=c.isWindow?c.scrollLeft:c.offset.left,c=c.width,d=a.left-b.collisionPosition.marginLeft,g=l-
d,r=d+b.collisionWidth-c-l;b.collisionWidth>c?0<g&&0>=r?(f=a.left+g+b.collisionWidth-c-l,a.left+=g-f):a.left=0<r&&0>=g?l:g>r?l+c-b.collisionWidth:l:0<g?a.left+=g:0<r?a.left-=r:a.left=e(a.left-d,a.left)},top:function(a,b){var f,c=b.within,c=c.isWindow?c.scrollTop:c.offset.top,l=b.within.height,d=a.top-b.collisionPosition.marginTop,g=c-d,r=d+b.collisionHeight-l-c;b.collisionHeight>l?0<g&&0>=r?(f=a.top+g+b.collisionHeight-l-c,a.top+=g-f):a.top=0<r&&0>=g?c:g>r?c+l-b.collisionHeight:c:0<g?a.top+=g:0<r?
a.top-=r:a.top=e(a.top-d,a.top)}},flip:{left:function(a,b){var f,c,l=b.within,d=l.offset.left+l.scrollLeft,e=l.width,l=l.isWindow?l.scrollLeft:l.offset.left,r=a.left-b.collisionPosition.marginLeft,h=r-l,r=r+b.collisionWidth-e-l,w="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,v="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,k=-2*b.offset[0];0>h?(f=a.left+w+v+k+b.collisionWidth-e-d,(0>f||g(h)>f)&&(a.left+=w+v+k)):0<r&&(c=a.left-b.collisionPosition.marginLeft+w+v+k-
l,(0<c||r>g(c))&&(a.left+=w+v+k))},top:function(a,b){var f,c,l=b.within,d=l.offset.top+l.scrollTop,e=l.height,l=l.isWindow?l.scrollTop:l.offset.top,r=a.top-b.collisionPosition.marginTop,h=r-l,r=r+b.collisionHeight-e-l,w="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,v="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,k=-2*b.offset[1];0>h?(c=a.top+w+v+k+b.collisionHeight-e-d,(0>c||g(h)>c)&&(a.top+=w+v+k)):0<r&&(f=a.top-b.collisionPosition.marginTop+w+v+k-l,(0<f||
r>g(f))&&(a.top+=w+v+k))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}}})();a.ui.position;a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(f){return!!a.data(f,b)}}):function(b,c,d){return!!a.data(b,d[3])}});a.fn.extend({disableSelection:function(){var a="onselectstart"in document.createElement("div")?
"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});a.ui.focusable=function(b,c){var f,l,d,e,g,h=b.nodeName.toLowerCase();if("area"===h)b=(f=b.parentNode,l=f.name,b.href&&l&&"map"===f.nodeName.toLowerCase()?(d=a("img[usemap='#"+l+"']"),0<d.length&&d.is(":visible")):!1);else{/^(input|select|textarea|button|object)$/.test(h)?(e=!b.disabled,e&&(g=a(b).closest("fieldset")[0],
g&&(e=!g.disabled))):e="a"===h?b.href||c:c;if(f=e&&a(b).is(":visible")){b=a(b);for(f=b.css("visibility");"inherit"===f;)b=b.parent(),f=b.css("visibility");f="hidden"!==f}b=f}return b};a.extend(a.expr[":"],{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}});a.ui.focusable;a.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):a(this[0].form)};a.ui.formResetMixin={_formResetHandler:function(){var b=a(this);setTimeout(function(){var f=b.data("ui-form-reset-instances");
a.each(f,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var a=this.form.data("ui-form-reset-instances")||[];a.length||this.form.on("reset.ui-form-reset",this._formResetHandler);a.push(this);this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(a.inArray(this,b),1);b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};
"1.7"===a.fn.jquery.substring(0,3)&&(a.each(["Width","Height"],function(b,c){function f(b,f,c,d){return a.each(l,function(){f-=parseFloat(a.css(b,"padding"+this))||0;c&&(f-=parseFloat(a.css(b,"border"+this+"Width"))||0);d&&(f-=parseFloat(a.css(b,"margin"+this))||0)}),f}var l="Width"===c?["Left","Right"]:["Top","Bottom"],d=c.toLowerCase(),e={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?
e["inner"+c].call(this):this.each(function(){a(this).css(d,f(this,b)+"px")})};a.fn["outer"+c]=function(b,l){return"number"!=typeof b?e["outer"+c].call(this,b):this.each(function(){a(this).css(d,f(this,b,!0,l)+"px")})}}),a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};a.ui.escapeSelector=function(){var a=
/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}();a.fn.labels=function(){var b,c,d,e,g;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),d=this.attr("id"),d&&(b=this.eq(0).parents().last(),g=b.add(b.length?b.siblings():this.siblings()),c="label[for='"+a.ui.escapeSelector(d)+"']",e=e.add(g.find(c).addBack(c))),this.pushStack(e))};a.fn.scrollParent=function(b){var f=this.css("position"),c="absolute"===f,d=
b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var b=a(this);return c&&"static"===b.css("position")?!1:d.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==f&&b.length?b:a(this[0].ownerDocument||document)};a.extend(a.expr[":"],{tabbable:function(b){var f=a.attr(b,"tabindex"),c=null!=f;return(!c||0<=f)&&a.ui.focusable(b,c)}});a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+
++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}});a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var n=!1;a(document).on("mouseup",function(){n=!1});a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(f){return!0===
a.data(f.target,b.widgetName+".preventClickEvent")?(a.removeData(f.target,b.widgetName+".preventClickEvent"),f.stopImmediatePropagation(),!1):void 0});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!n){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var f=this,
c=1===b.which,d="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return c&&!d&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&
a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return f._mouseMove(a)},this._mouseUpDelegate=function(a){return f._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||
b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+
this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);n=this.ignoreMissingWhich=!1;b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-
a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});a.ui.plugin={add:function(b,c,d){var f;b=a.ui[b].prototype;for(f in d)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([c,d[f]])},call:function(a,b,c,d){if((b=a.plugins[b])&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(d=0;b.length>d;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,
c)}};a.ui.safeActiveElement=function(a){try{var b=a.activeElement}catch(r){b=a.body}return b||(b=a.body),b.nodeName||(b=a.body),b};a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")};a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,
scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?
(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(b){var f=this.options;return this.helper||f.disabled||0<a(b.target).closest(".ui-resizable-handle").length?!1:(this.handle=this._getHandle(b),this.handle?(this._blurActiveElement(b),this._blockFrames(!0===f.iframeFix?"iframe":f.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},
_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var f=a.ui.safeActiveElement(this.document[0]);a(b.target).closest(f).length||a.ui.safeBlur(f)},_mouseStart:function(b){var f=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),
this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),
!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&
(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){c=this._uiHash();if(!1===this._trigger("drag",b,c))return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=c.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var f=this,c=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&
(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!c||"valid"===this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",b)&&f._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&
a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):
this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var f=this.options,c=a.isFunction(f.helper);b=c?a(f.helper.apply(this.element[0],[b])):"clone"===f.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"===f.appendTo?this.element[0].parentNode:f.appendTo),c&&b[0]===this.element[0]&&this._setPositionRelative(),
b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute"),b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in
b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),
this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,g=this.document[0];return this.relativeContainer=
null,e.containment?"window"===e.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,a(g).width()-this.helperProportions.width-
this.margins.left,(a(g).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),
10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c),void 0):(this.containment=null,void 0)},_convertPositionTo:function(a,
b){b||(b=this.position);a="absolute"===a?1:-1;var f=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:f?0:this.offset.scroll.top)*a,left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:f?0:this.offset.scroll.left)*a}},_generatePosition:function(a,b){var f,c,d,l,e=this.options,g=this._isRootNode(this.scrollParent[0]),h=a.pageX,
k=a.pageY;return g&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(c=this.relativeContainer.offset(),f=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):f=this.containment,a.pageX-this.offset.click.left<f[0]&&(h=f[0]+this.offset.click.left),a.pageY-this.offset.click.top<f[1]&&(k=f[1]+this.offset.click.top),a.pageX-this.offset.click.left>
f[2]&&(h=f[2]+this.offset.click.left),a.pageY-this.offset.click.top>f[3]&&(k=f[3]+this.offset.click.top)),e.grid&&(d=e.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,k=f?d-this.offset.click.top>=f[1]||d-this.offset.click.top>f[3]?d:d-this.offset.click.top>=f[1]?d-e.grid[1]:d+e.grid[1]:d,l=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,h=f?l-this.offset.click.left>=f[0]||l-this.offset.click.left>
f[2]?l:l-this.offset.click.left>=f[0]?l-e.grid[0]:l+e.grid[0]:l),"y"===e.axis&&(h=this.originalPageX),"x"===e.axis&&(k=this.originalPageY)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:g?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:g?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,
"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,
originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var f=a.extend({},c,{item:d.element});d.sortables=[];a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c,d){var f=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1;a.each(d.sortables,function(){this.isOver?(this.isOver=
0,d.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(b),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",b,f))})},drag:function(b,c,d){a.each(d.sortables,function(){var f=!1,l=this;l.positionAbs=d.positionAbs;l.helperProportions=d.helperProportions;l.offset.click=d.offset.click;l._intersectsWith(l.containerCache)&&
(f=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==l&&this._intersectsWith(this.containerCache)&&a.contains(l.element[0],this.element[0])&&(f=!1),f}));f?(l.isOver||(l.isOver=1,d._parent=c.helper.parent(),l.currentItem=c.helper.appendTo(l.element).data("ui-sortable-item",!0),l.options._helper=l.options.helper,l.options.helper=function(){return c.helper[0]},b.target=l.currentItem[0],l._mouseCapture(b,
!0),l._mouseStart(b,!0,!0),l.offset.click.top=d.offset.click.top,l.offset.click.left=d.offset.click.left,l.offset.parent.left-=d.offset.parent.left-l.offset.parent.left,l.offset.parent.top-=d.offset.parent.top-l.offset.parent.top,d._trigger("toSortable",b),d.dropped=l.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,l.fromOutside=d),l.currentItem&&(l._mouseDrag(b),c.position=l.position)):l.isOver&&(l.isOver=0,l.cancelHelperRemoval=!0,l.options._revert=l.options.revert,
l.options.revert=!1,l._trigger("out",b,l._uiHash(l)),l._mouseStop(b,!0),l.options.revert=l.options._revert,l.options.helper=l.options._helper,l.placeholder&&l.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){b=a("body");d=d.options;b.css("cursor")&&(d._cursor=b.css("cursor"));b.css("cursor",
d.cursor)},stop:function(b,c,d){b=d.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("opacity")&&(d._opacity=b.css("opacity"));b.css("opacity",d.opacity)},stop:function(b,c,d){b=d.options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1));c.scrollParentNotHidden[0]!==
c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){c=d.options;var f=!1,l=d.scrollParentNotHidden[0],e=d.document[0];l!==e&&"HTML"!==l.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+l.offsetHeight-b.pageY<c.scrollSensitivity?l.scrollTop=f=l.scrollTop+c.scrollSpeed:b.pageY-d.overflowOffset.top<c.scrollSensitivity&&(l.scrollTop=f=l.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+l.offsetWidth-
b.pageX<c.scrollSensitivity?l.scrollLeft=f=l.scrollLeft+c.scrollSpeed:b.pageX-d.overflowOffset.left<c.scrollSensitivity&&(l.scrollLeft=f=l.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(b.pageY-a(e).scrollTop()<c.scrollSensitivity?f=a(e).scrollTop(a(e).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(e).scrollTop())<c.scrollSensitivity&&(f=a(e).scrollTop(a(e).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(b.pageX-a(e).scrollLeft()<c.scrollSensitivity?f=a(e).scrollLeft(a(e).scrollLeft()-
c.scrollSpeed):a(window).width()-(b.pageX-a(e).scrollLeft())<c.scrollSensitivity&&(f=a(e).scrollLeft(a(e).scrollLeft()+c.scrollSpeed))));!1!==f&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,c,d){b=d.options;d.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=a(this),f=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),
top:f.top,left:f.left})})},drag:function(b,c,d){var f,l,e,g,h,r,k=d.options,m=k.snapTolerance,n=c.offset.left,q=n+d.helperProportions.width,t=c.offset.top,p=t+d.helperProportions.height;for(h=d.snapElements.length-1;0<=h;h--){var M=d.snapElements[h].left-d.margins.left;var R=M+d.snapElements[h].width;var S=d.snapElements[h].top-d.margins.top;var J=S+d.snapElements[h].height;M-m>q||n>R+m||S-m>p||t>J+m||!a.contains(d.snapElements[h].item.ownerDocument,d.snapElements[h].item)?(d.snapElements[h].snapping&&
d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[h].item})),d.snapElements[h].snapping=!1):("inner"!==k.snapMode&&(f=m>=Math.abs(S-p),l=m>=Math.abs(J-t),e=m>=Math.abs(M-q),g=m>=Math.abs(R-n),f&&(c.position.top=d._convertPositionTo("relative",{top:S-d.helperProportions.height,left:0}).top),l&&(c.position.top=d._convertPositionTo("relative",{top:J,left:0}).top),e&&(c.position.left=d._convertPositionTo("relative",{top:0,left:M-d.helperProportions.width}).left),
g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:R}).left)),r=f||l||e||g,"outer"!==k.snapMode&&(f=m>=Math.abs(S-t),l=m>=Math.abs(J-p),e=m>=Math.abs(M-n),g=m>=Math.abs(R-q),f&&(c.position.top=d._convertPositionTo("relative",{top:S,left:0}).top),l&&(c.position.top=d._convertPositionTo("relative",{top:J-d.helperProportions.height,left:0}).top),e&&(c.position.left=d._convertPositionTo("relative",{top:0,left:M}).left),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:R-d.helperProportions.width}).left)),
!d.snapElements[h].snapping&&(f||l||e||g||r)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[h].item})),d.snapElements[h].snapping=f||l||e||g||r)}}});a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var f;b=a.makeArray(a(d.options.stack)).sort(function(b,f){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(f).css("zIndex"),10)||0)});b.length&&(f=parseInt(a(b[0]).css("zIndex"),10)||0,a(b).each(function(b){a(this).css("zIndex",
f+b)}),this.css("zIndex",f+b.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){b=a(c.helper);d=d.options;b.css("zIndex")&&(d._zIndex=b.css("zIndex"));b.css("zIndex",d.zIndex)},stop:function(b,c,d){b=d.options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}});a.ui.draggable;a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},
_create:function(){var b,c=this.options,d=c.accept;this.isover=!1;this.isout=!0;this.accept=a.isFunction(d)?d:function(a){return a.is(d)};this.proportions=function(){return arguments.length?(b=arguments[0],void 0):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(c.scope);c.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=
0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice(a.ui.ddmanager.droppables[this.options.scope])},_setOption:function(b,c){"accept"===b?this.accept=a.isFunction(c)?c:function(a){return a.is(c)}:"scope"===b&&(this._splice(a.ui.ddmanager.droppables[this.options.scope]),this._addToManager(c));this._super(b,c)},_activate:function(b){var f=a.ui.ddmanager.current;this._addActiveClass();f&&this._trigger("activate",b,this.ui(f))},_deactivate:function(b){var f=a.ui.ddmanager.current;
this._removeActiveClass();f&&this._trigger("deactivate",b,this.ui(f))},_over:function(b){var f=a.ui.ddmanager.current;f&&(f.currentItem||f.element)[0]!==this.element[0]&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(f)))},_out:function(b){var f=a.ui.ddmanager.current;f&&(f.currentItem||f.element)[0]!==this.element[0]&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(f)))},
_drop:function(b,c){var f=c||a.ui.ddmanager.current,d=!1;return f&&(f.currentItem||f.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===f.options.scope&&c.accept.call(c.element[0],f.currentItem||f.element)&&p(f,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(d=!0,!1):void 0}),d?!1:this.accept.call(this.element[0],f.currentItem||
f.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(f)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});
var p=a.ui.intersect=function(){return function(a,b,c,d){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left+a.margins.left,l=(a.positionAbs||a.position.absolute).top+a.margins.top,e=f+a.helperProportions.width,g=l+a.helperProportions.height,h=b.offset.left,r=b.offset.top,w=h+b.proportions().width,k=r+b.proportions().height;switch(c){case "fit":return f>=h&&w>=e&&l>=r&&k>=g;case "intersect":return f+a.helperProportions.width/2>h&&w>e-a.helperProportions.width/2&&l+a.helperProportions.height/
2>r&&k>g-a.helperProportions.height/2;case "pointer":a=d.pageY;c=b.proportions().height;if(r=a>=r&&r+c>a)d=d.pageX,b=b.proportions().width,r=d>=h&&h+b>d;return r;case "touch":return(l>=r&&k>=l||g>=r&&k>=g||r>l&&g>k)&&(f>=h&&w>=f||e>=h&&w>=e||h>f&&e>w);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var f,d=a.ui.ddmanager.droppables[b.options.scope]||[],l=c?c.type:null,e=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();var g=
0;a:for(;d.length>g;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(f=0;e.length>f;f++)if(e[f]===d[g].element[0]){d[g].proportions().height=0;continue a}d[g].visible="none"!==d[g].element.css("display");d[g].visible&&("mousedown"===l&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions({width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight}))}},drop:function(b,c){var f=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||
[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&p(b,this,this.options.tolerance,c)&&(f=this._drop.call(this,c)||f),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),f},dragStart:function(b,c){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&
a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var f,d,l,e=p(b,this,this.options.tolerance,c);(e=!e&&this.isover?"isout":e&&!this.isover?"isover":null)&&(this.options.greedy&&(d=this.options.scope,l=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===d}),l.length&&(f=a(l[0]).droppable("instance"),f.greedyChild="isover"===e)),
f&&"isover"===e&&(f.isover=!1,f.isout=!0,f._out.call(f,c)),this[e]=!0,this["isout"===e?"isover":"isout"]=!1,this["isover"===e?"_over":"_out"].call(this,c),f&&"isout"===e&&(f.isout=!1,f.isover=!0,f._over.call(f,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").off("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}};!1!==a.uiBackCompat&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();
this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});a.ui.droppable;a.widget("ui.resizable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",
options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;c=c&&"left"===
c?"scrollLeft":"scrollTop";var f=!1;return 0<b[c]?!0:(b[c]=1,f=0<b[c],b[c]=0,f)},_create:function(){var b,c=this.options,d=this;this._addClass("ui-resizable");a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),
width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",
0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize());this._setupHandles();c.autoHide&&a(this.element).on("mouseenter",function(){c.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){c.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),
d._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),
this},_setOption:function(a,b){switch(this._super(a,b),a){case "handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var b,c=this.options,d=this;if(this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String){"all"===this.handles&&(this.handles=
"n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");this.handles={};for(b=0;e.length>b;b++){var g=a.trim(e[b]);var h="ui-resizable-"+g;var k=a("<div>");this._addClass(k,"ui-resizable-handle "+h);k.css({zIndex:c.zIndex});this.handles[g]=".ui-resizable-"+g;this.element.append(k)}}this._renderAxis=function(b){var f,c,l,e;b=b||this.element;for(f in this.handles)this.handles[f].constructor===String?this.handles[f]=this.element.children(this.handles[f]).first().show():(this.handles[f].jquery||this.handles[f].nodeType)&&
(this.handles[f]=a(this.handles[f]),this._on(this.handles[f],{mousedown:d._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(c=a(this.handles[f],this.element),e=/sw|ne|nw|se|n|s/.test(f)?c.outerHeight():c.outerWidth(),l=["padding",/ne|nw|n/.test(f)?"Top":/se|sw|s/.test(f)?"Bottom":/^e$/.test(f)?"Right":"Left"].join(""),b.css(l,e),this._proportionallyResize()),this._handles=this._handles.add(this.handles[f])};this._renderAxis(this.element);
this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){d.resizing||(this.className&&(k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),d.axis=k&&k[1]?k[1]:"se")});c.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var f,c=!1;for(f in this.handles){var d=a(this.handles[f])[0];(d===b.target||a.contains(d,
b.target))&&(c=!0)}return!this.options.disabled&&c},_mouseStart:function(b){var f,c,d,e=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),f=this._num(this.helper.css("left")),c=this._num(this.helper.css("top")),e.containment&&(f+=a(e.containment).scrollLeft()||0,c+=a(e.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:c},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=
this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:f,top:c},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1,d=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===d?this.axis+"-resize":d),this._addClass("ui-resizable-resizing"),
this._propagate("start",b),!0},_mouseDrag:function(b){var f,c,d=this.originalMousePosition,e=b.pageX-d.left||0,d=b.pageY-d.top||0,g=this._change[this.axis];return this._updatePrevProperties(),g?(f=g.apply(this,[b,e,d]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(f=this._updateRatio(f,b)),f=this._respectSize(f,b),this._updateCache(f),this._propagate("resize",b),c=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),
a.isEmptyObject(c)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(b){this.resizing=!1;var f,c,d,e,g,h,k,m=this.options;return this._helper&&(f=this._proportionallyResizeElements,c=f.length&&/textarea/i.test(f[0].nodeName),d=c&&this._hasScroll(f[0],"left")?0:this.sizeDiff.height,e=c?0:this.sizeDiff.width,g={width:this.helper.width()-e,height:this.helper.height()-d},h=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||
null,k=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,m.animate||this.element.css(a.extend(g,{top:k,left:h})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!m.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};
this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,f,c,d;var e=this.options;e={minWidth:this._isNumber(e.minWidth)?
e.minWidth:0,maxWidth:this._isNumber(e.maxWidth)?e.maxWidth:1/0,minHeight:this._isNumber(e.minHeight)?e.minHeight:0,maxHeight:this._isNumber(e.maxHeight)?e.maxHeight:1/0};(this._aspectRatio||a)&&(b=e.minHeight*this.aspectRatio,c=e.minWidth/this.aspectRatio,f=e.maxHeight*this.aspectRatio,d=e.maxWidth/this.aspectRatio,b>e.minWidth&&(e.minWidth=b),c>e.minHeight&&(e.minHeight=c),e.maxWidth>f&&(e.maxWidth=f),e.maxHeight>d&&(e.maxHeight=d));this._vBoundaries=e},_updateCache:function(a){this.offset=this.helper.offset();
this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,f=this.size,c=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===c&&(a.left=b.left+(f.width-a.width),a.top=null),"nw"===c&&(a.top=b.top+(f.height-a.height),
a.left=b.left+(f.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,f=this.axis,c=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,d=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,e=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,k=this.originalPosition.top+this.originalSize.height,m=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);return e&&(a.width=
b.minWidth),g&&(a.height=b.minHeight),c&&(a.width=b.maxWidth),d&&(a.height=b.maxHeight),e&&m&&(a.left=h-b.minWidth),c&&m&&(a.left=h-b.maxWidth),g&&f&&(a.top=k-b.minHeight),d&&f&&(a.top=k-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){var b=0,f=[],c=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];for(a=[a.css("paddingTop"),a.css("paddingRight"),
a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)f[b]=parseFloat(c[b])||0,f[b]+=parseFloat(a[b])||0;return{height:f[0]+f[2],width:f[1]+f[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-
this.outerDimensions.width||0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},
_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,
[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,
originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","animate",{stop:function(b){var f=a(this).resizable("instance"),c=f.options,d=f._proportionallyResizeElements,e=d.length&&/textarea/i.test(d[0].nodeName),g=e&&f._hasScroll(d[0],"left")?0:f.sizeDiff.height,e={width:f.size.width-(e?0:f.sizeDiff.width),height:f.size.height-g},g=parseFloat(f.element.css("left"))+(f.position.left-f.originalPosition.left)||null,h=parseFloat(f.element.css("top"))+(f.position.top-f.originalPosition.top)||
null;f.element.animate(a.extend(e,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseFloat(f.element.css("width")),height:parseFloat(f.element.css("height")),top:parseFloat(f.element.css("top")),left:parseFloat(f.element.css("left"))};d&&d.length&&a(d[0]).css({width:c.width,height:c.height});f._updateCache(c);f._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,g,h,k,m=a(this).resizable("instance"),
n=m.element,q=m.options.containment;(n=q instanceof a?q.get(0):/parent/.test(q)?n.parent().get(0):q)&&(m.containerElement=a(n),/document/.test(q)||q===document?(m.containerOffset={left:0,top:0},m.containerPosition={left:0,top:0},m.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,f){c[a]=m._num(b.css("padding"+f))}),m.containerOffset=b.offset(),
m.containerPosition=b.position(),m.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=m.containerOffset,e=m.containerSize.height,g=m.containerSize.width,h=m._hasScroll(n,"left")?n.scrollWidth:g,k=m._hasScroll(n)?n.scrollHeight:e,m.parentData={element:n,left:d.left,top:d.top,width:h,height:k}))},resize:function(b){var f=a(this).resizable("instance");var c=f.options;var d=f.containerOffset;var e=f.position;b=f._aspectRatio||b.shiftKey;var g={top:0,left:0},h=f.containerElement,k=
!0;h[0]!==document&&/static/.test(h.css("position"))&&(g=d);e.left<(f._helper?d.left:0)&&(f.size.width+=f._helper?f.position.left-d.left:f.position.left-g.left,b&&(f.size.height=f.size.width/f.aspectRatio,k=!1),f.position.left=c.helper?d.left:0);e.top<(f._helper?d.top:0)&&(f.size.height+=f._helper?f.position.top-d.top:f.position.top,b&&(f.size.width=f.size.height*f.aspectRatio,k=!1),f.position.top=f._helper?d.top:0);c=f.containerElement.get(0)===f.element.parent().get(0);e=/relative|absolute/.test(f.containerElement.css("position"));
c&&e?(f.offset.left=f.parentData.left+f.position.left,f.offset.top=f.parentData.top+f.position.top):(f.offset.left=f.element.offset().left,f.offset.top=f.element.offset().top);c=Math.abs(f.sizeDiff.width+(f._helper?f.offset.left-g.left:f.offset.left-d.left));d=Math.abs(f.sizeDiff.height+(f._helper?f.offset.top-g.top:f.offset.top-d.top));c+f.size.width>=f.parentData.width&&(f.size.width=f.parentData.width-c,b&&(f.size.height=f.size.width/f.aspectRatio,k=!1));d+f.size.height>=f.parentData.height&&(f.size.height=
f.parentData.height-d,b&&(f.size.width=f.size.height*f.aspectRatio,k=!1));k||(f.position.left=f.prevPosition.left,f.position.top=f.prevPosition.top,f.size.width=f.prevSize.width,f.size.height=f.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,g=b.containerElement,h=a(b.helper),k=h.offset(),m=h.outerWidth()-b.sizeDiff.width,h=h.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(g.css("position"))&&a(this).css({left:k.left-
e.left-d.left,width:m,height:h});b._helper&&!c.animate&&/static/.test(g.css("position"))&&a(this).css({left:k.left-e.left-d.left,width:m,height:h})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance").options;a(b.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseFloat(b.width()),height:parseFloat(b.height()),left:parseFloat(b.css("left")),top:parseFloat(b.css("top"))})})},resize:function(b,c){b=a(this).resizable("instance");
var f=b.originalSize,d=b.originalPosition,l={height:b.size.height-f.height||0,width:b.size.width-f.width||0,top:b.position.top-d.top||0,left:b.position.left-d.left||0};a(b.options.alsoResize).each(function(){var b=a(this),f=a(this).data("ui-resizable-alsoresize"),d={},e=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(e,function(a,b){(a=(f[b]||0)+(l[b]||0))&&0<=a&&(d[b]=a||null)});b.css(d)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}});
a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0});b._addClass(b.ghost,"ui-resizable-ghost");!1!==a.uiBackCompat&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost);b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",
height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,g=c.originalSize,h=c.originalPosition,k=c.axis,m="number"==typeof d.grid?[d.grid,d.grid]:d.grid,n=m[0]||1,q=m[1]||1,t=Math.round((e.width-g.width)/n)*n,e=Math.round((e.height-g.height)/q)*q,p=g.width+t,L=g.height+e,I=d.maxWidth&&
p>d.maxWidth,B=d.maxHeight&&L>d.maxHeight,M=d.minWidth&&d.minWidth>p,R=d.minHeight&&d.minHeight>L;d.grid=m;M&&(p+=n);R&&(L+=q);I&&(p-=n);B&&(L-=q);/^(se|s|e)$/.test(k)?(c.size.width=p,c.size.height=L):/^(ne)$/.test(k)?(c.size.width=p,c.size.height=L,c.position.top=h.top-e):/^(sw)$/.test(k)?(c.size.width=p,c.size.height=L,c.position.left=h.left-t):((0>=L-q||0>=p-n)&&(b=c._getPaddingPlusBorderDimensions(this)),0<L-q?(c.size.height=L,c.position.top=h.top-e):(L=q-b.height,c.size.height=L,c.position.top=
h.top+g.height-L),0<p-n?(c.size.width=p,c.position.left=h.left-t):(p=n-b.width,c.size.width=p,c.position.left=h.left+g.width-p))}});a.ui.resizable;a.widget("ui.selectable",a.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b.elementPos=a(b.element[0]).offset();
b.selectees=a(b.options.filter,b.element[0]);b._addClass(b.selectees,"ui-selectee");b.selectees.each(function(){var f=a(this),c=f.offset(),d=c.left-b.elementPos.left,c=c.top-b.elementPos.top;a.data(this,"selectable-item",{element:this,$element:f,left:d,top:c,right:d+f.outerWidth(),bottom:c+f.outerHeight(),startselected:!1,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=a("<div>");this._addClass(this.helper,
"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(b){var f=this,c=this.options;this.opos=[b.pageX,b.pageY];this.elementPos=a(this.element[0]).offset();this.options.disabled||(this.selectees=a(c.filter,this.element[0]),this._trigger("start",b),a(c.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),c.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var c=
a.data(this,"selectable-item");c.startselected=!0;b.metaKey||b.ctrlKey||(f._removeClass(c.$element,"ui-selected"),c.selected=!1,f._addClass(c.$element,"ui-unselecting"),c.unselecting=!0,f._trigger("unselecting",b,{unselecting:c.element}))}),a(b.target).parents().addBack().each(function(){var c,d=a.data(this,"selectable-item");return d?(c=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected"),f._removeClass(d.$element,c?"ui-unselecting":"ui-selected")._addClass(d.$element,c?"ui-selecting":"ui-unselecting"),
d.unselecting=!c,d.selecting=c,d.selected=c,c?f._trigger("selecting",b,{selecting:d.element}):f._trigger("unselecting",b,{unselecting:d.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var f,c=this,d=this.options,e=this.opos[0],g=this.opos[1],h=b.pageX,k=b.pageY;return e>h&&(f=h,h=e,e=f),g>k&&(f=k,k=g,g=f),this.helper.css({left:e,top:g,width:h-e,height:k-g}),this.selectees.each(function(){var f=a.data(this,"selectable-item"),l=!1,r,w,v,y;f&&f.element!==c.element[0]&&
(r=f.left+c.elementPos.left,w=f.right+c.elementPos.left,v=f.top+c.elementPos.top,y=f.bottom+c.elementPos.top,"touch"===d.tolerance?l=!(r>h||e>w||v>k||g>y):"fit"===d.tolerance&&(l=r>e&&h>w&&v>g&&k>y),l?(f.selected&&(c._removeClass(f.$element,"ui-selected"),f.selected=!1),f.unselecting&&(c._removeClass(f.$element,"ui-unselecting"),f.unselecting=!1),f.selecting||(c._addClass(f.$element,"ui-selecting"),f.selecting=!0,c._trigger("selecting",b,{selecting:f.element}))):(f.selecting&&((b.metaKey||b.ctrlKey)&&
f.startselected?(c._removeClass(f.$element,"ui-selecting"),f.selecting=!1,c._addClass(f.$element,"ui-selected"),f.selected=!0):(c._removeClass(f.$element,"ui-selecting"),f.selecting=!1,f.startselected&&(c._addClass(f.$element,"ui-unselecting"),f.unselecting=!0),c._trigger("unselecting",b,{unselecting:f.element}))),f.selected&&(b.metaKey||b.ctrlKey||f.startselected||(c._removeClass(f.$element,"ui-selected"),f.selected=!1,c._addClass(f.$element,"ui-unselecting"),f.unselecting=!0,c._trigger("unselecting",
b,{unselecting:f.element})))))}),!1}},_mouseStop:function(b){var f=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");f._removeClass(c.$element,"ui-unselecting");c.unselecting=!1;c.startselected=!1;f._trigger("unselected",b,{unselected:c.element})}),a(".ui-selecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");f._removeClass(c.$element,"ui-selecting")._addClass(c.$element,"ui-selected");c.selecting=!1;c.selected=
!0;c.startselected=!0;f._trigger("selected",b,{selected:c.element})}),this._trigger("stop",b),this.helper.remove(),!1}});a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",
tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();
this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");a.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");
return this},_mouseCapture:function(b,c){var f=null,d=!1,l=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,l.widgetName+"-item")===l?(f=a(this),!1):void 0}),a.data(b.target,l.widgetName+"-item")===l&&(f=a(b.target)),f?!this.options.handle||c||(a(this.options.handle,f).find("*").addBack().each(function(){this===b.target&&(d=!0)}),d)?(this.currentItem=f,this._removeCurrentsFromItems(),
!0):!1:!1)},_mouseStart:function(b,c,d){var f;c=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),
this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&"auto"!==c.cursor&&(f=this.document.find("body"),
this.storedCursor=f.css("cursor"),f.css("cursor",c.cursor),this.storedStylesheet=a("<style>*{ cursor: "+c.cursor+" !important; }</style>").appendTo(f)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=
this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var f,c,d;var e=this.options;
var g=!1;this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=
g=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(b.pageY-this.document.scrollTop()<e.scrollSensitivity?g=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(b.pageY-
this.document.scrollTop())<e.scrollSensitivity&&(g=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),b.pageX-this.document.scrollLeft()<e.scrollSensitivity?g=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(g=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),!1!==g&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b));this.positionAbs=this._convertPositionTo("absolute");
this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(e=this.items.length-1;0<=e;e--)if(f=this.items[e],c=f.item[0],d=this._intersectsWithPointer(f),d&&f.instance===this.currentContainer&&c!==this.currentItem[0]&&this.placeholder[1===d?"next":"prev"]()[0]!==c&&!a.contains(this.placeholder[0],c)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],
c):!0)){if(this.direction=1===d?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f);this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var f=this;c=this.placeholder.offset();
var d=this.options.axis,l={};d&&"x"!==d||(l.left=c.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));d&&"y"!==d||(l.top=c.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(l,parseInt(this.options.revert,10)||500,function(){f._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",
{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var f=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},a(f).each(function(){var f=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);f&&c.push((b.key||
f[1]+"[]")+"="+(b.key&&b.expression?f[1]:f[2]))}),!c.length&&b.key&&c.push(b.key+"="),c.join("&")},toArray:function(b){var f=this._getItemsAsjQuery(b&&b.connected),c=[];return b=b||{},f.each(function(){c.push(a(b.item||this).attr(b.attribute||"id")||"")}),c},_intersectsWith:function(a){var b=this.positionAbs.left,f=b+this.helperProportions.width,c=this.positionAbs.top,d=c+this.helperProportions.height,e=a.left,g=e+a.width,h=a.top,k=h+a.height,m=this.offset.click.top,n=this.offset.click.left,m="x"===
this.options.axis||c+m>h&&k>c+m,n="y"===this.options.axis||b+n>e&&g>b+n;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?m&&n:b+this.helperProportions.width/2>e&&g>f-this.helperProportions.width/2&&c+this.helperProportions.height/2>h&&k>d-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b,f,c="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+
this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);return c&&a?(b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection(),this.floating?"right"===f||"down"===b?2:1:b&&("down"===b?2:1)):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,
a.width);var f=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?"right"===c&&a||"left"===c&&!a:f&&("down"===f&&b||"up"===f&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),
this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function f(){e.push(this)}var c,d,e=[],g=[],h=this._connectWith();if(h&&b)for(b=h.length-1;0<=b;b--){var k=a(h[b],this.document[0]);for(c=k.length-1;0<=c;c--)(d=a.data(k[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&g.push([a.isFunction(d.options.items)?d.options.items.call(d.element):a(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
d])}g.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=g.length-1;0<=b;b--)g[b][0].each(f);return a(e)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var f=0;b.length>f;f++)if(b[f]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=
[];this.containers=[this];var f,c,d,e,g=this.items,h=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];if((e=this._connectWith())&&this.ready)for(f=e.length-1;0<=f;f--){var k=a(e[f],this.document[0]);for(c=k.length-1;0<=c;c--)(d=a.data(k[c],this.widgetFullName))&&d!==this&&!d.options.disabled&&(h.push([a.isFunction(d.options.items)?d.options.items.call(d.element[0],b,{item:this.currentItem}):a(d.options.items,
d.element),d]),this.containers.push(d))}for(f=h.length-1;0<=f;f--)for(b=h[f][1],k=h[f][0],c=0,e=k.length;e>c;c++)d=a(k[c]),d.data(this.widgetName+"-item",b),g.push({item:d,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var f,c,d;for(f=this.items.length-1;0<=f;f--){var e=this.items[f];e.instance!==this.currentContainer&&
this.currentContainer&&e.item[0]!==this.currentItem[0]||(c=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item,b||(e.width=c.outerWidth(),e.height=c.outerHeight()),d=c.offset(),e.left=d.left,e.top=d.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(f=this.containers.length-1;0<=f;f--)d=this.containers[f].element.offset(),this.containers[f].containerCache.left=d.left,this.containers[f].containerCache.top=
d.top,this.containers[f].containerCache.width=this.containers[f].element.outerWidth(),this.containers[f].containerCache.height=this.containers[f].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var f,c=b.options;c.placeholder&&c.placeholder.constructor!==String||(f=c.placeholder,c.placeholder={element:function(){var c=b.currentItem[0].nodeName.toLowerCase(),d=a("<"+c+">",b.document[0]);return b._addClass(d,"ui-sortable-placeholder",f||b.currentItem[0].className)._removeClass(d,
"ui-sortable-helper"),"tbody"===c?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(d)):"tr"===c?b._createTrPlaceholder(b.currentItem,d):"img"===c&&d.attr("src",b.currentItem.attr("src")),f||d.css("visibility","hidden"),d},update:function(a,d){(!f||c.forcePlaceholderSize)&&(d.height()||d.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(b.currentItem.innerWidth()-
parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}});b.placeholder=a(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var f=this;b.children().each(function(){a("<td>&#160;</td>",f.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var f,c,d,e,g,h=d=null;for(f=this.containers.length-1;0<=
f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?d&&a.contains(this.containers[f].element[0],d.element[0])||(d=this.containers[f],h=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",b,this._uiHash(this)),this.containers[h].containerCache.over=
1);else{f=1E4;var k=null;d=(c=d.floating||this._isFloating(this.currentItem))?"left":"top";var m=c?"width":"height";var n=c?"pageX":"pageY";for(c=this.items.length-1;0<=c;c--)a.contains(this.containers[h].element[0],this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]&&(e=this.items[c].item.offset()[d],g=!1,b[n]-e>this.items[c][m]/2&&(g=!0),f>Math.abs(b[n]-e)&&(f=Math.abs(b[n]-e),k=this.items[c],this.direction=g?"up":"down"));if(k||this.options.dropOnEmpty){if(this.currentContainer===
this.containers[h])return this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;k?this._rearrange(b,k,null,!0):this._rearrange(b,null,this.containers[h].element,!0);this._trigger("change",b,this._uiHash());this.containers[h]._trigger("change",b,this._uiHash(this));this.currentContainer=this.containers[h];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[h]._trigger("over",
b,this._uiHash(this));this.containers[h].containerCache.over=1}}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width()),(!b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in
b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||
this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode);"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d=
"hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,
b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);b="absolute"===b?1:-1;var f="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,d=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*
b-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():d?0:f.scrollTop())*b,left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():d?0:f.scrollLeft())*b}},_generatePosition:function(b){var c,f,d=this.options,e=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,k=/(html|body)/i.test(h[0].tagName);
return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),
b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),d.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/d.grid[1])*d.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-d.grid[1]:c+d.grid[1]:c,f=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?f-this.offset.click.left>=this.containment[0]&&
f-this.offset.click.left<=this.containment[2]?f:f-this.offset.click.left>=this.containment[0]?f-d.grid[0]:f+d.grid[0]:f)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():k?0:h.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():k?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):
b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var f=this.counter=this.counter?++this.counter:1;this._delay(function(){f===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(f){c._trigger(a,f,b._uiHash(b))}}this.reverting=!1;var f,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(f in this._storedCSS)"auto"!==
this._storedCSS[f]&&"static"!==this._storedCSS[f]||(this._storedCSS[f]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,
this._uiHash())});this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(f=this.containers.length-1;0<=f;f--)b||d.push(c("deactivate",this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(c("out",this,
this.containers[f])),this.containers[f].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==
this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(f=0;d.length>f;f++)d[f].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});
a.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",
height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?
this.active.next():a()}},_createIcons:function(){var b,c,d=this.options.icons;d&&(b=a("<span>"),this._addClass(b,"ui-accordion-header-icon","ui-icon "+d.header),b.prependTo(this.headers),c=this.active.children(".ui-accordion-header-icon"),this._removeClass(c,d.header)._addClass(c,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeAttr("role");
this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();var a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?(this._activate(b),void 0):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==
this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void 0)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",a);this._toggleClass(null,"ui-state-disabled",!!a);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!a)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,f=this.headers.length,d=this.headers.index(b.target),e=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(d+
1)%f];break;case c.LEFT:case c.UP:e=this.headers[(d-1+f)%f];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:e=this.headers[0];break;case c.END:e=this.headers[f-1]}e&&(a(b.target).attr("tabIndex",-1),a(e).attr("tabIndex",0),a(e).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?
(b.active=!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed",
"ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var b,c=this.options,d=c.heightStyle,e=this.element.parent();this.active=this._findActive(c.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");
this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var b=a(this),c=b.uniqueId().attr("id"),f=b.next(),d=f.uniqueId().attr("id");b.attr("aria-controls",d);f.attr("aria-labelledby",c)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",
"aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(c.event);"fill"===d?(b=e.height(),this.element.siblings(":visible").each(function(){var c=a(this),f=c.css("position");"absolute"!==f&&"fixed"!==f&&(b-=c.outerHeight(!0))}),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow",
"auto")):"auto"===d&&(b=0,this.headers.next().each(function(){var c=a(this).is(":visible");c||a(this).show();b=Math.max(b,a(this).css("height","").height());c||a(this).hide()}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,
b){c[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var c,f,d=this.options,e=this.active,g=a(b.currentTarget),h=g[0]===e[0],k=h&&d.collapsible,m=k?a():g.next(),n=e.next(),m={oldHeader:e,oldPanel:n,newHeader:k?a():g,newPanel:m};b.preventDefault();h&&!d.collapsible||!1===this._trigger("beforeActivate",b,m)||(d.active=
k?!1:this.headers.index(g),this.active=h?a():g,this._toggle(m),this._removeClass(e,"ui-accordion-header-active","ui-state-active"),d.icons&&(c=e.children(".ui-accordion-header-icon"),this._removeClass(c,null,d.icons.activeHeader)._addClass(c,null,d.icons.header)),h||(this._removeClass(g,"ui-accordion-header-collapsed")._addClass(g,"ui-accordion-header-active","ui-state-active"),d.icons&&(f=g.children(".ui-accordion-header-icon"),this._removeClass(f,null,d.icons.header)._addClass(f,null,d.icons.activeHeader)),
this._addClass(g.next(),"ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,f=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=f;this.options.animate?this._animate(c,f,b):(f.hide(),c.show(),this._toggleComplete(b));f.attr({"aria-hidden":"true"});f.prev().attr({"aria-selected":"false","aria-expanded":"false"});c.length&&f.length?f.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===
parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1);c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,c){var f,d,e,l=this,g=0,h=a.css("box-sizing"),r=a.length&&(!b.length||a.index()<b.index()),k=this.options.animate||{},r=r&&k.down||k,m=function(){l._toggleComplete(c)};return"number"==typeof r&&(e=r),"string"==typeof r&&(d=r),d=d||r.easing||k.easing,e=e||r.duration||k.duration,b.length?a.length?(f=a.show().outerHeight(),
b.animate(this.hideProps,{duration:e,easing:d,step:function(a,b){b.now=Math.round(a)}}),a.hide().animate(this.showProps,{duration:e,easing:d,complete:m,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?"content-box"===h&&(g+=c.now):"content"!==l.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-g),g=0)}}),void 0):b.animate(this.hideProps,e,d,m):a.animate(this.showProps,e,d,m)},_toggleComplete:function(a){var b=a.oldPanel,c=b.prev();this._removeClass(b,"ui-accordion-content-active");
this._removeClass(c,"ui-accordion-header-active")._addClass(c,"ui-accordion-header-collapsed");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});a.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,
tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target),f=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&f.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&
1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.target).closest(".ui-menu-item"),f=a(b.currentTarget);c[0]===f[0]&&(this._removeClass(f.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,f))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){!a.contains(this.element[0],
a.ui.safeActiveElement(this.document[0]))&&this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a);this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();
b.children().each(function(){var b=a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},_keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&
!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:c=!1;var f=this.previousFilter||"";var d=!1;var e=96<=b.keyCode&&105>=b.keyCode?""+(b.keyCode-96):String.fromCharCode(b.keyCode);clearTimeout(this.filterTimer);e===f?d=!0:e=f+e;f=this._filterMenuItems(e);f=d&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f;f.length||(e=String.fromCharCode(b.keyCode),
f=this._filterMenuItems(e));f.length?(this.focus(b,f),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}c&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b=this,c=this.options.icons.submenu;var d=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,
!!this.element.find(".ui-icon").length);var e=d.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var f=a(this),d=f.prev(),e=a("<span>").data("ui-menu-submenu-caret",!0);b._addClass(e,"ui-menu-icon","ui-icon "+c);d.attr("aria-haspopup","true").prepend(e);f.attr("aria-labelledby",d.attr("id"))});this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front");e=d.add(this.element).find(this.options.items);e.not(".ui-menu-item").each(function(){var c=
a(this);b._isDivider(c)&&b._addClass(c,"ui-menu-divider","ui-widget-content")});d=e.not(".ui-menu-item, .ui-menu-divider");var g=d.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(d,"ui-menu-item")._addClass(g,"ui-menu-item-wrapper");e.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,
b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",a+"");this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();var c=this.active.children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));c=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,f,d,e,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],
"borderTopWidth"))||0,f=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,d=b.offset().top-this.activeMenu.offset().top-c-f,e=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>d?this.activeMenu.scrollTop(e+d):d+h>g&&this.activeMenu.scrollTop(e+d-g+h))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer);
"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var f=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
f.length||(f=this.element);this._close(f);this.blur(b);this._removeClass(f.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=f},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&
this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var f;this.active&&(f="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.find(this.options.items)[b]());this.focus(c,f)},nextPage:function(b){var c,f,d;return this.active?(this.isLastItem()||(this._hasScroll()?(f=this.active.offset().top,d=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=
a(this),0>c.offset().top-f-d}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,f,d;return this.active?(this.isFirstItem()||(this._hasScroll()?(f=this.active.offset().top,d=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),0<c.offset().top-f+d}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first())),void 0):(this.next(b),
void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var c=RegExp("^"+b,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return c.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}});
a.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),g="textarea"===e,e="input"===e;this.isMultiLine=g||!e&&this._isContentEditable(this.element);this.valueMethod=this.element[g||
e?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(f){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;c=d=b=!1;var e=a.ui.keyCode;switch(f.keyCode){case e.PAGE_UP:b=!0;this._move("previousPage",f);break;case e.PAGE_DOWN:b=!0;this._move("nextPage",f);break;case e.UP:b=!0;this._keyEvent("previous",f);break;case e.DOWN:b=!0;this._keyEvent("next",f);break;case e.ENTER:this.menu.active&&
(b=!0,f.preventDefault(),this.menu.select(f));break;case e.TAB:this.menu.active&&this.menu.select(f);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(f),f.preventDefault());break;default:c=!0,this._searchTimeout(f)}},keypress:function(f){if(b)return b=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&f.preventDefault(),void 0;if(!c){var d=a.ui.keyCode;switch(f.keyCode){case d.PAGE_UP:this._move("previousPage",f);break;case d.PAGE_DOWN:this._move("nextPage",
f);break;case d.UP:this._keyEvent("previous",f);break;case d.DOWN:this._keyEvent("next",f)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}});this._initSource();this.menu=a("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");
this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(b,c){var f,d;return this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),
void 0):(d=c.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",b,{item:d})&&b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value),f=c.item.attr("aria-label")||d.value,f&&a.trim(f).length&&(this.liveRegion.children().hide(),a("<div>").text(f).appendTo(this.liveRegion)),void 0)},menuselect:function(b,c){var f=c.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=
d;this.selectedItem=f}));!1!==this._trigger("select",b,{item:f})&&this._value(f.value);this.term=this._value();this.close(b);this.selectedItem=f}});this.liveRegion=a("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");
this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var c=this.menu.element[0];return b.target===this.element[0]||b.target===c||a.contains(c,b.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var b=this.options.appendTo;return b&&
(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,f){f(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,f){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):
this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){var b=this.term===this._value(),c=this.menu.element.is(":visible"),f=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;b&&(!b||c||f)||(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):!1!==this._trigger("search",b)?this._search(a):void 0},_search:function(a){this.pending++;
this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},
close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this._off(this.document,"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({},b,{label:b.label||b.value,
value:b.value||b.label})})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var f=this;a.each(c,
function(a,c){f._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<div>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},
_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var f=RegExp(a.ui.autocomplete.escapeRegex(c),
"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var c;this._superApply(arguments);this.options.disabled||this.cancelSearch||(c=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),
a("<div>").text(c).appendTo(this.liveRegion))}});a.ui.autocomplete;var q=/ui-corner-([a-z]){2,6}/g;a.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},
_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,c=[];a.each(this.options.items,function(f,d){var e,g={};return d?"controlgroupLabel"===f?(e=b.element.find(d),
e.each(function(){var b=a(this);b.children(".ui-controlgroup-label-contents").length||b.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),c=c.concat(e.get()),void 0):(a.fn[f]&&(g=b["_"+f+"Options"]?b["_"+f+"Options"]("middle"):{classes:{}},b.element.find(d).each(function(){var d=a(this),e=d[f]("instance"),l=a.widget.extend({},g);"button"===f&&d.parent(".ui-spinner").length||(e||(e=d[f]()[f]("instance")),
e&&(l.classes=b._resolveClassesValues(l.classes,e)),d[f](l),l=d[f]("widget"),a.data(l[0],"ui-controlgroup-data",e?e:d[f]("instance")),c.push(l[0]))})),void 0):void 0});this.childWidgets=a(a.unique(c));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var c=a(this).data("ui-controlgroup-data");c&&c[b]&&c[b]()})},_updateCornerClass:function(a,b){b=this._buildSimpleOptions(b,"label").classes.label;this._removeClass(a,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all");
this._addClass(a,null,b)},_buildSimpleOptions:function(a,b){var c="vertical"===this.options.direction,f={classes:{}};return f.classes[b]={middle:"",first:"ui-corner-"+(c?"top":"left"),last:"ui-corner-"+(c?"bottom":"right"),only:"ui-corner-all"}[a],f},_spinnerOptions:function(a){a=this._buildSimpleOptions(a,"ui-spinner");return a.classes["ui-spinner-up"]="",a.classes["ui-spinner-down"]="",a},_buttonOptions:function(a){return this._buildSimpleOptions(a,"ui-button")},_checkboxradioOptions:function(a){return this._buildSimpleOptions(a,
"ui-checkboxradio-label")},_selectmenuOptions:function(a){var b="vertical"===this.options.direction;return{width:b?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(b?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(b?"top":"left")},last:{"ui-selectmenu-button-open":b?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(b?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[a]}},
_resolveClassesValues:function(b,c){var f={};return a.each(b,function(d){var e=c.options.classes[d]||"",e=a.trim(e.replace(q,""));f[d]=(e+" "+b[d]).replace(/\s+/g," ")}),f},_setOption:function(a,b){return"direction"===a&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(a,b),"disabled"===a?(this._callChildMethod(b?"disable":"enable"),void 0):(this.refresh(),void 0)},refresh:function(){var b=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===
this.options.direction&&this._addClass(null,"ui-helper-clearfix");this._initWidgets();var c=this.childWidgets;this.options.onlyVisible&&(c=c.filter(":visible"));c.length&&(a.each(["first","last"],function(a,f){(a=c[f]().data("ui-controlgroup-data"))&&b["_"+a.widgetName+"Options"]?(f=b["_"+a.widgetName+"Options"](1===c.length?"only":f),f.classes=b._resolveClassesValues(f.classes,a),a.element[a.widgetName](f)):b._updateCornerClass(c[f](),f)}),this._callChildMethod("refresh"))}});a.widget("ui.checkboxradio",
[a.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b,c,d=this,e=this._super()||{};return this._readType(),c=this.element.labels(),this.label=a(c[c.length-1]),this.label.length||a.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=3===this.nodeType?a(this).text():
this.outerHTML}),this.originalLabel&&(e.label=this.originalLabel),b=this.element[0].disabled,null!=b&&(e.disabled=b),e},_create:function(){var a=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,
"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();a&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover"));this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},
_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===b&&/radio|checkbox/.test(this.type)||a.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var b,c=this.element[0].name,d="input[name='"+a.ui.escapeSelector(c)+"']";return c?(b=this.form.length?a(this.form[0].elements).filter(d):
a(d).filter(function(){return 0===a(this).form().length}),b.not(this.element)):a([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b);"radio"===this.type&&this._getRadioGroup().each(function(){var b=a(this).checkboxradio("instance");b&&b._removeClass(b.label,
"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler();this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(a,b){return"label"!==a||b?(this._super(a,b),"disabled"===a?(this._toggleClass(this.label,null,"ui-state-disabled",b),this.element[0].disabled=b,void 0):(this.refresh(),void 0)):void 0},_updateIcon:function(b){var c="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=a("<span>"),this.iconSpace=a("<span> </span>"),
this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(c+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):c+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",c),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var a=
this.label.contents().not(this.element[0]);this.icon&&(a=a.not(this.icon[0]));this.iconSpace&&(a=a.not(this.iconSpace[0]));a.remove();this.label.append(this.options.label)},refresh:function(){var a=this.element[0].checked,b=this.element[0].disabled;this._updateIcon(a);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a);null!==this.options.label&&this._updateLabel();b!==this.options.disabled&&this._setOptions({disabled:b})}}]);a.ui.checkboxradio;a.widget("ui.button",{version:"1.12.1",
defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a,b=this._super()||{};return this.isInput=this.element.is("input"),a=this.element[0].disabled,null!=a&&(b.disabled=a),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(b.label=this.originalLabel),b},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=
!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(b){b.keyCode===a.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?
this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(b,c){var f=(b="iconPosition"!==b)?this.options.iconPosition:c,d="top"===f||"bottom"===f;this.icon?b&&this._removeClass(this.icon,
null,this.options.icon):(this.icon=a("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));b&&this._addClass(this.icon,null,c);this._attachIcon(f);d?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(f))},
_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?"append":"prepend"](this.icon)},_setOptions:function(a){var b=void 0===a.icon?this.options.icon:a.icon;(void 0===a.showLabel?this.options.showLabel:a.showLabel)||b||(a.showLabel=
!0);this._super(a)},_setOption:function(a,b){"icon"===a&&(b?this._updateIcon(a,b):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===a&&this._updateIcon(a,b);"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!b),this._updateTooltip());"label"===a&&(this.isInput?this.element.val(b):(this.element.html(b),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(a,b);"disabled"===a&&(this._toggleClass(null,
"ui-state-disabled",b),this.element[0].disabled=b,b&&this.element.blur())},refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a});this._updateTooltip()}});!1!==a.uiBackCompat&&(a.widget("ui.button",a.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);
!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end");this._super()},_setOption:function(a,b){return"text"===a?(this._super("showLabel",b),void 0):("showLabel"===a&&(this.options.text=
b),"icon"===a&&(this.options.icons.primary=b),"icons"===a&&(b.primary?(this._super("icon",b.primary),this._super("iconPosition","beginning")):b.secondary&&(this._super("icon",b.secondary),this._super("iconPosition","end"))),this._superApply(arguments),void 0)}}),a.fn.button=function(b){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(a.ui.checkboxradio||
a.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(a.fn.button),a.fn.buttonset=function(){return a.ui.controlgroup||a.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&
arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});a.ui.button;a.extend(a.ui,{datepicker:{version:"1.12.1"}});var t;a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return g(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var f=b.nodeName.toLowerCase();var d="div"===f||"span"===f;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var e=this._newInst(a(b),
d);e.settings=a.extend({},c||{});"input"===f?this._connectDatepicker(b,e):d&&this._inlineDatepicker(b,e)},_newInst:function(b,c){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var f=a(b);c.append=a([]);c.trigger=a([]);f.hasClass(this.markerClassName)||
(this._attachments(f,c),f.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var f,d;var e=this._get(c,"appendText");var g=this._get(c,"isRTL");c.append&&c.append.remove();e&&(c.append=a("<span class='"+this._appendClass+"'>"+e+"</span>"),b[g?"before":"after"](c.append));b.off("focus",this._showDatepicker);c.trigger&&
c.trigger.remove();e=this._get(c,"showOn");"focus"!==e&&"both"!==e||b.on("focus",this._showDatepicker);"button"!==e&&"both"!==e||(f=this._get(c,"buttonText"),d=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:d,alt:f,title:f}):a("<button type='button'></button>").addClass(this._triggerClass).html(d?a("<img/>").attr({src:d,alt:f,title:f}):f)),b[g?"before":"after"](c.trigger),c.trigger.on("click",function(){return a.datepicker._datepickerShowing&&
a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,f,d,e=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(d=f=c=0;a.length>d;d++)a[d].length>c&&(c=a[d].length,f=d);return f},e.setMonth(b(this._get(a,g.match(/MM/)?
"monthNames":"monthNamesShort"))),e.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay()));a.input.attr("size",this._formatDate(a,e).length)}},_inlineDatepicker:function(b,c){var f=a(b);f.hasClass(this.markerClassName)||(f.addClass(this.markerClassName).append(c.dpDiv),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,
c,d,e,h){var f,l,k,r,w;b=this._dialogInst;return b||(this.uuid+=1,f="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+f+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b)),g(b.settings,e||{}),c=c&&c.constructor===Date?this._formatDate(b,c):c,this._dialogInput.val(c),this._pos=h?h.length?
h:[h.pageX,h.pageY]:null,this._pos||(l=document.documentElement.clientWidth,k=document.documentElement.clientHeight,r=document.documentElement.scrollLeft||document.body.scrollLeft,w=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+r,k/2-150+w]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),b.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),
a.data(this._dialogInput[0],"datepicker",b),this},_destroyDatepicker:function(b){var c,f=a(b),d=a.data(b,"datepicker");f.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,"datepicker"),"input"===c?(d.append.remove(),d.trigger.remove(),f.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===c||"span"===c)&&f.removeClass(this.markerClassName).empty(),t===d&&(t=
null))},_enableDatepicker:function(b){var c,f,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(f=d.children("."+this._inlineClass),f.children().removeClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,
function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,f,d=a(b),e=a.data(b,"datepicker");d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(f=d.children("."+this._inlineClass),f.children().addClass("ui-state-disabled"),f.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(l){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(b,c,d){var f,e,l,h,k=this._getInst(b);return 2===arguments.length&&"string"==
typeof c?"defaults"===c?a.extend({},a.datepicker._defaults):k?"all"===c?a.extend({},k.settings):this._get(k,c):null:(f=c||{},"string"==typeof c&&(f={},f[c]=d),k&&(this._curInst===k&&this._hideDatepicker(),e=this._getDateDatepicker(b,!0),l=this._getMinMaxDate(k,"min"),h=this._getMinMaxDate(k,"max"),g(k.settings,f),null!==l&&void 0!==f.dateFormat&&void 0===f.minDate&&(k.settings.minDate=this._formatDate(k,l)),null!==h&&void 0!==f.dateFormat&&void 0===f.maxDate&&(k.settings.maxDate=this._formatDate(k,
h)),"disabled"in f&&(f.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(a(b),k),this._autoSize(k),this._setDate(k,e),this._updateAlternate(k),this._updateDatepicker(k)),void 0)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){(a=this._getInst(a))&&(this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(a,
b){a=this._getInst(a);return a&&!a.inline&&this._setDateFromField(a,b),a?this._getDate(a):null},_doKeyDown:function(b){var c,f,d,e=a.datepicker._getInst(b.target),g=!0,h=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();g=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",e.dpDiv),d[0]&&a.datepicker._selectDay(b.target,e.selectedMonth,e.selectedYear,d[0]),c=a.datepicker._get(e,
"onSelect"),c?(f=a.datepicker._formatDate(e),c.apply(e.input?e.input[0]:null,[f,e])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(e,"stepBigMonths"):-a.datepicker._get(e,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(e,"stepBigMonths"):+a.datepicker._get(e,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);
g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D");g=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(e,"stepBigMonths"):-a.datepicker._get(e,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&
a.datepicker._adjustDate(b.target,h?-1:1,"D");g=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(e,"stepBigMonths"):+a.datepicker._get(e,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,f,d=a.datepicker._getInst(b.target);
return a.datepicker._get(d,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),f=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">f||!c||-1<c.indexOf(f)):void 0},_doKeyUp:function(b){var c;b=a.datepicker._getInst(b.target);if(b.input.val()!==b.lastVal)try{(c=a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b)))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),
a.datepicker._updateDatepicker(b))}catch(r){}return!0},_showDatepicker:function(c){if(c=c.target||c,"input"!==c.nodeName.toLowerCase()&&(c=a("input",c.parentNode)[0]),!a.datepicker._isDisabledDatepicker(c)&&a.datepicker._lastInput!==c){var f,d,e,h;var k=a.datepicker._getInst(c);a.datepicker._curInst&&a.datepicker._curInst!==k&&(a.datepicker._curInst.dpDiv.stop(!0,!0),k&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var m=(m=a.datepicker._get(k,"beforeShow"))?
m.apply(c,[c,k]):{};!1!==m&&(g(k.settings,m),k.lastVal=null,a.datepicker._lastInput=c,a.datepicker._setDateFromField(k),a.datepicker._inDialog&&(c.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(c),a.datepicker._pos[1]+=c.offsetHeight),f=!1,a(c).parents().each(function(){return f|="fixed"===a(this).css("position"),!f}),d={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,k.dpDiv.empty(),k.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),
a.datepicker._updateDatepicker(k),d=a.datepicker._checkOffset(k,d,f),k.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"}),k.inline||(e=a.datepicker._get(k,"showAnim"),h=a.datepicker._get(k,"duration"),k.dpDiv.css("z-index",b(a(c))+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[e]?k.dpDiv.show(e,a.datepicker._get(k,"showOptions"),h):k.dpDiv[e||"show"](e?h:null),a.datepicker._shouldFocusInput(k)&&k.input.trigger("focus"),
a.datepicker._curInst=k))}},_updateDatepicker:function(b){this.maxRows=4;t=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var c,f=this._getNumberOfMonths(b),d=f[1],g=b.dpDiv.find("."+this._dayOverClass+" a");0<g.length&&e.apply(g.get(0));b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!==f[0]||1!==f[1]?"add":"remove")+"Class"]("ui-datepicker-multi");
b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.trigger("focus");b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,
c,d){var f=b.dpDiv.outerWidth(),e=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,l=b.input?b.input.outerHeight():0,h=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),k=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?f-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+l?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+f>h&&h>f?Math.abs(c.left+f-h):
0),c.top-=Math.min(c.top,c.top+e>k&&k>e?Math.abs(e+l):0),c},_findPos:function(b){for(var c,f=this._getInst(b),f=this._get(f,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[f?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,f,d,e,g=this._curInst;!g||b&&g!==a.data(b,"datepicker")||this._datepickerShowing&&(c=this._get(g,"showAnim"),f=this._get(g,"duration"),d=function(){a.datepicker._tidyDialog(g)},a.effects&&(a.effects.effect[c]||
a.effects[c])?g.dpDiv.hide(c,a.datepicker._get(g,"showOptions"),f,d):g.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?f:null,d),c||d(),this._datepickerShowing=!1,e=this._get(g,"onClose"),e&&e.apply(g.input?g.input[0]:null,[g.input?g.input.val():"",g]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},
_checkExternalClick:function(b){if(a.datepicker._curInst){b=a(b.target);var c=a.datepicker._getInst(b[0]);(!(b[0].id===a.datepicker._mainDivId||0!==b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var f=
this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c;b=a(b);var f=this._getInst(b[0]);this._get(f,"gotoCurrent")&&f.currentDay?(f.selectedDay=f.currentDay,f.drawMonth=f.selectedMonth=f.currentMonth,f.drawYear=f.selectedYear=f.currentYear):(c=new Date,f.selectedDay=c.getDate(),f.drawMonth=f.selectedMonth=c.getMonth(),f.drawYear=f.selectedYear=c.getFullYear());this._notifyChange(f);
this._adjustDate(b)},_selectMonthYear:function(b,c,d){b=a(b);var f=this._getInst(b[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(b)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,
this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){b=a(b);this._selectDate(b,"")},_selectDate:function(b,c){b=a(b);var f=this._getInst(b[0]);c=null!=c?c:this._formatDate(f);f.input&&f.input.val(c);this._updateAlternate(f);(b=this._get(f,"onSelect"))?b.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change");f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.trigger("focus"),
this._lastInput=null)},_updateAlternate:function(b){var c,f,d,e=this._get(b,"altField");e&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),f=this._getDate(b),d=this.formatDate(c,f,this._getFormatConfig(b)),a(e).val(d))},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b;a=new Date(a.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),b=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,d){if(null==
b||null==c)throw"Invalid arguments";if(c="object"==typeof c?""+c:c+"",""===c)return null;var f,e,g,l=0,h=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),k=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,r=(d?d.dayNames:null)||this._defaults.dayNames,m=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort;d=(d?d.monthNames:null)||this._defaults.monthNames;var n=-1,q=-1,p=-1,t=-1,M=!1,R=function(a){a=b.length>
f+1&&b.charAt(f+1)===a;return a&&f++,a},S=function(a){var b=R(a),b="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2;a=RegExp("^\\d{"+("y"===a?b:1)+","+b+"}");a=c.substring(l).match(a);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},J=function(b,f,d){var e=-1;b=a.map(R(b)?d:f,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(b,function(a,b){a=b[1];return c.substr(l,a.length).toLowerCase()===a.toLowerCase()?(e=b[0],l+=a.length,
!1):void 0}),-1!==e)return e+1;throw"Unknown name at position "+l;},Q=function(){if(c.charAt(l)!==b.charAt(f))throw"Unexpected literal at position "+l;l++};for(f=0;b.length>f;f++)if(M)"'"!==b.charAt(f)||R("'")?Q():M=!1;else switch(b.charAt(f)){case "d":p=S("d");break;case "D":J("D",k,r);break;case "o":t=S("o");break;case "m":q=S("m");break;case "M":q=J("M",m,d);break;case "y":n=S("y");break;case "@":var D=new Date(S("@"));n=D.getFullYear();q=D.getMonth()+1;p=D.getDate();break;case "!":D=new Date((S("!")-
this._ticksTo1970)/1E4);n=D.getFullYear();q=D.getMonth()+1;p=D.getDate();break;case "'":R("'")?Q():M=!0;break;default:Q()}if(c.length>l&&(g=c.substr(l),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===n?n=(new Date).getFullYear():100>n&&(n+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h>=n?0:-100)),-1<t)for(q=1,p=t;!(e=this._getDaysInMonth(n,q-1),e>=p);)q++,p-=e;if(D=this._daylightSavingAdjust(new Date(n,q-1,p)),D.getFullYear()!==n||D.getMonth()+1!==q||D.getDate()!==
p)throw"Invalid date";return D},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var f,d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||
this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var l=function(b){b=a.length>f+1&&a.charAt(f+1)===b;return b&&f++,b},h=function(a,b,c){b=""+b;if(l(a))for(;c>b.length;)b="0"+b;return b},k=function(a,b,c,f){return l(a)?f[b]:c[b]},r="",m=!1;if(b)for(f=0;a.length>f;f++)if(m)"'"!==a.charAt(f)||l("'")?r+=a.charAt(f):m=!1;else switch(a.charAt(f)){case "d":r+=h("d",b.getDate(),2);break;case "D":r+=k("D",b.getDay(),d,e);break;case "o":r+=h("o",Math.round(((new Date(b.getFullYear(),
b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":r+=h("m",b.getMonth()+1,2);break;case "M":r+=k("M",b.getMonth(),g,c);break;case "y":r+=l("y")?b.getFullYear():(10>b.getFullYear()%100?"0":"")+b.getFullYear()%100;break;case "@":r+=b.getTime();break;case "!":r+=1E4*b.getTime()+this._ticksTo1970;break;case "'":l("'")?r+="'":m=!0;break;default:r+=a.charAt(f)}return r},_possibleChars:function(a){var b,c="",f=!1,d=function(c){c=a.length>b+1&&a.charAt(b+
1)===c;return c&&b++,c};for(b=0;a.length>b;b++)if(f)"'"!==a.charAt(b)||d("'")?c+=a.charAt(b):f=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":d("'")?c+="'":f=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null,d=this._getDefaultDate(a),
e=d,g=this._getFormatConfig(a);try{e=this.parseDate(c,f,g)||d}catch(z){f=b?"":f}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=f?e.getDate():0;a.currentMonth=f?e.getMonth():0;a.currentYear=f?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var f=function(a){var b=new Date;return b.setDate(b.getDate()+
a),b},e=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(P){}for(var f=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,d=f.getFullYear(),e=f.getMonth(),f=f.getDate(),g=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=g.exec(c);l;){switch(l[2]||"d"){case "d":case "D":f+=parseInt(l[1],10);break;case "w":case "W":f+=7*parseInt(l[1],10);break;case "m":case "M":e+=parseInt(l[1],10);f=Math.min(f,a.datepicker._getDaysInMonth(d,
e));break;case "y":case "Y":d+=parseInt(l[1],10),f=Math.min(f,a.datepicker._getDaysInMonth(d,e))}l=g.exec(c)}return new Date(d,e,f)};c=null==c||""===c?d:"string"==typeof c?e(c):"number"==typeof c?isNaN(c)?d:f(c):new Date(c.getTime());return c=c&&"Invalid Date"==""+c?d:c,c&&(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)),this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){return a?(a.setHours(12<a.getHours()?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var f=
!b,d=a.selectedMonth,e=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();d===a.selectedMonth&&e===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(f?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),f="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).on(this.getAttribute("data-event"),{prev:function(){a.datepicker._adjustDate(f,-c,"M")},next:function(){a.datepicker._adjustDate(f,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(f)},selectDay:function(){return a.datepicker._selectDay(f,+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(f,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(f,this,"Y"),!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,f,d,e,g,h,k=new Date,k=this._daylightSavingAdjust(new Date(k.getFullYear(),k.getMonth(),k.getDate())),m=this._get(a,"isRTL");var n=this._get(a,"showButtonPanel");var q=this._get(a,"hideIfNoPrevNext");var p=this._get(a,"navigationAsDateFormat");var t=this._getNumberOfMonths(a),
B=this._get(a,"showCurrentAtPos");var M=this._get(a,"stepMonths");var R=1!==t[0]||1!==t[1],S=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(a,"min"),Q=this._getMinMaxDate(a,"max"),B=a.drawMonth-B,D=a.drawYear;if(0>B&&(B+=12,D--),Q){var H=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-t[0]*t[1]+1,Q.getDate()));for(H=J&&J>H?J:H;this._daylightSavingAdjust(new Date(D,B,1))>H;)B--,0>B&&(B=11,D--)}a.drawMonth=
B;a.drawYear=D;H=this._get(a,"prevText");H=p?this.formatDate(H,this._daylightSavingAdjust(new Date(D,B-M,1)),this._getFormatConfig(a)):H;H=this._canAdjustMonth(a,-1,D,B)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(m?"e":"w")+"'>"+H+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(m?"e":"w")+"'>"+H+"</span></a>";
var C=this._get(a,"nextText");C=p?this.formatDate(C,this._daylightSavingAdjust(new Date(D,B+M,1)),this._getFormatConfig(a)):C;q=this._canAdjustMonth(a,1,D,B)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+C+"'><span class='ui-icon ui-icon-circle-triangle-"+(m?"w":"e")+"'>"+C+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+C+"'><span class='ui-icon ui-icon-circle-triangle-"+(m?"w":"e")+"'>"+C+"</span></a>";M=this._get(a,
"currentText");C=this._get(a,"gotoCurrent")&&a.currentDay?S:k;M=p?this.formatDate(M,C,this._getFormatConfig(a)):M;p=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";n=n?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(m?p:"")+(this._isInRange(a,C)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+
M+"</button>":"")+(m?"":p)+"</div>":"";p=parseInt(this._get(a,"firstDay"),10);p=isNaN(p)?0:p;M=this._get(a,"showWeek");C=this._get(a,"dayNames");var N=this._get(a,"dayNamesMin");var ka=this._get(a,"monthNames");var ha=this._get(a,"monthNamesShort");var ga=this._get(a,"beforeShowDay");var qa=this._get(a,"showOtherMonths");var X=this._get(a,"selectOtherMonths");var Aa=this._getDefaultDate(a);var ya="";for(c=0;t[0]>c;c++){var da="";this.maxRows=4;for(f=0;t[1]>f;f++){if(d=this._daylightSavingAdjust(new Date(D,
B,a.selectedDay)),b=" ui-corner-all",e="",R){if(e+="<div class='ui-datepicker-group",1<t[1])switch(f){case 0:e+=" ui-datepicker-group-first";b=" ui-corner-"+(m?"right":"left");break;case t[1]-1:e+=" ui-datepicker-group-last";b=" ui-corner-"+(m?"left":"right");break;default:e+=" ui-datepicker-group-middle",b=""}e+="'>"}e+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+b+"'>"+(/all|left/.test(b)&&0===c?m?q:H:"")+(/all|right/.test(b)&&0===c?m?H:q:"")+this._generateMonthYearHeader(a,
B,D,J,Q,0<c||0<f,ka,ha)+"</div><table class='ui-datepicker-calendar'><thead><tr>";var ea=M?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(b=0;7>b;b++){var fa=(b+p)%7;ea+="<th scope='col'"+(5<=(b+p+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+C[fa]+"'>"+N[fa]+"</span></th>"}e+=ea+"</tr></thead><tbody>";ea=this._getDaysInMonth(D,B);D===a.selectedYear&&B===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,ea));b=(this._getFirstDayOfMonth(D,B)-p+7)%
7;ea=Math.ceil((b+ea)/7);this.maxRows=ea=R?this.maxRows>ea?this.maxRows:ea:ea;fa=this._daylightSavingAdjust(new Date(D,B,1-b));for(g=0;ea>g;g++){e+="<tr>";var za=M?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(fa)+"</td>":"";for(b=0;7>b;b++){var Ha=ga?ga.apply(a.input?a.input[0]:null,[fa]):[!0,""];var pa=(h=fa.getMonth()!==B)&&!X||!Ha[0]||J&&J>fa||Q&&fa>Q;za+="<td class='"+(5<=(b+p+6)%7?" ui-datepicker-week-end":"")+(h?" ui-datepicker-other-month":"")+(fa.getTime()===d.getTime()&&
B===a.selectedMonth&&a._keyEvent||Aa.getTime()===fa.getTime()&&Aa.getTime()===d.getTime()?" "+this._dayOverClass:"")+(pa?" "+this._unselectableClass+" ui-state-disabled":"")+(h&&!qa?"":" "+Ha[1]+(fa.getTime()===S.getTime()?" "+this._currentClass:"")+(fa.getTime()===k.getTime()?" ui-datepicker-today":""))+"'"+(h&&!qa||!Ha[2]?"":" title='"+Ha[2].replace(/'/g,"&#39;")+"'")+(pa?"":" data-handler='selectDay' data-event='click' data-month='"+fa.getMonth()+"' data-year='"+fa.getFullYear()+"'")+">"+(h&&!qa?
"&#xa0;":pa?"<span class='ui-state-default'>"+fa.getDate()+"</span>":"<a class='ui-state-default"+(fa.getTime()===k.getTime()?" ui-state-highlight":"")+(fa.getTime()===S.getTime()?" ui-state-active":"")+(h?" ui-priority-secondary":"")+"' href='#'>"+fa.getDate()+"</a>")+"</td>";fa.setDate(fa.getDate()+1);fa=this._daylightSavingAdjust(fa)}e+=za+"</tr>"}B++;11<B&&(B=0,D++);e+="</tbody></table>"+(R?"</div>"+(0<t[0]&&f===t[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");da+=e}ya+=da}return ya+=
n,a._keyEvent=!1,ya},_generateMonthYearHeader:function(a,b,c,d,e,g,h,k){var f,l=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),w=this._get(a,"showMonthAfterYear"),m="<div class='ui-datepicker-title'>",n="";if(g||!l)n+="<span class='ui-datepicker-month'>"+h[b]+"</span>";else{h=d&&d.getFullYear()===c;var v=e&&e.getFullYear()===c;n+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(f=0;12>f;f++)(!h||f>=d.getMonth())&&(!v||e.getMonth()>=f)&&(n+="<option value='"+
f+"'"+(f===b?" selected='selected'":"")+">"+k[f]+"</option>");n+="</select>"}if(w||(m+=n+(!g&&l&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",g||!r)m+="<span class='ui-datepicker-year'>"+c+"</span>";else{k=this._get(a,"yearRange").split(":");var y=(new Date).getFullYear();h=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?y+parseInt(a,10):parseInt(a,10);return isNaN(a)?y:a};b=h(k[0]);k=Math.max(b,h(k[1]||""));b=d?Math.max(b,d.getFullYear()):b;k=e?Math.min(k,e.getFullYear()):
k;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";k>=b;b++)a.yearshtml+="<option value='"+b+"'"+(b===c?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";m+=a.yearshtml;a.yearshtml=null}return m+=this._get(a,"yearSuffix"),w&&(m+=(!g&&l&&r?"":"&#xa0;")+n),m+="</div>"},_adjustInstDate:function(a,b,c){var f=a.selectedYear+("Y"===c?b:0),d=a.selectedMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(f,d))+("D"===c?b:
0);f=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(f,d,b)));a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&c>b?c:b;return a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=
this._get(a,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));return 0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c,f,d=this._getMinMaxDate(a,"min"),e=this._getMinMaxDate(a,"max"),g=null,h=null;a=this._get(a,"yearRange");return a&&(c=a.split(":"),f=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=f),c[1].match(/[+\-].*/)&&(h+=f)),(!d||b.getTime()>=d.getTime())&&(!e||b.getTime()<=e.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");
return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,
a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).on("mousedown",a.datepicker._checkExternalClick),a.datepicker.initialized=!0);0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&
"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))};a.datepicker=new c;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.12.1";a.datepicker;a.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",
autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,
open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),
index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);this.options.disabled&&(this.options.disabled=!1);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&a.fn.draggable&&this._makeDraggable();this.options.resizable&&
a.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var b=
a.parent.children().eq(a.index);b.length&&b[0]!==this.element[0]?b.before(this.element):a.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&!1!==this._trigger("beforeClose",b)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||a.ui.safeBlur(a.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,
function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var f=!1,d=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),d=Math.max.apply(null,d);return d>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",d+1),f=!0),f&&!c&&this._trigger("focus",b),f},open:function(){var b=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=
!0,this.opener=a(a.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]"));a.length||(a=this.element.find(":tabbable"));a.length||
(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).trigger("focus")},_keepFocus:function(b){function c(){var b=a.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===b||a.contains(this.uiDialog[0],b)||this._focusTabbable()}b.preventDefault();c.call(this);this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,
"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),this.close(b),void 0;if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),f=c.filter(":last");b.target!==f[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){f.trigger("focus")}),
b.preventDefault()):(this._delay(function(){d.trigger("focus")}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=a("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||
this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:a("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});var b=a("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(b,"ui-dialog-title");this._title(b);
this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=a("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var b=
this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?(this._removeClass(this.uiDialog,"ui-dialog-buttons"),void 0):(a.each(c,function(c,d){d=a.isFunction(d)?{click:d,text:c}:d;d=a.extend({type:"button"},d);var f=d.click;c={icon:d.icon,iconPosition:d.iconPosition,showLabel:d.showLabel,icons:d.icons,text:d.text};delete d.click;delete d.icon;delete d.iconPosition;delete d.showLabel;delete d.icons;"boolean"==typeof d.text&&
delete d.text;a("<button></button>",d).button(c).appendTo(b.uiButtonSet).on("click",function(){f.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,f){c._addClass(a(this),
"ui-dialog-dragging");c._blockFrames();c._trigger("dragStart",d,b(f))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(f,e){var g=e.offset.left-c.document.scrollLeft(),h=e.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(0<=g?"+":"")+g+" top"+(0<=h?"+":"")+h,of:c.window};c._removeClass(a(this),"ui-dialog-dragging");c._unblockFrames();c._trigger("dragStop",f,b(e))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,
position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,g=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:e,start:function(d,f){c._addClass(a(this),"ui-dialog-resizing");c._blockFrames();c._trigger("resizeStart",d,b(f))},resize:function(a,d){c._trigger("resize",
a,b(d))},stop:function(f,e){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),g=g.top-c.document.scrollTop();d.height=c.uiDialog.height();d.width=c.uiDialog.width();d.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=g?"+":"")+g,of:c.window};c._removeClass(a(this),"ui-dialog-resizing");c._unblockFrames();c._trigger("resizeStop",f,b(e))}}).css("position",g)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget();this._focusedElement=a(b.target)}})},
_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);-1!==c&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");
a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,f={};a.each(b,function(a,b){c._setOption(a,b);a in c.sizeRelatedOptions&&(d=!0);a in c.resizableRelatedOptions&&(f[a]=b)});d&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,c){var d,f,e=this.uiDialog;"disabled"!==b&&(this._super(b,c),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),
"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:a("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&(d=e.is(":data(ui-draggable)"),d&&!c&&e.draggable("destroy"),!d&&c&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&(f=e.is(":data(ui-resizable)"),f&&!c&&e.resizable("destroy"),f&&"string"==typeof c&&e.resizable("option","handles",c),f||!1===c||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},
_size:function(){var a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});a.minWidth>a.width&&(a.width=a.minWidth);var b=this.uiDialog.css({height:"auto",width:a.width}).outerHeight();var c=Math.max(0,a.minHeight-b);var d="number"==typeof a.maxHeight?Math.max(0,a.maxHeight-b):"none";"auto"===a.height?this.element.css({minHeight:c,maxHeight:d,height:"auto"}):this.element.height(Math.max(0,a.height-b));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=
!0;this._delay(function(){b=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=a("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&
this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays"));this.overlay.remove();this.overlay=null}}});!1!==a.uiBackCompat&&a.widget("ui.dialog",a.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,b){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(b);
this._superApply(arguments)}});a.ui.dialog;a.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=a("<div>").appendTo(this.element);
this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),void 0)},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=!1===a,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,
Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value;this._super(a);this.options.value=this._constrainedValue(b);this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b));this._super(a,b)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",a);this._toggleClass(null,"ui-state-disabled",!!a)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=
this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(c.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,
"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));b===this.options.max&&this._trigger("complete")}});a.widget("ui.selectmenu",[a.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",
collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=!1;this.menuItems=a()},_drawButton:function(){var b=this,c=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,
{click:function(a){this.button.focus();a.preventDefault()}});this.element.hide();this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");var d=a("<span>").appendTo(this.button);this._addClass(d,"ui-selectmenu-icon",
"ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(c).appendTo(this.button);!1!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){b._rendered||b._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());
this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(a,c){a.preventDefault();b._setSelection();b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){c=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&c.index!==b.focusIndex&&(b._trigger("focus",a,{item:c}),b.isOpen||b._select(c,a));b.focusIndex=c.index;b.button.attr("aria-activedescendant",b.menuItems.eq(c.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");
this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a,b=this.element.find("option");this.menu.empty();this._parseOptions(b);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=
this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;b.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&
(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var c=a("<span>");return this._setText(c,
b.label),this._addClass(c,"ui-selectmenu-text"),c},_renderMenu:function(b,c){var d=this,f="";a.each(c,function(c,e){var g;e.optgroup!==f&&(g=a("<li>",{text:e.optgroup}),d._addClass(g,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),g.appendTo(b),f=e.optgroup);d._renderItemData(b,e)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>"),f=a("<div>",{title:c.element.attr("title")});
return c.disabled&&this._addClass(d,null,"ui-state-disabled"),this._setText(f,c.label),d.append(f).appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex).parent("li"):(c=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),d+=":not(.ui-state-disabled)");a="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](d).eq(-1):c[a+"All"](d).eq(0);a.length&&this.menuInstance.focus(b,a)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},
_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+a.ui.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=
a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection();this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b);c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):
this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,
b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a));this._setAria(a);this._trigger("select",b,{item:a});a.index!==c&&this._trigger("change",b,{item:a});this.close(b)},_setAria:function(a){a=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":a,"aria-activedescendant":a});this.menu.attr("aria-activedescendant",a)},_setOption:function(a,b){if("icons"===a){var c=this.button.find("span.ui-icon");
this._removeClass(c,null,this.options.icons.button)._addClass(c,null,b.button)}this._super(a,b);"appendTo"===a&&this.menuWrap.appendTo(this._appendTo());"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a);this.menuInstance.option("disabled",a);this.button.attr("aria-disabled",a);this._toggleClass(this.button,null,"ui-state-disabled",a);this.element.prop("disabled",a);a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=
this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",
!this.isOpen)},_resizeButton:function(){var a=this.options.width;return!1===a?(this.button.css("width",""),void 0):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();return a.disabled=this.element.prop("disabled"),a},_parseOptions:function(b){var c=this,d=[];b.each(function(b,f){d.push(c._parseOption(a(f),
b))});this.items=d},_parseOption:function(a,b){var c=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:c.attr("label")||"",disabled:c.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);a.widget("ui.slider",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all",
"ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=
!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b=this.options;var c=this.element.find(".ui-slider-handle"),d=[];var e=b.values&&b.values.length||1;c.length>e&&(c.slice(e).remove(),c=c.slice(0,e));for(b=c.length;e>b;b++)d.push("<span tabindex='0'></span>");this.handles=c.add(a(d.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=a("<div>").appendTo(this.element),
this._addClass(this.range,"ui-slider-range")),("min"===b.range||"max"===b.range)&&this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(b){var c,d,f,e,g,h,k,m,n=this,p=this.options;
return p.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),f=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-n.values(b));(f>c||f===c&&(b===n._lastChangedValue||n.values(b)===p.min))&&(f=c,e=a(this),g=b)}),h=this._start(b,g),!1===h?!1:(this._mouseSliding=!0,this._handleIndex=g,this._addClass(e,null,"ui-state-active"),e.trigger("focus"),
k=e.offset(),m=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=m?{left:0,top:0}:{left:b.pageX-k.left-e.width()/2,top:b.pageY-k.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,
this._handleIndex,b),!1},_mouseStop:function(a){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,f,e;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,1<d&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),f=this._valueMax()-this._valueMin(),e=this._valueMin()+d*f,this._trimAlignValue(e)},_uiHash:function(a,b,c){var d={handle:this.handles[a],handleIndex:a,value:void 0!==b?b:this.value()};return this._hasMultipleValues()&&(d.value=void 0!==b?b:this.values(a),d.values=c||this.values()),d},_hasMultipleValues:function(){return this.options.values&&
this.options.values.length},_start:function(a,b){return this._trigger("start",a,this._uiHash(b))},_slide:function(a,b,c){var d,f,e=this.value(),g=this.values();this._hasMultipleValues()&&(f=this.values(b?0:1),e=this.values(b),2===this.options.values.length&&!0===this.options.range&&(c=0===b?Math.min(f,c):Math.max(f,c)),g[b]=c);c!==e&&(d=this._trigger("slide",a,this._uiHash(b,c,g)),!1!==d&&(this._hasMultipleValues()?this.values(b,c):this.value(c)))},_stop:function(a,b){this._trigger("stop",a,this._uiHash(b))},
_change:function(a,b){this._keySliding||this._mouseSliding||(this._lastChangedValue=b,this._trigger("change",a,this._uiHash(b)))},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d;if(1<arguments.length)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this._hasMultipleValues()?
this._values(b):this.value();var f=this.options.values;var e=arguments[0];for(d=0;f.length>d;d+=1)f[d]=this._trimAlignValue(e[d]),this._change(null,d);this._refreshValue()},_setOption:function(b,c){var d=0;switch("range"===b&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(d=this.options.values.length),this._super(b,
c),b){case "orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();this.options.range&&this._refreshRange(c);this.handles.css("horizontal"===c?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(b=d-1;0<=b;b--)this._change(null,b);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=
!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(a){this._super(a);this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){return this._trimAlignValue(this.options.value)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],this._trimAlignValue(b);if(this._hasMultipleValues()){b=this.options.values.slice();for(c=0;b.length>c;c+=1)b[c]=this._trimAlignValue(b[c]);
return b}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b;a-=c;return 2*Math.abs(c)>=b&&(a+=0<c?b:-b),parseFloat(a.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),c=this.options.step,a=Math.round((a-b)/c)*c+b;a>this.options.max&&(a-=c);this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=
this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){a=""+a;var b=a.indexOf(".");return-1===b?0:a.length-b-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""});"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,c,d,e,g,h=this.options.range,k=this.options,m=
this,n=this._animateOff?!1:k.animate,p={};this._hasMultipleValues()?this.handles.each(function(d){c=100*((m.values(d)-m._valueMin())/(m._valueMax()-m._valueMin()));p["horizontal"===m.orientation?"left":"bottom"]=c+"%";a(this).stop(1,1)[n?"animate":"css"](p,k.animate);!0===m.options.range&&("horizontal"===m.orientation?(0===d&&m.range.stop(1,1)[n?"animate":"css"]({left:c+"%"},k.animate),1===d&&m.range[n?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:k.animate})):(0===d&&m.range.stop(1,1)[n?"animate":
"css"]({bottom:c+"%"},k.animate),1===d&&m.range[n?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:k.animate})));b=c}):(d=this.value(),e=this._valueMin(),g=this._valueMax(),c=g!==e?(d-e)/(g-e)*100:0,p["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[n?"animate":"css"](p,k.animate),"min"===h&&"horizontal"===this.orientation&&this.range.stop(1,1)[n?"animate":"css"]({width:c+"%"},k.animate),"max"===h&&"horizontal"===this.orientation&&this.range.stop(1,1)[n?"animate":"css"]({width:100-
c+"%"},k.animate),"min"===h&&"vertical"===this.orientation&&this.range.stop(1,1)[n?"animate":"css"]({height:c+"%"},k.animate),"max"===h&&"vertical"===this.orientation&&this.range.stop(1,1)[n?"animate":"css"]({height:100-c+"%"},k.animate))},_handleEvents:{keydown:function(b){var c,d,f,e=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),
!this._keySliding&&(this._keySliding=!0,this._addClass(a(b.target),null,"ui-state-active"),c=this._start(b,e),!1===c))return}switch(f=this.options.step,c=d=this._hasMultipleValues()?this.values(e):this.value(),b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/
this.numPages);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+f);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-f)}this._slide(b,e,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),this._removeClass(a(b.target),null,"ui-state-active"))}}});a.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",
widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),
!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),c=this.element;return a.each(["min","max","step"],function(a,d){a=c.attr(d);null!=a&&a.length&&(b[d]=a)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,
void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a),void 0)},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]===a.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),
this.previous=d,this._delay(function(){this.previous=d}))}var d=this.element[0]===a.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();b.preventDefault();c.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?!1===
this._start(b)?!1:(this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",
-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:!1});this.buttons.last().button({icon:this.options.icons.down,showLabel:!1});this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},
_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_start:function(a){return this.spinning||!1!==this._trigger("start",a)?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,
b,c)},a);this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1);c=this._adjustValue(c+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:c})||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),
a},_precisionOf:function(a){a=""+a;var b=a.indexOf(".");return-1===b?0:a.length-b-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){var c,d,f;return"culture"===
a||"numberFormat"===a?(c=this._parse(this.element.val()),this.options[a]=b,this.element.val(this._format(c)),void 0):(("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(d=this.buttons.first().find(".ui-icon"),this._removeClass(d,null,this.options.icons.up),this._addClass(d,null,b.up),f=this.buttons.last().find(".ui-icon"),this._removeClass(f,null,this.options.icons.down),this._addClass(f,null,b.down)),this._super(a,b),void 0)},_setOptionDisabled:function(a){this._super(a);
this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!a);this.element.prop("disabled",!!a);this.buttons.button(a?"disable":"enable")},_setOptions:h(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):
a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c)));this.element.val(a);this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");
this.uiSpinner.replaceWith(this.element)},stepUp:h(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:h(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:h(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:h(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?(h(this._value).call(this,a),
void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}});!1!==a.uiBackCompat&&a.widget("ui.spinner",a.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});a.ui.spinner;a.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all",
"ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(b){var c=b.href.replace(a,"");var d=location.href.replace(a,"");try{c=decodeURIComponent(c)}catch(v){}try{d=decodeURIComponent(d)}catch(v){}return 1<b.hash.length&&c===d}}(),_create:function(){var b=this,c=this.options;this.running=!1;this._addClass("ui-tabs",
"ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,c.collapsible);this._processTabs();c.active=this._initialActive();a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):a();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,
d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,f){return a(f).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&!1===b&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=
a(a.ui.safeActiveElement(this.document[0])).closest("li"),d=this.tabs.index(c),f=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),this._activate(d),void 0;case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),
this._activate(d===this.options.active?!1:d),void 0;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,f);b.ctrlKey||b.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){return b.altKey&&
b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){for(var d=this.tabs.length-1;-1!==a.inArray((b>d&&(b=0),0>b&&(b=d),b),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).trigger("focus"),a},_setOption:function(a,b){return"active"===a?
(this._activate(b),void 0):(this._super(a,b),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",null,b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b),void 0)},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});
this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",
"aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().attr("role",
"tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=
this.tabs.map(function(){return a("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=a();this.anchors.each(function(c,d){var f,e,g,h=a(d).uniqueId().attr("id"),l=a(d).closest("li"),k=l.attr("aria-controls");b._isLocal(d)?(f=d.hash,g=f.substring(1),e=b.element.find(b._sanitizeSelector(f))):(g=l.attr("aria-controls")||a({}).uniqueId()[0].id,f="#"+g,e=b.element.find(f),e.length||(e=b._createPanel(g),e.insertAfter(b.panels[c-1]||b.tablist)),
e.attr("aria-live","polite"));e.length&&(b.panels=b.panels.add(e));k&&l.data("ui-tabs-aria-controls",k);l.attr({"aria-controls":g,"aria-labelledby":h});e.attr("aria-labelledby",h)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",
b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var c,d;a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(d=0;c=this.tabs[d];d++)c=a(c),!0===b||-1!==a.inArray(d,b)?(c.attr("aria-disabled","true"),this._addClass(c,null,"ui-state-disabled")):(c.removeAttr("aria-disabled"),this._removeClass(c,null,"ui-state-disabled"));this.options.disabled=b;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var c={};b&&a.each(b.split(" "),
function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(a){a.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=
a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,f=a(b.currentTarget).closest("li"),e=f[0]===d[0],g=
e&&c.collapsible,h=g?a():this._getPanelForTab(f),k=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:k,newTab:g?a():f,newPanel:h};b.preventDefault();f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||e&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=g?!1:this.tabs.index(f),this.active=e?a():f,this.xhr&&this.xhr.abort(),k.length||h.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(f),b),this._toggle(b,
d))},_toggle:function(b,c){function d(){e.running=!1;e._trigger("activate",b,c)}function f(){e._addClass(c.newTab.closest("li"),"ui-tabs-active","ui-state-active");g.length&&e.options.show?e._show(g,e.options.show,d):(g.show(),d())}var e=this,g=c.newPanel,h=c.oldPanel;this.running=!0;h.length&&this.options.hide?this._hide(h,this.options.hide,function(){e._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active");f()}):(this._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),
h.hide(),f());h.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var c;b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),c=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,
currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(b){return"string"==typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+a.ui.escapeSelector(b)+"']"))),b},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});
this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(void 0===b?c=!1:(b=this._getIndex(b),c=a.isArray(c)?a.map(c,function(a){return a!==b?a:null}):a.map(this.tabs,function(a,c){return c!==b?c:null})),this._setOptionDisabled(c))},disable:function(b){var c=
this.options.disabled;if(!0!==c){if(void 0===b)c=!0;else{if(b=this._getIndex(b),-1!==a.inArray(b,c))return;c=a.isArray(c)?a.merge([b],c).sort():[b]}this._setOptionDisabled(c)}},load:function(b,c){b=this._getIndex(b);var d=this,f=this.tabs.eq(b);b=f.find(".ui-tabs-anchor");var e=this._getPanelForTab(f),g={tab:f,panel:e},h=function(a,b){"abort"===b&&d.panels.stop(!1,!0);d._removeClass(f,"ui-tabs-loading");e.removeAttr("aria-busy");a===d.xhr&&delete d.xhr};this._isLocal(b[0])||(this.xhr=a.ajax(this._ajaxSettings(b,
c,g)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(f,"ui-tabs-loading"),e.attr("aria-busy","true"),this.xhr.done(function(a,b,f){setTimeout(function(){e.html(a);d._trigger("load",c,g);h(f,b)},1)}).fail(function(a,b){setTimeout(function(){h(a,b)},1)})))},_ajaxSettings:function(b,c,d){var f=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(b,e){return f._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:e},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");
return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});a.ui.tabs;a.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},
show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))},_removeDescribedBy:function(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,d);-1!==c&&d.splice(c,1);b.removeData("ui-tooltip-id");(d=a.trim(d.join(" ")))?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",
focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=a("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=a([])},_setOption:function(b,c){var d=this;this._super(b,c);"content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b.element)})},_setOptionDisabled:function(a){this[a?"_disable":"_enable"]()},_disable:function(){var b=this;
a.each(this.tooltips,function(c,d){c=a.Event("blur");c.target=c.currentTarget=d.element[0];b.close(c,!0)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var b=a(this);return b.is("[title]")?b.data("ui-tooltip-title",b.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))});this.disabledTitles=a([])},open:function(b){var c=
this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0));d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._registerCloseHandlers(b,d),this._updateContent(d,
b))},_updateContent:function(a,b){var c,d=this.options.content,f=this,e=b?b.type:null;return"string"==typeof d||d.nodeType||d.jquery?this._open(b,a,d):(c=d.call(a[0],function(c){f._delay(function(){a.data("ui-tooltip-open")&&(b&&(b.type=e),this._open(b,a,c))})}),c&&this._open(b,a,c),void 0)},_open:function(b,c,d){function f(a){h.of=a;l.is(":hidden")||l.position(h)}var e,g,h=a.extend({},this.options.position);if(d){if(e=this._find(c))return e.tooltip.find(".ui-tooltip-content").html(d),void 0;c.is("[title]")&&
(b&&"mouseover"===b.type?c.attr("title",""):c.removeAttr("title"));e=this._tooltip(c);var l=e.tooltip;this._addDescribedBy(c,l.attr("id"));l.find(".ui-tooltip-content").html(d);this.liveRegion.children().hide();d=a("<div>").html(l.find(".ui-tooltip-content").html());d.removeAttr("name").find("[name]").removeAttr("name");d.removeAttr("id").find("[id]").removeAttr("id");d.appendTo(this.liveRegion);this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:f}),f(b)):l.position(a.extend({of:c},
this.options.position));l.hide();this._show(l,this.options.show);this.options.track&&this.options.show&&this.options.show.delay&&(g=this.delayedShow=setInterval(function(){l.is(":visible")&&(f(h.of),clearInterval(g))},a.fx.interval));this._trigger("open",b,{tooltip:l})}},_registerCloseHandlers:function(b,c){var d={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),b.currentTarget=c[0],this.close(b,!0))}};c[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(c).tooltip)});
b&&"mouseover"!==b.type||(d.mouseleave="close");b&&"focusin"!==b.type||(d.focusout="close");this._on(!0,c,d)},close:function(b){var c,d=this,f=a(b?b.currentTarget:this.element),e=this._find(f);return e?(c=e.tooltip,e.closing||(clearInterval(this.delayedShow),f.data("ui-tooltip-title")&&!f.attr("title")&&f.attr("title",f.data("ui-tooltip-title")),this._removeDescribedBy(f),e.hiding=!0,c.stop(!0),this._hide(c,this.options.hide,function(){d._removeTooltip(a(this))}),f.removeData("ui-tooltip-open"),this._off(f,
"mouseleave focusout keyup"),f[0]!==this.element[0]&&this._off(f,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title);delete d.parents[b]}),e.closing=!0,this._trigger("close",b,{tooltip:c}),e.hiding||(e.closing=!1)),void 0):(f.removeData("ui-tooltip-open"),void 0)},_tooltip:function(b){var c=a("<div>").attr("role","tooltip"),d=a("<div>").appendTo(c),f=c.uniqueId().attr("id");return this._addClass(d,"ui-tooltip-content"),
this._addClass(c,"ui-tooltip","ui-widget ui-widget-content"),c.appendTo(this._appendTo(b)),this.tooltips[f]={element:b,tooltip:c}},_find:function(a){return(a=a.data("ui-tooltip-id"))?this.tooltips[a]:null},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_appendTo:function(a){a=a.closest(".ui-front, dialog");return a.length||(a=this.document[0].body),a},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var f=a.Event("blur");d=d.element;f.target=f.currentTarget=
d[0];b.close(f,!0);a("#"+c).remove();d.data("ui-tooltip-title")&&(d.attr("title")||d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))});this.liveRegion.remove()}});!1!==a.uiBackCompat&&a.widget("ui.tooltip",a.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var a=this._superApply(arguments);return this.options.tooltipClass&&a.tooltip.addClass(this.options.tooltipClass),a}});a.ui.tooltip;a.effects={effect:{}};(function(a,b){function c(a,b,c){var d=k[b.type]||{};
return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=h(),f=d._rgba=[];return c=c.toLowerCase(),p(g,function(a,e){var g;a=(a=e.re.exec(c))&&e.parse(a);e=e.space||"rgba";return a?(g=d[e](a),d[l[e].cache]=g[l[e].cache],f=d._rgba=g._rgba,!1):b}),f.length?("0,0,0,0"===f.join()&&a.extend(f,q.transparent),d):q[c]}function f(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var e=/^([\-+])=\s*(\d+\.?\d*)/,
g=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+
a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],h=a.Color=function(b,c,d,f){return new a.Color.fn.parse(b,c,d,f)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},
k={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=h.support={},n=a("<p>")[0],p=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)";m.rgba=-1<n.style.backgroundColor.indexOf("rgba");p(l,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});h.fn=a.extend(h.prototype,{parse:function(f,e,g,k){if(f===b)return this._rgba=[null,null,null,null],this;(f.jquery||f.nodeType)&&(f=a(f).css(e),e=b);var m=this,n=a.type(f),r=this._rgba=[];return e!==b&&(f=[f,e,g,k],
n="array"),"string"===n?this.parse(d(f)||q._default):"array"===n?(p(l.rgba.props,function(a,b){r[b.idx]=c(f[b.idx],b)}),this):"object"===n?(f instanceof h?p(l,function(a,b){f[b.cache]&&(m[b.cache]=f[b.cache].slice())}):p(l,function(b,d){var e=d.cache;p(d.props,function(a,b){if(!m[e]&&d.to){if("alpha"===a||null==f[a])return;m[e]=d.to(m._rgba)}m[e][b.idx]=c(f[a],b,!0)});m[e]&&0>a.inArray(null,m[e].slice(0,3))&&(m[e][3]=1,d.from&&(m._rgba=d.from(m[e])))}),this):b},is:function(a){var c=h(a),d=!0,f=this;
return p(l,function(a,e){var g,h=c[e.cache];return h&&(g=f[e.cache]||e.to&&e.to(f._rgba)||[],p(e.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return p(l,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=h(a);a=d._space();var f=l[a],e=0===this.alpha()?h("transparent"):this,g=e[f.cache]||f.to(e._rgba),m=g.slice();return d=d[f.cache],p(f.props,function(a,f){a=f.idx;var e=g[a],h=d[a],l=k[f.type]||{};null!==h&&
(null===e?m[a]=h:(l.mod&&(h-e>l.mod/2?e+=l.mod:e-h>l.mod/2&&(e-=l.mod)),m[a]=c((h-e)*b+e,f)))}),this[a](m)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),f=h(b)._rgba;return h(a.map(c,function(a,b){return(1-d)*f[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&
(a=2<b?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});h.fn.parse.prototype=h.fn;l.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,f=a[1]/255,
e=a[2]/255;a=a[3];var g=Math.max(d,f,e),h=Math.min(d,f,e),l=g-h,k=g+h,m=.5*k;return b=h===g?0:d===g?60*(f-e)/l+360:f===g?60*(e-d)/l+120:60*(d-f)/l+240,c=0===l?0:.5>=m?l/k:l/(2-k),[Math.round(b)%360,c,m,null==a?1:a]};l.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*f(d,c,b+1/3)),Math.round(255*f(d,c,b)),Math.round(255*f(d,c,b-1/3)),a]};p(l,function(d,f){var g=f.props,l=
f.cache,k=f.to,m=f.from;h.fn[d]=function(d){if(k&&!this[l]&&(this[l]=k(this._rgba)),d===b)return this[l].slice();var f,e=a.type(d),n="array"===e||"object"===e?d:arguments,r=this[l].slice();return p(g,function(a,b){a=n["object"===e?a:b.idx];null==a&&(a=r[b.idx]);r[b.idx]=c(a,b)}),m?(f=h(m(r)),f[l]=r,f):h(r)};p(g,function(b,c){h.fn[b]||(h.fn[b]=function(f){var g,h=a.type(f),l="alpha"===b?this._hsla?"hsla":"rgba":d,k=this[l](),m=k[c.idx];return"undefined"===h?m:("function"===h&&(f=f.call(this,m),h=a.type(f)),
null==f&&c.empty?this:("string"===h&&(g=e.exec(f),g&&(f=m+parseFloat(g[2])*("+"===g[1]?1:-1))),k[c.idx]=f,this[l](k)))})})});h.hook=function(b){b=b.split(" ");p(b,function(b,c){a.cssHooks[c]={set:function(b,f){var e,g="";if("transparent"!==f&&("string"!==a.type(f)||(e=d(f)))){if(f=h(e||f),!m.rgba&&1!==f._rgba[3]){for(e="backgroundColor"===c?b.parentNode:b;(""===g||"transparent"===g)&&e&&e.style;)try{g=a.css(e,"backgroundColor"),e=e.parentNode}catch(H){}f=f.blend(g&&"transparent"!==g?g:"_default")}f=
f.toRgbaString()}try{b.style[c]=f}catch(H){}}};a.fx.step[c]=function(b){b.colorInit||(b.start=h(b.elem,c),b.end=h(b.end),b.colorInit=!0);a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})};h.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");a.cssHooks.borderColor={expand:function(a){var b={};return p(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}};
var q=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(a);(function(){function b(b){var c=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(b=c.length;b--;){var f=
c[b];"string"==typeof c[f]&&(d[a.camelCase(f)]=c[f])}else for(f in c)"string"==typeof c[f]&&(d[f]=c[f]);return d}var c=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(b){("none"!==b.end&&!b.setAttr||1===b.pos&&!b.setAttr)&&(a.style(b.elem,c,b.end),b.setAttr=!0)}});a.fn.addBack||(a.fn.addBack=
function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});a.effects.animateClass=function(f,e,g,h){var l=a.speed(e,g,h);return this.queue(function(){var e=a(this),g=e.attr("class")||"",h=l.children?e.find("*").addBack():e,h=h.map(function(){return{el:a(this),start:b(this)}});var k=function(){a.each(c,function(a,b){f[b]&&e[b+"Class"](f[b])})};k();h=h.map(function(){this.end=b(this.el[0]);var c=this.start,f=this.end,e,g={};for(e in f){var h=f[e];c[e]!==h&&(d[e]||(a.fx.step[e]||
!isNaN(parseFloat(h)))&&(g[e]=h))}return this.diff=g,this});e.attr("class",g);h=h.map(function(){var b=this,c=a.Deferred(),d=a.extend({},l,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()});a.when.apply(a,h.get()).done(function(){k();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});l.complete.call(e[0])})})};a.fn.extend({addClass:function(b){return function(c,d,f,e){return d?a.effects.animateClass.call(this,{add:c},
d,f,e):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,f,e){return 1<arguments.length?a.effects.animateClass.call(this,{remove:c},d,f,e):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,f,e,g){return"boolean"==typeof d||void 0===d?f?a.effects.animateClass.call(this,d?{add:c}:{remove:c},f,e,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,f,e)}}(a.fn.toggleClass),switchClass:function(b,c,d,f,e){return a.effects.animateClass.call(this,
{add:c,remove:b},d,f,e)}})})();(function(){function b(b,c,d,f){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(f=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(f=d,d=c,c={}),a.isFunction(d)&&(f=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=f||c.complete,b}function c(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?
a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}function d(a,b){var c=b.outerWidth();b=b.outerHeight();a=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(a)||["",0,c,b,0];return{top:parseFloat(a[1])||0,right:"auto"===a[2]?c:parseFloat(a[2]),bottom:"auto"===a[3]?b:parseFloat(a[3]),left:parseFloat(a[4])||0}}a.expr&&a.expr.filters&&a.expr.filters.animated&&(a.expr.filters.animated=function(b){return function(c){return!!a(c).data("ui-effects-animated")||
b(c)}}(a.expr.filters.animated));!1!==a.uiBackCompat&&a.extend(a.effects,{save:function(a,b){for(var c=0,d=b.length;d>c;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c,d=0,f=b.length;f>d;d++)null!==b[d]&&(c=a.data("ui-effects-"+b[d]),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),
"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:b.width(),height:b.height()},e=document.activeElement;try{e.id}catch(E){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).trigger("focus"),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top",
"left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(f),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).trigger("focus")),b}});a.extend(a.effects,{version:"1.12.1",define:function(b,c,d){return d||(d=c,c="effect"),a.effects.effect[b]=d,a.effects.effect[b].mode=
c,d},scaledDimensions:function(a,b,c){if(0===b)return{height:0,width:0,outerHeight:0,outerWidth:0};var d="horizontal"!==c?(b||100)/100:1;b="vertical"!==c?(b||100)/100:1;return{height:a.height()*b,width:a.width()*d,outerHeight:a.outerHeight()*b,outerWidth:a.outerWidth()*d}},clipToBox:function(a){return{width:a.clip.right-a.clip.left,height:a.clip.bottom-a.clip.top,left:a.clip.left,top:a.clip.top}},unshift:function(a,b,c){var d=a.queue();1<b&&d.splice.apply(d,[1,0].concat(d.splice(b,c)));a.dequeue()},
saveStyle:function(a){a.data("ui-effects-style",a[0].style.cssText)},restoreStyle:function(a){a[0].style.cssText=a.data("ui-effects-style")||"";a.removeData("ui-effects-style")},mode:function(a,b){a=a.is(":hidden");return"toggle"===b&&(b=a?"show":"hide"),(a?"hide"===b:"show"===b)&&(b="none"),b},getBaseline:function(a,b){switch(a[0]){case "top":var c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":a=0;break;case "center":a=.5;break;case "right":a=
1;break;default:a=a[1]/b.width}return{x:a,y:c}},createPlaceholder:function(b){var c,d=b.css("position"),f=b.position();return b.css({marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()),/^(static|relative)/.test(d)&&(d="absolute",c=a("<"+b[0].nodeName+">").insertAfter(b).css({display:/^(inline|ruby)/.test(b.css("display"))?"inline-block":"block",visibility:"hidden",
marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight"),"float":b.css("float")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).addClass("ui-effects-placeholder"),b.data("ui-effects-placeholder",c)),b.css({position:d,left:f.left,top:f.top}),c},removePlaceholder:function(a){var b=a.data("ui-effects-placeholder");b&&(b.remove(),a.removeData("ui-effects-placeholder"))},cleanUp:function(b){a.effects.restoreStyle(b);a.effects.removePlaceholder(b)},
setTransition:function(b,c,d,f){return f=f||{},a.each(c,function(a,c){a=b.cssUnit(c);0<a[0]&&(f[c]=a[0]*d+a[1])}),f}});a.fn.extend({effect:function(){function c(b){function c(){h.removeData("ui-effects-animated");a.effects.cleanUp(h);"hide"===d.mode&&h.hide();g()}function g(){a.isFunction(l)&&l.call(h[0]);a.isFunction(b)&&b()}var h=a(this);d.mode=m.shift();!1===a.uiBackCompat||e?"none"===d.mode?(h[k](),g()):f.call(h[0],d,c):(h.is(":hidden")?"hide"===k:"show"===k)?(h[k](),g()):f.call(h[0],d,g)}var d=
b.apply(this,arguments),f=a.effects.effect[d.effect],e=f.mode,g=d.queue,h=g||"fx",l=d.complete,k=d.mode,m=[],n=function(b){var c=a(this),d=a.effects.mode(c,k)||e;c.data("ui-effects-animated",!0);m.push(d);e&&("show"===d||d===e&&"hide"===d)&&c.show();e&&"none"===d||a.effects.saveStyle(c);a.isFunction(b)&&b()};return a.fx.off||!f?k?this[k](d.duration,l):this.each(function(){l&&l.call(this)}):!1===g?this.each(n).each(c):this.queue(h,n).queue(h,c)},show:function(a){return function(d){if(c(d))return a.apply(this,
arguments);var f=b.apply(this,arguments);return f.mode="show",this.effect.call(this,f)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var f=b.apply(this,arguments);return f.mode="hide",this.effect.call(this,f)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var f=b.apply(this,arguments);return f.mode="toggle",this.effect.call(this,f)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em",
"px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])}),d},cssClip:function(a){return a?this.css("clip","rect("+a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px)"):d(this.css("clip"),this)},transfer:function(b,c){var d=a(this),f=a(b.to),e="fixed"===f.css("position"),g=a("body"),h=e?g.scrollTop():0,g=e?g.scrollLeft():0,l=f.offset(),f={top:l.top-h,left:l.left-g,height:f.innerHeight(),width:f.innerWidth()},l=d.offset(),k=a("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(b.className).css({top:l.top-
h,left:l.left-g,height:d.innerHeight(),width:d.innerWidth(),position:e?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){k.remove();a.isFunction(c)&&c()})}});a.fx.step.clip=function(b){b.clipInit||(b.start=a(b.elem).cssClip(),"string"==typeof b.end&&(b.end=d(b.end,b.elem)),b.clipInit=!0);a(b.elem).cssClip({top:b.pos*(b.end.top-b.start.top)+b.start.top,right:b.pos*(b.end.right-b.start.right)+b.start.right,bottom:b.pos*(b.end.bottom-b.start.bottom)+b.start.bottom,left:b.pos*(b.end.left-
b.start.left)+b.start.left})}})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*
b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})();a.effects.define("blind","hide",function(b,c){var d={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},f=a(this),e=b.direction||"up",g=f.cssClip(),h={clip:a.extend({},g)},l=a.effects.createPlaceholder(f);h.clip[d[e][0]]=
h.clip[d[e][1]];"show"===b.mode&&(f.cssClip(h.clip),l&&l.css(a.effects.clipToBox(h)),h.clip=g);l&&l.animate(a.effects.clipToBox(h),b.duration,b.easing);f.animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});a.effects.define("bounce",function(b,c){var d,f=a(this),e=b.mode,g="hide"===e,e="show"===e;var h=b.direction||"up";var l=b.distance,k=b.times||5,m=2*k+(e||g?1:0),n=b.duration/m;b=b.easing;var p="up"===h||"down"===h?"top":"left",q="up"===h||"left"===h,t=0,B=f.queue().length;a.effects.createPlaceholder(f);
h=f.css(p);l||(l=f["top"===p?"outerHeight":"outerWidth"]()/3);e&&(d={opacity:1},d[p]=h,f.css("opacity",0).css(p,q?2*-l:2*l).animate(d,n,b));g&&(l/=Math.pow(2,k-1));d={};for(d[p]=h;k>t;t++){var M={};M[p]=(q?"-=":"+=")+l;f.animate(M,n,b).animate(d,n,b);l=g?2*l:l/2}g&&(M={opacity:0},M[p]=(q?"-=":"+=")+l,f.animate(M,n,b));f.queue(c);a.effects.unshift(f,B,m+1)});a.effects.define("clip","hide",function(b,c){var d={},f=a(this);var e=b.direction||"vertical";var g="both"===e,h=g||"horizontal"===e,g=g||"vertical"===
e;e=f.cssClip();d.clip={top:g?(e.bottom-e.top)/2:e.top,right:h?(e.right-e.left)/2:e.right,bottom:g?(e.bottom-e.top)/2:e.bottom,left:h?(e.right-e.left)/2:e.left};a.effects.createPlaceholder(f);"show"===b.mode&&(f.cssClip(d.clip),d.clip=e);f.animate(d,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});a.effects.define("drop","hide",function(b,c){var d=a(this),f="show"===b.mode;var e=b.direction||"left";var g="up"===e||"down"===e?"top":"left",h="up"===e||"left"===e?"-=":"+=",l="+="===h?"-=":
"+=",k={opacity:0};a.effects.createPlaceholder(d);e=b.distance||d["top"===g?"outerHeight":"outerWidth"](!0)/2;k[g]=h+e;f&&(d.css(k),k[g]=l+e,k.opacity=1);d.animate(k,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});a.effects.define("explode","hide",function(b,c){function d(){q.push(this);q.length===g*h&&(l.css({visibility:"visible"}),a(q).remove(),c())}var f,e,g=b.pieces?Math.round(Math.sqrt(b.pieces)):3,h=g,l=a(this),k="show"===b.mode,m=l.show().css("visibility","hidden").offset(),n=
Math.ceil(l.outerWidth()/h),p=Math.ceil(l.outerHeight()/g),q=[];for(f=0;g>f;f++){var t=m.top+f*p;var B=f-(g-1)/2;for(e=0;h>e;e++){var M=m.left+e*n;var R=e-(h-1)/2;l.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-e*n,top:-f*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n,height:p,left:M+(k?R*n:0),top:t+(k?B*p:0),opacity:k?0:1}).animate({left:M+(k?0:R*n),top:t+(k?0:B*p),opacity:k?1:0},b.duration||500,b.easing,
d)}}});a.effects.define("fade","toggle",function(b,c){var d="show"===b.mode;a(this).css("opacity",d?0:1).animate({opacity:d?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:c})});a.effects.define("fold","hide",function(b,c){var d=a(this),f=b.mode,e="show"===f,f="hide"===f,g=b.size||15,h=/([0-9]+)%/.exec(g),k=b.horizFirst?["right","bottom"]:["bottom","right"],l=b.duration/2,m=a.effects.createPlaceholder(d),n=d.cssClip(),p={clip:a.extend({},n)},q={clip:a.extend({},n)},t=[n[k[0]],n[k[1]]],
B=d.queue().length;h&&(g=parseInt(h[1],10)/100*t[f?0:1]);p.clip[k[0]]=g;q.clip[k[0]]=g;q.clip[k[1]]=0;e&&(d.cssClip(q.clip),m&&m.css(a.effects.clipToBox(q)),q.clip=n);d.queue(function(c){m&&m.animate(a.effects.clipToBox(p),l,b.easing).animate(a.effects.clipToBox(q),l,b.easing);c()}).animate(p,l,b.easing).animate(q,l,b.easing).queue(c);a.effects.unshift(d,B,4)});a.effects.define("highlight","show",function(b,c){var d=a(this),f={backgroundColor:d.css("backgroundColor")};"hide"===b.mode&&(f.opacity=
0);a.effects.saveStyle(d);d.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});a.effects.define("size",function(b,c){var d,e,f=a(this),g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],k=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=b.mode,m="effect"!==l,n=b.scale||"both",p=b.origin||["middle","center"],q=f.css("position"),t=f.position(),B=a.effects.scaledDimensions(f),
M=b.from||B,R=b.to||a.effects.scaledDimensions(f,0);a.effects.createPlaceholder(f);"show"===l&&(e=M,M=R,R=e);var S=M.height/B.height;var J=M.width/B.width;var Q=R.height/B.height;var D=R.width/B.width;("box"===n||"both"===n)&&(S!==Q&&(M=a.effects.setTransition(f,h,S,M),R=a.effects.setTransition(f,h,Q,R)),J!==D&&(M=a.effects.setTransition(f,k,J,M),R=a.effects.setTransition(f,k,D,R)));("content"===n||"both"===n)&&S!==Q&&(M=a.effects.setTransition(f,g,S,M),R=a.effects.setTransition(f,g,Q,R));p&&(d=a.effects.getBaseline(p,
B),M.top=(B.outerHeight-M.outerHeight)*d.y+t.top,M.left=(B.outerWidth-M.outerWidth)*d.x+t.left,R.top=(B.outerHeight-R.outerHeight)*d.y+t.top,R.left=(B.outerWidth-R.outerWidth)*d.x+t.left);f.css(M);"content"!==n&&"both"!==n||(h=h.concat(["marginTop","marginBottom"]).concat(g),k=k.concat(["marginLeft","marginRight"]),f.find("*[width]").each(function(){var c=a(this),d=a.effects.scaledDimensions(c),f={height:d.height*S,width:d.width*J,outerHeight:d.outerHeight*S,outerWidth:d.outerWidth*J},d={height:d.height*
Q,width:d.width*D,outerHeight:d.height*Q,outerWidth:d.width*D};S!==Q&&(f=a.effects.setTransition(c,h,S,f),d=a.effects.setTransition(c,h,Q,d));J!==D&&(f=a.effects.setTransition(c,k,J,f),d=a.effects.setTransition(c,k,D,d));m&&a.effects.saveStyle(c);c.css(f);c.animate(d,b.duration,b.easing,function(){m&&a.effects.restoreStyle(c)})}));f.animate(R,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var b=f.offset();0===R.opacity&&f.css("opacity",M.opacity);m||(f.css("position","static"===
q?"relative":q).offset(b),a.effects.saveStyle(f));c()}})});a.effects.define("scale",function(b,c){var d=a(this),f=b.mode,f=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"effect"!==f?0:100),d=a.extend(!0,{from:a.effects.scaledDimensions(d),to:a.effects.scaledDimensions(d,f,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(d.from.opacity=1,d.to.opacity=0);a.effects.effect.size.call(this,d,c)});a.effects.define("puff","hide",function(b,c){b=a.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,
10)||150});a.effects.effect.scale.call(this,b,c)});a.effects.define("pulsate","show",function(b,c){var d=a(this),f=b.mode,e="show"===f,f=2*(b.times||5)+(e||"hide"===f?1:0),g=b.duration/f,h=0,k=1,l=d.queue().length;for((e||!d.is(":visible"))&&(d.css("opacity",0).show(),h=1);f>k;k++)d.animate({opacity:h},g,b.easing),h=1-h;d.animate({opacity:h},g,b.easing);d.queue(c);a.effects.unshift(d,l,f+1)});a.effects.define("shake",function(b,c){var d=1,e=a(this),f=b.direction||"left",g=b.distance||20,h=b.times||
3,k=2*h+1,l=Math.round(b.duration/k),m="up"===f||"down"===f?"top":"left",f="up"===f||"left"===f,n={},p={},q={},t=e.queue().length;a.effects.createPlaceholder(e);n[m]=(f?"-=":"+=")+g;p[m]=(f?"+=":"-=")+2*g;q[m]=(f?"-=":"+=")+2*g;for(e.animate(n,l,b.easing);h>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(n,l/2,b.easing).queue(c);a.effects.unshift(e,t,k+1)});a.effects.define("slide","show",function(b,c){var d=a(this),e={up:["bottom","top"],down:["top","bottom"],
left:["right","left"],right:["left","right"]},f=b.mode,g=b.direction||"left",h="up"===g||"down"===g?"top":"left",k="up"===g||"left"===g,l=b.distance||d["top"===h?"outerHeight":"outerWidth"](!0),m={};a.effects.createPlaceholder(d);var n=d.cssClip();var p=d.position()[h];m[h]=(k?-1:1)*l+p;m.clip=d.cssClip();m.clip[e[g][1]]=m.clip[e[g][0]];"show"===f&&(d.cssClip(m.clip),d.css(h,m[h]),m.clip=n,m[h]=p);d.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:c})});!1!==a.uiBackCompat&&a.effects.define("transfer",
function(b,c){a(this).transfer(b,c)})});var jquery_ui_css_rules='\n\n.ui-draggable-handle{-ms-touch-action:none;touch-action:none}.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:100}.ui-state-disabled{cursor:default!important;pointer-events:none}.ui-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-icon-block{left:50%;margin-left:-8px;display:block}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-resizable{position:absolute}.ui-resizable-handle{position:absolute;font-size:0.1px;display:block;-ms-touch-action:none;touch-action:none}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-selectable{-ms-touch-action:none;touch-action:none}.ui-selectable-helper{position:absolute;z-index:100;border:1px dotted black}.ui-sortable-handle{-ms-touch-action:none;touch-action:none}.ui-accordion .ui-accordion-header{display:block;cursor:pointer;position:relative;margin:2px 0 0 0;padding:.5em .5em .5em .7em;font-size:100%}.ui-accordion .ui-accordion-content{padding:1em 2.2em;border-top:0;overflow:auto}.ui-autocomplete{position:absolute;top:0;left:0;cursor:default}.ui-menu{list-style:none;padding:0;margin:0;display:block;outline:0}.ui-menu .ui-menu{position:absolute}.ui-menu .ui-menu-item{margin:0;cursor:pointer;list-style-image:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}.ui-menu .ui-menu-item-wrapper{position:relative;padding:3px 1em 3px .4em}.ui-menu .ui-menu-divider{margin:5px 0;height:0;font-size:0;line-height:0;border-width:1px 0 0 0}.ui-menu .ui-state-focus,.ui-menu .ui-state-active{margin:-1px}.ui-menu-icons{position:relative}.ui-menu-icons .ui-menu-item-wrapper{padding-left:2em}.ui-menu .ui-icon{position:absolute;top:0;bottom:0;left:.2em;margin:auto 0}.ui-menu .ui-menu-icon{left:auto;right:0}.ui-button{padding:.4em 1em;display:inline-block;position:relative;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2em;box-sizing:border-box;text-indent:-9999px;white-space:nowrap}input.ui-button.ui-button-icon-only{text-indent:0}.ui-button-icon-only .ui-icon{position:absolute;top:50%;left:50%;margin-top:-8px;margin-left:-8px}.ui-button.ui-icon-notext .ui-icon{padding:0;width:2.1em;height:2.1em;text-indent:-9999px;white-space:nowrap}input.ui-button.ui-icon-notext .ui-icon{width:auto;height:auto;text-indent:0;white-space:normal;padding:.4em 1em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-controlgroup{vertical-align:middle;display:inline-block}.ui-controlgroup > .ui-controlgroup-item{float:left;margin-left:0;margin-right:0}.ui-controlgroup > .ui-controlgroup-item:focus,.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus{z-index:9999}.ui-controlgroup-vertical > .ui-controlgroup-item{display:block;float:none;width:100%;margin-top:0;margin-bottom:0;text-align:left}.ui-controlgroup-vertical .ui-controlgroup-item{box-sizing:border-box}.ui-controlgroup .ui-controlgroup-label{padding:.4em 1em}.ui-controlgroup .ui-controlgroup-label span{font-size:80%}.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item{border-left:none}.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item{border-top:none}.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content{border-right:none}.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content{border-bottom:none}.ui-controlgroup-vertical .ui-spinner-input{width:75%;width:calc( 100% - 2.4em )}.ui-controlgroup-vertical .ui-spinner .ui-spinner-up{border-top-style:solid}.ui-checkboxradio-label .ui-icon-background{box-shadow:inset 1px 1px 1px #ccc;border-radius:.12em;border:none}.ui-checkboxradio-radio-label .ui-icon-background{width:16px;height:16px;border-radius:1em;overflow:visible;border:none}.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon{background-image:none;width:8px;height:8px;border-width:4px;border-style:solid}.ui-checkboxradio-disabled{pointer-events:none}.ui-datepicker{width:17em;padding:.2em .2em 0;display:none}.ui-datepicker .ui-datepicker-header{position:relative;padding:.2em 0}.ui-datepicker .ui-datepicker-prev,.ui-datepicker .ui-datepicker-next{position:absolute;top:2px;width:1.8em;height:1.8em}.ui-datepicker .ui-datepicker-prev-hover,.ui-datepicker .ui-datepicker-next-hover{top:1px}.ui-datepicker .ui-datepicker-prev{left:2px}.ui-datepicker .ui-datepicker-next{right:2px}.ui-datepicker .ui-datepicker-prev-hover{left:1px}.ui-datepicker .ui-datepicker-next-hover{right:1px}.ui-datepicker .ui-datepicker-prev span,.ui-datepicker .ui-datepicker-next span{display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.ui-datepicker .ui-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.ui-datepicker .ui-datepicker-title select{font-size:1em;margin:1px 0}.ui-datepicker select.ui-datepicker-month,.ui-datepicker select.ui-datepicker-year{width:45%}.ui-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.ui-datepicker th{padding:.7em .3em;text-align:center;font-weight:bold;border:0}.ui-datepicker td{border:0;padding:1px}.ui-datepicker td span,.ui-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.ui-datepicker .ui-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.ui-datepicker .ui-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current{float:left}.ui-datepicker.ui-datepicker-multi{width:auto}.ui-datepicker-multi .ui-datepicker-group{float:left}.ui-datepicker-multi .ui-datepicker-group table{width:95%;margin:0 auto .4em}.ui-datepicker-multi-2 .ui-datepicker-group{width:50%}.ui-datepicker-multi-3 .ui-datepicker-group{width:33.3%}.ui-datepicker-multi-4 .ui-datepicker-group{width:25%}.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header{border-left-width:0}.ui-datepicker-multi .ui-datepicker-buttonpane{clear:left}.ui-datepicker-row-break{clear:both;width:100%;font-size:0}.ui-datepicker-rtl{direction:rtl}.ui-datepicker-rtl .ui-datepicker-prev{right:2px;left:auto}.ui-datepicker-rtl .ui-datepicker-next{left:2px;right:auto}.ui-datepicker-rtl .ui-datepicker-prev:hover{right:1px;left:auto}.ui-datepicker-rtl .ui-datepicker-next:hover{left:1px;right:auto}.ui-datepicker-rtl .ui-datepicker-buttonpane{clear:right}.ui-datepicker-rtl .ui-datepicker-buttonpane button{float:left}.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,.ui-datepicker-rtl .ui-datepicker-group{float:right}.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header{border-right-width:0;border-left-width:1px}.ui-datepicker .ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat;left:.5em;top:.3em}.ui-dialog{position:absolute;top:0;left:0;padding:.2em;outline:0}.ui-dialog .ui-dialog-titlebar{padding:.4em 1em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:20px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em 1em;background:none;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-n{height:2px;top:0}.ui-dialog .ui-resizable-e{width:2px;right:0}.ui-dialog .ui-resizable-s{height:2px;bottom:0}.ui-dialog .ui-resizable-w{width:2px;left:0}.ui-dialog .ui-resizable-se,.ui-dialog .ui-resizable-sw,.ui-dialog .ui-resizable-ne,.ui-dialog .ui-resizable-nw{width:7px;height:7px}.ui-dialog .ui-resizable-se{right:0;bottom:0}.ui-dialog .ui-resizable-sw{left:0;bottom:0}.ui-dialog .ui-resizable-ne{right:0;top:0}.ui-dialog .ui-resizable-nw{left:0;top:0}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-progressbar{height:2em;text-align:left;overflow:hidden}.ui-progressbar .ui-progressbar-value{margin:-1px;height:100%}.ui-progressbar .ui-progressbar-overlay{background:url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");height:100%;filter:alpha(opacity=25);opacity:0.25}.ui-progressbar-indeterminate .ui-progressbar-value{background-image:none}.ui-selectmenu-menu{padding:0;margin:0;position:absolute;top:0;left:0;display:none}.ui-selectmenu-menu .ui-menu{overflow:auto;overflow-x:hidden;padding-bottom:1px}.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup{font-size:1em;font-weight:bold;line-height:1.5;padding:2px 0.4em;margin:0.5em 0 0 0;height:auto;border:0}.ui-selectmenu-open{display:block}.ui-selectmenu-text{display:block;margin-right:20px;overflow:hidden;text-overflow:ellipsis}.ui-selectmenu-button.ui-button{text-align:left;white-space:nowrap;width:14em}.ui-selectmenu-icon.ui-icon{float:right;margin-top:0}.ui-slider{position:relative;text-align:left}.ui-slider .ui-slider-handle{position:absolute;z-index:2;width:1.2em;height:1.2em;cursor:default;-ms-touch-action:none;touch-action:none}.ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.ui-slider.ui-state-disabled .ui-slider-handle,.ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.ui-slider-horizontal{height:.8em}.ui-slider-horizontal .ui-slider-handle{top:-.3em;margin-left:-.6em}.ui-slider-horizontal .ui-slider-range{top:0;height:100%}.ui-slider-horizontal .ui-slider-range-min{left:0}.ui-slider-horizontal .ui-slider-range-max{right:0}.ui-slider-vertical{width:.8em;height:100px}.ui-slider-vertical .ui-slider-handle{left:-.3em;margin-left:0;margin-bottom:-.6em}.ui-slider-vertical .ui-slider-range{left:0;width:100%}.ui-slider-vertical .ui-slider-range-min{bottom:0}.ui-slider-vertical .ui-slider-range-max{top:0}.ui-spinner{position:relative;display:inline-block;overflow:hidden;padding:0;vertical-align:middle}.ui-spinner-input{border:none;background:none;color:inherit;padding:.222em 0;margin:.2em 0;vertical-align:middle;margin-left:.4em;margin-right:2em}.ui-spinner-button{width:1.6em;height:50%;font-size:.5em;padding:0;margin:0;text-align:center;position:absolute;cursor:default;display:block;overflow:hidden;right:0}.ui-spinner a.ui-spinner-button{border-top-style:none;border-bottom-style:none;border-right-style:none}.ui-spinner-up{top:0}.ui-spinner-down{bottom:0}.ui-tabs{position:relative;padding:.2em}.ui-tabs .ui-tabs-nav{margin:0;padding:.2em .2em 0}.ui-tabs .ui-tabs-nav li{list-style:none;float:left;position:relative;top:0;margin:1px .2em 0 0;border-bottom-width:0;padding:0;white-space:nowrap}.ui-tabs .ui-tabs-nav .ui-tabs-anchor{float:left;padding:.5em 1em;text-decoration:none}.ui-tabs .ui-tabs-nav li.ui-tabs-active{margin-bottom:-1px;padding-bottom:1px}.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor{cursor:text}.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor{cursor:pointer}.ui-tabs .ui-tabs-panel{display:block;border-width:0;padding:1em 1.4em;background:none}.ui-tooltip{padding:8px;position:absolute;z-index:9999;max-width:300px}body .ui-tooltip{border-width:2px}.ui-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.ui-widget.ui-widget-content{border:1px solid #c5c5c5}.ui-widget-content{border:1px solid #ddd;background:#fff;color:#333}.ui-widget-content a{color:#333}.ui-widget-header{border:1px solid #ddd;background:#e9e9e9;color:#333;font-weight:bold}.ui-widget-header a{color:#333}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default,.ui-button,html .ui-button.ui-state-disabled:hover,html .ui-button.ui-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited,a.ui-button,a:link.ui-button,a:visited.ui-button,.ui-button{color:#454545;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus,.ui-button:hover,.ui-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited,.ui-state-focus a,.ui-state-focus a:hover,.ui-state-focus a:link,.ui-state-focus a:visited,a.ui-button:hover,a.ui-button:focus{color:#2b2b2b;text-decoration:none}.ui-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active,a.ui-button:active,.ui-button:active,.ui-button.ui-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.ui-icon-background,.ui-state-active .ui-icon-background{border:#003eff;background-color:#fff}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#fff;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #dad55e;background:#fffa90;color:#777620}.ui-state-checked{border:1px solid #dad55e;background:#fffa90}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#777620}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#5f3f3f}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#5f3f3f}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url("images/ui-icons_444444_256x240.png")}.ui-widget-header .ui-icon{background-image:url("images/ui-icons_444444_256x240.png")}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon,.ui-button:hover .ui-icon,.ui-button:focus .ui-icon{background-image:url("images/ui-icons_555555_256x240.png")}.ui-state-active .ui-icon,.ui-button:active .ui-icon{background-image:url("images/ui-icons_ffffff_256x240.png")}.ui-state-highlight .ui-icon,.ui-button .ui-state-highlight.ui-icon{background-image:url("images/ui-icons_777620_256x240.png")}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url("images/ui-icons_cc0000_256x240.png")}.ui-button .ui-icon{background-image:url("images/ui-icons_777777_256x240.png")}.ui-icon-blank{background-position:16px 16px}.ui-icon-caret-1-n{background-position:0 0}.ui-icon-caret-1-ne{background-position:-16px 0}.ui-icon-caret-1-e{background-position:-32px 0}.ui-icon-caret-1-se{background-position:-48px 0}.ui-icon-caret-1-s{background-position:-65px 0}.ui-icon-caret-1-sw{background-position:-80px 0}.ui-icon-caret-1-w{background-position:-96px 0}.ui-icon-caret-1-nw{background-position:-112px 0}.ui-icon-caret-2-n-s{background-position:-128px 0}.ui-icon-caret-2-e-w{background-position:-144px 0}.ui-icon-triangle-1-n{background-position:0 -16px}.ui-icon-triangle-1-ne{background-position:-16px -16px}.ui-icon-triangle-1-e{background-position:-32px -16px}.ui-icon-triangle-1-se{background-position:-48px -16px}.ui-icon-triangle-1-s{background-position:-65px -16px}.ui-icon-triangle-1-sw{background-position:-80px -16px}.ui-icon-triangle-1-w{background-position:-96px -16px}.ui-icon-triangle-1-nw{background-position:-112px -16px}.ui-icon-triangle-2-n-s{background-position:-128px -16px}.ui-icon-triangle-2-e-w{background-position:-144px -16px}.ui-icon-arrow-1-n{background-position:0 -32px}.ui-icon-arrow-1-ne{background-position:-16px -32px}.ui-icon-arrow-1-e{background-position:-32px -32px}.ui-icon-arrow-1-se{background-position:-48px -32px}.ui-icon-arrow-1-s{background-position:-65px -32px}.ui-icon-arrow-1-sw{background-position:-80px -32px}.ui-icon-arrow-1-w{background-position:-96px -32px}.ui-icon-arrow-1-nw{background-position:-112px -32px}.ui-icon-arrow-2-n-s{background-position:-128px -32px}.ui-icon-arrow-2-ne-sw{background-position:-144px -32px}.ui-icon-arrow-2-e-w{background-position:-160px -32px}.ui-icon-arrow-2-se-nw{background-position:-176px -32px}.ui-icon-arrowstop-1-n{background-position:-192px -32px}.ui-icon-arrowstop-1-e{background-position:-208px -32px}.ui-icon-arrowstop-1-s{background-position:-224px -32px}.ui-icon-arrowstop-1-w{background-position:-240px -32px}.ui-icon-arrowthick-1-n{background-position:1px -48px}.ui-icon-arrowthick-1-ne{background-position:-16px -48px}.ui-icon-arrowthick-1-e{background-position:-32px -48px}.ui-icon-arrowthick-1-se{background-position:-48px -48px}.ui-icon-arrowthick-1-s{background-position:-64px -48px}.ui-icon-arrowthick-1-sw{background-position:-80px -48px}.ui-icon-arrowthick-1-w{background-position:-96px -48px}.ui-icon-arrowthick-1-nw{background-position:-112px -48px}.ui-icon-arrowthick-2-n-s{background-position:-128px -48px}.ui-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.ui-icon-arrowthick-2-e-w{background-position:-160px -48px}.ui-icon-arrowthick-2-se-nw{background-position:-176px -48px}.ui-icon-arrowthickstop-1-n{background-position:-192px -48px}.ui-icon-arrowthickstop-1-e{background-position:-208px -48px}.ui-icon-arrowthickstop-1-s{background-position:-224px -48px}.ui-icon-arrowthickstop-1-w{background-position:-240px -48px}.ui-icon-arrowreturnthick-1-w{background-position:0 -64px}.ui-icon-arrowreturnthick-1-n{background-position:-16px -64px}.ui-icon-arrowreturnthick-1-e{background-position:-32px -64px}.ui-icon-arrowreturnthick-1-s{background-position:-48px -64px}.ui-icon-arrowreturn-1-w{background-position:-64px -64px}.ui-icon-arrowreturn-1-n{background-position:-80px -64px}.ui-icon-arrowreturn-1-e{background-position:-96px -64px}.ui-icon-arrowreturn-1-s{background-position:-112px -64px}.ui-icon-arrowrefresh-1-w{background-position:-128px -64px}.ui-icon-arrowrefresh-1-n{background-position:-144px -64px}.ui-icon-arrowrefresh-1-e{background-position:-160px -64px}.ui-icon-arrowrefresh-1-s{background-position:-176px -64px}.ui-icon-arrow-4{background-position:0 -80px}.ui-icon-arrow-4-diag{background-position:-16px -80px}.ui-icon-extlink{background-position:-32px -80px}.ui-icon-newwin{background-position:-48px -80px}.ui-icon-refresh{background-position:-64px -80px}.ui-icon-shuffle{background-position:-80px -80px}.ui-icon-transfer-e-w{background-position:-96px -80px}.ui-icon-transferthick-e-w{background-position:-112px -80px}.ui-icon-folder-collapsed{background-position:0 -96px}.ui-icon-folder-open{background-position:-16px -96px}.ui-icon-document{background-position:-32px -96px}.ui-icon-document-b{background-position:-48px -96px}.ui-icon-note{background-position:-64px -96px}.ui-icon-mail-closed{background-position:-80px -96px}.ui-icon-mail-open{background-position:-96px -96px}.ui-icon-suitcase{background-position:-112px -96px}.ui-icon-comment{background-position:-128px -96px}.ui-icon-person{background-position:-144px -96px}.ui-icon-print{background-position:-160px -96px}.ui-icon-trash{background-position:-176px -96px}.ui-icon-locked{background-position:-192px -96px}.ui-icon-unlocked{background-position:-208px -96px}.ui-icon-bookmark{background-position:-224px -96px}.ui-icon-tag{background-position:-240px -96px}.ui-icon-home{background-position:0 -112px}.ui-icon-flag{background-position:-16px -112px}.ui-icon-calendar{background-position:-32px -112px}.ui-icon-cart{background-position:-48px -112px}.ui-icon-pencil{background-position:-64px -112px}.ui-icon-clock{background-position:-80px -112px}.ui-icon-disk{background-position:-96px -112px}.ui-icon-calculator{background-position:-112px -112px}.ui-icon-zoomin{background-position:-128px -112px}.ui-icon-zoomout{background-position:-144px -112px}.ui-icon-search{background-position:-160px -112px}.ui-icon-wrench{background-position:-176px -112px}.ui-icon-gear{background-position:-192px -112px}.ui-icon-heart{background-position:-208px -112px}.ui-icon-star{background-position:-224px -112px}.ui-icon-link{background-position:-240px -112px}.ui-icon-cancel{background-position:0 -128px}.ui-icon-plus{background-position:-16px -128px}.ui-icon-plusthick{background-position:-32px -128px}.ui-icon-minus{background-position:-48px -128px}.ui-icon-minusthick{background-position:-64px -128px}.ui-icon-close{background-position:-80px -128px}.ui-icon-closethick{background-position:-96px -128px}.ui-icon-key{background-position:-112px -128px}.ui-icon-lightbulb{background-position:-128px -128px}.ui-icon-scissors{background-position:-144px -128px}.ui-icon-clipboard{background-position:-160px -128px}.ui-icon-copy{background-position:-176px -128px}.ui-icon-contact{background-position:-192px -128px}.ui-icon-image{background-position:-208px -128px}.ui-icon-video{background-position:-224px -128px}.ui-icon-script{background-position:-240px -128px}.ui-icon-alert{background-position:0 -144px}.ui-icon-info{background-position:-16px -144px}.ui-icon-notice{background-position:-32px -144px}.ui-icon-help{background-position:-48px -144px}.ui-icon-check{background-position:-64px -144px}.ui-icon-bullet{background-position:-80px -144px}.ui-icon-radio-on{background-position:-96px -144px}.ui-icon-radio-off{background-position:-112px -144px}.ui-icon-pin-w{background-position:-128px -144px}.ui-icon-pin-s{background-position:-144px -144px}.ui-icon-play{background-position:0 -160px}.ui-icon-pause{background-position:-16px -160px}.ui-icon-seek-next{background-position:-32px -160px}.ui-icon-seek-prev{background-position:-48px -160px}.ui-icon-seek-end{background-position:-64px -160px}.ui-icon-seek-start{background-position:-80px -160px}.ui-icon-seek-first{background-position:-80px -160px}.ui-icon-stop{background-position:-96px -160px}.ui-icon-eject{background-position:-112px -160px}.ui-icon-volume-off{background-position:-128px -160px}.ui-icon-volume-on{background-position:-144px -160px}.ui-icon-power{background-position:0 -176px}.ui-icon-signal-diag{background-position:-16px -176px}.ui-icon-signal{background-position:-32px -176px}.ui-icon-battery-0{background-position:-48px -176px}.ui-icon-battery-1{background-position:-64px -176px}.ui-icon-battery-2{background-position:-80px -176px}.ui-icon-battery-3{background-position:-96px -176px}.ui-icon-circle-plus{background-position:0 -192px}.ui-icon-circle-minus{background-position:-16px -192px}.ui-icon-circle-close{background-position:-32px -192px}.ui-icon-circle-triangle-e{background-position:-48px -192px}.ui-icon-circle-triangle-s{background-position:-64px -192px}.ui-icon-circle-triangle-w{background-position:-80px -192px}.ui-icon-circle-triangle-n{background-position:-96px -192px}.ui-icon-circle-arrow-e{background-position:-112px -192px}.ui-icon-circle-arrow-s{background-position:-128px -192px}.ui-icon-circle-arrow-w{background-position:-144px -192px}.ui-icon-circle-arrow-n{background-position:-160px -192px}.ui-icon-circle-zoomin{background-position:-176px -192px}.ui-icon-circle-zoomout{background-position:-192px -192px}.ui-icon-circle-check{background-position:-208px -192px}.ui-icon-circlesmall-plus{background-position:0 -208px}.ui-icon-circlesmall-minus{background-position:-16px -208px}.ui-icon-circlesmall-close{background-position:-32px -208px}.ui-icon-squaresmall-plus{background-position:-48px -208px}.ui-icon-squaresmall-minus{background-position:-64px -208px}.ui-icon-squaresmall-close{background-position:-80px -208px}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:3px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:3px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:3px}.ui-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}\n\n';(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.CodeMirror=b()})(this,function(){function a(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function b(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function c(a,c){return b(a).appendChild(c)}function d(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));
else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function e(a,b,c,e){a=d(a,b,c,e);a.setAttribute("role","presentation");return a}function g(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function h(){try{var a=document.activeElement}catch(A){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function k(b,c){var d=b.className;a(c).test(d)||
(b.className+=(d?" ":"")+c)}function m(b,c){b=b.split(" ");for(var d=0;d<b.length;d++)b[d]&&!a(b[d]).test(c)&&(c+=" "+b[d]);return c}function n(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function p(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function q(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var x=a.indexOf("\t",d);if(0>x||x>=b)return e+(b-d);
e+=x-d;e+=c-e%c;d=x+1}}function t(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function f(a,b,c){for(var d=0,x=0;;){var e=a.indexOf("\t",d);-1==e&&(e=a.length);var f=e-d;if(e==a.length||x+f>=b)return d+Math.min(f,b-x);x+=e-d;x+=c-x%c;d=e+1;if(x>=b)return d}}function l(a){for(;be.length<=a;)be.push(r(be)+" ");return be[a]}function r(a){return a[a.length-1]}function w(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function v(a,b,c){for(var d=0,x=c(b);d<a.length&&c(a[d])<=
x;)d++;a.splice(d,0,b)}function y(){}function F(a,b){Object.create?a=Object.create(a):(y.prototype=a,a=new y);b&&p(b,a);return a}function z(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||vg.test(a))}function E(a,b){return b?-1<b.source.indexOf("\\w")&&z(a)?!0:b.test(a):z(a)}function G(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function O(a){return 768<=a.charCodeAt(0)&&wg.test(a)}function P(a,b,c){for(;(0>c?0<b:b<a.length)&&O(a.charAt(b));)b+=c;return b}
function L(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,e=0>d?Math.ceil(e):Math.floor(e);if(e==b)return a(e)?b:c;a(e)?c=e:b=e+d}}function I(a,b,c){this.input=c;this.scrollbarFiller=d("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=d("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=e("div",null,"CodeMirror-code");this.selectionDiv=d("div",null,null,"position: relative; z-index: 1");
this.cursorDiv=d("div",null,"CodeMirror-cursors");this.measure=d("div",null,"CodeMirror-measure");this.lineMeasure=d("div",null,"CodeMirror-measure");this.lineSpace=e("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var x=e("div",[this.lineSpace],"CodeMirror-lines");this.mover=d("div",[x],null,"position: relative");this.sizer=d("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=d("div",null,null,
"position: absolute; height: 30px; width: 1px;");this.gutters=d("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=d("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=d("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");la&&8>ua&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Oa||Vb&&Zc||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):
a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=
!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function B(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function M(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);
++e});return d}function R(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function S(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function J(a){if(null==a.parent)return null;var b=a.parent;a=t(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Q(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);
for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function D(a,b){return b>=a.first&&b<a.first+a.size}function H(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function C(a,b,c){void 0===c&&(c=null);if(!(this instanceof C))return new C(a,b,c);this.line=a;this.ch=b;this.sticky=c}function N(a,b){return a.line-b.line||a.ch-b.ch}function ka(a,b){return a.sticky==b.sticky&&0==N(a,b)}function ha(a){return C(a.line,a.ch)}function ga(a,b){return 0>N(a,b)?b:a}function qa(a,
b){return 0>N(a,b)?a:b}function X(a,b){if(b.line<a.first)return C(a.first,0);var c=a.first+a.size-1;if(b.line>c)return C(c,B(a,c).text.length);a=B(a,b.line).text.length;c=b.ch;b=null==c||c>a?C(b.line,a):0>c?C(b.line,0):b;return b}function Aa(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=X(a,b[d]);return c}function ya(a,b,c){this.marker=a;this.from=b;this.to=c}function da(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function ea(a,b){if(b.full)return null;var c=D(a,b.from.line)&&
B(a,b.from.line).markedSpans,d=D(a,b.to.line)&&B(a,b.to.line).markedSpans;if(!c&&!d)return null;a=b.from.ch;var e=b.to.ch,f=0==N(b.from,b.to),x;if(c)for(var g=0;g<c.length;++g){var A=c[g],h=A.marker;if(null==A.from||(h.inclusiveLeft?A.from<=a:A.from<a)||!(A.from!=a||"bookmark"!=h.type||f&&A.marker.insertLeft)){var k=null==A.to||(h.inclusiveRight?A.to>=a:A.to>a);(x||(x=[])).push(new ya(h,A.from,k?null:A.to))}}var c=x,l;if(d)for(x=0;x<d.length;++x)if(g=d[x],A=g.marker,null==g.to||(A.inclusiveRight?
g.to>=e:g.to>e)||g.from==e&&"bookmark"==A.type&&(!f||g.marker.insertLeft))h=null==g.from||(A.inclusiveLeft?g.from<=e:g.from<e),(l||(l=[])).push(new ya(A,h?null:g.from-e,null==g.to?null:g.to-e));d=1==b.text.length;e=r(b.text).length+(d?a:0);if(c)for(f=0;f<c.length;++f)if(x=c[f],null==x.to)(g=da(l,x.marker),g)?d&&(x.to=null==g.to?null:g.to+e):x.to=a;if(l)for(a=0;a<l.length;++a)f=l[a],null!=f.to&&(f.to+=e),null==f.from?da(c,f.marker)||(f.from=e,d&&(c||(c=[])).push(f)):(f.from+=e,d&&(c||(c=[])).push(f));
c&&(c=fa(c));l&&l!=c&&(l=fa(l));a=[c];if(!d){b=b.text.length-2;var m;if(0<b&&c)for(d=0;d<c.length;++d)null==c[d].to&&(m||(m=[])).push(new ya(c[d].marker,null,null));for(c=0;c<b;++c)a.push(m);a.push(l)}return a}function fa(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function za(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;
!c.readOnly||d&&-1!=t(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var x=a[f];if(!(0>N(x.to,e.from)||0<N(x.from,e.to))){var g=[f,1],A=N(x.from,e.from),h=N(x.to,e.to);(0>A||!c.inclusiveLeft&&!A)&&g.push({from:x.from,to:e.from});(0<h||!c.inclusiveRight&&!h)&&g.push({from:e.to,to:x.to});a.splice.apply(a,g);f+=g.length-3}}}return a}function Ha(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);
a.markedSpans=null}}function pa(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function xb(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=N(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=N(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function fb(a,b){a=Kb&&a.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=a[d],c.marker.collapsed&&null==(b?c.from:c.to)&&(!e||0>xb(e,c.marker)))var e=
c.marker;return e}function Ma(a,b,c,d,e){a=B(a,b);if(a=Kb&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var x=f.marker.find(0),g=N(x.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),A=N(x.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=g&&0>=A||0>=g&&0<=A)&&(0>=g&&(f.marker.inclusiveRight&&e.inclusiveLeft?0<=N(x.to,c):0<N(x.to,c))||0<=g&&(f.marker.inclusiveRight&&e.inclusiveLeft?0>=N(x.from,d):0>N(x.from,d))))return!0}}}function aa(a){for(var b;b=
fb(a,!0);)a=b.find(-1,!0).line;return a}function Sa(a,b){a=B(a,b);var c=aa(a);return a==c?b:J(c)}function Ta(a,b){if(b>a.lastLine())return b;var c=B(a,b);if(!Ra(a,c))return b;for(;a=fb(c,!1);)c=a.find(1,!0).line;return J(c)+1}function Ra(a,b){var c=Kb&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&$a(a,b,d)))return!0}function $a(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),$a(a,b.line,da(b.line.markedSpans,
c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&$a(a,b,d))return!0}function Da(a){a=aa(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;
return b}function ta(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=fb(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=fb(d,!1);)a=c.find(0,!0),b-=d.text.length-a.from.ch,d=a.to.line,b+=d.text.length-a.to.ch;return b}function ca(a){var b=a.display;a=a.doc;b.maxLine=B(a,a.first);b.maxLineLength=ta(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=ta(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function ab(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=
!1,f=0;f<a.length;++f){var x=a[f];if(x.from<c&&x.to>b||b==c&&x.to==b)d(Math.max(x.from,b),Math.min(x.to,c),1==x.level?"rtl":"ltr",f),e=!0}e||d(b,c,"ltr")}function K(a,b,c){var d;$c=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:$c=e);f.from==b&&(f.from!=f.to&&"before"!=c?d=e:$c=e)}return null!=d?d:$c}function ja(a,b){var c=a.order;null==c&&(c=a.order=xg(a.text,b));return c}function Y(a,b,c){if(a.removeEventListener)a.removeEventListener(b,
c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=(a=a._handlers)&&a[b];d&&(c=t(d,c),-1<c&&(a[b]=d.slice(0,c).concat(d.slice(c+1))))}}function T(a,b){var c=a._handlers&&a._handlers[b]||ce;if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function V(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});T(a,c||b.type,a,b);return Qb(b)||b.codemirrorIgnore}function ob(a){var b=a._handlers&&a._handlers.cursorActivity;
if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==t(a,b[c])&&a.push(b[c])}}function u(a,b){return 0<(a._handlers&&a._handlers[b]||ce).length}function bb(a){a.prototype.on=function(a,b){Z(this,a,b)};a.prototype.off=function(a,b){Y(this,a,b)}}function sa(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function qb(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Qb(a){return null!=a.defaultPrevented?a.defaultPrevented:
0==a.returnValue}function yb(a){sa(a);qb(a)}function lb(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));tb&&a.ctrlKey&&1==b&&(b=3);return b}function Eb(a){if(null==Je){var b=d("span","\u200b");c(a,d("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Je=1>=b.offsetWidth&&2<b.offsetHeight&&!(la&&8>ua))}a=Je?d("span","\u200b"):d("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function rb(a,
b){2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));Ke[a]=b}function Fb(a){if("string"==typeof a&&wc.hasOwnProperty(a))a=wc[a];else if(a&&"string"==typeof a.name&&wc.hasOwnProperty(a.name)){var b=wc[a.name];"string"==typeof b&&(b={name:b});a=F(b,a);a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return Fb("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return Fb("application/json")}return"string"==typeof a?{name:a}:
a||{name:"null"}}function bc(a,b){b=Fb(b);var c=Ke[b.name];if(!c)return bc(a,"text/plain");a=c(a,b);if(xc.hasOwnProperty(b.name)){var c=xc[b.name],d;for(d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);if(b.modeProps)for(var e in b.modeProps)a[e]=b.modeProps[e];return a}function Xa(a,b){a=xc.hasOwnProperty(a)?xc[a]:xc[a]={};p(b,a)}function na(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);a={};for(var c in b){var d=
b[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a}function Va(a,b){for(var c;a.innerMode;){c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}}function Ja(a,b,c){return a.startState?a.startState(b,c):!0}function Cb(a,b,c,d){var e=[a.state.modeGen],f={};Ka(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);var x=c.state;d=function(d){c.baseTokens=e;var g=a.state.overlays[d],h=1,A=0;c.state=!0;Ka(a,b.text,g.mode,c,function(a,b){for(var c=h;A<a;){var d=
e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;A=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"overlay "+b),h=c+2;else for(;c<h;c+=2)a=e[c+1],e[c+1]=(a?a+" ":"")+"overlay "+b},f);c.state=x;c.baseTokens=null;c.baseTokenPos=1};for(var g=0;g<a.state.overlays.length;++g)d(g);return{styles:e,classes:f.bgClass||f.textClass?f:null}}function kc(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=mb(a,J(b)),e=b.text.length>a.options.maxHighlightLength&&na(a.doc.mode,d.state),f=Cb(a,b,d);e&&(d.state=e);b.stateAfter=
d.save(!e);b.styles=f.styles;f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function mb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new Ab(d,!0,b);var f=La(a,b,c),x=f>d.first&&B(d,f-1).stateAfter,g=x?Ab.fromSaved(d,x,f):new Ab(d,Ja(d.mode),f);d.iter(f,b,function(c){ba(a,c.text,g);var d=g.line;c.stateAfter=d==b-1||0==d%5||d>=e.viewFrom&&
d<e.viewTo?g.save():null;g.nextLine()});c&&(d.modeFrontier=g.line);return g}function ba(a,b,c,d){var e=a.doc.mode;a=new Ba(b,a.options.tabSize,c);a.start=a.pos=d||0;for(""==b&&va(e,c.state);!a.eol();)vb(e,a,c.state),a.start=a.pos}function va(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=Va(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}function vb(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=Va(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");
}function Ya(a,b,c,d){var e=a.doc,f=e.mode;b=X(e,b);var x=B(e,b.line);c=mb(a,b.line,c);a=new Ba(x.text,a.options.tabSize,c);var g;for(d&&(g=[]);(d||a.pos<b.ch)&&!a.eol();){a.start=a.pos;var h=vb(f,a,c.state);d&&g.push(new Bf(a,h,na(e.mode,c.state)))}return d?g:new Bf(a,h,c.state)}function Qc(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+
"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function Ka(a,b,c,d,e,f,g){var x=c.flattenSpans;null==x&&(x=a.options.flattenSpans);var h=0,A=null,k=new Ba(b,a.options.tabSize,d),l=a.options.addModeClass&&[null];for(""==b&&Qc(va(c,d.state),f);!k.eol();){if(k.pos>a.options.maxHighlightLength){x=!1;g&&ba(a,b,d,k.pos);k.pos=b.length;var U=null}else U=Qc(vb(c,k,d.state,l),f);if(l){var xa=l[0].name;xa&&(U="m-"+(U?xa+" "+U:xa))}if(!x||A!=U){for(;h<k.start;)h=Math.min(k.start,h+5E3),e(h,A);A=U}k.start=
k.pos}for(;h<k.pos;)a=Math.min(k.pos,h+5E3),e(a,A),h=a}function La(a,b,c){for(var d,e,f=a.doc,x=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>x;--b){if(b<=f.first)return f.first;var g=B(f,b-1),h=g.stateAfter;if(h&&(!c||b+(h instanceof de?h.lookAhead:0)<=f.modeFrontier))return b;g=q(g.text,null,a.options.tabSize);if(null==e||d>g)e=b-1,d=g}return e}function wb(a,b){a.modeFrontier=Math.min(a.modeFrontier,b);if(!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=B(a,d).stateAfter;if(e&&(!(e instanceof
de)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function Rc(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?yg:zg;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function Hc(a,d){var f=e("span",null,null,Oa?"padding-right: .1px":null),f={pre:e("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};d.measure={};for(var x=0;x<=(d.rest?d.rest.length:0);x++){var g=x?d.rest[x-1]:d.line,h=void 0;f.pos=
0;f.addToken=Cd;var A=a.display.measure;if(null!=Le)A=Le;else{var k=c(A,document.createTextNode("A\u062eA")),l=ad(k,0,1).getBoundingClientRect(),k=ad(k,1,2).getBoundingClientRect();b(A);A=l&&l.left!=l.right?Le=3>k.right-l.right:!1}A&&(h=ja(g,a.doc.direction))&&(f.addToken=Dd(f.addToken,h));f.map=[];var n=d!=a.display.externalMeasured&&J(g);a:{var p=k=l=A=void 0,q=void 0,t=void 0,r=void 0,h=f,n=kc(a,g,n),y=g.markedSpans,u=g.text,z=0;if(y)for(var v=u.length,w=0,E=1,H="",G=0;;){if(G==w){q=p=k=l=t="";
A=null;for(var G=Infinity,F=[],N=void 0,C=0;C<y.length;++C){var na=y[C],D=na.marker;"bookmark"==D.type&&na.from==w&&D.widgetNode?F.push(D):na.from<=w&&(null==na.to||na.to>w||D.collapsed&&na.to==w&&na.from==w)?(null!=na.to&&na.to!=w&&G>na.to&&(G=na.to,p=""),D.className&&(q+=" "+D.className),D.css&&(t=(t?t+";":"")+D.css),D.startStyle&&na.from==w&&(k+=" "+D.startStyle),D.endStyle&&na.to==G&&(N||(N=[])).push(D.endStyle,na.to),D.title&&!l&&(l=D.title),D.collapsed&&(!A||0>xb(A.marker,D))&&(A=na)):na.from>
w&&G>na.from&&(G=na.from)}if(N)for(C=0;C<N.length;C+=2)N[C+1]==G&&(p+=" "+N[C]);if(!A||A.from==w)for(N=0;N<F.length;++N)Qa(h,0,F[N]);if(A&&(A.from||0)==w){Qa(h,(null==A.to?v+1:A.to)-w,A.marker,null==A.from);if(null==A.to)break a;A.to==w&&(A=!1)}}if(w>=v)break;for(F=Math.min(v,G);;){if(H){N=w+H.length;A||(C=N>F?H.slice(0,F-w):H,h.addToken(h,C,r?r+q:q,k,w+C.length==G?p:"",l,t));if(N>=F){H=H.slice(F-w);w=F;break}w=N;k=""}H=u.slice(z,z=n[E++]);r=Rc(n[E++],h.cm.options)}}else for(A=1;A<n.length;A+=2)h.addToken(h,
u.slice(z,z=n[A]),Rc(n[A+1],h.cm.options))}g.styleClasses&&(g.styleClasses.bgClass&&(f.bgClass=m(g.styleClasses.bgClass,f.bgClass||"")),g.styleClasses.textClass&&(f.textClass=m(g.styleClasses.textClass,f.textClass||"")));0==f.map.length&&f.map.push(0,0,f.content.appendChild(Eb(a.display.measure)));0==x?(d.measure.map=f.map,d.measure.cache={}):((d.measure.maps||(d.measure.maps=[])).push(f.map),(d.measure.caches||(d.measure.caches=[])).push({}))}Oa&&(x=f.content.lastChild,/\bcm-tab\b/.test(x.className)||
x.querySelector&&x.querySelector(".cm-tab"))&&(f.content.className="cm-tab-wrap-hack");T(a,"renderLine",a,d.line,f.pre);f.pre.className&&(f.textClass=m(f.pre.className,f.textClass||""));return f}function Qd(a){var b=d("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b}function Cd(a,b,c,e,f,g,h){if(b){if(a.splitSpaces){var x=a.trailingSpace;if(1<b.length&&!/  /.test(b))x=b;else{for(var A="",k=0;k<b.length;k++){var U=b.charAt(k);
" "!=U||!x||k!=b.length-1&&32!=b.charCodeAt(k+1)||(U="\u00a0");A+=U;x=" "==U}x=A}}else x=b;A=x;k=a.cm.state.specialChars;U=!1;if(k.test(b)){x=document.createDocumentFragment();for(var xa=0;;){k.lastIndex=xa;var ia=k.exec(b),m=ia?ia.index-xa:b.length-xa;if(m){var n=document.createTextNode(A.slice(xa,xa+m));la&&9>ua?x.appendChild(d("span",[n])):x.appendChild(n);a.map.push(a.pos,a.pos+m,n);a.col+=m;a.pos+=m}if(!ia)break;xa+=m+1;"\t"==ia[0]?(ia=a.cm.options.tabSize,ia-=a.col%ia,m=x.appendChild(d("span",
l(ia),"cm-tab")),m.setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),a.col+=ia):("\r"==ia[0]||"\n"==ia[0]?(m=x.appendChild(d("span","\r"==ia[0]?"\u240d":"\u2424","cm-invalidchar")),m.setAttribute("cm-text",ia[0])):(m=a.cm.options.specialCharPlaceholder(ia[0]),m.setAttribute("cm-text",ia[0]),la&&9>ua?x.appendChild(d("span",[m])):x.appendChild(m)),a.col+=1);a.map.push(a.pos,a.pos+1,m);a.pos++}}else a.col+=b.length,x=document.createTextNode(A),a.map.push(a.pos,a.pos+b.length,x),la&&
9>ua&&(U=!0),a.pos+=b.length;a.trailingSpace=32==A.charCodeAt(b.length-1);if(c||e||f||U||h)return b=c||"",e&&(b+=e),f&&(b+=f),e=d("span",[x],b,h),g&&(e.title=g),a.content.appendChild(e);a.content.appendChild(x)}}function Dd(a,b){return function(c,d,e,f,g,x,h){e=e?e+" cm-force-border":"cm-force-border";for(var A=c.pos,k=A+d.length;;){for(var l=void 0,U=0;U<b.length&&!(l=b[U],l.to>A&&l.from<=A);U++);if(l.to>=k)return a(c,d,e,f,g,x,h);a(c,d.slice(0,l.to-A),e,f,null,x,h);f=null;d=d.slice(l.to-A);A=l.to}}}
function Qa(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b;a.trailingSpace=!1}function Bd(a,b,c){for(var d=this.line=b,e;d=fb(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?J(r(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Ra(a,b)}function nb(a,
b,c){var d=[],e;for(e=b;e<c;)b=new Bd(a.doc,B(a.doc,e),e),e+=b.size,d.push(b);return d}function Ge(a,b){if(a=a.ownsGroup)try{var c=a.delayedCallbacks,d=0;do{for(;d<c.length;d++)c[d].call(null);for(var e=0;e<a.ops.length;e++){var f=a.ops[e];if(f.cursorActivityHandlers)for(;f.cursorActivityCalled<f.cursorActivityHandlers.length;)f.cursorActivityHandlers[f.cursorActivityCalled++].call(null,f.cm)}}while(d<c.length)}finally{yc=null,b(a)}}function Ea(a,b){var c=a._handlers&&a._handlers[b]||ce;if(c.length){var d=
Array.prototype.slice.call(arguments,2);if(yc)var e=yc.delayedCallbacks;else bd?e=bd:(e=bd=[],setTimeout(Rd,0));for(var f=function(a){e.push(function(){return c[a].apply(null,d)})},g=0;g<c.length;++g)f(g)}}function Rd(){var a=bd;bd=null;for(var b=0;b<a.length;++b)a[b]()}function Sd(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=a,g=b,x=g.text.className,h=Ed(f,g);g.text==g.node&&(g.node=h.pre);g.text.parentNode.replaceChild(h.pre,g.text);g.text=h.pre;h.bgClass!=
g.bgClass||h.textClass!=g.textClass?(g.bgClass=h.bgClass,g.textClass=h.textClass,Ic(f,g)):x&&(g.text.className=x)}else if("gutter"==f)mc(a,b,c,d);else if("class"==f)Ic(a,b);else if("widget"==f){f=a;g=b;x=d;g.alignable&&(g.alignable=null);for(var h=g.node.firstChild,A;h;h=A)A=h.nextSibling,"CodeMirror-linewidget"==h.className&&g.node.removeChild(h);Fd(f,g,x)}}b.changes=null}function cc(a){a.node==a.text&&(a.node=d("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,
a.text),a.node.appendChild(a.text),la&&8>ua&&(a.node.style.zIndex=2));return a.node}function Ed(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Hc(a,b)}function Ic(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;c&&(c+=" CodeMirror-linebackground");if(b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=cc(b);b.background=e.insertBefore(d("div",
null,c),e.firstChild);a.display.input.setUneditable(b.background)}b.line.wrapClass?cc(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function mc(a,b,c,e){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var f=cc(b);b.gutterBackground=d("div",null,"CodeMirror-gutter-background "+
b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px");a.display.input.setUneditable(b.gutterBackground);f.insertBefore(b.gutterBackground,b.text)}f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var g=cc(b),x=b.gutter=d("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px");a.display.input.setUneditable(x);g.insertBefore(x,b.text);b.line.gutterClass&&(x.className+=" "+b.line.gutterClass);
!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=x.appendChild(d("div",H(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(g=f.hasOwnProperty(c)&&f[c])&&x.appendChild(d("div",[g],"CodeMirror-gutter-elt","left: "+e.gutterLeft[c]+"px; width: "+e.gutterWidth[c]+"px"))}}function lc(a,b,c,d){var e=Ed(a,b);b.text=
b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Ic(a,b);mc(a,b,c,d);Fd(a,b,d);return b.node}function Fd(a,b,c){Td(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)Td(a,b.rest[d],b,c,!1)}function Td(a,b,c,e,f){if(b.widgets){var g=cc(c),x=0;for(b=b.widgets;x<b.length;++x){var h=b[x],A=d("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||A.setAttribute("cm-ignore-events","true");var k=h,l=A,U=e;if(k.noHScroll){(c.alignable||(c.alignable=[])).push(l);
var xa=U.wrapperWidth;l.style.left=U.fixedPos+"px";k.coverGutter||(xa-=U.gutterTotalWidth,l.style.paddingLeft=U.gutterTotalWidth+"px");l.style.width=xa+"px"}k.coverGutter&&(l.style.zIndex=5,l.style.position="relative",k.noHScroll||(l.style.marginLeft=-U.gutterTotalWidth+"px"));a.display.input.setUneditable(A);f&&h.above?g.insertBefore(A,c.gutter||c.text):g.appendChild(A);Ea(h,"redraw")}}}function Rb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!g(document.body,a.node)){var e=
"position: relative;";a.coverGutter&&(e+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(e+="width: "+b.display.wrapper.clientWidth+"px;");c(b.display.measure,d("div",[a.node],null,e))}return a.height=a.node.parentNode.offsetHeight}function sb(a,b){for(b=b.target||b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function tc(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}
function Jc(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=c(a.measure,d("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function eb(a){return 30-a.display.nativeBarWidth}function Za(a){return a.display.scroller.clientWidth-eb(a)-a.display.barWidth}function Lb(a){return a.display.scroller.clientHeight-eb(a)-a.display.barHeight}function Ud(a,
b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(b=0;b<a.rest.length;b++)if(J(a.rest[b])>c)return{map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}function Sc(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Jb(a,b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function gb(a,b){var d=J(b),e=Sc(a,d);e&&!e.text?e=null:
e&&e.changes&&(Sd(a,e,d,Xc(a)),a.curOp.forceUpdate=!0);if(!e){var f=aa(b);e=J(f);f=a.display.externalMeasured=new Bd(a.doc,f,e);f.lineN=e;e=f.built=Hc(a,f);f.text=e.pre;c(a.display.lineMeasure,e.pre);e=f}a=Ud(e,b,d);return{line:b,view:e,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function hb(a,b,e,f,g){b.before&&(e=-1);var x=e+(f||"");if(b.cache.hasOwnProperty(x))a=b.cache[x];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var h=b.view,A=b.rect,k=a.options.lineWrapping,
l=k&&Za(a);if(!h.measure.heights||k&&h.measure.width!=l){var U=h.measure.heights=[];if(k)for(h.measure.width=l,h=h.text.firstChild.getClientRects(),k=0;k<h.length-1;k++){var l=h[k],xa=h[k+1];2<Math.abs(l.bottom-xa.bottom)&&U.push((l.bottom+xa.top)/2-A.top)}U.push(A.bottom-A.top)}b.hasHeights=!0}U=f;h=Vd(b.map,e,U);f=h.node;A=h.start;k=h.end;e=h.collapse;if(3==f.nodeType){for(var ia=0;4>ia;ia++){for(;A&&O(b.line.text.charAt(h.coverStart+A));)--A;for(;h.coverStart+k<h.coverEnd&&O(b.line.text.charAt(h.coverStart+
k));)++k;if(la&&9>ua&&0==A&&k==h.coverEnd-h.coverStart)var m=f.parentNode.getBoundingClientRect();else{m=ad(f,A,k).getClientRects();k=Cf;if("left"==U)for(l=0;l<m.length&&(k=m[l]).left==k.right;l++);else for(l=m.length-1;0<=l&&(k=m[l]).left==k.right;l--);m=k}if(m.left||m.right||0==A)break;k=A;--A;e="right"}la&&11>ua&&((ia=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=Me?ia=Me:(U=c(a.display.measure,d("span","x")),ia=U.getBoundingClientRect(),U=ad(U,0,1).getBoundingClientRect(),
ia=Me=1<Math.abs(ia.left-U.left)),ia=!ia),ia||(ia=screen.logicalXDPI/screen.deviceXDPI,U=screen.logicalYDPI/screen.deviceYDPI,m={left:m.left*ia,right:m.right*ia,top:m.top*U,bottom:m.bottom*U}))}else 0<A&&(e=U="right"),m=a.options.lineWrapping&&1<(ia=f.getClientRects()).length?ia["right"==U?ia.length-1:0]:f.getBoundingClientRect();!(la&&9>ua)||A||m&&(m.left||m.right)||(m=(m=f.parentNode.getClientRects()[0])?{left:m.left,right:m.left+Gb(a.display),top:m.top,bottom:m.bottom}:Cf);f=m.top-b.rect.top;A=
m.bottom-b.rect.top;ia=(f+A)/2;U=b.view.measure.heights;for(h=0;h<U.length-1&&!(ia<U[h]);h++);e={left:("right"==e?m.right:m.left)-b.rect.left,right:("left"==e?m.left:m.right)-b.rect.left,top:h?U[h-1]:0,bottom:U[h]};m.left||m.right||(e.bogus=!0);a.options.singleCursorHeightPerLine||(e.rtop=f,e.rbottom=A);a=e;a.bogus||(b.cache[x]=a)}return{left:a.left,right:a.right,top:g?a.rtop:a.top,bottom:g?a.rbottom:a.bottom}}function Vd(a,b,c){for(var d,e,f,g,x,h,A=0;A<a.length;A+=3){x=a[A];h=a[A+1];if(b<x)e=0,
f=1,g="left";else if(b<h)e=b-x,f=e+1;else if(A==a.length-3||b==h&&a[A+3]>b)f=h-x,e=f-1,b>=h&&(g="right");if(null!=e){d=a[A+2];x==h&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;A&&a[A-2]==a[A-3]&&a[A-1].insertLeft;)d=a[(A-=3)+2],g="left";if("right"==c&&e==h-x)for(;A<a.length-3&&a[A+3]==a[A+4]&&!a[A+5].insertLeft;)d=a[(A+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:x,coverEnd:h}}function Wd(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,
a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Xd(a){a.display.externalMeasure=null;b(a.display.lineMeasure);for(var c=0;c<a.display.view.length;c++)Wd(a.display.view[c])}function Sb(a){Xd(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Tc(){return ee&&fe?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):
window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Tb(){return ee&&fe?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function uc(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Rb(a.widgets[c]));return b}function Ub(a,b,c,d,e){e||(e=uc(b),c.top+=e,c.bottom+=e);if("line"==d)return c;d||(d="local");b=Da(b);b="local"==
d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:Tb()),d=a.left+("window"==d?0:Tc()),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Gd(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=Tc(),b-=Tb()):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function vc(a,
b,c,d,e){d||(d=B(a.doc,b.line));var f=d;b=b.ch;d=hb(a,gb(a,d),b,e);return Ub(a,f,d,c)}function ib(a,b,c,d,e,f){function g(b,g){b=hb(a,e,b,g?"right":"left",f);g?b.left=b.right:b.right=b.left;return Ub(a,d,b,c)}function x(a,b,c){return g(c?a-1:a,1==h[b].level!=c)}d=d||B(a.doc,b.line);e||(e=gb(a,d));var h=ja(d,a.doc.direction),A=b.ch;b=b.sticky;A>=d.text.length?(A=d.text.length,b="before"):0>=A&&(A=0,b="after");if(!h)return g("before"==b?A-1:A,"before"==b);var k=K(h,A,b),l=$c,k=x(A,k,"before"==b);null!=
l&&(k.other=x(A,l,"before"!=b));return k}function Yd(a,b){var c=0;b=X(a.doc,b);a.options.lineWrapping||(c=Gb(a.display)*b.ch);b=B(a.doc,b.line);a=Da(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function Uc(a,b,c,d,e){a=C(a,b,c);a.xRel=e;d&&(a.outside=!0);return a}function Vc(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Uc(d.first,0,null,!0,-1);var e=Q(d,c),f=d.first+d.size-1;if(e>f)return Uc(d.first+d.size-1,B(d,f).text.length,null,!0,1);0>b&&(b=0);for(var g=
B(d,e);;){var f=He(a,g,e,b,c);var x=void 0;var h=f.ch+(0<f.xRel?1:0);if(g=Kb&&g.markedSpans)for(var A=0;A<g.length;++A){var k=g[A];k.marker.collapsed&&(null==k.from||k.from<h)&&(null==k.to||k.to>h)&&(!x||0>xb(x,k.marker))&&(x=k.marker)}if(!x)return f;f=x.find(1);if(f.line==e)return f;g=B(d,e=f.line)}}function Zd(a,b,c,d){d-=uc(b);b=b.text.length;var e=L(function(b){return hb(a,c,b-1).bottom<=d},b,0);b=L(function(b){return hb(a,c,b).top>d},e,b);return{begin:e,end:b}}function $d(a,b,c,d){c||(c=gb(a,
b));d=Ub(a,b,hb(a,c,d),"line").top;return Zd(a,b,c,d)}function Wc(a,b,c,d){return a.bottom<=c?!1:a.top>c?!0:(d?a.left:a.right)>b}function He(a,b,c,d,e){e-=Da(b);var f=gb(a,b),g=uc(b),x=0,h=b.text.length,A=!0,k=ja(b,a.doc.direction);k&&(k=(a.options.lineWrapping?Kc:ae)(a,b,c,f,k,d,e),x=(A=1!=k.level)?k.from:k.to-1,h=A?k.to:k.from-1);var l=null,U=null,k=L(function(b){var c=hb(a,f,b);c.top+=g;c.bottom+=g;if(!Wc(c,d,e,!1))return!1;c.top<=e&&c.left<=d&&(l=b,U=c);return!0},x,h),m=!1;U?(x=d-U.left<U.right-
d,A=x==A,k=l+(A?0:1),A=A?"after":"before",x=x?U.left:U.right):(A||k!=h&&k!=x||k++,A=0==k?"after":k==b.text.length?"before":hb(a,f,k-(A?1:0)).bottom+g<=e==A?"after":"before",m=ib(a,C(c,k,A),"line",b,f),x=m.left,m=e<m.top||e>=m.bottom);k=P(b.text,k,1);return Uc(c,k,A,m,d-x)}function ae(a,b,c,d,e,f,g){var x=L(function(x){x=e[x];var h=1!=x.level;return Wc(ib(a,C(c,h?x.to:x.from,h?"before":"after"),"line",b,d),f,g,!0)},0,e.length-1),h=e[x];if(0<x){var A=1!=h.level,A=ib(a,C(c,A?h.from:h.to,A?"after":"before"),
"line",b,d);Wc(A,f,g,!0)&&A.top>g&&(h=e[x-1])}return h}function Kc(a,b,c,d,e,f,g){g=Zd(a,b,d,g);c=g.begin;g=g.end;/\s/.test(b.text.charAt(g-1))&&g--;for(var x=b=null,h=0;h<e.length;h++){var A=e[h];if(!(A.from>=g||A.to<=c)){var k=hb(a,d,1!=A.level?Math.min(g,A.to)-1:Math.max(c,A.from)).right,k=k<f?f-k+1E9:k-f;if(!b||x>k)b=A,x=k}}b||(b=e[e.length-1]);b.from<c&&(b={from:c,to:b.to,level:b.level});b.to>g&&(b={from:b.from,to:g,level:b.level});return b}function zb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;
if(null==ec){ec=d("pre");for(var e=0;49>e;++e)ec.appendChild(document.createTextNode("x")),ec.appendChild(d("br"));ec.appendChild(document.createTextNode("x"))}c(a.measure,ec);e=ec.offsetHeight/50;3<e&&(a.cachedTextHeight=e);b(a.measure);return e||1}function Gb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=d("span","xxxxxxxxxx"),e=d("pre",[b]);c(a.measure,e);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function Xc(a){for(var b=a.display,
c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:Hb(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Hb(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Yc(a){var b=zb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/
Gb(a.display)-3);return function(e){if(Ra(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function dc(a){var b=a.doc,c=Yc(a);b.iter(function(a){var b=c(a);b!=a.height&&S(a,b)})}function Ib(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;c=e.lineSpace.getBoundingClientRect();try{var f=b.clientX-c.left;var g=b.clientY-c.top}catch(Af){return null}b=
Vc(a,f,g);var x;d&&1==b.xRel&&(x=B(a.doc,b.line).text).length==b.ch&&(d=q(x,x.length,a.options.tabSize)-x.length,b=C(b.line,Math.max(0,Math.round((f-Jc(a.display).left)/Gb(a.display))-d)));return b}function Jb(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;a=a.display.view;for(var c=0;c<a.length;c++)if(b-=a[c].size,0>b)return c}function ma(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Ye(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},
e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b||g!=c.sel.primIndex){var x=c.sel.ranges[g];if(!(x.from().line>=a.display.viewTo||x.to().line<a.display.viewFrom)){var h=x.empty();(h||a.options.showCursorWhenSelecting)&&pe(a,x.head,e);h||Ze(a,x,f)}}return d}function pe(a,b,c){b=ib(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var e=c.appendChild(d("div","\u00a0","CodeMirror-cursor"));e.style.left=b.left+"px";
e.style.top=b.top+"px";e.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(d("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function xd(a,b){return a.top-b.top||a.left-b.left}function Ze(a,b,c){function e(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);h.appendChild(d("div",null,"CodeMirror-selected","position: absolute; left: "+
a+"px;\n                             top: "+b+"px; width: "+(null==c?l-a:c)+"px;\n                             height: "+(e-b)+"px"))}function f(b,c,d){function f(c,d){return vc(a,C(b,c),"div",h,d)}function g(b,c,d){b=$d(a,h,null,b);c="ltr"==c==("after"==d)?"left":"right";d="after"==d?b.begin:b.end-(/\s/.test(h.text.charAt(b.end-1))?2:1);return f(d,c)[c]}var h=B(x,b),A=h.text.length,U,ia,xa=ja(h,x.direction);ab(xa,c||0,null==d?A:d,function(a,b,x,h){var n="ltr"==x,p=f(a,n?"left":"right"),q=f(b-1,n?
"right":"left"),t=null==c&&0==a,r=null==d&&b==A,Ie=0==h;h=!xa||h==xa.length-1;3>=q.top-p.top?(b=(m?t:r)&&Ie?k:(n?p:q).left,e(b,p.top,((m?r:t)&&h?l:(n?q:p).right)-b,p.bottom)):(n?(n=m&&t&&Ie?k:p.left,t=m?l:g(a,x,"before"),a=m?k:g(b,x,"after"),r=m&&r&&h?l:q.right):(n=m?g(a,x,"before"):k,t=!m&&t&&Ie?l:p.right,a=!m&&r&&h?k:q.left,r=m?g(b,x,"after"):l),e(n,p.top,t-n,p.bottom),p.bottom<q.top&&e(k,p.bottom,null,q.top),e(a,q.top,r-a,q.bottom));if(!U||0>xd(p,U))U=p;0>xd(q,U)&&(U=q);if(!ia||0>xd(p,ia))ia=p;
0>xd(q,ia)&&(ia=q)});return{start:U,end:ia}}var g=a.display,x=a.doc,h=document.createDocumentFragment(),A=Jc(a.display),k=A.left,l=Math.max(g.sizerWidth,Za(a)-g.sizer.offsetLeft)-A.right,m="ltr"==x.direction,g=b.from();b=b.to();if(g.line==b.line)f(g.line,g.ch,b.ch);else{var xa=B(x,g.line),A=B(x,b.line),A=aa(xa)==aa(A),g=f(g.line,g.ch,A?xa.text.length+1:null).end;b=f(b.line,A?0:null,b.ch).start;A&&(g.top<b.top-2?(e(g.right,g.top,null,g.bottom),e(k,b.top,b.left,b.bottom)):e(g.right,g.top,b.left-g.right,
g.bottom));g.bottom<b.top&&e(k,g.bottom,null,b.top)}c.appendChild(h)}function jc(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function $e(a){a.state.focused||(a.display.input.focus(),qe(a))}function yd(a){a.state.delayingBlurEvent=
!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Gc(a))},100)}function qe(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(T(a,"focus",a,b),a.state.focused=!0,k(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Oa&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),jc(a))}function Gc(a,b){a.state.delayingBlurEvent||
(a.state.focused&&(T(a,"blur",a,b),a.state.focused=!1,fc(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function zd(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c];if(!d.hidden){if(la&&8>ua){var e=d.node.offsetTop+d.node.offsetHeight;var f=e-b;b=e}else f=d.node.getBoundingClientRect(),f=f.bottom-f.top;e=d.line.height-f;2>f&&(f=zb(a));if(.005<e||-.005>e)if(S(d.line,f),
Ad(d.line),d.rest)for(f=0;f<d.rest.length;f++)Ad(d.rest[f])}}}function Ad(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function re(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=Q(b,d),e=Q(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=Q(b,Da(B(b,f))+a.wrapper.clientHeight)):Math.min(c,
b.lastLine())>=e&&(d=Q(b,Da(B(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function af(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=Hb(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var x=c[g].alignable;if(x)for(var h=0;h<x.length;h++)x[h].style.left=
f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function bf(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=H(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var e=c.measure.appendChild(d("div",[d("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,e=e.offsetWidth-f;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(f,c.lineGutter.offsetWidth-e)+1;c.lineNumWidth=c.lineNumInnerWidth+e;c.lineNumChars=c.lineNumInnerWidth?b.length:
-1;c.lineGutter.style.width=c.lineNumWidth+"px";De(a);return!0}return!1}function ze(a,b){var c=a.display,d=zb(a.display);0>b.top&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=Lb(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var x=a.doc.height+tc(c),h=b.top<d,d=b.bottom>x-d;b.top<e?g.scrollTop=h?0:b.top:b.bottom>e+f&&(f=Math.min(b.top,(d?x:b.bottom)-f),f!=e&&(g.scrollTop=f));e=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft;a=Za(a)-
(a.options.fixedGutter?c.gutters.offsetWidth:0);if(c=b.right-b.left>a)b.right=b.left+a;10>b.left?g.scrollLeft=0:b.left<e?g.scrollLeft=Math.max(0,b.left-(c?0:10)):b.right>a+e-3&&(g.scrollLeft=b.right+(c?0:10)-a);return g}function Ld(a,b){null!=b&&(Md(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function pc(a){Md(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Ob(a,b,c){null==b&&null==c||Md(a);null!=b&&(a.curOp.scrollLeft=
b);null!=c&&(a.curOp.scrollTop=c)}function Md(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Yd(a,b.from),d=Yd(a,b.to);pf(a,c,d,b.margin)}}function pf(a,b,c,d){b=ze(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});Ob(a,b.scrollLeft,b.scrollTop)}function Mc(a,b){2>Math.abs(a.doc.scrollTop-b)||(Vb||Ce(a,{top:b}),rc(a,b,!0),Vb&&Ce(a),Oc(a,100))}function rc(a,b,c){b=Math.min(a.display.scroller.scrollHeight-
a.display.scroller.clientHeight,b);if(a.display.scroller.scrollTop!=b||c)a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}function Zb(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,af(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function Nc(a){var b=
a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+tc(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+eb(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function sc(a,b){b||(b=Nc(a));var c=a.display.barWidth,d=a.display.barHeight;qf(a,b);for(b=0;4>b&&c!=a.display.barWidth||
d!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&zd(a),qf(a,Nc(a)),c=a.display.barWidth,d=a.display.barHeight}function qf(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";c.heightForcer.style.borderBottom=d.bottom+"px solid transparent";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=
d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function ef(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&fc(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new Df[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,
a.display.scrollbarFiller);Z(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Zb(a,b):Mc(a,b)},a);a.display.scrollbars.addClass&&k(a.display.wrapper,a.display.scrollbars.addClass)}function $b(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,
updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ag};a=a.curOp;yc?yc.ops.push(a):a.ownsGroup=yc={ops:[a],delayedCallbacks:[]}}function Yb(a){Ge(a.curOp,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var c=a[b],e=c.cm,f=e.display,g=e.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=eb(e)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+
"px",g.sizer.style.borderRightWidth=eb(e)+"px",g.scrollbarsClipped=!0);c.updateMaxLine&&ca(e);c.mustUpdate=c.viewChanged||c.forceUpdate||null!=c.scrollTop||c.scrollToPos&&(c.scrollToPos.from.line<f.viewFrom||c.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&e.options.lineWrapping;c.update=c.mustUpdate&&new ge(e,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}for(b=0;b<a.length;b++)c=a[b],c.updatedDisplay=c.mustUpdate&&Be(c.cm,c.update);for(b=0;b<a.length;b++)if(c=a[b],e=c.cm,
f=e.display,c.updatedDisplay&&zd(e),c.barMeasure=Nc(e),f.maxLineChanged&&!e.options.lineWrapping&&(g=f.maxLine.text.length,g=hb(e,gb(e,f.maxLine),g,void 0),c.adjustWidthTo=g.left+3,e.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+c.adjustWidthTo+eb(e)+e.display.barWidth),c.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+c.adjustWidthTo-Za(e))),c.updatedDisplay||c.selectionChanged)c.preparedSelection=f.input.prepareSelection();for(b=0;b<a.length;b++)c=
a[b],e=c.cm,null!=c.adjustWidthTo&&(e.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<e.doc.scrollLeft&&Zb(e,Math.min(e.display.scroller.scrollLeft,c.maxScrollLeft),!0),e.display.maxLineChanged=!1),f=c.focus&&c.focus==h(),c.preparedSelection&&e.display.input.showSelection(c.preparedSelection,f),(c.updatedDisplay||c.startHeight!=e.doc.height)&&sc(e,c.barMeasure),c.updatedDisplay&&ue(e,c.barMeasure),c.selectionChanged&&jc(e),e.state.focused&&c.updateInput&&e.display.input.reset(c.typing),
f&&$e(c.cm);for(b=0;b<a.length;b++){var x=void 0,c=a[b],e=c.cm,f=e.display,g=e.doc;c.updatedDisplay&&Od(e,c.update);null==f.wheelStartX||null==c.scrollTop&&null==c.scrollLeft&&!c.scrollToPos||(f.wheelStartX=f.wheelStartY=null);null!=c.scrollTop&&rc(e,c.scrollTop,c.forceScroll);null!=c.scrollLeft&&Zb(e,c.scrollLeft,!0,!0);if(c.scrollToPos){var k=X(g,c.scrollToPos.from),l=X(g,c.scrollToPos.to),A=c.scrollToPos.margin;null==A&&(A=0);e.options.lineWrapping||k!=l||(k=k.ch?C(k.line,"before"==k.sticky?k.ch-
1:k.ch,"after"):k,l="before"==k.sticky?C(k.line,k.ch+1,"before"):k);for(var m=0;5>m;m++){var n=!1,x=ib(e,k),p=l&&l!=k?ib(e,l):x,x={left:Math.min(x.left,p.left),top:Math.min(x.top,p.top)-A,right:Math.max(x.left,p.left),bottom:Math.max(x.bottom,p.bottom)+A},p=ze(e,x),q=e.doc.scrollTop,t=e.doc.scrollLeft;null!=p.scrollTop&&(Mc(e,p.scrollTop),1<Math.abs(e.doc.scrollTop-q)&&(n=!0));null!=p.scrollLeft&&(Zb(e,p.scrollLeft),1<Math.abs(e.doc.scrollLeft-t)&&(n=!0));if(!n)break}l=x;V(e,"scrollCursorIntoView")||
(A=e.display,m=A.sizer.getBoundingClientRect(),k=null,0>l.top+m.top?k=!0:l.bottom+m.top>(window.innerHeight||document.documentElement.clientHeight)&&(k=!1),null==k||Bg||(l=d("div","\u200b",null,"position: absolute;\n                         top: "+(l.top-A.viewOffset-e.display.lineSpace.offsetTop)+"px;\n                         height: "+(l.bottom-l.top+eb(e)+A.barHeight)+"px;\n                         left: "+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;"),e.display.lineSpace.appendChild(l),
l.scrollIntoView(k),e.display.lineSpace.removeChild(l)))}l=c.maybeHiddenMarkers;k=c.maybeUnhiddenMarkers;if(l)for(A=0;A<l.length;++A)l[A].lines.length||T(l[A],"hide");if(k)for(l=0;l<k.length;++l)k[l].lines.length&&T(k[l],"unhide");f.wrapper.offsetHeight&&(g.scrollTop=e.display.scroller.scrollTop);c.changeObjs&&T(e,"changes",e,c.changeObjs);c.update&&c.update.finish()}})}function cb(a,b){if(a.curOp)return b();$b(a);try{return b()}finally{Yb(a)}}function Ga(a,b){return function(){if(a.curOp)return b.apply(a,
arguments);$b(a);try{return b.apply(a,arguments)}finally{Yb(a)}}}function Na(a){return function(){if(this.curOp)return a.apply(this,arguments);$b(this);try{return a.apply(this,arguments)}finally{Yb(this)}}}function Fa(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);$b(b);try{return a.apply(this,arguments)}finally{Yb(b)}}}function Ua(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||
e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Kb&&Sa(a.doc,b)<e.viewTo&&Nb(a);else if(c<=e.viewFrom)Kb&&Ta(a.doc,c+d)>e.viewFrom?Nb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Nb(a);else if(b<=e.viewFrom){var f=Kd(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Nb(a)}else if(c>=e.viewTo)(f=Kd(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Nb(a);else{var f=Kd(a,b,b,-1),g=Kd(a,c,c+d,1);f&&g?(e.view=
e.view.slice(0,f.index).concat(nb(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Nb(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Mb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Jb(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==t(a,c)&&a.push(c)))}function Nb(a){a.display.viewFrom=a.display.viewTo=
a.doc.first;a.display.view=[];a.display.viewOffset=0}function Kd(a,b,c,d){var e=Jb(a,b),f=a.display.view;if(!Kb||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=a.display.viewFrom,h=0;h<e;h++)g+=f[h].size;if(g!=b){if(0<d){if(e==f.length-1)return null;b=g+f[e].size-b;e++}else b=g-b;c+=b}for(;Sa(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function rf(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&
!d.changes||++b}return b}function Oc(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,n(qg,a))}function qg(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=mb(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?na(b.mode,d.state):null,x=Cb(a,f,d,!0);h&&(d.state=h);f.styles=x.styles;h=f.styleClasses;
(x=x.classes)?f.styleClasses=x:h&&(f.styleClasses=null);x=!g||g.length!=f.styles.length||h!=x&&(!h||!x||h.bgClass!=x.bgClass||h.textClass!=x.textClass);for(h=0;!x&&h<g.length;++h)x=g[h]!=f.styles[h];x&&e.push(d.line);f.stateAfter=d.save()}else f.text.length<=a.options.maxHighlightLength&&ba(a,f.text,d),f.stateAfter=0==d.line%5?d.save():null;d.nextLine();if(+new Date>c)return Oc(a,a.options.workDelay),!0});b.highlightFrontier=d.line;b.modeFrontier=Math.max(b.modeFrontier,d.line);e.length&&cb(a,function(){for(var b=
0;b<e.length;b++)Mb(a,e[b],"text")})}}function Be(a,c){var d=a.display,e=a.doc;if(c.editorIsHidden)return Nb(a),!1;if(!c.force&&c.visible.from>=d.viewFrom&&c.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==rf(a))return!1;bf(a)&&(Nb(a),c.dims=Xc(a));var f=e.first+e.size,x=Math.max(c.visible.from-a.options.viewportMargin,e.first),k=Math.min(f,c.visible.to+a.options.viewportMargin);d.viewFrom<x&&20>x-d.viewFrom&&(x=Math.max(e.first,d.viewFrom));
d.viewTo>k&&20>d.viewTo-k&&(k=Math.min(f,d.viewTo));Kb&&(x=Sa(a.doc,x),k=Ta(a.doc,k));e=x!=d.viewFrom||k!=d.viewTo||d.lastWrapHeight!=c.wrapperHeight||d.lastWrapWidth!=c.wrapperWidth;f=a.display;0==f.view.length||x>=f.viewTo||k<=f.viewFrom?(f.view=nb(a,x,k),f.viewFrom=x):(f.viewFrom>x?f.view=nb(a,x,f.viewFrom).concat(f.view):f.viewFrom<x&&(f.view=f.view.slice(Jb(a,x))),f.viewFrom=x,f.viewTo<k?f.view=f.view.concat(nb(a,f.viewTo,k)):f.viewTo>k&&(f.view=f.view.slice(0,Jb(a,k))));f.viewTo=k;d.viewOffset=
Da(B(a.doc,d.viewFrom));a.display.mover.style.top=d.viewOffset+"px";k=rf(a);if(!e&&0==k&&!c.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;a.hasFocus()?x=null:(x=h())&&g(a.display.lineDiv,x)?(x={activeElt:x},window.getSelection&&(f=window.getSelection(),f.anchorNode&&f.extend&&g(a.display.lineDiv,f.anchorNode)&&(x.anchorNode=f.anchorNode,x.anchorOffset=f.anchorOffset,x.focusNode=f.focusNode,x.focusOffset=f.focusOffset))):x=null;4<k&&(d.lineDiv.style.display=
"none");ug(a,d.updateLineNumbers,c.dims);4<k&&(d.lineDiv.style.display="");d.renderedView=d.view;(k=x)&&k.activeElt&&k.activeElt!=h()&&(k.activeElt.focus(),k.anchorNode&&g(document.body,k.anchorNode)&&g(document.body,k.focusNode)&&(x=window.getSelection(),f=document.createRange(),f.setEnd(k.anchorNode,k.anchorOffset),f.collapse(!1),x.removeAllRanges(),x.addRange(f),x.extend(k.focusNode,k.focusOffset)));b(d.cursorDiv);b(d.selectionDiv);d.gutters.style.height=d.sizer.style.minHeight=0;e&&(d.lastWrapHeight=
c.wrapperHeight,d.lastWrapWidth=c.wrapperWidth,Oc(a,400));d.updateLineNumbers=null;return!0}function Od(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Za(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+tc(a.display)-Lb(a),c.top)}),b.visible=re(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Be(a,b))break;zd(a);d=Nc(a);ma(a);sc(a,d);ue(a,d);b.force=!1}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||
a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Ce(a,b){b=new ge(a,b);if(Be(a,b)){zd(a);Od(a,b);var c=Nc(a);ma(a);sc(a,c);ue(a,c);b.finish()}}function ug(a,c,d){function e(b){var c=b.nextSibling;Oa&&tb&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var f=a.display,g=a.options.lineNumbers,h=f.lineDiv,
x=h.firstChild,k=f.view,f=f.viewFrom,l=0;l<k.length;l++){var A=k[l];if(!A.hidden)if(A.node&&A.node.parentNode==h){for(;x!=A.node;)x=e(x);x=g&&null!=c&&c<=f&&A.lineNumber;A.changes&&(-1<t(A.changes,"gutter")&&(x=!1),Sd(a,A,f,d));x&&(b(A.lineNumber),A.lineNumber.appendChild(document.createTextNode(H(a.options,f))));x=A.node.nextSibling}else{var m=lc(a,A,f,d);h.insertBefore(m,x)}f+=A.size}for(;x;)x=e(x)}function De(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function ue(a,
b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+eb(a)+"px"}function sf(a){var c=a.display.gutters,e=a.options.gutters;b(c);for(var f=0;f<e.length;++f){var g=e[f],h=c.appendChild(d("div",null,"CodeMirror-gutter "+g));"CodeMirror-linenumbers"==g&&(a.display.lineGutter=h,h.style.width=(a.display.lineNumWidth||1)+"px")}c.style.display=f?"":"none";De(a)}function Ae(a){var b=t(a.gutters,
"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function tf(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}}function tg(a){a=tf(a);a.x*=jb;a.y*=jb;return a}function uf(a,b){var c=tf(b),d=c.x,c=c.y,e=a.display,f=e.scroller,g=f.scrollWidth>
f.clientWidth,h=f.scrollHeight>f.clientHeight;if(d&&g||c&&h){if(c&&tb&&Oa){var g=b.target,x=e.view;a:for(;g!=f;g=g.parentNode)for(var k=0;k<x.length;k++)if(x[k].node==g){a.display.currentWheelTarget=g;break a}}!d||Vb||ub||null==jb?(c&&null!=jb&&(b=c*jb,h=a.doc.scrollTop,g=h+e.wrapper.clientHeight,0>b?h=Math.max(0,h+b-50):g=Math.min(a.doc.height,g+b+50),Ce(a,{top:h,bottom:g})),20>he&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=
e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(jb=(jb*he+a)/(he+1),++he)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&h&&Mc(a,Math.max(0,f.scrollTop+c*jb)),Zb(a,Math.max(0,f.scrollLeft+d*jb)),(!c||c&&h)&&sa(b),e.wheelStartX=null)}}function pb(a,b){b=a[b];a.sort(function(a,b){return N(a.from(),b.from())});b=t(a,b);for(var c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=N(e.to(),d.from())){var f=
qa(e.from(),d.from()),g=ga(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new oa(d?g:f,d?f:g))}}return new kb(a,b)}function Db(a,b){return new kb([new oa(a,b||a)],0)}function Pb(a){return a.text?C(a.from.line+a.text.length-1,r(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function vf(a,b){if(0>N(a,b.from))return a;if(0>=N(a,b.to))return Pb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Pb(b).ch-b.to.ch);return C(c,
d)}function Ee(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new oa(vf(e.anchor,b),vf(e.head,b)))}return pb(c,a.sel.primIndex)}function wf(a,b,c){return a.line==b.line?C(c.line,a.ch-b.ch+c.ch):C(c.line+(a.line-b.line),a.ch)}function Fe(a){a.doc.mode=bc(a.options,a.doc.modeOption);Pc(a)}function Pc(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;Oc(a,100);a.state.modeGen++;
a.curOp&&Ua(a)}function ff(a,b){return 0==b.from.ch&&0==b.to.ch&&""==r(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function ve(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Ha(a);pa(a,e);c=d?d(a):1;c!=a.height&&S(a,c);Ea(a,"change",a,b)}function f(a,b){for(var e=[];a<b;++a)e.push(new zc(x[a],c?c[a]:null,d));return e}var g=b.from,h=b.to,x=b.text,k=B(a,g.line),l=B(a,h.line),A=r(x),m=c?c[x.length-1]:null,U=h.line-
g.line;b.full?(a.insert(0,f(0,x.length)),a.remove(x.length,a.size-x.length)):ff(a,b)?(h=f(0,x.length-1),e(l,l.text,m),U&&a.remove(g.line,U),h.length&&a.insert(g.line,h)):k==l?1==x.length?e(k,k.text.slice(0,g.ch)+A+k.text.slice(h.ch),m):(U=f(1,x.length-1),U.push(new zc(A+k.text.slice(h.ch),m,d)),e(k,k.text.slice(0,g.ch)+x[0],c?c[0]:null),a.insert(g.line+1,U)):1==x.length?(e(k,k.text.slice(0,g.ch)+x[0]+l.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,U)):(e(k,k.text.slice(0,g.ch)+x[0],c?c[0]:null),
e(l,A+l.text.slice(h.ch),m),m=f(1,x.length-1),1<U&&a.remove(g.line+1,U-1),a.insert(g.line+1,m));Ea(a,"change",a,b)}function ac(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var x=f&&h.sharedHist;if(!c||x)b(h.doc,x),d(h.doc,a,x)}}}d(a,null,!0)}function xf(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;dc(a);Fe(a);jf(a);a.options.lineWrapping||ca(a);a.options.mode=b.modeOption;Ua(a)}function jf(a){("rtl"==a.doc.direction?
k:fc)(a.display.lineDiv,"CodeMirror-rtl")}function rg(a){cb(a,function(){jf(a);Ua(a)})}function Pd(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function xe(a,b){var c={from:ha(b.from),to:Pb(b),text:M(a,b.from,b.to)};zf(a,c,b.from.line,b.to.line+1);ac(a,function(a){return zf(a,c,b.from.line,b.to.line+1)},!0);return c}function gf(a){for(;a.length;)if(r(a).ranges)a.pop();
else break}function yf(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.lastModTime>f-(a.cm?a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0))){if(e.lastOp==d){gf(e.done);var h=r(e.done)}else e.done.length&&!r(e.done).ranges?h=r(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),h=r(e.done)):h=void 0;g=h}if(g){var x=r(h.changes);0==N(b.from,b.to)&&0==N(b.from,x.to)?x.to=Pb(b):
h.changes.push(xe(a,b))}else for((h=r(e.done))&&h.ranges||Jd(a.sel,e.done),h={changes:[xe(a,b)],generation:e.generation},e.done.push(h);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;x||T(a,"historyAdded")}function Jd(a,b){var c=r(b);c&&c.ranges&&c.equals(a)||b.push(a)}function zf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,
c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function sg(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function se(a,b){var c;if(c=b["spans_"+a.id]){for(var d=[],e=0;e<b.text.length;++e)d.push(sg(c[e]));c=d}else c=null;a=ea(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(d=c[b],e=a[b],d&&e){var f=0;a:for(;f<e.length;++f){for(var g=
e[f],h=0;h<d.length;++h)if(d[h].marker==g.marker)continue a;d.push(g)}}else e&&(c[b]=e);return c}function nc(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?kb.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];d.push({changes:g});for(var h=0;h<f.length;++h){var x=f[h],k;g.push({from:x.from,to:x.to,text:x.text});if(b)for(var l in x)(k=l.match(/^spans_(\d+)$/))&&-1<t(b,Number(k[1]))&&(r(g)[l]=x[l],delete x[l])}}}return d}function Hd(a,b,c,d){return d?(a=a.anchor,c&&(d=
0>N(b,a),d!=0>N(c,a)?(a=b,b=c):d!=0>N(b,c)&&(b=c)),new oa(a,b)):new oa(c||b,b)}function Lc(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend));Ia(a,new kb([Hd(a.sel.primary(),b,c,e)],0),d)}function cf(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=Hd(a.sel.ranges[f],b[f],null,e);b=pb(d,a.sel.primIndex);Ia(a,b,c)}function te(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;Ia(a,pb(e,a.sel.primIndex),d)}function pg(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=
[];for(var c=0;c<b.length;c++)this.ranges[c]=new oa(X(a,b[c].anchor),X(a,b[c].head))},origin:c&&c.origin};T(a,"beforeSelectionChange",a,c);a.cm&&T(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?pb(c.ranges,c.ranges.length-1):b}function df(a,b,c){var d=a.history.done,e=r(d);e&&e.ranges?(d[d.length-1]=b,Id(a,b,c)):Ia(a,b,c)}function Ia(a,b,c){Id(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==
e.lastSelTime&&e.lastOrigin==f)){g=r(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Jd(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&gf(e.undone)}function Id(a,b,c){if(u(a,"beforeSelectionChange")||a.cm&&u(a.cm,"beforeSelectionChange"))b=pg(a,b,c);var d=c&&c.bias||(0>N(b.primary().head,
a.sel.primary().head)?-1:1);hf(a,kf(a,b,d,!0));c&&!1===c.scroll||!a.cm||pc(a.cm)}function hf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ob(a.cm)),Ea(a,"cursorActivity",a))}function we(a){hf(a,kf(a,a.sel,null,!1))}function kf(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],x=ye(a,g.anchor,h&&h.anchor,c,d),h=ye(a,g.head,h&&h.head,c,d);if(e||x!=g.anchor||h!=g.head)e||(e=b.ranges.slice(0,
f)),e[f]=new oa(x,h)}return e?pb(e,b.primIndex):b}function oc(a,b,c,d,e){var f=B(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],x=h.marker;if((null==h.from||(x.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(x.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(T(x,"beforeCursorEnter"),x.explicitlyCleared))if(f.markedSpans){--g;continue}else break;if(x.atomic){if(c){g=x.find(0>d?1:-1);h=void 0;if(0>d?x.inclusiveRight:x.inclusiveLeft)g=lf(a,g,-d,g&&g.line==
b.line?f:null);if(g&&g.line==b.line&&(h=N(g,c))&&(0>d?0>h:0<h))return oc(a,g,b,d,e)}c=x.find(0>d?-1:1);if(0>d?x.inclusiveLeft:x.inclusiveRight)c=lf(a,c,d,c.line==b.line?f:null);return c?oc(a,c,b,d,e):null}}}return b}function ye(a,b,c,d,e){d=d||1;b=oc(a,b,c,d,e)||!e&&oc(a,b,c,d,!0)||oc(a,b,c,-d,e)||!e&&oc(a,b,c,-d,!0);return b?b:(a.cantEdit=!0,C(a.first,0))}function lf(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?X(a,C(b.line-1)):null:0<c&&b.ch==(d||B(a,b.line)).text.length?b.line<a.first+a.size-1?
C(b.line+1,0):null:new C(b.line,b.ch+c)}function mf(a){a.setSelection(C(a.firstLine(),0),C(a.lastLine()),Bb)}function nf(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};c&&(d.update=function(b,c,e,f){b&&(d.from=X(a,b));c&&(d.to=X(a,c));e&&(d.text=e);void 0!==f&&(d.origin=f)});T(a,"beforeChange",a,d);a.cm&&T(a.cm,"beforeChange",a.cm,d);return d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function qc(a,b,c){if(a.cm){if(!a.cm.curOp)return Ga(a.cm,
qc)(a,b,c);if(a.cm.state.suppressEdits)return}if(u(a,"beforeChange")||a.cm&&u(a.cm,"beforeChange"))if(b=nf(a,b,!0),!b)return;if(c=Ef&&!c&&za(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)of(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text,origin:b.origin});else of(a,b)}function of(a,b){if(1!=b.text.length||""!=b.text[0]||0!=N(b.from,b.to)){var c=Ee(a,b);yf(a,b,c,a.cm?a.cm.curOp.id:NaN);cd(a,b,c,ea(a,b));var d=[];ac(a,function(a,c){c||-1!=t(d,a.history)||(Ff(a.history,b),d.push(a.history));cd(a,b,null,
ea(a,b))})}}function Nd(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e=a.history,f,g=a.sel,h="undo"==b?e.done:e.undone,x="undo"==b?e.undone:e.done,k=0;k<h.length&&(f=h[k],c?!f.ranges||f.equals(a.sel):f.ranges);k++);if(k!=h.length){for(e.lastOrigin=e.lastSelOrigin=null;;)if(f=h.pop(),f.ranges){Jd(f,x);if(c&&!f.equals(a.sel)){Ia(a,f,{clearRedo:!1});return}g=f}else{if(d){h.push(f);return}break}var l=[];Jd(g,x);x.push({changes:l,generation:e.generation});e.generation=f.generation||++e.maxGeneration;
var A=u(a,"beforeChange")||a.cm&&u(a.cm,"beforeChange");c=function(c){var d=f.changes[c];d.origin=b;if(A&&!nf(a,d,!1))return h.length=0,{};l.push(xe(a,d));var e=c?Ee(a,d):r(h);cd(a,d,e,se(a,d));!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:Pb(d)});var g=[];ac(a,function(a,b){b||-1!=t(g,a.history)||(Ff(a.history,d),g.push(a.history));cd(a,d,null,se(a,d))})};for(d=f.changes.length-1;0<=d;--d)if(e=c(d))return e.v}}}function Gf(a,b){if(0!=b&&(a.first+=b,a.sel=new kb(w(a.sel.ranges,function(a){return new oa(C(a.anchor.line+
b,a.anchor.ch),C(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Ua(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Mb(a.cm,d,"gutter")}}function cd(a,b,c,d){if(a.cm&&!a.cm.curOp)return Ga(a.cm,cd)(a,b,c,d);if(b.to.line<a.first)Gf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Gf(a,e);b={from:C(a.first,0),to:C(b.to.line+e,b.to.ch),text:[r(b.text)],origin:b.origin}}e=
a.lastLine();b.to.line>e&&(b={from:b.from,to:C(e,B(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=M(a,b.from,b.to);c||(c=Ee(a,b));a.cm?Cg(a.cm,b,d):ve(a,b,d);Id(a,c,Bb)}}function Cg(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,x=f.line;a.options.lineWrapping||(x=J(aa(B(d,f.line))),d.iter(x,g.line+1,function(a){if(a==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&ob(a);ve(d,b,c,Yc(a));a.options.lineWrapping||(d.iter(x,f.line+b.text.length,function(a){var b=ta(a);b>
e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));wb(d,f.line);Oc(a,400);c=b.text.length-(g.line-f.line)-1;b.full?Ua(a):f.line!=g.line||1!=b.text.length||ff(a.doc,b)?Ua(a,f.line,g.line+1,c):Mb(a,f.line,"text");c=u(a,"changes");if((d=u(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&Ea(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Ac(a,b,c,d,
e){d||(d=c);0>N(d,c)&&(d=[d,c],c=d[0],d=d[1]);"string"==typeof b&&(b=a.splitLines(b));qc(a,{from:c,to:d,text:b,origin:e})}function Hf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function If(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges)for(f.copied||(f=a[e]=f.deepCopy(),f.copied=!0),g=0;g<f.ranges.length;g++)Hf(f.ranges[g].anchor,b,c,d),Hf(f.ranges[g].head,b,c,d);else{for(var h=0;h<f.changes.length;++h){var x=f.changes[h];if(c<x.from.line)x.from=C(x.from.line+d,x.from.ch),
x.to=C(x.to.line+d,x.to.ch);else if(b<=x.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Ff(a,b){var c=b.from.line,d=b.to.line;b=b.text.length-(d-c)-1;If(a.done,c,d,b);If(a.undone,c,d,b)}function dd(a,b,c,d){var e=b,f=b;"number"==typeof b?f=B(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=J(b);if(null==e)return null;d(f,e)&&a.cm&&Mb(a.cm,e,c);return f}function ed(a){this.lines=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function fd(a){this.children=
a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Dg(a,b,c,d){var e=new gd(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);dd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!Ra(a,b)&&(c=Da(b)<a.scrollTop,S(b,b.height+Rb(e)),c&&Ld(f,e.height),f.curOp.forceUpdate=!0);return!0});f&&Ea(f,"lineWidgetAdded",
f,e,"number"==typeof b?b:J(b));return e}function Bc(a,b,c,d,f){if(d&&d.shared)return Eg(a,b,c,d,f);if(a.cm&&!a.cm.curOp)return Ga(a.cm,Bc)(a,b,c,d,f);var g=new Wb(a,f);f=N(b,c);d&&p(d,g,!1);if(0<f||0==f&&!1!==g.clearWhenEmpty)return g;g.replacedWith&&(g.collapsed=!0,g.widgetNode=e("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(g.widgetNode.insertLeft=!0));if(g.collapsed){if(Ma(a,b.line,b,c,g)||b.line!=c.line&&Ma(a,
c.line,b,c,g))throw Error("Inserting collapsed marker partially overlapping an existing one");Kb=!0}g.addToHistory&&yf(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var h=b.line,k=a.cm,x;a.iter(h,c.line+1,function(a){k&&g.collapsed&&!k.options.lineWrapping&&aa(a)==k.display.maxLine&&(x=!0);g.collapsed&&h!=b.line&&S(a,0);var d=new ya(g,h==b.line?b.ch:null,h==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++h});g.collapsed&&a.iter(b.line,c.line+1,function(b){Ra(a,
b)&&S(b,0)});g.clearOnEnter&&Z(g,"beforeCursorEnter",function(){return g.clear()});g.readOnly&&(Ef=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());g.collapsed&&(g.id=++Jf,g.atomic=!0);if(k){x&&(k.curOp.updateMaxLine=!0);if(g.collapsed)Ua(k,b.line,c.line+1);else if(g.className||g.title||g.startStyle||g.endStyle||g.css)for(d=b.line;d<=c.line;d++)Mb(k,d,"text");g.atomic&&we(k.doc);Ea(k,"markerAdded",k,g)}return g}function Eg(a,b,c,d,e){d=p(d);d.shared=!1;var f=[Bc(a,b,c,d,e)],
g=f[0],h=d.widgetNode;ac(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Bc(a,X(a,b),X(a,c),d,e));for(var k=0;k<a.linked.length;++k)if(a.linked[k].isParent)return;g=r(f)});return new hd(f,g)}function Kf(a){return a.findMarks(C(a.first,0),a.clipPos(C(a.lastLine())),function(a){return a.parent})}function Fg(a){for(var b=function(b){b=a[b];var c=[b.primary.doc];ac(b.primary.doc,function(a){return c.push(a)});for(var d=0;d<b.markers.length;d++){var e=b.markers[d];-1==t(c,e.doc)&&(e.parent=null,
b.markers.splice(d--,1))}},c=0;c<a.length;c++)b(c)}function Gg(a){var b=this;Lf(b);if(!V(b,a)&&!sb(b.display,a)){sa(a);la&&(Mf=+new Date);var c=Ib(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||-1!=t(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=Ga(b,function(){var a=h.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a="");f[d]=a;++g==e&&(c=X(b.doc,
c),a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"},qc(b.doc,a),df(b.doc,Db(c,Pb(a))))});h.readAsText(a)}},k=0;k<e;++k)h(d[k],k);else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},20);else try{if(h=a.dataTransfer.getData("Text")){b.state.draggingText&&!b.state.draggingText.copy&&(k=b.listSelections());Id(b.doc,Db(c,c));if(k)for(d=0;d<k.length;++d)Ac(b.doc,"",k[d].anchor,k[d].head,"drag");
b.replaceSelection(h,"around","paste");b.display.input.focus()}}catch(kh){}}}function Lf(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Nf(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Hg(){var a;Z(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Nf(Ig)},100))});Z(window,"blur",function(){return Nf(Gc)})}
function Ig(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;b.scrollbarsClipped=!1;a.setSize()}function Jg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)?$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}
function Kg(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=w(c.split(" "),Jg),f=0;f<e.length;f++){if(f==e.length-1){var g=e.join(" ");var h=d}else g=e.slice(0,f+1).join(" "),h="...";var k=b[g];if(!k)b[g]=h;else if(k!=h)throw Error("Inconsistent bindings for "+g);}delete a[c]}}for(var x in b)a[x]=b[x];return a}function Cc(a,b,c,d){b=ie(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";
if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Cc(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=Cc(a,b.fallthrough[e],c,d);if(f)return f}}}function Of(a){a="string"==typeof a?a:Xb[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Pf(a,b,c){var d=a;b.altKey&&"Alt"!=d&&(a="Alt-"+a);(Qf?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a);(Qf?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a);!c&&b.shiftKey&&
"Shift"!=d&&(a="Shift-"+a);return a}function Rf(a,b){if(ub&&34==a.keyCode&&a["char"])return!1;var c=Xb[a.keyCode];if(null==c||a.altGraphKey)return!1;3==a.keyCode&&a.code&&(c=a.code);return Pf(c,a,b)}function ie(a){return"string"==typeof a?id[a]:a}function Dc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=N(f.from,r(d).to);){var g=d.pop();if(0>N(g.from,f.from)){f.from=g.from;break}}d.push(f)}cb(a,function(){for(var b=d.length-1;0<=b;b--)Ac(a.doc,"",d[b].from,
d[b].to,"+delete");pc(a)})}function Ne(a,b,c){b=P(a.text,b+c,c);return 0>b||b>a.text.length?null:b}function Oe(a,b,c){a=Ne(a,b.ch,c);return null==a?null:new C(b.line,a,0>c?"after":"before")}function Pe(a,b,c,d,e){if(a&&(a=ja(c,b.doc.direction))){a=0>e?r(a):a[0];var f=0>e==(1==a.level)?"after":"before";if(0<a.level||"rtl"==b.doc.direction){var g=gb(b,c);var h=0>e?c.text.length-1:0;var k=hb(b,g,h).top;h=L(function(a){return hb(b,g,a).top==k},0>e==(1==a.level)?a.from:a.to-1,h);"before"==f&&(h=Ne(c,h,
1))}else h=0>e?a.to:a.from;return new C(d,h,f)}return new C(d,0>e?c.text.length:0,0>e?"before":"after")}function Lg(a,b,c,d){var e=ja(b,a.doc.direction);if(!e)return Oe(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):0>=c.ch&&(c.ch=0,c.sticky="after");var f=K(e,c.ch,c.sticky),g=e[f];if("ltr"==a.doc.direction&&0==g.level%2&&(0<d?g.to>c.ch:g.from<c.ch))return Oe(b,c,d);var h=function(a,c){return Ne(b,a instanceof C?a.ch:a,c)},k,l=function(c){if(!a.options.lineWrapping)return{begin:0,
end:b.text.length};k=k||gb(a,b);return $d(a,b,k,c)},x=l("before"==c.sticky?h(c,-1):c.ch);if("rtl"==a.doc.direction||1==g.level){var m=1==g.level==0>d,A=h(c,m?1:-1);if(null!=A&&(m?A<=g.to&&A<=x.end:A>=g.from&&A>=x.begin))return new C(c.line,A,m?"before":"after")}g=function(a,b,d){for(var f=function(a,b){return b?new C(c.line,h(a,1),"before"):new C(c.line,a,"after")};0<=a&&a<e.length;a+=b){var g=e[a],k=0<b==(1!=g.level),l=k?d.begin:h(d.end,-1);if(g.from<=l&&l<g.to)return f(l,k);l=k?g.from:h(g.to,-1);
if(d.begin<=l&&l<d.end)return f(l,k)}};if(f=g(f+d,d,x))return f;x=0<d?x.end:h(x.begin,-1);return null==x||0<d&&x==b.text.length||!(f=g(0<d?0:e.length-1,d,l(x)))?null:f}function Sf(a,b){var c=B(a.doc,b),d=aa(c);d!=c&&(b=J(d));return Pe(!0,a,d,b,1)}function Tf(a,b){var c=Sf(a,b.line),d=B(a.doc,c.line);a=ja(d,a.doc.direction);return a&&0!=a[0].level?c:(d=Math.max(0,d.text.search(/\S/)),C(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d,c.sticky))}function je(a,b,c){if("string"==typeof b&&(b=jd[b],!b))return!1;
a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=ke}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function kd(a,b,c,d){var e=a.state.keySeq;if(e){if(Of(b))return"handled";/\'$/.test(b)?a.state.keySeq=null:Mg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});if(Uf(a,e+" "+b,c,d))return!0}return Uf(a,b,c,d)}function Uf(a,b,c,d){a:{for(var e=0;e<a.state.keyMaps.length;e++){var f=
Cc(b,a.state.keyMaps[e],d,a);if(f){d=f;break a}}d=a.options.extraKeys&&Cc(b,a.options.extraKeys,d,a)||Cc(b,a.options.keyMap,d,a)}"multi"==d&&(a.state.keySeq=b);"handled"==d&&Ea(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)sa(c),jc(a);return!!d}function Vf(a,b){var c=Rf(b,!0);return c?b.shiftKey&&!a.state.keySeq?kd(a,"Shift-"+c,b,function(b){return je(a,b,!0)})||kd(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return je(a,b)}):kd(a,c,b,function(b){return je(a,b)}):!1}function Ng(a,
b,c){return kd(a,"'"+c+"'",b,function(b){return je(a,b,!0)})}function Wf(a){this.curOp.focus=h();if(!V(this,a)){la&&11>ua&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Vf(this,a);ub&&(Qe=c?b:null,!c&&88==b&&!Og&&(tb?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Pg(this)}}function Pg(a){function b(a){18!=a.keyCode&&a.altKey||(fc(c,"CodeMirror-crosshair"),Y(document,
"keyup",b),Y(document,"mouseover",b))}var c=a.display.lineDiv;k(c,"CodeMirror-crosshair");Z(document,"keyup",b);Z(document,"mouseover",b)}function Xf(a){16==a.keyCode&&(this.doc.sel.shift=!1);V(this,a)}function Yf(a){if(!(sb(this.display,a)||V(this,a)||a.ctrlKey&&!a.altKey||tb&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(ub&&b==Qe)Qe=null,sa(a);else if(!ub||a.which&&!(10>a.which)||!Vf(this,a))if(b=String.fromCharCode(null==c?b:c),"\b"!=b&&!Ng(this,a,b))this.display.input.onKeyPress(a)}}function Qg(a,
b){var c=+new Date;if(ld&&ld.compare(c,a,b))return md=ld=null,"triple";if(md&&md.compare(c,a,b))return ld=new Re(c,a,b),md=null,"double";md=new Re(c,a,b);ld=null;return"single"}function Zf(a){var b=this.display;if(!(V(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.input.ensurePolled(),b.shift=a.shiftKey,sb(b,a))Oa||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));else if(!le(this,a,"gutterClick",!0)){var c=Ib(this,a),d=lb(a),e=c?Qg(c,d):"single";window.focus();
1==d&&this.state.selectingText&&this.state.selectingText(a);c&&Rg(this,d,c,e,a)||(1==d?c?Sg(this,c,e,a):(a.target||a.srcElement)==b.scroller&&sa(a):2==d?(c&&Lc(this.doc,c),setTimeout(function(){return b.input.focus()},20)):3==d&&(Se?$f(this,a):yd(this)))}}function Rg(a,b,c,d,e){var f="Click";"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f);return kd(a,Pf((1==b?"Left":2==b?"Middle":"Right")+f,e),e,function(b){"string"==typeof b&&(b=jd[b]);if(!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=
!0),d=b(a,c)!=ke}finally{a.state.suppressEdits=!1}return d})}function Sg(a,b,c,d){la?setTimeout(n($e,a),0):a.curOp.focus=h();var e=a.getOption("configureMouse"),e=e?e(a,c,d):{};null==e.unit&&(e.unit=(Tg?d.shiftKey&&d.metaKey:d.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line");if(null==e.extend||a.doc.extend)e.extend=a.doc.extend||d.shiftKey;null==e.addNew&&(e.addNew=tb?d.metaKey:d.ctrlKey);null==e.moveOnDrag&&(e.moveOnDrag=!(tb?d.altKey:d.ctrlKey));var f=a.doc.sel,g;a.options.dragDrop&&
Ug&&!a.isReadOnly()&&"single"==c&&-1<(g=f.contains(b))&&(0>N((g=f.ranges[g]).from(),b)||0<b.xRel)&&(0<N(g.to(),b)||0>b.xRel)?Vg(a,d,b,e):Wg(a,d,b,e)}function Vg(a,b,c,d){var e=a.display,f=!1,g=Ga(a,function(b){Oa&&(e.scroller.draggable=!1);a.state.draggingText=!1;Y(e.wrapper.ownerDocument,"mouseup",g);Y(e.wrapper.ownerDocument,"mousemove",h);Y(e.scroller,"dragstart",k);Y(e.scroller,"drop",g);f||(sa(b),d.addNew||Lc(a.doc,c,null,null,d.extend),Oa||la&&9==ua?setTimeout(function(){e.wrapper.ownerDocument.body.focus();
e.input.focus()},20):e.input.focus())}),h=function(a){f=f||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)},k=function(){return f=!0};Oa&&(e.scroller.draggable=!0);a.state.draggingText=g;g.copy=!d.moveOnDrag;e.scroller.dragDrop&&e.scroller.dragDrop();Z(e.wrapper.ownerDocument,"mouseup",g);Z(e.wrapper.ownerDocument,"mousemove",h);Z(e.scroller,"dragstart",k);Z(e.scroller,"drop",g);yd(a);setTimeout(function(){return e.input.focus()},20)}function ag(a,b,c){if("char"==c)return new oa(b,
b);if("word"==c)return a.findWordAt(b);if("line"==c)return new oa(C(b.line,0),X(a.doc,C(b.line+1,0)));a=c(a,b);return new oa(a.from,a.to)}function Wg(a,b,c,d){function e(b){if(0!=N(t,b))if(t=b,"rectangle"==d.unit){for(var e=[],g=a.options.tabSize,h=q(B(x,c.line).text,c.ch,g),k=q(B(x,b.line).text,b.ch,g),l=Math.min(h,k),h=Math.max(h,k),k=Math.min(c.line,b.line),n=Math.min(a.lastLine(),Math.max(c.line,b.line));k<=n;k++){var r=B(x,k).text,U=f(r,l,g);l==h?e.push(new oa(C(k,U),C(k,U))):r.length>U&&e.push(new oa(C(k,
U),C(k,f(r,h,g))))}e.length||e.push(new oa(c,c));Ia(x,pb(m.ranges.slice(0,A).concat(e),A),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=p,l=ag(a,b,d.unit),b=e.anchor,0<N(l.anchor,b)?(g=l.head,b=qa(e.from(),l.anchor)):(g=l.anchor,b=ga(e.to(),l.head)),e=m.ranges.slice(0),e[A]=Xg(a,new oa(X(x,b),g)),Ia(x,pb(e,A),Te)}function g(b){var c=++U,f=Ib(a,b,!0,"rectangle"==d.unit);if(f)if(0!=N(f,t)){a.curOp.focus=h();e(f);var k=re(l,x);(f.line>=k.to||f.line<k.from)&&setTimeout(Ga(a,function(){U==c&&
g(b)}),150)}else{var m=b.clientY<r.top?-20:b.clientY>r.bottom?20:0;m&&setTimeout(Ga(a,function(){U==c&&(l.scroller.scrollTop+=m,g(b))}),50)}}function k(b){a.state.selectingText=!1;U=Infinity;sa(b);l.input.focus();Y(l.wrapper.ownerDocument,"mousemove",y);Y(l.wrapper.ownerDocument,"mouseup",u);x.history.lastSelOrigin=null}var l=a.display,x=a.doc;sa(b);var m=x.sel,n=m.ranges;if(d.addNew&&!d.extend){var A=x.sel.contains(c);var p=-1<A?n[A]:new oa(c,c)}else p=x.sel.primary(),A=x.sel.primIndex;"rectangle"==
d.unit?(d.addNew||(p=new oa(c,c)),c=Ib(a,b,!0,!0),A=-1):(b=ag(a,c,d.unit),p=d.extend?Hd(p,b.anchor,b.head,d.extend):b);d.addNew?-1==A?(A=n.length,Ia(x,pb(n.concat([p]),A),{scroll:!1,origin:"*mouse"})):1<n.length&&n[A].empty()&&"char"==d.unit&&!d.extend?(Ia(x,pb(n.slice(0,A).concat(n.slice(A+1)),0),{scroll:!1,origin:"*mouse"}),m=x.sel):te(x,A,p,Te):(A=0,Ia(x,new kb([p],0),Te),m=x.sel);var t=c,r=l.wrapper.getBoundingClientRect(),U=0,y=Ga(a,function(a){0!==a.buttons&&lb(a)?g(a):k(a)}),u=Ga(a,k);a.state.selectingText=
u;Z(l.wrapper.ownerDocument,"mousemove",y);Z(l.wrapper.ownerDocument,"mouseup",u)}function Xg(a,b){var c=b.anchor,d=b.head,e=B(a.doc,c.line);if(0==N(c,d)&&c.sticky==d.sticky)return b;e=ja(e);if(!e)return b;var f=K(e,c.ch,c.sticky),g=e[f];if(g.from!=c.ch&&g.to!=c.ch)return b;var h=f+(g.from==c.ch==(1!=g.level)?0:1);if(0==h||h==e.length)return b;d.line!=c.line?a=0<(d.line-c.line)*("ltr"==a.doc.direction?1:-1):(a=K(e,d.ch,d.sticky),f=a-f||(d.ch-c.ch)*(1==g.level?-1:1),a=a==h-1||a==h?0>f:0<f);e=e[h+(a?
-1:0)];e=(h=a==(1==e.level))?e.from:e.to;h=h?"after":"before";return c.ch==e&&c.sticky==h?b:new oa(new C(c.line,e,h),d)}function le(a,b,c,d){if(b.touches){var e=b.touches[0].clientX;var f=b.touches[0].clientY}else try{e=b.clientX,f=b.clientY}catch(Af){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&sa(b);d=a.display;var g=d.lineDiv.getBoundingClientRect();if(f>g.bottom||!u(a,c))return Qb(b);f-=g.top-d.viewOffset;for(g=0;g<a.options.gutters.length;++g){var h=
d.gutters.childNodes[g];if(h&&h.getBoundingClientRect().right>=e)return e=Q(a.doc,f),T(a,c,a,e,a.options.gutters[g],b),Qb(b)}}function $f(a,b){var c;(c=sb(a.display,b))||(c=u(a,"gutterContextMenu")?le(a,b,"gutterContextMenu",!1):!1);if(!c&&!V(a,b,"contextmenu"))a.display.input.onContextMenu(b)}function bg(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");Sb(a)}function nd(a){sf(a);Ua(a);af(a)}function Yg(a,b,c){!b!=
!(c&&c!=Ec)&&(c=a.display.dragFunctions,b=b?Z:Y,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))}function Zg(a){a.options.lineWrapping?(k(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(fc(a.display.wrapper,"CodeMirror-wrap"),ca(a));dc(a);Ua(a);Sb(a);setTimeout(function(){return sc(a)},100)}function wa(a,
b){var c=this;if(!(this instanceof wa))return new wa(a,b);this.options=b=b?p(b):{};p(cg,b,!1);Ae(b);var d=b.value;"string"==typeof d?d=new Wa(d,b.mode,null,b.lineSeparator,b.direction):b.mode&&(d.modeOption=b.mode);this.doc=d;var e=new wa.inputStyles[b.inputStyle](this);a=this.display=new I(a,d,e);a.wrapper.CodeMirror=this;sf(this);bg(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");ef(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,
suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new gc,keySeq:null,specialChars:null};b.autofocus&&!Zc&&a.input.focus();la&&11>ua&&setTimeout(function(){return c.display.input.reset(!0)},20);$g(this);dg||(Hg(),dg=!0);$b(this);this.curOp.forceUpdate=!0;xf(this,d);b.autofocus&&!Zc||this.hasFocus()?setTimeout(n(qe,this),20):Gc(this);for(var f in me)if(me.hasOwnProperty(f))me[f](c,b[f],Ec);bf(this);b.finishInit&&b.finishInit(this);for(d=0;d<Ue.length;++d)Ue[d](c);
Yb(this);Oa&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function $g(a){function b(){f.activeTouch&&(g=setTimeout(function(){return f.activeTouch=null},1E3),h=f.activeTouch,h.end=+new Date)}function e(a,b){if(null==b.left)return!0;var c=b.left-a.left;a=b.top-a.top;return 400<c*c+a*a}var f=a.display;Z(f.scroller,"mousedown",Ga(a,Zf));la&&11>ua?Z(f.scroller,"dblclick",Ga(a,function(b){if(!V(a,b)){var c=Ib(a,b);!c||le(a,b,"gutterClick",
!0)||sb(a.display,b)||(sa(b),b=a.findWordAt(c),Lc(a.doc,b.anchor,b.head))}})):Z(f.scroller,"dblclick",function(b){return V(a,b)||sa(b)});Se||Z(f.scroller,"contextmenu",function(b){return $f(a,b)});var g,h={end:0};Z(f.scroller,"touchstart",function(b){var c;if(c=!V(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&!le(a,b,"gutterClick",!0)&&(f.input.ensurePolled(),clearTimeout(g),c=+new Date,f.activeTouch={start:c,moved:!1,prev:300>=c-h.end?h:null},1==b.touches.length&&
(f.activeTouch.left=b.touches[0].pageX,f.activeTouch.top=b.touches[0].pageY))});Z(f.scroller,"touchmove",function(){f.activeTouch&&(f.activeTouch.moved=!0)});Z(f.scroller,"touchend",function(c){var d=f.activeTouch;if(d&&!sb(f,c)&&null!=d.left&&!d.moved&&300>new Date-d.start){var g=a.coordsChar(f.activeTouch,"page"),d=!d.prev||e(d,d.prev)?new oa(g,g):!d.prev.prev||e(d,d.prev.prev)?a.findWordAt(g):new oa(C(g.line,0),X(a.doc,C(g.line+1,0)));a.setSelection(d.anchor,d.head);a.focus();sa(c)}b()});Z(f.scroller,
"touchcancel",b);Z(f.scroller,"scroll",function(){f.scroller.clientHeight&&(Mc(a,f.scroller.scrollTop),Zb(a,f.scroller.scrollLeft,!0),T(a,"scroll",a))});Z(f.scroller,"mousewheel",function(b){return uf(a,b)});Z(f.scroller,"DOMMouseScroll",function(b){return uf(a,b)});Z(f.wrapper,"scroll",function(){return f.wrapper.scrollTop=f.wrapper.scrollLeft=0});f.dragFunctions={enter:function(b){V(a,b)||yb(b)},over:function(b){if(!V(a,b)){var e=Ib(a,b);if(e){var f=document.createDocumentFragment();pe(a,e,f);a.display.dragCursor||
(a.display.dragCursor=d("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));c(a.display.dragCursor,f)}yb(b)}},start:function(b){if(la&&(!a.state.draggingText||100>+new Date-Mf))yb(b);else if(!V(a,b)&&!sb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!eg)){var c=d("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
ub&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);ub&&c.parentNode.removeChild(c)}},drop:Ga(a,Gg),leave:function(b){V(a,b)||Lf(a)}};var k=f.input.getField();Z(k,"keyup",function(b){return Xf.call(a,b)});Z(k,"keydown",Ga(a,Wf));Z(k,"keypress",Ga(a,Yf));Z(k,"focus",function(b){return qe(a,b)});Z(k,"blur",function(b){return Gc(a,b)})}function od(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=mb(a,b).state:c="prev");
var g=a.options.tabSize,h=B(e,b),k=q(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var x=h.text.match(/^\s*/)[0];if(!d&&!/\S/.test(h.text)){var m=0;c="not"}else if("smart"==c&&(m=e.mode.indent(f,h.text.slice(x.length),h.text),m==ke||150<m)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?q(B(e,b-1).text,null,g):0:"add"==c?m=k+a.options.indentUnit:"subtract"==c?m=k-a.options.indentUnit:"number"==typeof c&&(m=k+c);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(m/g);a;--a)d+=g,
c+="\t";d<m&&(c+=l(m-d));if(c!=x)return Ac(e,c,C(b,0),C(b,x.length),"+input"),h.stateAfter=null,!0;for(g=0;g<e.sel.ranges.length;g++)if(h=e.sel.ranges[g],h.head.line==b&&h.head.ch<x.length){b=C(b,x.length);te(e,g,new oa(b,b));break}}function Ve(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=We(b),k=null;if(g&&1<d.ranges.length)if(db&&db.text.join("\n")==b){if(0==d.ranges.length%db.text.length)for(var k=[],l=0;l<db.text.length;l++)k.push(f.splitLines(db.text[l]))}else h.length==
d.ranges.length&&a.options.pasteLinesPerSelection&&(k=w(h,function(a){return[a]}));for(var x,l=d.ranges.length-1;0<=l;l--){x=d.ranges[l];var m=x.from(),n=x.to();x.empty()&&(c&&0<c?m=C(m.line,m.ch-c):a.state.overwrite&&!g?n=C(n.line,Math.min(B(f,n.line).text.length,n.ch+r(h).length)):db&&db.lineWise&&db.text.join("\n")==b&&(m=n=C(m.line,0)));x=a.curOp.updateInput;m={from:m,to:n,text:k?k[l%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};qc(a.doc,m);Ea(a,"inputRead",a,m)}b&&!g&&
fg(a,b);pc(a);a.curOp.updateInput=x;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function gg(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||cb(b,function(){return Ve(b,c,0,null,"paste")}),!0}function fg(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),
g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=od(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(B(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=od(a,e.head.line,"smart"));g&&Ea(a,"electricInput",a,e.head.line)}}}function hg(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:C(e,0),head:C(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,
ranges:c}}function ig(a,b){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck",!!b)}function jg(){var a=d("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=d("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");Oa?a.style.width="1000px":a.setAttribute("wrap","off");pd&&(a.style.border="1px solid black");ig(a);return b}function Xe(a,b,c,d,e){function f(d){var f=
e?Lg(a.cm,k,b,c):Oe(k,b,c);if(null==f){if(d=!d)d=b.line+c,d<a.first||d>=a.first+a.size?d=!1:(b=new C(d,b.ch,b.sticky),d=k=B(a,d));if(d)b=Pe(e,a.cm,k,b.line,c);else return!1}else b=f;return!0}var g=b,h=c,k=B(a,b.line);if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var l=null;d="group"==d;for(var x=a.cm&&a.cm.getHelper(b,"wordChars"),m=!0;!(0>c)||f(!m);m=!1){var n=k.text.charAt(b.ch)||"\n",n=E(n,x)?"w":d&&"\n"==n?"n":!d||/\s/.test(n)?null:"p";!d||m||n||(n="s");if(l&&l!=n){0>
c&&(c=1,f(),b.sticky="after");break}n&&(l=n);if(0<c&&!f(!m))break}}h=ye(a,b,g,h,!0);ka(g,h)&&(h.hitSide=!0);return h}function kg(a,b,c,d){var e=a.doc,f=b.left;if("page"==d){var g=Math.max(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*zb(a.display),3);g=(0<c?b.bottom:b.top)+c*g}else"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=Vc(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function lg(a,b){var c=Sc(a,
b.line);if(!c||c.hidden)return null;var d=B(a.doc,b.line),c=Ud(c,d,b.line);a=ja(d,a.doc.direction);d="left";a&&(d=K(a,b.ch)%2?"right":"left");b=Vd(c.map,b.ch,d);b.offset="right"==b.collapse?b.end:b.start;return b}function ah(a){for(;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}function Fc(a,b){b&&(a.bad=!0);return a}function bh(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(){x&&(l+=m,n&&(l+=m),x=n=!1)}function h(a){a&&(g(),l+=a)}function k(b){if(1==
b.nodeType){var c=b.getAttribute("cm-text");if(c)h(c);else{var c=b.getAttribute("cm-marker"),l;if(c)b=a.findMarks(C(d,0),C(e+1,0),f(+c)),b.length&&(l=b[0].find(0))&&h(M(a.doc,l.from,l.to).join(m));else if("false"!=b.getAttribute("contenteditable")&&(l=/^(pre|div|p|li|table|br)$/i.test(b.nodeName),/^br$/i.test(b.nodeName)||0!=b.textContent.length)){l&&g();for(c=0;c<b.childNodes.length;c++)k(b.childNodes[c]);/^(pre|p)$/i.test(b.nodeName)&&(n=!0);l&&(x=!0)}}}else 3==b.nodeType&&h(b.nodeValue.replace(/\u200b/g,
"").replace(/\u00a0/g," "))}for(var l="",x=!1,m=a.doc.lineSeparator(),n=!1;;){k(b);if(b==c)break;b=b.nextSibling;n=!1}return l}function ne(a,b,c){if(b==a.display.lineDiv){var d=a.display.lineDiv.childNodes[c];if(!d)return Fc(a.clipPos(C(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ch(f,b,c)}}function ch(a,
b,c){function d(b,c,d){for(var e=-1;e<(x?x.length:0);e++)for(var f=0>e?l.map:x[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){c=J(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||h!=b)e=f[g+(d?1:0)];return C(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!g(e,b))return Fc(C(J(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?r(a.rest):a.line,Fc(C(J(c),c.text.length),f);var h=3==b.nodeType?b:null,k=b;h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,c&&(c=h.nodeValue.length));
for(;k.parentNode!=e;)k=k.parentNode;var l=a.measure,x=l.maps;if(b=d(h,k,c))return Fc(b,f);e=k.nextSibling;for(h=h?h.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return Fc(C(b.line,b.ch-h),f);h+=e.textContent.length}for(k=k.previousSibling;k;k=k.previousSibling){if(b=d(k,k.firstChild,-1))return Fc(C(b.line,b.ch+c),f);c+=k.textContent.length}}var Pa=navigator.userAgent,mg=navigator.platform,Vb=/gecko\/\d/i.test(Pa),ng=/MSIE \d/.test(Pa),og=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pa),
qd=/Edge\/(\d+)/.exec(Pa),la=ng||og||qd,ua=la&&(ng?document.documentMode||6:+(qd||og)[1]),Oa=!qd&&/WebKit\//.test(Pa),dh=Oa&&/Qt\/\d+\.\d+/.test(Pa),ee=!qd&&/Chrome\//.test(Pa),ub=/Opera\//.test(Pa),eg=/Apple Computer/.test(navigator.vendor),eh=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Pa),Bg=/PhantomJS/.test(Pa),pd=!qd&&/AppleWebKit/.test(Pa)&&/Mobile\/\w+/.test(Pa),fe=/Android/.test(Pa),Zc=pd||fe||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Pa),tb=pd||/Mac/.test(mg),Tg=/\bCrOS\b/.test(Pa),
fh=/win/i.test(mg),hc=ub&&Pa.match(/Version\/(\d*\.\d*)/);hc&&(hc=Number(hc[1]));hc&&15<=hc&&(ub=!1,Oa=!0);var Qf=tb&&(dh||ub&&(null==hc||12.11>hc)),Se=Vb||la&&9<=ua,fc=function(b,c){var d=b.className;if(c=a(c).exec(d)){var e=d.slice(c.index+c[0].length);b.className=d.slice(0,c.index)+(e?c[1]+e:"")}};var ad=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(ia){return d}d.collapse(!0);
d.moveEnd("character",c);d.moveStart("character",b);return d};var rd=function(a){a.select()};pd?rd=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:la&&(rd=function(a){try{a.select()}catch(A){}});var gc=function(){this.id=null};gc.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var ke={toString:function(){return"CodeMirror.Pass"}},Bb={scroll:!1},Te={origin:"*mouse"},sd={origin:"+move"},be=[""],vg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
wg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Ef=!1,Kb=!1,$c=null,xg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1785>=a?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a-
1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h,k){var l="ltr"==k?"L":"R";if(0==h.length||"ltr"==k&&!c.test(h))return!1;for(var x=h.length,m=[],n=0;n<x;++n)m.push(a(h.charCodeAt(n)));for(var n=0,p=l;n<x;++n){var q=m[n];"m"==q?m[n]=p:p=q}n=0;for(p=l;n<x;++n)q=m[n],"1"==q&&"r"==p?m[n]="n":e.test(q)&&(p=q,"r"==q&&(m[n]="R"));
n=1;for(p=m[0];n<x-1;++n)q=m[n],"+"==q&&"1"==p&&"1"==m[n+1]?m[n]="1":","!=q||p!=m[n+1]||"1"!=p&&"n"!=p||(m[n]=p),p=q;for(n=0;n<x;++n)if(p=m[n],","==p)m[n]="N";else if("%"==p){for(p=n+1;p<x&&"%"==m[p];++p);for(q=n&&"!"==m[n-1]||p<x&&"1"==m[p]?"1":"N";n<p;++n)m[n]=q;n=p-1}n=0;for(p=l;n<x;++n)q=m[n],"L"==p&&"1"==q?m[n]="L":e.test(q)&&(p=q);for(p=0;p<x;++p)if(d.test(m[p])){for(n=p+1;n<x&&d.test(m[n]);++n);q="L"==(p?m[p-1]:l);for(q=q==("L"==(n<x?m[n]:l))?q?"L":"R":l;p<n;++p)m[p]=q;p=n-1}for(var l=[],t,
n=0;n<x;)if(f.test(m[n])){p=n;for(++n;n<x&&f.test(m[n]);++n);l.push(new b(0,p,n))}else{var A=n,p=l.length;for(++n;n<x&&"L"!=m[n];++n);for(q=A;q<n;)if(g.test(m[q])){A<q&&l.splice(p,0,new b(1,A,q));A=q;for(++q;q<n&&g.test(m[q]);++q);l.splice(p,0,new b(2,A,q));A=q}else++q;A<n&&l.splice(p,0,new b(1,A,n))}"ltr"==k&&(1==l[0].level&&(t=h.match(/^\s+/))&&(l[0].from=t[0].length,l.unshift(new b(0,0,t[0].length))),1==r(l).level&&(t=h.match(/\s+$/))&&(r(l).to-=t[0].length,l.push(new b(0,x-t[0].length,x))));return"rtl"==
k?l.reverse():l}}(),ce=[],Z=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||ce).concat(c))},Ug=function(){if(la&&9>ua)return!1;var a=d("div");return"draggable"in a||"dragDrop"in a}(),Je,Le,We=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=
g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},gh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(A){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(xa){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Og=function(){var a=d("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Me=null,Ke={},wc={},xc={},Ba=function(a,b,c){this.pos=this.start=
0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};Ba.prototype.eol=function(){return this.pos>=this.string.length};Ba.prototype.sol=function(){return this.pos==this.lineStart};Ba.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};Ba.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};Ba.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&
(a.test?a.test(b):a(b)))return++this.pos,b};Ba.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b};Ba.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a};Ba.prototype.skipToEnd=function(){this.pos=this.string.length};Ba.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0};Ba.prototype.backUp=function(a){this.pos-=a};Ba.prototype.column=function(){this.lastColumnPos<
this.start&&(this.lastColumnValue=q(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?q(this.string,this.lineStart,this.tabSize):0)};Ba.prototype.indentation=function(){return q(this.string,null,this.tabSize)-(this.lineStart?q(this.string,this.lineStart,this.tabSize):0)};Ba.prototype.match=function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,
a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}};Ba.prototype.current=function(){return this.string.slice(this.start,this.pos)};Ba.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};Ba.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};Ba.prototype.baseToken=function(){var a=this.lineOracle;
return a&&a.baseToken(this.pos)};var de=function(a,b){this.state=a;this.lookAhead=b},Ab=function(a,b,c,d){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=d||0;this.baseTokens=null;this.baseTokenPos=1};Ab.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};Ab.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var b=this.baseTokens[this.baseTokenPos+
1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}};Ab.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};Ab.fromSaved=function(a,b,c){return b instanceof de?new Ab(a,na(a.mode,b.state),c,b.lookAhead):new Ab(a,na(a.mode,b),c)};Ab.prototype.save=function(a){a=!1!==a?na(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new de(a,this.maxLookAhead):a};var Bf=function(a,b,c){this.start=a.start;this.end=a.pos;this.string=
a.current();this.type=b||null;this.state=c},zc=function(a,b,c){this.text=a;pa(this,b);this.height=c?c(this):1};zc.prototype.lineNo=function(){return J(this)};bb(zc);var zg={},yg={},yc=null,bd=null,Cf={left:0,right:0,top:0,bottom:0},ec,ic=function(a,b,c){this.cm=c;var e=this.vert=d("div",[d("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=d("div",[d("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e.tabIndex=f.tabIndex=-1;a(e);a(f);Z(e,"scroll",function(){e.clientHeight&&
b(e.scrollTop,"vertical")});Z(f,"scroll",function(){f.clientWidth&&b(f.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;la&&8>ua&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ic.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display=
"",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:c?d:0,bottom:b?d:0}};ic.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=
a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};ic.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};ic.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=tb&&!eh?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gc;this.disableVert=new gc};ic.prototype.enableZeroWidthBar=
function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1E3,d)}a.style.pointerEvents="auto";b.set(1E3,d)};ic.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};var td=function(){};td.prototype.update=function(){return{bottom:0,right:0}};td.prototype.setScrollLeft=function(){};
td.prototype.setScrollTop=function(){};td.prototype.clear=function(){};var Df={"native":ic,"null":td},Ag=0,ge=function(a,b,c){var d=a.display;this.viewport=b;this.visible=re(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=Za(a);this.force=c;this.dims=Xc(a);this.events=[]};ge.prototype.signal=function(a,b){u(a,b)&&this.events.push(arguments)};ge.prototype.finish=function(){for(var a=0;a<this.events.length;a++)T.apply(null,
this.events[a])};var he=0,jb=null;la?jb=-.53:Vb?jb=15:ee?jb=-.7:eg&&(jb=-1/3);var kb=function(a,b){this.ranges=a;this.primIndex=b};kb.prototype.primary=function(){return this.ranges[this.primIndex]};kb.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(!ka(c.anchor,d.anchor)||!ka(c.head,d.head))return!1}return!0};kb.prototype.deepCopy=function(){for(var a=
[],b=0;b<this.ranges.length;b++)a[b]=new oa(ha(this.ranges[b].anchor),ha(this.ranges[b].head));return new kb(a,this.primIndex)};kb.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1};kb.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=N(b,d.from())&&0>=N(a,d.to()))return c}return-1};var oa=function(a,b){this.anchor=a;this.head=b};oa.prototype.from=function(){return qa(this.anchor,
this.head)};oa.prototype.to=function(){return ga(this.anchor,this.head)};oa.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};ed.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Ha(f);Ea(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,
a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};fd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-
b&&(1<this.children.length||!(this.children[0]instanceof ed))&&(a=[],this.collapse(a),this.children=[new ed(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(b=a=e.lines.length%25+25;b<e.lines.length;)c=new ed(e.lines.slice(b,
b+=25)),e.height-=c.height,this.children.splice(++d,0,c),c.parent=this;e.lines=e.lines.slice(0,a);this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new fd(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=t(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new fd(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,
b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var gd=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};gd.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=J(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Rb(this);S(c,Math.max(0,c.height-f));
a&&(cb(a,function(){var b=-f;Da(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Ld(a,b);Mb(a,d,"widget")}),Ea(a,"lineWidgetCleared",a,this,d))}};gd.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Rb(this)-b;e&&(Ra(this.doc,d)||S(d,d.height+e),c&&cb(c,function(){c.curOp.forceUpdate=!0;Da(d)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&Ld(c,e);Ea(c,"lineWidgetChanged",c,a,J(d))}))};bb(gd);var Jf=0,Wb=function(a,b){this.lines=[];this.type=b;
this.doc=a;this.id=++Jf};Wb.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&$b(a);if(u(this,"clear")){var c=this.find();c&&Ea(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=da(f.markedSpans,this);a&&!this.collapsed?Mb(a,J(f),"text"):a&&(null!=g.to&&(d=J(f)),null!=g.from&&(c=J(f)));for(var h=f,k=void 0,l=f.markedSpans,m=g,n=0;n<l.length;++n)l[n]!=m&&(k||(k=[])).push(l[n]);h.markedSpans=k;null==g.from&&this.collapsed&&
!Ra(this.doc,f)&&a&&S(f,zb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=aa(this.lines[e]),g=ta(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Ua(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&we(a.doc));a&&Ea(a,"markerCleared",a,this,c,d);b&&Yb(a);this.parent&&this.parent.clear()}};Wb.prototype.find=function(a,
b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=da(f.markedSpans,this);if(null!=g.from&&(c=C(b?f:J(f),g.from),-1==a))return c;if(null!=g.to&&(d=C(b?f:J(f),g.to),1==a))return d}return c&&{from:c,to:d}};Wb.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&cb(d,function(){var e=b.line,f=J(b.line);if(f=Sc(d,f))Wd(f),d.curOp.selectionChanged=d.curOp.forceUpdate=!0;d.curOp.updateMaxLine=!0;Ra(c.doc,e)||null==c.height||
(f=c.height,c.height=null,(f=Rb(c)-f)&&S(e,e.height+f));Ea(d,"markerChanged",d,a)})};Wb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=t(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Wb.prototype.detachLine=function(a){this.lines.splice(t(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};
bb(Wb);var hd=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};hd.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Ea(this,"clear")}};hd.prototype.find=function(a,b){return this.primary.find(a,b)};bb(hd);var hh=0,Wa=function(a,b,c,d,e){if(!(this instanceof Wa))return new Wa(a,b,c,d,e);null==c&&(c=0);fd.call(this,[new ed([new zc("",null)])]);this.first=c;this.scrollTop=
this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;c=C(c,0);this.sel=Db(c);this.history=new Pd(null);this.id=++hh;this.modeOption=b;this.lineSep=d;this.direction="rtl"==e?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));ve(this,{from:c,to:c,text:a});Ia(this,Db(c),Bb)};Wa.prototype=F(fd.prototype,{constructor:Wa,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,
b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=R(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:Fa(function(a){var b=C(this.first,0),c=this.first+this.size-1;qc(this,{from:b,to:C(c,B(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);this.cm&&Ob(this.cm,0,0);Ia(this,Db(b),Bb)}),replaceRange:function(a,b,c,d){b=
X(this,b);c=c?X(this,c):b;Ac(this,a,b,c,d)},getRange:function(a,b,c){a=M(this,X(this,a),X(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(D(this,a))return B(this,a)},getLineNumber:function(a){return J(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=B(this,a));return aa(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+
this.size-1},clipPos:function(a){return X(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Fa(function(a,b,c){a=X(this,"number"==typeof a?C(a,b||0):a);Ia(this,Db(a,null),c)}),setSelection:Fa(function(a,b,c){var d=X(this,a);a=X(this,b||a);Ia(this,Db(d,a),c)}),extendSelection:Fa(function(a,
b,c){Lc(this,X(this,a),b&&X(this,b),c)}),extendSelections:Fa(function(a,b){cf(this,Aa(this,a),b)}),extendSelectionsBy:Fa(function(a,b){a=w(this.sel.ranges,a);cf(this,Aa(this,a),b)}),setSelections:Fa(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new oa(X(this,a[e].anchor),X(this,a[e].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ia(this,pb(d,b),c)}}),addSelection:Fa(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new oa(X(this,a),X(this,b||a)));Ia(this,pb(d,
d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=M(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=M(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Fa(function(a,
b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(a=b&&"end"!=b){a=[];e=c=C(this.first,0);for(f=0;f<d.length;f++){var h=d[f],g=wf(h.from,c,e),k=wf(Pb(h),c,e);c=h.to;e=k;"around"==b?(h=this.sel.ranges[f],h=0>N(h.head,h.anchor),a[f]=new oa(h?k:g,h?g:k)):a[f]=new oa(g,g)}a=new kb(a,this.sel.primIndex)}b=a;for(a=d.length-1;0<=a;a--)qc(this,d[a]);b?df(this,b):this.cm&&pc(this.cm)}),undo:Fa(function(){Nd(this,
"undo")}),redo:Fa(function(){Nd(this,"redo")}),undoSelection:Fa(function(){Nd(this,"undo",!0)}),redoSelection:Fa(function(){Nd(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Pd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=
this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:nc(this.history.done),undone:nc(this.history.undone)}},setHistory:function(a){var b=this.history=new Pd(this.history.maxGeneration);b.done=nc(a.done.slice(0),null,!0);b.undone=nc(a.undone.slice(0),null,!0)},setGutterMarker:Fa(function(a,
b,c){return dd(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&G(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:Fa(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&dd(b,c,"gutter",function(){c.gutterMarkers[a]=null;G(c.gutterMarkers)&&(c.gutterMarkers=null);return!0})})}),lineInfo:function(a){if("number"==typeof a){if(!D(this,a))return null;var b=a;a=B(this,a);if(!a)return null}else if(b=J(a),null==b)return null;return{line:b,
handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:Fa(function(b,c,d){return dd(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[e]){if(a(d).test(b[e]))return!1;b[e]+=" "+d}else b[e]=d;return!0})}),removeLineClass:Fa(function(b,c,d){return dd(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":
"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",f=b[e];if(f)if(null==d)b[e]=null;else{var g=f.match(a(d));if(!g)return!1;var h=g.index+g[0].length;b[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:Fa(function(a,b,c){return Dg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Bc(this,X(this,a),X(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?
b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=X(this,a);return Bc(this,a,a,b,"bookmark")},findMarksAt:function(a){a=X(this,a);var b=[],c=B(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=X(this,a);b=X(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=
0;g<f.length;g++){var h=f[g];null!=h.to&&e==a.line&&a.ch>=h.to||null==h.from&&e!=a.line||null!=h.from&&e==b.line&&h.from>=b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;this.iter(function(e){e=e.text.length+d;if(e>a)return b=a,!0;a-=e;++c});return X(this,
C(c,b))},indexFromPos:function(a){a=X(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new Wa(R(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||
(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Wa(R(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Kf(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);N(f,e)&&(f=Bc(b,f,e,d.primary,d.primary.type),d.markers.push(f),
f.parent=d)}return b},unlinkDoc:function(a){a instanceof wa&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Fg(Kf(this));break}if(a.history==this.history){var c=[a.id];ac(a,function(a){return c.push(a.id)},!0);a.history=new Pd(null);a.history.done=nc(this.history.done,c);a.history.undone=nc(this.history.undone,c)}},iterLinkedDocs:function(a){ac(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},
splitLines:function(a){return this.lineSep?a.split(this.lineSep):We(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Fa(function(a){"rtl"!=a&&(a="ltr");a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&rg(this.cm))})});Wa.prototype.eachLine=Wa.prototype.iter;for(var Mf=0,dg=!1,Xb={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",
37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ud=0;10>ud;ud++)Xb[ud+48]=Xb[ud+96]=String(ud);for(var oe=65;90>=oe;oe++)Xb[oe]=
String.fromCharCode(oe);for(var vd=1;12>=vd;vd++)Xb[vd+111]=Xb[vd+63235]="F"+vd;var id={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo",
"Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection",
"Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo",
"Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft",
"Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};id["default"]=tb?id.macDefault:id.pcDefault;var jd={selectAll:mf,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Bb)},killLine:function(a){return Dc(a,function(b){if(b.empty()){var c=B(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:C(b.head.line+
1,0)}:{from:b.head,to:C(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return Dc(a,function(b){return{from:C(b.from().line,0),to:X(a.doc,C(b.to().line+1,0))}})},delLineLeft:function(a){return Dc(a,function(a){return{from:C(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return Dc(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return Dc(a,function(b){var c=
a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(C(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(C(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return Sf(a,
b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return Tf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=B(a.doc,b);var d=c;for(var e;e=fb(d,!1);)d=e.find(1,!0).line;d!=c&&(b=J(d));return Pe(!0,a,c,b,-1)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+
100,top:b},"div")},sd)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},sd)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Tf(a,b.head):c},sd)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,
"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,
"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},
insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=q(a.getLine(f.line),f.ch,d);b.push(l(d-f%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return cb(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=B(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new C(e.line,e.ch-1)),0<e.ch)e=
new C(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),C(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=B(a.doc,e.line-1).text;g&&(e=new C(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),C(e.line-1,g.length-1),e,"+transpose"))}c.push(new oa(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return cb(a,function(){for(var b=a.listSelections(),c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");
b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);pc(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Mg=new gc,Qe=null,Re=function(a,b,c){this.time=a;this.pos=b;this.button=c};Re.prototype.compare=function(a,b,c){return this.time+400>a&&0==N(b,this.pos)&&c==this.button};var md,ld,Ec={toString:function(){return"CodeMirror.Init"}},cg={},me={};wa.defaults=cg;wa.optionHandlers=me;var Ue=[];wa.defineInitHook=
function(a){return Ue.push(a)};var db=null,ra=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gc;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};ra.prototype.init=function(a){function b(a){if(!V(e,a)){if(e.somethingSelected())db={lineWise:!1,text:e.getSelections()},"cut"==a.type&&e.replaceSelection("",null,"cut");else if(e.options.lineWiseCopyCut){var b=hg(e);db={lineWise:!0,text:b.text};"cut"==a.type&&
e.operation(function(){e.setSelections(b.ranges,0,Bb);e.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var c=db.text.join("\n");a.clipboardData.setData("Text",c);if(a.clipboardData.getData("Text")==c){a.preventDefault();return}}var g=jg();a=g.firstChild;e.display.lineSpace.insertBefore(g,e.display.lineSpace.firstChild);a.value=db.text.join("\n");var h=document.activeElement;rd(a);setTimeout(function(){e.display.lineSpace.removeChild(g);h.focus();h==f&&
d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;ig(f,e.options.spellcheck);Z(f,"paste",function(a){V(e,a)||gg(a,e)||11>=ua&&setTimeout(Ga(e,function(){return c.updateFromDOM()}),20)});Z(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}});Z(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})});Z(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)});Z(f,"touchstart",
function(){return d.forceCompositionEnd()});Z(f,"input",function(){c.composing||c.readFromDOMSoon()});Z(f,"copy",b);Z(f,"cut",b)};ra.prototype.prepareSelection=function(){var a=Ye(this.cm,!1);a.focus=this.cm.state.focused;return a};ra.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};ra.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};ra.prototype.showPrimarySelection=
function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),c=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||c.line<b.display.viewFrom)a.removeAllRanges();else{var e=ne(b,a.anchorNode,a.anchorOffset),f=ne(b,a.focusNode,a.focusOffset);if(!e||e.bad||!f||f.bad||0!=N(qa(e,f),d)||0!=N(ga(e,f),c))if(e=b.display.view,d=d.line>=b.display.viewFrom&&lg(b,d)||{node:e[0].measure.map[2],offset:0},c=c.line<b.display.viewTo&&lg(b,c),c||(c=e[e.length-1].measure,c=c.maps?
c.maps[c.maps.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}),d&&c){var e=a.rangeCount&&a.getRangeAt(0);try{var g=ad(d.node,d.offset,c.offset,c.node)}catch(jh){}g&&(!Vb&&b.state.focused?(a.collapse(d.node,d.offset),g.collapsed||(a.removeAllRanges(),a.addRange(g))):(a.removeAllRanges(),a.addRange(g)),e&&null==a.anchorNode?a.addRange(e):Vb&&this.startGracePeriod());this.rememberSelection()}else a.removeAllRanges()}};ra.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);
this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)};ra.prototype.showMultipleSelections=function(a){c(this.cm.display.cursorDiv,a.cursors);c(this.cm.display.selectionDiv,a.selection)};ra.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};ra.prototype.selectionInEditor=
function(){var a=this.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return g(this.div,a)};ra.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};ra.prototype.blur=function(){this.div.blur()};ra.prototype.getField=function(){return this.div};ra.prototype.supportsTouch=function(){return!0};ra.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&
(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():cb(this.cm,function(){return b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};ra.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};ra.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&
!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(fe&&ee&&this.cm.options.gutters.length&&ah(a.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var c=ne(b,a.anchorNode,a.anchorOffset),d=ne(b,a.focusNode,a.focusOffset);c&&d&&cb(b,function(){Ia(b.doc,Db(c,d),Bb);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}}};ra.prototype.pollContent=function(){null!=this.readDOMTimeout&&
(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();0==d.ch&&d.line>a.firstLine()&&(d=C(d.line-1,B(a.doc,d.line-1).length));e.ch==B(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=C(e.line+1,0));if(d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f;d.line==b.viewFrom||0==(f=Jb(a,d.line))?(c=J(b.view[0].line),f=b.view[0].node):(c=J(b.view[f].line),f=b.view[f-1].node.nextSibling);var g=Jb(a,e.line);g==b.view.length-1?(e=
b.viewTo-1,b=b.lineDiv.lastChild):(e=J(b.view[g+1].line)-1,b=b.view[g+1].node.previousSibling);if(!f)return!1;b=a.doc.splitLines(bh(a,f,b,c,e));for(f=M(a.doc,C(c,0),C(e,B(a.doc,e).text.length));1<b.length&&1<f.length;)if(r(b)==r(f))b.pop(),f.pop(),e--;else if(b[0]==f[0])b.shift(),f.shift(),c++;else break;for(var h=0,g=0,k=b[0],l=f[0],m=Math.min(k.length,l.length);h<m&&k.charCodeAt(h)==l.charCodeAt(h);)++h;k=r(b);l=r(f);for(m=Math.min(k.length-(1==b.length?h:0),l.length-(1==f.length?h:0));g<m&&k.charCodeAt(k.length-
g-1)==l.charCodeAt(l.length-g-1);)++g;if(1==b.length&&1==f.length&&c==d.line)for(;h&&h>d.ch&&k.charCodeAt(k.length-g-1)==l.charCodeAt(l.length-g-1);)h--,g++;b[b.length-1]=k.slice(0,k.length-g).replace(/^\u200b+/,"");b[0]=b[0].slice(h).replace(/\u200b+$/,"");d=C(c,h);c=C(e,f.length?r(f).length-g:0);if(1<b.length||b[0]||N(d,c))return Ac(a.doc,b,d,c,"+input"),!0};ra.prototype.ensurePolled=function(){this.forceCompositionEnd()};ra.prototype.reset=function(){this.forceCompositionEnd()};ra.prototype.forceCompositionEnd=
function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};ra.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))};ra.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||cb(this.cm,function(){return Ua(a.cm)})};
ra.prototype.setUneditable=function(a){a.contentEditable="false"};ra.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||Ga(this.cm,Ve)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};ra.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)};ra.prototype.onContextMenu=function(){};ra.prototype.resetPosition=function(){};ra.prototype.needsContentAttribute=!0;var Ca=function(a){this.cm=a;this.prevInput=
"";this.pollingFast=!1;this.polling=new gc;this.hasSelection=!1;this.composing=null};Ca.prototype.init=function(a){function b(a){if(!V(e,a)){if(e.somethingSelected())db={lineWise:!1,text:e.getSelections()};else if(e.options.lineWiseCopyCut){var b=hg(e);db={lineWise:!0,text:b.text};"cut"==a.type?e.setSelections(b.ranges,null,Bb):(d.prevInput="",f.value=b.text.join("\n"),rd(f))}else return;"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.cm;this.createField(a);var f=this.textarea;a.wrapper.insertBefore(this.wrapper,
a.wrapper.firstChild);pd&&(f.style.width="0px");Z(f,"input",function(){la&&9<=ua&&c.hasSelection&&(c.hasSelection=null);d.poll()});Z(f,"paste",function(a){V(e,a)||gg(a,e)||(e.state.pasteIncoming=!0,d.fastPoll())});Z(f,"cut",b);Z(f,"copy",b);Z(a.scroller,"paste",function(b){sb(a,b)||V(e,b)||(e.state.pasteIncoming=!0,d.focus())});Z(a.lineSpace,"selectstart",function(b){sb(a,b)||sa(b)});Z(f,"compositionstart",function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear();d.composing={start:a,
range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}});Z(f,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})};Ca.prototype.createField=function(a){this.wrapper=jg();this.textarea=this.wrapper.firstChild};Ca.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Ye(a);if(a.options.moveInputWithCursor){var a=ib(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=
Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d};Ca.prototype.showSelection=function(a){var b=this.cm.display;c(b.cursorDiv,a.cursors);c(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")};Ca.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;b.somethingSelected()?(this.prevInput="",a=b.getSelection(),
this.textarea.value=a,b.state.focused&&rd(this.textarea),la&&9<=ua&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value="",la&&9<=ua&&(this.hasSelection=null))}};Ca.prototype.getField=function(){return this.textarea};Ca.prototype.supportsTouch=function(){return!1};Ca.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Zc||h()!=this.textarea))try{this.textarea.focus()}catch(x){}};Ca.prototype.blur=function(){this.textarea.blur()};Ca.prototype.resetPosition=function(){this.wrapper.style.top=
this.wrapper.style.left=0};Ca.prototype.receivedFocus=function(){this.slowPoll()};Ca.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})};Ca.prototype.fastPoll=function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)};Ca.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||
!b.state.focused||gh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(la&&9<=ua&&this.hasSelection===e||tb&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);8203!=f||d||(d="\u200b");if(8666==f)return this.reset(),this.cm.execCommand("undo")}for(var g=0,f=Math.min(d.length,e.length);g<f&&d.charCodeAt(g)==e.charCodeAt(g);)++g;cb(b,
function(){Ve(b,e.slice(g),d.length-g,null,a.composing?"*compose":null);1E3<e.length||-1<e.indexOf("\n")?c.value=a.prevInput="":a.prevInput=e;a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))});return!0};Ca.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};Ca.prototype.onKeyPress=function(){la&&9<=ua&&(this.hasSelection=null);this.fastPoll()};Ca.prototype.onContextMenu=
function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.cssText=m;g.style.cssText=l;la&&9>ua&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!la||la&&9>ua)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&
"\u200b"==d.prevInput?Ga(e,mf)(e):10>a++?f.detectingSelectAll=setTimeout(c,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Ib(e,a),k=f.scroller.scrollTop;if(h&&!ub){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&Ga(e,Ia)(e.doc,Db(h),Bb);var l=g.style.cssText,m=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";h=d.wrapper.getBoundingClientRect();g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+
(a.clientY-h.top-5)+"px; left: "+(a.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(la?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(Oa)var n=window.scrollY;f.input.focus();Oa&&window.scrollTo(null,n);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);la&&9<=ua&&b();if(Se){yb(a);
var p=function(){Y(window,"mouseup",p);setTimeout(c,20)};Z(window,"mouseup",p)}else setTimeout(c,50)}};Ca.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};Ca.prototype.setUneditable=function(){};Ca.prototype.needsContentAttribute=!1;(function(a){function b(b,d,e,f){a.defaults[b]=d;e&&(c[b]=f?function(a,b,c){c!=Ec&&e(a,b,c)}:e)}var c=a.optionHandlers;a.defineOption=b;a.Init=Ec;b("value","",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.modeOption=
b;Fe(a)},!0);b("indentUnit",2,Fe,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){Pc(a);Sb(a);Ua(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;c.push(C(d,f))}d++});for(var e=c.length-1;0<=e;e--)Ac(a.doc,b,c[e],C(c[e].line,c[e].ch+b.length))}});b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,
b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=Ec&&a.refresh()});b("specialCharPlaceholder",Qd,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",Zc?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("rtlMoveVisually",!fh);b("wholeLineUpdateBefore",!0);b("theme","default",function(a){bg(a);nd(a)},!0);b("keyMap",
"default",function(a,b,c){b=ie(b);(c=c!=Ec&&ie(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});b("extraKeys",null);b("configureMouse",null);b("lineWrapping",!1,Zg,!0);b("gutters",[],function(a){Ae(a.options);nd(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?Hb(a.display)+"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return sc(a)},!0);b("scrollbarStyle","native",function(a){ef(a);sc(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);
a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a){Ae(a.options);nd(a)},!0);b("firstLineNumber",1,nd,!0);b("lineNumberFormatter",function(a){return a},nd,!0);b("showCursorWhenSelecting",!1,ma,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",!0);b("readOnly",!1,function(a,b){"nocursor"==b&&(Gc(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);
b("dragDrop",!0,Yg);b("allowDropFileTypes",null);b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,ma,!0);b("singleCursorHeightPerLine",!0,ma,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,Pc,!0);b("addModeClass",!1,Pc,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",1E4,Pc,!0);b("moveInputWithCursor",!0,function(a,
b){b||a.display.input.resetPosition()});b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0);b("phrases",null)})(wa);(function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];if(d[a]!=c||"mode"==a)d[a]=c,b.hasOwnProperty(a)&&Ga(this,b[a])(this,c,e),T(this,
"optionChange",this,a)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](ie(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:Na(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");v(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&
c.priority||0},function(a){return a.priority});this.state.modeGen++;Ua(this)}),removeOverlay:Na(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Ua(this);break}}}),indentLine:Na(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");D(this.doc,a)&&od(this,a,b,c)}),indentSelection:Na(function(a){for(var b=this.doc.sel.ranges,
c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(od(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&pc(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)od(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&te(this.doc,d,new oa(f,e[d].to()),Bb)}}}),getTokenAt:function(a,b){return Ya(this,a,b)},getLineTokens:function(a,b){return Ya(this,C(a),b,!0)},getTokenTypeAt:function(a){a=
X(this.doc,a);var b=kc(this,B(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=[];if(!c.hasOwnProperty(b))return d;var e=c[b];
a=this.getModeAt(a);if("string"==typeof a[b])e[a[b]]&&d.push(e[a[b]]);else if(a[b])for(var f=0;f<a[b].length;f++){var g=e[a[b][f]];g&&d.push(g)}else a.helperType&&e[a.helperType]?d.push(e[a.helperType]):e[a.name]&&d.push(e[a.name]);for(b=0;b<e._global.length;b++)f=e._global[b],f.pred(a,this)&&-1==t(d,f.val)&&d.push(f.val);return d},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return mb(this,a+1,b).state},cursorCoords:function(a,
b){var c=this.doc.sel.primary();a=null==a?c.head:"object"==typeof a?X(this.doc,a):a?c.from():c.to();return ib(this,a,b||"page")},charCoords:function(a,b){return vc(this,X(this.doc,a),b||"page")},coordsChar:function(a,b){a=Gd(this,a,b||"page");return Vc(this,a.left,a.top)},lineAtHeight:function(a,b){a=Gd(this,{top:a,left:0},b||"page").top;return Q(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d=!1;if("number"==typeof a){var e=this.doc.first+this.doc.size-1;a<this.doc.first?
a=this.doc.first:a>e&&(a=e,d=!0);a=B(this.doc,a)}return Ub(this,a,{top:0,left:0},b||"page",c||d).top+(d?this.doc.height-Da(a):0)},defaultTextHeight:function(){return zb(this.display)},defaultCharWidth:function(){return Gb(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ib(this,X(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);
f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-
b.offsetWidth)/2),b.style.left=h+"px");c&&(a=ze(this,{left:h,top:g,right:h+b.offsetWidth,bottom:g+b.offsetHeight}),null!=a.scrollTop&&Mc(this,a.scrollTop),null!=a.scrollLeft&&Zb(this,a.scrollLeft))},triggerOnKeyDown:Na(Wf),triggerOnKeyPress:Na(Yf),triggerOnKeyUp:Xf,triggerOnMouseDown:Na(Zf),execCommand:function(a){if(jd.hasOwnProperty(a))return jd[a].call(null,this)},triggerElectric:Na(function(a){fg(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);a=X(this.doc,a);for(var f=0;f<b&&(a=
Xe(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:Na(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Xe(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},sd)}),deleteH:Na(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):Dc(this,function(d){var e=Xe(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);
var f=X(this.doc,a);for(a=0;a<b&&(f=ib(this,f,"div"),null==d?d=f.left:f.left=d,f=kg(this,f,e,c),!f.hitSide);++a);return f},moveV:Na(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=ib(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn);e.push(h.left);var k=kg(c,h,a,b);"page"==b&&g==d.sel.primary()&&Ld(c,vc(c,k,"div").top-h.top);return k},sd);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=
e[g]}),findWordAt:function(a){var b=B(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");"before"!=a.sticky&&d!=b.length||!c?++d:--c;for(var f=b.charAt(c),f=E(f,e)?function(a){return E(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!E(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new oa(C(a.line,c),C(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?
k(this.display.cursorDiv,"CodeMirror-overwrite"):fc(this.display.cursorDiv,"CodeMirror-overwrite"),T(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==h()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Na(function(a,b){Ob(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-eb(this)-this.display.barHeight,width:a.scrollWidth-eb(this)-
this.display.barWidth,clientHeight:Lb(this),clientWidth:Za(this)}},scrollIntoView:Na(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:C(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(Md(this),this.curOp.scrollToPos=a):pf(this,a.from,a.to,a.margin)}),setSize:Na(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":
a};null!=a&&(this.display.wrapper.style.width=d(a));null!=b&&(this.display.wrapper.style.height=d(b));this.options.lineWrapping&&Xd(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Mb(c,e,"widget");break}++e});this.curOp.forceUpdate=!0;T(this,"refresh",this)}),operation:function(a){return cb(this,a)},startOperation:function(){return $b(this)},endOperation:function(){return Yb(this)},refresh:Na(function(){var a=
this.display.cachedTextHeight;Ua(this);this.curOp.forceUpdate=!0;Sb(this);Ob(this,this.doc.scrollLeft,this.doc.scrollTop);De(this);(null==a||.5<Math.abs(a-zb(this.display)))&&dc(this);T(this,"refresh",this)}),swapDoc:Na(function(a){var b=this.doc;b.cm=null;xf(this,a);Sb(this);this.display.input.reset();Ob(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;Ea(this,"swapDoc",this,b);return b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:
a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bb(a);a.registerHelper=function(b,d,e){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]});c[b][d]=e};a.registerGlobalHelper=function(b,d,e,f){a.registerHelper(b,d,f);c[b]._global.push({pred:e,val:f})}})(wa);var ih="iter insert remove copy getEditor constructor".split(" "),
wd;for(wd in Wa.prototype)Wa.prototype.hasOwnProperty(wd)&&0>t(ih,wd)&&(wa.prototype[wd]=function(a){return function(){return a.apply(this.doc,arguments)}}(Wa.prototype[wd]));bb(Wa);wa.inputStyles={textarea:Ca,contenteditable:ra};wa.defineMode=function(a){wa.defaults.mode||"null"==a||(wa.defaults.mode=a);rb.apply(this,arguments)};wa.defineMIME=function(a,b){wc[a]=b};wa.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}});wa.defineMIME("text/plain","null");wa.defineExtension=
function(a,b){wa.prototype[a]=b};wa.defineDocExtension=function(a,b){Wa.prototype[a]=b};wa.fromTextArea=function(a,b){function c(){a.value=k.getValue()}b=b?p(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=h();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(Z(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form;var f=e.submit;try{var g=e.submit=function(){c();
e.submit=f;e.submit();e.submit=g}}catch(Af){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(Y(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";var k=wa(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return k};(function(a){a.off=Y;a.on=Z;a.wheelEventPixels=tg;a.Doc=Wa;a.splitLines=We;a.countColumn=
q;a.findColumn=f;a.isWordChar=z;a.Pass=ke;a.signal=T;a.Line=zc;a.changeEnd=Pb;a.scrollbarModel=Df;a.Pos=C;a.cmpPos=N;a.modes=Ke;a.mimeModes=wc;a.resolveMode=Fb;a.getMode=bc;a.modeExtensions=xc;a.extendMode=Xa;a.copyState=na;a.startState=Ja;a.innerMode=Va;a.commands=jd;a.keyMap=id;a.keyName=Rf;a.isModifierKey=Of;a.lookupKey=Cc;a.normalizeKeyMap=Kg;a.StringStream=Ba;a.SharedTextMarker=hd;a.TextMarker=Wb;a.LineWidget=gd;a.e_preventDefault=sa;a.e_stopPropagation=qb;a.e_stop=yb;a.addClass=k;a.contains=
g;a.rmClass=fc;a.keyNames=Xb})(wa);wa.version="5.40.1";return wa});(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a,b,c,d){this.cm=a;this.node=b;this.options=c;this.height=d;this.cleared=!1}function c(a){var b=a.getWrapperElement(),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d=parseInt(c.height),e=a.state.panels={setHeight:b.style.height,panels:[],wrapper:document.createElement("div")};
b.parentNode.insertBefore(e.wrapper,b);c=a.hasFocus();e.wrapper.appendChild(b);c&&a.focus();a._setSize=a.setSize;null!=d&&(a.setSize=function(b,c){c||(c=e.wrapper.offsetHeight);e.setHeight=c;if("number"!=typeof c){var g=/^(\d+\.?\d*)px$/.exec(c);g?c=Number(g[1]):(e.wrapper.style.height=c,c=e.wrapper.offsetHeight)}g=c-e.panels.map(function(a){return a.node.getBoundingClientRect().height}).reduce(function(a,b){return a+b},0);a._setSize(b,g);d=c})}function d(a,b){for(b=b.nextSibling;b;b=b.nextSibling)if(b==
a.getWrapperElement())return!0;return!1}a.defineExtension("addPanel",function(a,g){g=g||{};this.state.panels||c(this);var e=this.state.panels,k=e.wrapper,m=this.getWrapperElement(),n=g.replace instanceof b&&!g.replace.cleared;g.after instanceof b&&!g.after.cleared?k.insertBefore(a,g.before.node.nextSibling):g.before instanceof b&&!g.before.cleared?k.insertBefore(a,g.before.node):n?(k.insertBefore(a,g.replace.node),g.replace.clear(!0)):"bottom"==g.position?k.appendChild(a):"before-bottom"==g.position?
k.insertBefore(a,m.nextSibling):"after-top"==g.position?k.insertBefore(a,m):k.insertBefore(a,k.firstChild);k=g&&g.height||a.offsetHeight;m=new b(this,a,g,k);e.panels.push(m);g.stable&&d(this,a)&&this.scrollTo(null,this.getScrollInfo().top+k);return m});b.prototype.clear=function(a){if(!this.cleared){this.cleared=!0;var b=this.cm.state.panels;b.panels.splice(b.panels.indexOf(this),1);this.cm.setSize();this.options.stable&&d(this.cm,this.node)&&this.cm.scrollTo(null,this.cm.getScrollInfo().top-this.height);
b.wrapper.removeChild(this.node);if(0==b.panels.length&&!a){a=this.cm;b=a.state.panels;a.state.panels=null;var c=a.getWrapperElement();b.wrapper.parentNode.replaceChild(c,b.wrapper);c.style.height=b.setHeight;a.setSize=a._setSize;a.setSize()}}};b.prototype.changed=function(){this.height=this.node.getBoundingClientRect().height;this.cm.setSize()}});(function(a){"object"===typeof exports&&"object"===typeof module?a(require("codemirror/lib/codemirror"),require("codemirror/addon/display/panel")):"function"===typeof define&&define.amd?define(["codemirror/lib/codemirror","codemirror/addon/display/panel"],a):a(CodeMirror)})(function(a){function b(b,d){if(d.el)var c="function"===typeof d.el?d.el(b):d.el;else c=document.createElement("button"),c.innerHTML=d.label,c.setAttribute("type","button"),c.setAttribute("tabindex","-1"),c.addEventListener("click",
function(a){a.preventDefault();b.focus();d.callback(b)}),d.class&&(c.className=d.class),d.title&&c.setAttribute("title",d.title);if(d.hotkey){var g={};g[d.hotkey]=d.callback;b.addKeyMap(a.normalizeKeyMap(g))}return c}a.defineOption("buttons",[],function(a,d,e){var c=document.createElement("div");c.className="CodeMirror-buttonsPanel";e=0;for(var h=d.length;e<h;e++){var k=b(a,d[e]);c.appendChild(k)}a.addPanel(c,{position:"top"});$("#toggle-code-button").click(function(){$(c).fadeToggle(1E3)})})});var codemirror_css_rules="\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  font-size: 12px;\n  height: auto;\n  width: 600px;\n  top: 90px;\n  color: black;\n  position: relative;\n  direction: ltr;\n  opacity: 0.75;\n  border-right: 1px solid #ccc;\n  z-index: 0;\n}\n\n.CodeMirror-scroll {\n    height: auto;\n    max-height: 100vh;\n}\n\n.CodeMirror-buttonsPanel {\n    margin-left: .2em;\n    margin-bottom: .5em;\n    position: absolute;\n    top: 50px;\n}\n\n.CodeMirror-buttonsPanel button {\n    padding: .5em;\n    width: 7em;\n    margin-left: .2em;\n    margin-right: .2em;\n    text-align: center;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: -20px;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: absolute;\n  overflow: hidden;\n  background: black;\n  height: auto;\n  border: none;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 30px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px; margin-right: -30px;\n  padding-bottom: 30px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 30px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -30px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/* THEMES */\n\n/*\n  Name:       lucario\n  Author:     Raphael Amorim\n\n  Original Lucario color scheme (https://github.com/raphamorim/lucario)\n*/\n\n.cm-s-lucario.CodeMirror, .cm-s-lucario .CodeMirror-gutters {\n  background-color: #2b3e50 !important;\n  color: #f8f8f2 !important;\n  border: 1px solid #5a5;\n}\n.cm-s-lucario .CodeMirror-gutters { color: #2b3e50; }\n.cm-s-lucario .CodeMirror-guttermarker { color: #599eff; }\n.cm-s-lucario .CodeMirror-guttermarker-subtle { color: #777; }\n.cm-s-lucario .CodeMirror-cursor { border-left: solid thin #E6C845; }\n.cm-s-lucario .CodeMirror-linenumber { color: #72C05D; }\n.cm-s-lucario .CodeMirror-selected { background: #a03443; }\n.cm-s-lucario .CodeMirror-line::selection, .cm-s-lucario .CodeMirror-line > span::selection, .cm-s-lucario .CodeMirror-line > span > span::selection { background: #243443; }\n.cm-s-lucario .CodeMirror-line::-moz-selection, .cm-s-lucario .CodeMirror-line > span::-moz-selection, .cm-s-lucario .CodeMirror-line > span > span::-moz-selection { background: #243443; }\n.cm-s-lucario span.cm-comment { color: #5c98cd; }\n.cm-s-lucario span.cm-string, .cm-s-lucario span.cm-string-2 { color: #E6DB74; }\n.cm-s-lucario span.cm-number { color: #ca94ff; }\n.cm-s-lucario span.cm-variable { color: #f8f8f2; }\n.cm-s-lucario span.cm-variable-2 { color: #f8f8f2; }\n.cm-s-lucario span.cm-def { color: #72C05D; }\n.cm-s-lucario span.cm-operator { color: #66D9EF; }\n.cm-s-lucario span.cm-keyword { color: #ff6541; }\n.cm-s-lucario span.cm-atom { color: #bd93f9; }\n.cm-s-lucario span.cm-meta { color: #f8f8f2; }\n.cm-s-lucario span.cm-tag { color: #ff6541; }\n.cm-s-lucario span.cm-attribute { color: #66D9EF; }\n.cm-s-lucario span.cm-qualifier { color: #72C05D; }\n.cm-s-lucario span.cm-property { color: #f8f8f2; }\n.cm-s-lucario span.cm-builtin { color: #72C05D; }\n.cm-s-lucario span.cm-variable-3, .cm-s-lucario span.cm-type { color: #ffb86c; }\n\n.cm-s-lucario .CodeMirror-activeline-background { background: #243443; }\n.cm-s-lucario .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }\n\n/* Based on Sublime Text's Monokai theme */\n\n.cm-s-monokai.CodeMirror \n{ \n    background: #100000; color: #f8f8f2; \n    font-family: monospace;\n    font-size: 12px;\n    top: 80vh;\n    width: 80vw;\n    color: grey;\n    direction: ltr;\n    opacity: 0.75;\n}\n\n.cm-s-monokai .CodeMirror-scroll { max-height: 20vh; }\n\n.cm-s-monokai div.CodeMirror-selected { background: #49483E; }\n.cm-s-monokai .CodeMirror-line::selection, .cm-s-monokai .CodeMirror-line > span::selection, .cm-s-monokai .CodeMirror-line > span > span::selection { background: rgba(73, 72, 62, .99); }\n.cm-s-monokai .CodeMirror-line::-moz-selection, .cm-s-monokai .CodeMirror-line > span::-moz-selection, .cm-s-monokai .CodeMirror-line > span > span::-moz-selection { background: rgba(73, 72, 62, .99); }\n.cm-s-monokai .CodeMirror-gutters { background: #272822; border-right: 0px; }\n.cm-s-monokai .CodeMirror-guttermarker { color: white; }\n.cm-s-monokai .CodeMirror-guttermarker-subtle { color: #d0d0d0; }\n.cm-s-monokai .CodeMirror-linenumber { color: #d0d0d0; }\n.cm-s-monokai .CodeMirror-cursor { border-left: 1px solid #f8f8f0; }\n\n.cm-s-monokai span.cm-comment { color: #75715e; }\n.cm-s-monokai span.cm-atom { color: #ae81ff; }\n.cm-s-monokai span.cm-number { color: #ae81ff; }\n\n.cm-s-monokai span.cm-comment.cm-attribute { color: #97b757; }\n.cm-s-monokai span.cm-comment.cm-def { color: #bc9262; }\n.cm-s-monokai span.cm-comment.cm-tag { color: #bc6283; }\n.cm-s-monokai span.cm-comment.cm-type { color: #5998a6; }\n\n.cm-s-monokai span.cm-property, .cm-s-monokai span.cm-attribute { color: #a6e22e; }\n.cm-s-monokai span.cm-keyword { color: #f92672; }\n.cm-s-monokai span.cm-builtin { color: #66d9ef; }\n.cm-s-monokai span.cm-string { color: #e6db74; }\n\n.cm-s-monokai span.cm-variable { color: #f8f8f2; }\n.cm-s-monokai span.cm-variable-2 { color: #9effff; }\n.cm-s-monokai span.cm-variable-3, .cm-s-monokai span.cm-type { color: #66d9ef; }\n.cm-s-monokai span.cm-def { color: #fd971f; }\n.cm-s-monokai span.cm-bracket { color: #f8f8f2; }\n.cm-s-monokai span.cm-tag { color: #f92672; }\n.cm-s-monokai span.cm-header { color: #ae81ff; }\n.cm-s-monokai span.cm-link { color: #ae81ff; }\n.cm-s-monokai span.cm-error { background: #f92672; color: #f8f8f0; }\n\n.cm-s-monokai .CodeMirror-activeline-background { background: #373831; }\n.cm-s-monokai .CodeMirror-matchingbracket {\n  text-decoration: underline;\n  color: white !important;\n}\n\n\n";(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.info=d;this.align=e;this.prev=f}function c(a,c,d,e){var f=a.indented;a.context&&"statement"==a.context.type&&"statement"!=d&&(f=a.context.indented);return a.context=new b(f,c,d,e,null,a.context)}function d(a){var b=a.context.type;if(")"==
b||"]"==b||"}"==b)a.indented=a.context.indented;return a.context=a.context.prev}function e(a,b,c){if("variable"==b.prevToken||"type"==b.prevToken||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(a.string.slice(0,c))||b.typeAtEndOfLine&&a.column()==a.indentation())return!0}function g(a){for(;;){if(!a||"top"==a.type)return!0;if("}"==a.type&&"namespace"!=a.prev.info)return!1;a=a.prev}}function h(a){var b={};a=a.split(" ");for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function k(a,b){return"function"===typeof a?a(b):
a.propertyIsEnumerable(b)}function m(a,b){if(!b.startOfLine)return!1;for(var c,d=null;c=a.peek();){if("\\"==c&&a.match(/^.$/)){d=m;break}else if("/"==c&&a.match(/^\/[\/\*]/,!1))break;a.next()}b.tokenize=d;return"meta"}function n(a,b){return"type"==b.prevToken?"type":!1}function p(a){a.eatWhile(/[\w\.']/);return"number"}function q(a,b){a.backUp(1);if(a.match(/(R|u8R|uR|UR|LR)/)){var c=a.match(/"([^\s\\()]{0,16})\(/);if(!c)return!1;b.cpp11RawStringDelim=c[1];b.tokenize=f;return f(a,b)}if(a.match(/(u8|u|U|L)/))return a.match(/["']/,
!1)?"string":!1;a.next();return!1}function t(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function f(a,b){var c=b.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");a.match(new RegExp(".*?\\)"+c+'"'))?b.tokenize=null:a.skipToEnd();return"string"}function l(b,c){function d(a){if(a)for(var b in a)a.hasOwnProperty(b)&&e.push(b)}"string"==typeof b&&(b=[b]);var e=[];d(c.keywords);d(c.types);d(c.builtin);d(c.atoms);e.length&&(c.helperType=b[0],a.registerHelper("hintWords",
b[0],e));for(var f=0;f<b.length;++f)a.defineMIME(b[f],c)}function r(a,b){for(var c=!1;!a.eol();){if(!c&&a.match('"""')){b.tokenize=null;break}c="\\"==a.next()&&!c}return"string"}function w(a){return function(b,c){for(var d;d=b.next();)if("*"==d&&b.eat("/"))if(1==a){c.tokenize=null;break}else return c.tokenize=w(a-1),c.tokenize(b,c);else if("/"==d&&b.eat("*"))return c.tokenize=w(a+1),c.tokenize(b,c);return"comment"}}function v(a){return function(b,c){for(var d=!1,e,f=!1;!b.eol();){if(!a&&!d&&b.match('"')){f=
!0;break}if(a&&b.match('"""')){f=!0;break}e=b.next();!d&&"$"==e&&b.match("{")&&b.skipTo("}");d=!d&&"\\"==e&&!a}if(f||!a)c.tokenize=null;return"string"}}function y(a){return function(b,c){for(var d=!1,e,f=!1;!b.eol();){if(!d&&b.match('"')&&("single"==a||b.match('""'))){f=!0;break}if(!d&&b.match("``")){F=y(a);f=!0;break}e=b.next();d="single"==a&&!d&&"\\"==e}f&&(c.tokenize=null);return"string"}}a.defineMode("clike",function(f,h){function l(a,b){var c=a.next();if(C[c]){var d=C[c](a,b);if(!1!==d)return d}if('"'==
c||"'"==c)return b.tokenize=m(c),b.tokenize(a,b);if(ga.test(c))return da=c,null;if(qa.test(c)){a.backUp(1);if(a.match(X))return"number";a.next()}if("/"==c){if(a.eat("*"))return b.tokenize=n,n(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(Aa.test(c)){for(;!a.match(/^\/[\/*]/,!1)&&a.eat(Aa););return"operator"}a.eatWhile(ya);if(ha)for(;a.match(ha);)a.eatWhile(ya);a=a.current();return k(y,a)?(k(z,a)&&(da="newstatement"),k(F,a)&&(ea=!0),"keyword"):k(v,a)?"type":k(w,a)?(k(z,a)&&(da="newstatement"),
"builtin"):k(H,a)?"atom":"variable"}function m(a){return function(b,c){for(var d=!1,e,f=!1;null!=(e=b.next());){if(e==a&&!d){f=!0;break}d=!d&&"\\"==e}if(f||!d&&!N)c.tokenize=null;return"string"}}function n(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=null;break}c="*"==d}return"comment"}function p(a,b){h.typeFirstDefinitions&&a.eol()&&g(b.context)&&(b.typeAtEndOfLine=e(a,b,a.pos))}var q=f.indentUnit,t=h.statementIndentUnit||q,r=h.dontAlignCalls,y=h.keywords||{},v=h.types||{},w=h.builtin||
{},z=h.blockKeywords||{},F=h.defKeywords||{},H=h.atoms||{},C=h.hooks||{},N=h.multiLineStrings,E=!1!==h.indentStatements,ha=h.namespaceSeparator,ga=h.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,qa=h.numberStart||/[\d\.]/,X=h.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,Aa=h.isOperatorChar||/[+\-*&%=<>!?|\/]/,ya=h.isIdentifierChar||/[\w\$_\xa1-\uffff]/,da,ea;return{startState:function(a){return{tokenize:null,context:new b((a||0)-q,0,"top",null,!1),indented:0,startOfLine:!0,
prevToken:null}},token:function(a,b){var f=b.context;a.sol()&&(null==f.align&&(f.align=!1),b.indented=a.indentation(),b.startOfLine=!0);if(a.eatSpace())return p(a,b),null;da=ea=null;var k=(b.tokenize||l)(a,b);if("comment"==k||"meta"==k)return k;null==f.align&&(f.align=!0);if(";"==da||":"==da||","==da&&a.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==b.context.type;)d(b);else if("{"==da)c(b,a.column(),"}");else if("["==da)c(b,a.column(),"]");else if("("==da)c(b,a.column(),")");else if("}"==da){for(;"statement"==
f.type;)f=d(b);for("}"==f.type&&(f=d(b));"statement"==f.type;)f=d(b)}else da==f.type?d(b):E&&(("}"==f.type||"top"==f.type)&&";"!=da||"statement"==f.type&&"newstatement"==da)&&c(b,a.column(),"statement",a.current());"variable"==k&&("def"==b.prevToken||h.typeFirstDefinitions&&e(a,b,a.start)&&g(b.context)&&a.match(/^\s*\(/,!1))&&(k="def");C.token&&(f=C.token(a,b,k),void 0!==f&&(k=f));"def"==k&&!1===h.styleDefs&&(k="variable");b.startOfLine=!1;b.prevToken=ea?"def":k||da;p(a,b);return k},indent:function(b,
c){if(b.tokenize!=l&&null!=b.tokenize||b.typeAtEndOfLine)return a.Pass;var d=b.context,e=c&&c.charAt(0),f=e==d.type;"statement"==d.type&&"}"==e&&(d=d.prev);if(h.dontIndentStatements)for(;"statement"==d.type&&h.dontIndentStatements.test(d.info);)d=d.prev;if(C.indent&&(b=C.indent(b,d,c,q),"number"==typeof b))return b;b=d.prev&&"switch"==d.prev.info;if(h.allmanIndentation&&/[{(]/.test(e)){for(;"top"!=d.type&&"}"!=d.type;)d=d.prev;return d.indented}return"statement"==d.type?d.indented+("{"==e?0:t):!d.align||
r&&")"==d.type?")"!=d.type||f?d.indented+(f?0:q)+(f||!b||/^(?:case|default)\b/.test(c)?0:q):d.indented+t:d.column+(f?0:1)},electricInput:!1!==h.indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});l(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:h("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile"),
types:h("int long char short double float unsigned signed void size_t ptrdiff_t bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:h("case do else for if switch while struct"),defKeywords:h("struct"),typeFirstDefinitions:!0,atoms:h("NULL true false"),hooks:{"#":m,"*":n},modeProps:{fold:["brace","include"]}});l(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:h("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),
types:h("int long char short double float unsigned signed void size_t ptrdiff_t bool wchar_t"),blockKeywords:h("catch class do else finally for if struct switch try while"),defKeywords:h("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:h("true false NULL"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,hooks:{"#":m,"*":n,u:q,U:q,L:q,R:q,0:p,1:p,2:p,3:p,4:p,5:p,6:p,7:p,8:p,9:p,token:function(a,b,c){if(b="variable"==c&&"("==a.peek()&&(";"==b.prevToken||null==
b.prevToken||"}"==b.prevToken))a=a.current(),b=(a=/(\w+)::~?(\w+)$/.exec(a))&&a[1]==a[2];if(b)return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}});l("text/x-java",{name:"clike",keywords:h("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),
types:h("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:h("catch class do else finally for if switch try while"),defKeywords:h("class interface enum @interface"),typeFirstDefinitions:!0,atoms:h("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(a){if(a.match("interface",!1))return!1;a.eatWhile(/[\w\$_]/);
return"meta"}},modeProps:{fold:["brace","import"]}});l("text/x-csharp",{name:"clike",keywords:h("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
types:h("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:h("catch class do else finally for foreach if struct switch try while"),defKeywords:h("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"@":function(a,b){if(a.eat('"'))return b.tokenize=
t,t(a,b);a.eatWhile(/[\w\$_]/);return"meta"}}});l("text/x-scala",{name:"clike",keywords:h("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:h("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
multiLineStrings:!0,blockKeywords:h("catch class enum do else finally for forSome if match switch try while"),defKeywords:h("class enum def object package trait type val var"),atoms:h("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){if(!a.match('""'))return!1;b.tokenize=r;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},"=":function(a,c){var d=
c.context;return"}"==d.type&&d.align&&a.eat(">")?(c.context=new b(d.indented,d.column,d.type,d.info,null,d.prev),"operator"):!1},"/":function(a,b){if(!a.eat("*"))return!1;b.tokenize=w(1);return b.tokenize(a,b)}},modeProps:{closeBrackets:{triples:'"'}}});l("text/x-kotlin",{name:"clike",keywords:h("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),
types:h("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,
indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:h("catch class do else finally for if where try while enum"),defKeywords:h("class val var object interface fun"),atoms:h("true false null this"),hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){b.tokenize=v(a.match('""'));return b.tokenize(a,b)},indent:function(a,b,c,d){var e=c&&c.charAt(0);if(("}"==a.prevToken||")"==a.prevToken)&&
""==c)return a.indented;if("operator"==a.prevToken&&"}"!=c||"variable"==a.prevToken&&"."==e||("}"==a.prevToken||")"==a.prevToken)&&"."==e)return 2*d+b.indented;if(b.align&&"}"==b.type)return b.indented+(a.context.type==(c||"").charAt(0)?0:d)}},modeProps:{closeBrackets:{triples:'"'}}});l(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:h("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),
types:h("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:h("for while do if else struct"),builtin:h("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
atoms:h("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
indentSwitch:!1,hooks:{"#":m},modeProps:{fold:["brace","include"]}});l("text/x-nesc",{name:"clike",keywords:h("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileas atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:h("int long char short double float unsigned signed void size_t ptrdiff_t"),
blockKeywords:h("case do else for if switch while struct"),atoms:h("null true false"),hooks:{"#":m},modeProps:{fold:["brace","include"]}});l("text/x-objectivec",{name:"clike",keywords:h("auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatileinline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),
types:h("int long char short double float unsigned signed void size_t ptrdiff_t"),atoms:h("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(a){a.eatWhile(/[\w\$]/);return"keyword"},"#":m,indent:function(a,b,c){if("statement"==b.type&&/^@\w/.test(c))return b.indented}},modeProps:{fold:"brace"}});l("text/x-squirrel",{name:"clike",keywords:h("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),
types:h("int long char short double float unsigned signed void size_t ptrdiff_t"),blockKeywords:h("case catch class else for foreach if switch try while"),defKeywords:h("function local class"),typeFirstDefinitions:!0,atoms:h("true false null"),hooks:{"#":m},modeProps:{fold:["brace","include"]}});var F=null;l("text/x-ceylon",{name:"clike",keywords:h("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),
types:function(a){a=a.charAt(0);return a===a.toUpperCase()&&a!==a.toLowerCase()},blockKeywords:h("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:h("class dynamic function interface module object package value"),builtin:h("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,
isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:h("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,b){b.tokenize=y(a.match('""')?"triple":"single");return b.tokenize(a,b)},"`":function(a,b){if(!F||!a.match("`"))return!1;b.tokenize=
F;F=null;return b.tokenize(a,b)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"},token:function(a,b,c){if(("variable"==c||"type"==c)&&"."==b.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})});(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).GIF=a()})(function(){return function b(c,d,e){function g(k,n){if(!d[k]){if(!c[k]){var m="function"==typeof require&&require;if(!n&&m)return m(k,!0);if(h)return h(k,!0);n=Error("Cannot find module '"+k+"'");throw n.code="MODULE_NOT_FOUND",n;}n=d[k]={exports:{}};
c[k][0].call(n.exports,function(b){var d=c[k][1][b];return g(d?d:b)},n,n.exports,b,c,d,e)}return d[k].exports}for(var h="function"==typeof require&&require,k=0;k<e.length;k++)g(e[k]);return g}({1:[function(b,c,d){function e(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function g(b){return"function"===typeof b}function h(b){return"object"===typeof b&&null!==b}c.exports=e;e.EventEmitter=e;e.prototype._events=void 0;e.prototype._maxListeners=void 0;e.defaultMaxListeners=
10;e.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw TypeError("n must be a positive number");this._maxListeners=b;return this};e.prototype.emit=function(b){var c;this._events||(this._events={});if("error"===b&&(!this._events.error||h(this._events.error)&&!this._events.error.length)){var d=arguments[1];if(d instanceof Error)throw d;var e=Error('Uncaught, unspecified "error" event. ('+d+")");e.context=d;throw e;}e=this._events[b];if(void 0===e)return!1;if(g(e))switch(arguments.length){case 1:e.call(this);
break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),e.apply(this,d)}else if(h(e)){d=Array.prototype.slice.call(arguments,1);var k=e.slice();e=k.length;for(c=0;c<e;c++)k[c].apply(this,d)}return!0};e.prototype.addListener=function(b,c){if(!g(c))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",b,g(c.listener)?c.listener:c);this._events[b]?
h(this._events[b])?this._events[b].push(c):this._events[b]=[this._events[b],c]:this._events[b]=c;h(this._events[b])&&!this._events[b].warned&&(c=void 0!==this._maxListeners?this._maxListeners:e.defaultMaxListeners)&&0<c&&this._events[b].length>c&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"===typeof console.trace&&console.trace());return this};
e.prototype.on=e.prototype.addListener;e.prototype.once=function(b,c){function d(){this.removeListener(b,d);e||(e=!0,c.apply(this,arguments))}if(!g(c))throw TypeError("listener must be a function");var e=!1;d.listener=c;this.on(b,d);return this};e.prototype.removeListener=function(b,c){if(!g(c))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;var d=this._events[b];var e=d.length;var k=-1;if(d===c||g(d.listener)&&d.listener===c)delete this._events[b],this._events.removeListener&&
this.emit("removeListener",b,c);else if(h(d)){for(;0<e--;)if(d[e]===c||d[e].listener&&d[e].listener===c){k=e;break}if(0>k)return this;1===d.length?(d.length=0,delete this._events[b]):d.splice(k,1);this._events.removeListener&&this.emit("removeListener",b,c)}return this};e.prototype.removeAllListeners=function(b){if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(c in this._events)"removeListener"!==
c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events={};return this}var c=this._events[b];if(g(c))this.removeListener(b,c);else if(c)for(;c.length;)this.removeListener(b,c[c.length-1]);delete this._events[b];return this};e.prototype.listeners=function(b){return this._events&&this._events[b]?g(this._events[b])?[this._events[b]]:this._events[b].slice():[]};e.prototype.listenerCount=function(b){if(this._events){b=this._events[b];if(g(b))return 1;if(b)return b.length}return 0};
e.listenerCount=function(b,c){return b.listenerCount(c)}},{}],2:[function(b,c,d){var e=navigator.userAgent.toLowerCase();d=navigator.platform.toLowerCase();b=e.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0];b={name:"version"===b[1]?b[3]:b[1],version:"ie"===b[1]&&document.documentMode||parseFloat("opera"===b[1]&&b[4]?b[4]:b[2]),platform:{name:e.match(/ip(?:ad|od|hone)/)?"ios":(e.match(/(?:webos|android)/)||d.match(/mac|win|linux/)||
["other"])[0]}};b[b.name]=!0;b[b.name+parseInt(b.version,10)]=!0;b.platform[b.platform.name]=!0;c.exports=b},{}],3:[function(b,c,d){var e=function(b,c){function d(){this.constructor=b}for(var e in c)g.call(c,e)&&(b[e]=c[e]);d.prototype=c.prototype;b.prototype=new d;b.__super__=c.prototype;return b},g={}.hasOwnProperty,h=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1},k=[].slice;d=b("events").EventEmitter;var m=b("./browser.coffee");b=function(b){function c(b){var c,
e;this.running=!1;this.options={};this.frames=[];this.freeWorkers=[];this.activeWorkers=[];this.setOptions(b);for(e in d)b=d[e],null==(c=this.options)[e]&&(c[e]=b)}e(c,b);var d={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1};var n={delay:500,copy:!1};c.prototype.setOption=function(b,c){this.options[b]=c;if(null!=this._canvas&&("width"===b||"height"===b))return this._canvas[b]=c};c.prototype.setOptions=function(b){var c;
var d=[];for(c in b)if(g.call(b,c)){var e=b[c];d.push(this.setOption(c,e))}return d};c.prototype.addFrame=function(b,c){var d;null==c&&(c={});var e={};e.transparent=this.options.transparent;for(d in n)e[d]=c[d]||n[d];null==this.options.width&&this.setOption("width",b.width);null==this.options.height&&this.setOption("height",b.height);if("undefined"!==typeof ImageData&&null!==ImageData&&b instanceof ImageData)e.data=b.data;else if("undefined"!==typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&
b instanceof CanvasRenderingContext2D||"undefined"!==typeof WebGL2RenderingContext&&null!==WebGL2RenderingContext&&b instanceof WebGL2RenderingContext)c.copy?e.data=this.getContextData(b):e.context=b;else if(null!=b.childNodes)c.copy?e.data=this.getImageData(b):e.image=b;else throw Error("Invalid image");return this.frames.push(e)};c.prototype.render=function(){var b;if(this.running)throw Error("Already running");if(null==this.options.width||null==this.options.height)throw Error("Width and height must be set prior to rendering");
this.running=!0;this.finishedFrames=this.nextFrame=0;var c=[];var d=0;for(b=this.frames.length;0<=b?d<b:d>b;0<=b?++d:--d)c.push(null);this.imageParts=c;b=this.spawnWorkers();if(!0===this.options.globalPalette)this.renderNextFrame();else for(d=0;0<=b?d<b:d>b;0<=b?++d:--d)this.renderNextFrame();this.emit("start");return this.emit("progress",0)};c.prototype.abort=function(){for(var b;;){b=this.activeWorkers.shift();if(null==b)break;this.log("killing active worker");b.terminate()}this.running=!1;return this.emit("abort")};
c.prototype.spawnWorkers=function(){var b,c;var d=Math.min(this.options.workers,this.frames.length);(function(){c=[];for(var e=b=this.freeWorkers.length;b<=d?e<d:e>d;b<=d?e++:e--)c.push(e);return c}).apply(this).forEach(function(b){return function(c){b.log("spawning worker "+c);var d=new Worker(b.options.workerScript);d.onmessage=function(c){b.activeWorkers.splice(b.activeWorkers.indexOf(d),1);b.freeWorkers.push(d);return b.frameFinished(c.data)};return b.freeWorkers.push(d)}}(this));return d};c.prototype.frameFinished=
function(b){var c;this.log("frame "+b.index+" finished - "+this.activeWorkers.length+" active");this.finishedFrames++;this.emit("progress",this.finishedFrames/this.frames.length);this.imageParts[b.index]=b;if(!0===this.options.globalPalette&&(this.options.globalPalette=b.globalPalette,this.log("global palette analyzed"),2<this.frames.length))for(b=1,c=this.freeWorkers.length;1<=c?b<c:b>c;1<=c?++b:--b)this.renderNextFrame();return 0<=h.call(this.imageParts,null)?this.renderNextFrame():this.finishRendering()};
c.prototype.finishRendering=function(){var b,c,d;var e=0;var g=this.imageParts;var h=0;for(b=g.length;h<b;h++){var k=g[h];e+=(k.data.length-1)*k.pageSize+k.cursor}e+=k.pageSize-k.cursor;this.log("rendering finished - filesize "+Math.round(e/1E3)+"kb");h=new Uint8Array(e);var m=0;var n=this.imageParts;b=0;for(c=n.length;b<c;b++){k=n[b];var p=k.data;e=g=0;for(d=p.length;g<d;e=++g){var q=p[e];h.set(q,m);m=e===k.data.length-1?m+k.cursor:m+k.pageSize}}k=new Blob([h],{type:"image/gif"});return this.emit("finished",
k,h)};c.prototype.renderNextFrame=function(){if(0===this.freeWorkers.length)throw Error("No free workers");if(!(this.nextFrame>=this.frames.length)){var b=this.frames[this.nextFrame++];var c=this.freeWorkers.shift();b=this.getTask(b);this.log("starting frame "+(b.index+1)+" of "+this.frames.length);this.activeWorkers.push(c);return c.postMessage(b)}};c.prototype.getContextData=function(b){return b.getImageData(0,0,this.options.width,this.options.height).data};c.prototype.getImageData=function(b){null==
this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height);var c=this._canvas.getContext("2d");c.setFill=this.options.background;c.fillRect(0,0,this.options.width,this.options.height);c.drawImage(b,0,0);return this.getContextData(c)};c.prototype.getTask=function(b){var c=this.frames.indexOf(b);c={index:c,last:c===this.frames.length-1,delay:b.delay,transparent:b.transparent,width:this.options.width,height:this.options.height,
quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===m.name};if(null!=b.data)c.data=b.data;else if(null!=b.context)c.data=this.getContextData(b.context);else if(null!=b.image)c.data=this.getImageData(b.image);else throw Error("Invalid frame");return c};c.prototype.log=function(){var b=1<=arguments.length?k.call(arguments,0):[];if(this.options.debug)return console.log.apply(console,b)};return c}(d);c.exports=
b},{"./browser.coffee":2,events:1}]},{},[3])(3)});var gifworker_code='\n// gif.worker.js 0.2.0 - https://github.com/jnordberg/gif.js\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module \'"+o+"\'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);\n';var THREE={REVISION:"79"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();
Object.assign(THREE,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:THREE.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});THREE.Color=function(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:
.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=
parseFloat(c[1])/360;var e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,g)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<
a.length&&(c=THREE.ColorKeywords[a],void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,
b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d);var g=Math.min(b,c,d);
var h,k=(g+e)/2;if(g===e)g=h=0;else{var m=e-g;g=.5>=k?m/(e+g):m/(2-e-g);switch(e){case b:h=(c-d)/m+(c<d?6:0);break;case c:h=(d-b)/m+2;break;case d:h=(b-c)/m+4}h/=6}a.h=h;a.s=g;a.l=k;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+
b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===
this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},
copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),g=Math.sin(a._x/2),h=Math.sin(a._y/2),k=Math.sin(a._z/2);a=a.order;"XYZ"===a?(this._x=g*d*e+c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e-g*h*k):"YXZ"===
a?(this._x=g*d*e+c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e+g*h*k):"ZXY"===a?(this._x=g*d*e-c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e-g*h*k):"ZYX"===a?(this._x=g*d*e-c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e+g*h*k):"YZX"===a?(this._x=g*d*e+c*h*k,this._y=c*h*e+g*d*k,this._z=c*d*k-g*h*e,this._w=c*d*e-g*h*k):"XZY"===a&&(this._x=g*d*e-c*h*k,this._y=c*h*e-g*d*k,this._z=c*d*k+g*h*e,this._w=c*d*e+g*h*k);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],h=b[9],k=b[2],m=b[6],b=b[10],n=c+g+b;0<n?(c=.5/Math.sqrt(n+1),this._w=.25/c,this._x=(m-h)*c,this._y=(d-k)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(m-h)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-k)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(h+m)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+k)/c,this._y=(h+m)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var g=b._x,h=b._y,k=b._z;b=b._w;this._x=c*b+a*g+d*k-e*h;this._y=d*b+a*h+e*g-c*k;this._z=e*b+a*k+c*h-d*g;this._w=a*b-c*g-d*h-e*k;this.onChangeCallback();
return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,h=g*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a);if(1<=h)return this._w=g,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-h*h);if(.001>Math.abs(a))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var k=Math.atan2(a,h),h=Math.sin((1-b)*k)/a;a=Math.sin(b*k)/a;
this._w=g*h+this._w*a;this._x=c*h+this._x*a;this._y=d*h+this._y*a;this._z=e*h+this._z*a;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}};
Object.assign(THREE.Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,g,h){var k=c[d+0],m=c[d+1],n=c[d+2];c=c[d+3];d=e[g+0];var p=e[g+1],q=e[g+2];e=e[g+3];if(c!==e||k!==d||m!==p||n!==q){g=1-h;var t=k*d+m*p+n*q+c*e,f=0<=t?1:-1,l=1-t*t;l>Number.EPSILON&&(l=Math.sqrt(l),t=Math.atan2(l,t*f),g=Math.sin(g*t)/l,h=Math.sin(h*t)/l);f*=h;k=k*g+d*f;m=m*g+p*f;n=n*g+q*f;c=c*g+e*f;g===1-h&&(h=1/Math.sqrt(k*k+m*m+n*n+c*c),k*=h,m*=h,n*=h,c*=h)}a[b]=k;a[b+1]=m;a[b+2]=n;
a[b+3]=c}});THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,
this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===
a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},
fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&
console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,h=a.z;a=
a.w;var k=a*b+g*d-h*c,m=a*c+h*b-e*d,n=a*d+e*c-g*b,b=-e*b-g*c-h*d;this.x=k*a+b*-e+m*-h-n*-g;this.y=m*a+b*-g+n*-e-k*-h;this.z=n*a+b*-h+k*-g-m*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),
transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=
Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=
-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=
(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);b=this.x;var c=this.y,d=this.z;this.x=c*a.z-d*a.y;this.y=d*a.x-b*a.z;this.z=b*a.y-c*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,g=b.y;b=b.z;this.x=d*b-a*g;this.y=a*e-
c*b;this.z=c*g-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(THREE.Math.clamp(a,
-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},
setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){if("number"===typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var c=a;a=b;b=c}return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);
this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);
this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=
a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],g=a[5],h=a[9];var k=a[2];var m=a[6];var n=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-k)&&
.01>Math.abs(h-m)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+k)&&.1>Math.abs(h+m)&&.1>Math.abs(b+g+n-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;g=(g+1)/2;n=(n+1)/2;c=(c+e)/4;d=(d+k)/4;h=(h+m)/4;b>g&&b>n?.01>b?(m=0,c=k=.707106781):(m=Math.sqrt(b),k=c/m,c=d/m):g>n?.01>g?(m=.707106781,k=0,c=.707106781):(k=Math.sqrt(g),m=c/k,c=h/k):.01>n?(k=m=.707106781,c=0):(c=Math.sqrt(n),m=d/c,k=h/c);this.set(m,k,c,a);return this}a=Math.sqrt((m-h)*(m-h)+(d-k)*(d-k)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(m-
h)/a;this.y=(d-k)/a;this.z=(e-c)/a;this.w=Math.acos((b+g+n-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));
this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=
Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*
a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-
this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+
c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var g=e[4],h=e[8],k=e[1],m=e[5],n=e[9],p=e[2],q=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-n,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(q,m),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?
(this._y=Math.atan2(h,e),this._z=Math.atan2(k,m)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(q,-1,1)),.99999>Math.abs(q)?(this._y=Math.atan2(-p,e),this._z=Math.atan2(-g,m)):(this._y=0,this._z=Math.atan2(k,a))):"ZYX"===b?(this._y=Math.asin(-d(p,-1,1)),.99999>Math.abs(p)?(this._x=Math.atan2(q,e),this._z=Math.atan2(k,a)):(this._x=0,this._z=Math.atan2(-g,m))):"YZX"===b?(this._z=Math.asin(d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-n,m),this._y=Math.atan2(-p,a)):(this._x=
0,this._y=Math.atan2(h,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(q,m),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-n,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,
b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;
a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){b=b||new THREE.Vector3;return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=THREE.Math.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);
return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,g=-Infinity,h=-Infinity,k=0,m=a.length;k<m;k+=3){var n=a[k],p=a[k+1],q=a[k+2];n<b&&(b=n);p<c&&(c=p);q<d&&(d=q);n>e&&(e=n);p>g&&(g=p);q>h&&(h=q)}this.min.set(b,c,d);this.max.set(e,g,h)},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var d=b.geometry;if(void 0!==d)if(d instanceof THREE.Geometry)for(var d=d.vertices,g=0,h=d.length;g<h;g++)a.copy(d[g]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(d instanceof THREE.BufferGeometry&&(h=d.attributes.position,
void 0!==h)){var k;h instanceof THREE.InterleavedBufferAttribute?(d=h.data.array,g=h.offset,k=h.data.stride):(d=h.array,g=0,k=3);for(h=d.length;g<h;g+=k)a.fromArray(d,g),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)}});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<
this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||
a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||
a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){var b,c;0<a.normal.x?(b=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,
c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=
this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);
a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);
return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,d,e,g,h,k,m){var n=this.elements;n[0]=a;n[1]=d;n[2]=h;n[3]=b;n[4]=e;n[5]=k;n[6]=c;n[7]=g;n[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);
return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(a.x,a.y,a.z);return b}}(),
multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],m=a[7],a=a[8];return b*g*a-b*h*m-c*e*a+c*h*k+d*e*m-d*g*k},getInverse:function(a,b){a instanceof THREE.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");a=a.elements;var c=this.elements,d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],m=a[5],n=a[6],p=a[7];
a=a[8];var q=a*k-m*p,t=m*n-a*h,f=p*h-k*n,l=d*q+e*t+g*f;if(0===l){if(b)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()}l=1/l;c[0]=q*l;c[1]=(g*p-a*e)*l;c[2]=(m*e-g*k)*l;c[3]=t*l;c[4]=(a*d-g*n)*l;c[5]=(g*h-m*d)*l;c[6]=f*l;c[7]=(e*n-p*d)*l;c[8]=(k*d-e*h)*l;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];
a[5]=a[7];a[7]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,g,h,k,m,n,p,q,t,f,l,r){var w=this.elements;w[0]=a;w[4]=b;w[8]=c;w[12]=d;w[1]=e;w[5]=g;w[9]=h;w[13]=k;w[2]=m;w[6]=n;w[10]=p;w[14]=q;w[3]=t;w[7]=f;w[11]=l;w[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},copyPosition:function(a){var b=this.elements;a=a.elements;
b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),g=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,
2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*g;c[5]=d[5]*g;c[6]=d[6]*g;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREE.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=g*k;var m=g*e;var n=c*k;var p=c*e;b[0]=
h*k;b[4]=-h*e;b[8]=d;b[1]=m+n*d;b[5]=a-p*d;b[9]=-c*h;b[2]=p-a*d;b[6]=n+m*d;b[10]=g*h}else"YXZ"===a.order?(a=h*k,m=h*e,n=d*k,p=d*e,b[0]=a+p*c,b[4]=n*c-m,b[8]=g*d,b[1]=g*e,b[5]=g*k,b[9]=-c,b[2]=m*c-n,b[6]=p+a*c,b[10]=g*h):"ZXY"===a.order?(a=h*k,m=h*e,n=d*k,p=d*e,b[0]=a-p*c,b[4]=-g*e,b[8]=n+m*c,b[1]=m+n*c,b[5]=g*k,b[9]=p-a*c,b[2]=-g*d,b[6]=c,b[10]=g*h):"ZYX"===a.order?(a=g*k,m=g*e,n=c*k,p=c*e,b[0]=h*k,b[4]=n*d-m,b[8]=a*d+p,b[1]=h*e,b[5]=p*d+a,b[9]=m*d-n,b[2]=-d,b[6]=c*h,b[10]=g*h):"YZX"===a.order?(a=
g*h,m=g*d,n=c*h,p=c*d,b[0]=h*k,b[4]=p-a*e,b[8]=n*e+m,b[1]=e,b[5]=g*k,b[9]=-c*k,b[2]=-d*k,b[6]=m*e+n,b[10]=a-p*e):"XZY"===a.order&&(a=g*h,m=g*d,n=c*h,p=c*d,b[0]=h*k,b[4]=-e,b[8]=d*k,b[1]=a*e+p,b[5]=g*k,b[9]=m*e-n,b[2]=n*e-m,b[6]=c*k,b[10]=p*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,g=a.w,h=c+c,k=d+d,m=e+e;a=c*h;var n=c*k,c=c*m,p=d*k,d=d*m,e=e*m,h=g*h,k=g*k,g=g*m;b[0]=1-(p+e);b[4]=n-g;b[8]=c+k;
b[1]=n+g;b[5]=1-(a+e);b[9]=d-h;b[2]=c-k;b[6]=d+h;b[10]=1-(a+p);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,g){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3);var h=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);h[0]=a.x;h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=
a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){a=a.elements;b=b.elements;var c=this.elements,d=a[0],e=a[4],g=a[8],h=a[12],k=a[1],m=a[5],n=a[9],p=a[13],q=a[2],t=a[6],f=a[10],l=a[14],r=a[3],w=a[7],v=a[11];
a=a[15];var y=b[0],F=b[4],z=b[8],E=b[12],G=b[1],O=b[5],P=b[9],L=b[13],I=b[2],B=b[6],M=b[10],R=b[14],S=b[3],J=b[7],Q=b[11];b=b[15];c[0]=d*y+e*G+g*I+h*S;c[4]=d*F+e*O+g*B+h*J;c[8]=d*z+e*P+g*M+h*Q;c[12]=d*E+e*L+g*R+h*b;c[1]=k*y+m*G+n*I+p*S;c[5]=k*F+m*O+n*B+p*J;c[9]=k*z+m*P+n*M+p*Q;c[13]=k*E+m*L+n*R+p*b;c[2]=q*y+t*G+f*I+l*S;c[6]=q*F+t*O+f*B+l*J;c[10]=q*z+t*P+f*M+l*Q;c[14]=q*E+t*L+f*R+l*b;c[3]=r*y+w*G+v*I+a*S;c[7]=r*F+w*O+v*B+a*J;c[11]=r*z+w*P+v*M+a*Q;c[15]=r*E+w*L+v*R+a*b;return this},multiplyToArray:function(a,
b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&
(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],h=
a[5],k=a[9],m=a[13],n=a[2],p=a[6],q=a[10],t=a[14];return a[3]*(+e*k*p-d*m*p-e*h*q+c*m*q+d*h*t-c*k*t)+a[7]*(+b*k*t-b*m*q+e*g*q-d*g*t+d*m*n-e*k*n)+a[11]*(+b*m*p-b*h*t-e*g*p+c*g*t+e*h*n-c*m*n)+a[15]*(-d*h*n-b*k*p+b*h*q+d*g*p-c*g*q+c*k*n)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");
return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new THREE.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements;a=a.elements;var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],m=a[5],n=a[6],p=a[7],q=a[8],t=a[9],f=a[10],l=a[11],r=
a[12],w=a[13],v=a[14];a=a[15];var y=t*v*p-w*f*p+w*n*l-m*v*l-t*n*a+m*f*a,F=r*f*p-q*v*p-r*n*l+k*v*l+q*n*a-k*f*a,z=q*w*p-r*t*p+r*m*l-k*w*l-q*m*a+k*t*a,E=r*t*n-q*w*n-r*m*f+k*w*f+q*m*v-k*t*v,G=d*y+e*F+g*z+h*E;if(0===G){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()}G=1/G;c[0]=y*G;c[1]=(w*f*h-t*v*h-w*g*l+e*v*l+t*g*a-e*f*a)*G;c[2]=(m*v*h-w*n*h+w*g*p-e*v*p-m*g*a+
e*n*a)*G;c[3]=(t*n*h-m*f*h-t*g*p+e*f*p+m*g*l-e*n*l)*G;c[4]=F*G;c[5]=(q*v*h-r*f*h+r*g*l-d*v*l-q*g*a+d*f*a)*G;c[6]=(r*n*h-k*v*h-r*g*p+d*v*p+k*g*a-d*n*a)*G;c[7]=(k*f*h-q*n*h+q*g*p-d*f*p-k*g*l+d*n*l)*G;c[8]=z*G;c[9]=(r*t*h-q*w*h-r*e*l+d*w*l+q*e*a-d*t*a)*G;c[10]=(k*w*h-r*m*h+r*e*p-d*w*p-k*e*a+d*m*a)*G;c[11]=(q*m*h-k*t*h-q*e*p+d*t*p+k*e*l-d*m*l)*G;c[12]=E*G;c[13]=(q*w*g-r*t*g+r*e*f-d*w*f-q*e*v+d*t*v)*G;c[14]=(r*m*g-k*w*g-r*e*n+d*w*n+k*e*v-d*m*v)*G;c[15]=(k*t*g-q*m*g+q*e*n-d*t*n-k*e*f+d*m*f)*G;return this},
scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,
b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=1-c,e=a.x,g=a.y;a=a.z;var h=d*e,k=d*g;this.set(h*e+c,h*g-b*a,h*a+b*g,0,h*g+b*a,k*g+c,k*a-b*e,0,h*a-b*g,k*a+b*e,d*a*a+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new THREE.Vector3,b=new THREE.Matrix4);var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),k=a.set(g[4],g[5],g[6]).length(),m=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(h=-h);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/h;var g=1/k,n=1/m;b.elements[0]*=
c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=n;b.elements[9]*=n;b.elements[10]*=n;d.setFromRotationMatrix(b);e.x=h;e.y=k;e.z=m;return this}}(),makeFrustum:function(a,b,c,d,e,g){var h=this.elements;h[0]=2*e/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*e/(d-c);h[9]=(d+c)/(d-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(g+e)/(g-e);h[14]=-2*g*e/(g-e);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.DEG2RAD*
a*.5);var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var h=this.elements,k=1/(b-a),m=1/(c-d),n=1/(g-e);h[0]=2*k;h[4]=0;h[8]=0;h[12]=-((b+a)*k);h[1]=0;h[5]=2*m;h[9]=0;h[13]=-((c+d)*m);h[2]=0;h[6]=0;h[10]=-2*n;h[14]=-((g+e)*n);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,
a));return this}}(),closestPointToPoint:function(a,b){b=b||new THREE.Vector3;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);
return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,h){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var k=.5*d.distanceTo(e),m=-this.direction.dot(b),n=c.dot(this.direction),p=-c.dot(b),q=c.lengthSq(),t=Math.abs(1-m*m),f;0<t?(d=m*p-n,e=m*n-p,f=k*t,0<=d?e>=-f?e<=f?(k=1/t,d*=k,e*=k,m=d*(d+m*e+2*n)+e*(m*d+e+2*p)+q):(e=k,d=Math.max(0,-(m*e+n)),m=-d*d+e*(e+2*
p)+q):(e=-k,d=Math.max(0,-(m*e+n)),m=-d*d+e*(e+2*p)+q):e<=-f?(d=Math.max(0,-(-m*k+n)),e=0<d?-k:Math.min(Math.max(-k,-p),k),m=-d*d+e*(e+2*p)+q):e<=f?(d=0,e=Math.min(Math.max(-k,-p),k),m=e*(e+2*p)+q):(d=Math.max(0,-(m*k+n)),e=0<d?k:Math.min(Math.max(-k,-p),k),m=-d*d+e*(e+2*p)+q)):(e=0<m?-k:k,d=Math.max(0,-(m*e+n)),m=-d*d+e*(e+2*p)+q);g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);h&&h.copy(b).multiplyScalar(e).add(a);return m}}(),intersectSphere:function(){var a=new THREE.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);
return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c,d;var e=1/this.direction.x;var g=1/this.direction.y;var h=1/this.direction.z;var k=this.origin;0<=e?(c=(a.min.x-k.x)*e,e*=a.max.x-k.x):(c=(a.max.x-k.x)*e,e*=a.min.x-k.x);0<=g?(d=(a.min.y-k.y)*g,g*=a.max.y-k.y):(d=(a.max.y-k.y)*g,g*=a.min.y-k.y);if(c>g||d>e)return null;if(d>c||c!==c)c=d;if(g<e||e!==e)e=g;0<=h?(d=(a.min.z-
k.z)*h,h*=a.max.z-k.z):(d=(a.max.z-k.z)*h,h*=a.min.z-k.z);if(c>h||d>e)return null;if(d>c||c!==c)c=d;if(h<e||e!==e)e=h;return 0>e?null:this.at(0<=c?c:e,b)},intersectsBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,g,h,k,m){b.subVectors(g,e);c.subVectors(h,e);d.crossVectors(b,c);g=this.direction.dot(d);if(0<g){if(k)return null;
k=1}else if(0>g)k=-1,g=-g;else return null;a.subVectors(this.origin,e);e=k*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;h=k*this.direction.dot(b.cross(a));if(0>h||e+h>g)return null;e=-k*a.dot(d);return 0>e?null:this.at(e/g,m)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=c=0,g=b.length;e<g;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=
this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);
b=b||new THREE.Vector3;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};
THREE.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,g){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],g=c[3],h=c[4],k=c[5],m=c[6],n=c[7],p=c[8],q=c[9],t=c[10],f=c[11],l=c[12],r=c[13],w=c[14],
c=c[15];b[0].setComponents(g-a,n-h,f-p,c-l).normalize();b[1].setComponents(g+a,n+h,f+p,c+l).normalize();b[2].setComponents(g+d,n+k,f+q,c+r).normalize();b[3].setComponents(g-d,n-k,f-q,c-r).normalize();b[4].setComponents(g-e,n-m,f-t,c-w).normalize();b[5].setComponents(g+e,n+m,f+t,c+w).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),
intersectsSprite:function(){var a=new THREE.Sphere;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?
c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var h=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>h&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,
b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){a=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(a)},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){c=c||new THREE.Vector3;var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else return e=-(b.start.dot(this.normal)+this.constant)/e,0>e||1<e?void 0:c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=
this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Matrix3;return function(c,d){var e=this.coplanarPoint(a).applyMatrix4(c);c=d||b.getNormalMatrix(c);c=this.normal.applyMatrix3(c).normalize();
this.constant=-e.dot(c);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};THREE.Spherical=function(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this};
THREE.Spherical.prototype={constructor:THREE.Spherical,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius.copy(a.radius);this.phi.copy(a.phi);this.theta.copy(a.theta);return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=
Math.acos(THREE.Math.clamp(a.y/this.radius,-1,1)));return this}};
THREE.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,
d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(a){return a*THREE.Math.DEG2RAD},radToDeg:function(a){return a*THREE.Math.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,g,h){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*g+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,h,k,m,n,p,q,t;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;g=Math.floor(e);h=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+
2;n=this.points[c[0]];p=this.points[c[1]];q=this.points[c[2]];t=this.points[c[3]];k=h*h;m=h*k;d.x=b(n.x,p.x,q.x,t.x,h,k,m);d.y=b(n.y,p.y,q.y,t.y,h,k,m);d.z=b(n.z,p.z,q.z,t.z,h,k,m);return d};this.getControlPointsArray=function(){var a,b=this.points.length,c=[];for(a=0;a<b;a++){var d=this.points[a];c[a]=[d.x,d.y,d.z]}return c};this.getLength=function(a){var b=0,c=new THREE.Vector3,d=new THREE.Vector3,e=[],f=0;e[0]=0;a||(a=100);var g=this.points.length*a;c.copy(this.points[0]);for(a=1;a<g;a++){var h=
a/g;var k=this.getPoint(h);d.copy(k);f+=d.distanceTo(c);c.copy(k);h*=this.points.length-1;h=Math.floor(h);h!==b&&(e[h]=f,b=h)}e[e.length]=f;return{chunks:e,total:f}};this.reparametrizeByArcLength=function(a){var b,c=[],d=new THREE.Vector3,e=this.getLength();c.push(d.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){var f=e.chunks[b]-e.chunks[b-1];var g=Math.ceil(a*f/e.total);var h=(b-1)/(this.points.length-1);var k=b/(this.points.length-1);for(f=1;f<g-1;f++){var m=h+1/g*f*(k-h);m=this.getPoint(m);
c.push(d.copy(m).clone())}c.push(d.copy(this.points[b]).clone())}this.points=c}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,d,e){e=e||new THREE.Vector3;e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,h,k){a.subVectors(h,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var m=b.dot(b);h=b.dot(c);var n=d*m-e*e;k=k||new THREE.Vector3;if(0===n)return k.set(-2,-1,-1);n=1/n;m=(m*g-e*h)*n;d=(d*h-e*g)*n;return k.set(1-m-d,d,m)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,
this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},
closestPointToPoint:function(){var a,b,c,d;return function(e,g){void 0===a&&(a=new THREE.Plane,b=[new THREE.Line3,new THREE.Line3,new THREE.Line3],c=new THREE.Vector3,d=new THREE.Vector3);g=g||new THREE.Vector3;var h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))g.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++){b[e].closestPointToPoint(c,!0,d);var k=c.distanceToSquared(d);k<h&&(h=
k,g.copy(d))}return g}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Interpolant=function(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c};
THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var g=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===g)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{g=b[1];a<g&&(c=2,e=g);for(g=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===g)break;d=e;e=b[--c-1];if(a>=e)break b}d=
c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=
c[a+e];return b},interpolate_:function(a,b,c,d){throw Error("call to abstract method");},intervalChanged_:function(a,b,c){}};Object.assign(THREE.Interpolant.prototype,{beforeStart_:THREE.Interpolant.prototype.copySampleValue_,afterEnd_:THREE.Interpolant.prototype.copySampleValue_});THREE.CubicInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,g=a+1,h=d[e],k=d[g];if(void 0===h)switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:e=a;h=2*b-c;break;case THREE.WrapAroundEnding:e=d.length-2;h=b+d[e]-d[e+1];break;default:e=a,h=c}if(void 0===k)switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:g=
a;k=2*c-b;break;case THREE.WrapAroundEnding:g=1;k=c+d[1]-d[0];break;default:g=a-1,k=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-h);this._weightNext=a/(k-c);this._offsetPrev=e*d;this._offsetNext=g*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h,m=this._offsetPrev,n=this._offsetNext,p=this._weightPrev,q=this._weightNext,t=(c-b)/(d-b);c=t*t;d=c*t;b=-p*d+2*p*c-p*t;p=(1+p)*d+(-1.5-2*p)*c+(-.5+p)*t+1;t=(-1-q)*d+(1.5+q)*c+.5*t;q=q*d-q*
c;for(c=0;c!==h;++c)e[c]=b*g[m+c]+p*g[k+c]+t*g[a+c]+q*g[n+c];return e}});THREE.DiscreteInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(a,b,c,d){return this.copySampleValue_(a-1)}});THREE.LinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h;b=(c-b)/(d-b);c=1-b;for(d=0;d!==h;++d)e[d]=g[k+d]*c+g[a+d]*b;return e}});THREE.QuaternionLinearInterpolant=function(a,b,c,d){THREE.Interpolant.call(this,a,b,c,d)};
THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;b=(c-b)/(d-b);for(c=a+h;a!==c;a+=4)THREE.Quaternion.slerpFlat(e,0,g,a-h,g,a,b);return e}});THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=(performance||Date).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
Object.assign(THREE.EventDispatcher.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;var c=[],d,e=b.length;for(d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}});THREE.Layers=function(){this.mask=1};THREE.Layers.prototype={constructor:THREE.Layers,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};
(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,g,h){if(!1!==a.visible&&(a.raycast(b,g),!0===h)){a=a.children;h=0;for(var d=a.length;h<d;h++)c(a[h],b,g,!0)}}a.Raycaster=function(b,c,g,h){this.ray=new a.Ray(b,c);this.near=g||0;this.far=h||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},
intersectObject:function(a,e){var d=[];c(a,this,d,e);d.sort(b);return d},intersectObjects:function(a,e){var d=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var h=0,k=a.length;h<k;h++)c(a[h],this,d,e);d.sort(b);return d}}})(THREE);
THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var a=new THREE.Vector3,b=new THREE.Euler,c=new THREE.Quaternion,d=new THREE.Vector3(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,
value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}});this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new THREE.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};
THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(THREE.Object3D.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=
new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);
this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof THREE.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,
b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new THREE.Vector3;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){c=c||new THREE.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,
this.rotation.order,!1)}}(),getWorldScale:function(){var a=new THREE.Vector3,b=new THREE.Quaternion;return function(c){c=c||new THREE.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==
this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c;var d=void 0===a||""===a;var e={};d&&(a={geometries:{},materials:{},textures:{},images:{}},e.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var g={};g.uuid=this.uuid;g.type=this.type;""!==this.name&&(g.name=this.name);"{}"!==JSON.stringify(this.userData)&&
(g.userData=this.userData);!0===this.castShadow&&(g.castShadow=!0);!0===this.receiveShadow&&(g.receiveShadow=!0);!1===this.visible&&(g.visible=!1);g.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),g.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),g.material=this.material.uuid);if(0<this.children.length)for(g.children=
[],c=0;c<this.children.length;c++)g.children.push(this.children[c].toJSON(a).object);if(d){d=b(a.geometries);c=b(a.materials);var h=b(a.textures);a=b(a.images);0<d.length&&(e.geometries=d);0<c.length&&(e.materials=c);0<h.length&&(e.textures=h);0<a.length&&(e.images=a)}e.object=g;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});THREE.Object3DIdCount=0;
THREE.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==g?g:0};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
THREE.BufferAttribute=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===c};
THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);
return this},copyColorsArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),g=new THREE.Color);b[c++]=g.r;b[c++]=g.g;b[c++]=g.b}return this},copyIndicesArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];b[c++]=g.a;b[c++]=g.b;b[c++]=g.c}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
d),g=new THREE.Vector2);b[c++]=g.x;b[c++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),g=new THREE.Vector3);b[c++]=g.x;b[c++]=g.y;b[c++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var g=a[d];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),g=new THREE.Vector4);
b[c++]=g.x;b[c++]=g.y;b[c++]=g.z;b[c++]=g.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*
this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};
THREE.Int8Attribute=function(a,b){return new THREE.BufferAttribute(new Int8Array(a),b)};THREE.Uint8Attribute=function(a,b){return new THREE.BufferAttribute(new Uint8Array(a),b)};THREE.Uint8ClampedAttribute=function(a,b){return new THREE.BufferAttribute(new Uint8ClampedArray(a),b)};THREE.Int16Attribute=function(a,b){return new THREE.BufferAttribute(new Int16Array(a),b)};THREE.Uint16Attribute=function(a,b){return new THREE.BufferAttribute(new Uint16Array(a),b)};
THREE.Int32Attribute=function(a,b){return new THREE.BufferAttribute(new Int32Array(a),b)};THREE.Uint32Attribute=function(a,b){return new THREE.BufferAttribute(new Uint32Array(a),b)};THREE.Float32Attribute=function(a,b){return new THREE.BufferAttribute(new Float32Array(a),b)};THREE.Float64Attribute=function(a,b){return new THREE.BufferAttribute(new Float64Array(a),b)};
THREE.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new THREE.BufferAttribute(a,b)).setDynamic(!0)};THREE.InstancedBufferAttribute=function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute;
THREE.InstancedBufferAttribute.prototype.copy=function(a){THREE.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBuffer=function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};THREE.InstancedInterleavedBuffer=function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;
THREE.InstancedInterleavedBuffer.prototype.copy=function(a){THREE.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};THREE.InterleavedBufferAttribute=function(a,b,c,d){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d};
THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+
this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+
1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=
this.elementsNeedUpdate=!1};
Object.assign(THREE.Geometry.prototype,THREE.EventDispatcher.prototype,{applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,g=a.vertexNormals.length;e<g;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();
this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,
c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0!==h?[p[a].clone(),p[b].clone(),p[d].clone()]:[],g=void 0!==k?[c.colors[a].clone(),
c.colors[b].clone(),c.colors[d].clone()]:[];e=new THREE.Face3(a,b,d,f,g,e);c.faces.push(e);void 0!==m&&c.faceVertexUvs[0].push([q[a].clone(),q[b].clone(),q[d].clone()]);void 0!==n&&c.faceVertexUvs[1].push([t[a].clone(),t[b].clone(),t[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,g=e.position.array,h=void 0!==e.normal?e.normal.array:void 0,k=void 0!==e.color?e.color.array:void 0,m=void 0!==e.uv?e.uv.array:void 0,n=void 0!==e.uv2?e.uv2.array:void 0;void 0!==n&&(this.faceVertexUvs[1]=
[]);for(var p=[],q=[],t=[],f=e=0;e<g.length;e+=3,f+=2)c.vertices.push(new THREE.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&p.push(new THREE.Vector3(h[e],h[e+1],h[e+2])),void 0!==k&&c.colors.push(new THREE.Color(k[e],k[e+1],k[e+2])),void 0!==m&&q.push(new THREE.Vector2(m[f],m[f+1])),void 0!==n&&t.push(new THREE.Vector2(n[f],n[f+1]));if(void 0!==d)if(g=a.groups,0<g.length)for(e=0;e<g.length;e++)for(var l=g[e],r=l.start,w=l.count,f=r,r=r+w;f<r;f+=3)b(d[f],d[f+1],d[f+2],l.materialIndex);else for(e=0;e<
d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<g.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/
b,c=new THREE.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],g=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(g,h);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<
b;d++)c[d]=new THREE.Vector3;if(a){var e=new THREE.Vector3,g=new THREE.Vector3;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var h=this.vertices[b.a];var k=this.vertices[b.b];var m=this.vertices[b.c];e.subVectors(m,k);g.subVectors(h,k);e.cross(g);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<
d;a++)b=this.faces[a],h=b.vertexNormals,3===h.length?(h[0].copy(c[b.a]),h[1].copy(c[b.b]),h[2].copy(c[b.c])):(h[0]=c[b.a].clone(),h[1]=c[b.b].clone(),h[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<
a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var g=new THREE.Geometry;g.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var h=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var k=new THREE.Vector3;var m={a:new THREE.Vector3,
b:new THREE.Vector3,c:new THREE.Vector3};d.push(k);h.push(m)}}h=this.morphNormals[e];g.vertices=this.morphTargets[e].vertices;g.computeFaceNormals();g.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],k=h.faceNormals[c],m=h.vertexNormals[c],k.copy(d.normal),m.a.copy(d.vertexNormals[0]),m.b.copy(d.vertexNormals[1]),m.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},
computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof THREE.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,g=this.vertices;var h=a.vertices;var k=this.faces,m=a.faces,n=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=(new THREE.Matrix3).getNormalMatrix(b));for(var p=0,q=h.length;p<q;p++){var t=h[p].clone();void 0!==b&&t.applyMatrix4(b);g.push(t)}p=0;for(q=m.length;p<q;p++){h=m[p];var f=h.vertexNormals,l=h.vertexColors;t=new THREE.Face3(h.a+e,h.b+e,h.c+e);t.normal.copy(h.normal);void 0!==d&&t.normal.applyMatrix3(d).normalize();b=0;for(g=f.length;b<
g;b++){var r=f[b].clone();void 0!==d&&r.applyMatrix3(d).normalize();t.vertexNormals.push(r)}t.color.copy(h.color);b=0;for(g=l.length;b<g;b++)r=l[b],t.vertexColors.push(r.clone());t.materialIndex=h.materialIndex+c;k.push(t)}p=0;for(q=a.length;p<q;p++)if(c=a[p],d=[],void 0!==c){b=0;for(g=c.length;b<g;b++)d.push(c[b].clone());n.push(d)}}},mergeMesh:function(a){!1===a instanceof THREE.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),
this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a={},b=[],c=[],d=Math.pow(10,4),e;var g=0;for(e=this.vertices.length;g<e;g++){var h=this.vertices[g];h=Math.round(h.x*d)+"_"+Math.round(h.y*d)+"_"+Math.round(h.z*d);void 0===a[h]?(a[h]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[h]]}a=[];g=0;for(e=this.faces.length;g<e;g++)for(d=this.faces[g],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],h=0;3>h;h++)if(d[h]===d[(h+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(d=a[g],
this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,1);g=this.vertices.length-b.length;this.vertices=b;return g},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],g,h;d&&d.length===b&&(g=[]);e&&e.length===b&&(h=[]);for(c=0;c<b;c++){var k=a[c]._id;g&&g.push(d[k]);h&&h.push(e[k])}g&&(this.faceVertexUvs[0]=
g);h&&(this.faceVertexUvs[1]=h)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==n[b])return n[b];n[b]=m.length/3;m.push(a.x,a.y,a.z);return n[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==q[b])return q[b];q[b]=p.length;p.push(a.getHex());return q[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==f[b])return f[b];f[b]=t.length/2;t.push(a.x,a.y);return f[b]}var e,
g={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};g.uuid=this.uuid;g.type=this.type;""!==this.name&&(g.name=this.name);if(void 0!==this.parameters){var h=this.parameters;for(e in h)void 0!==h[e]&&(g[e]=h[e]);return g}h=[];for(e=0;e<this.vertices.length;e++){var k=this.vertices[e];h.push(k.x,k.y,k.z)}k=[];var m=[],n={},p=[],q={},t=[],f={};for(e=0;e<this.faces.length;e++){var l=this.faces[e],r=void 0!==this.faceVertexUvs[0][e],w=0<l.normal.length(),v=0<l.vertexNormals.length,y=
1!==l.color.r||1!==l.color.g||1!==l.color.b,F=0<l.vertexColors.length,z=0,z=a(z,0,0),z=a(z,1,!0),z=a(z,2,!1),z=a(z,3,r),z=a(z,4,w),z=a(z,5,v),z=a(z,6,y),z=a(z,7,F);k.push(z);k.push(l.a,l.b,l.c);k.push(l.materialIndex);r&&(r=this.faceVertexUvs[0][e],k.push(d(r[0]),d(r[1]),d(r[2])));w&&k.push(b(l.normal));v&&(w=l.vertexNormals,k.push(b(w[0]),b(w[1]),b(w[2])));y&&k.push(c(l.color));F&&(l=l.vertexColors,k.push(c(l[0]),c(l[1]),c(l[2])))}g.data={};g.data.vertices=h;g.data.normals=m;0<p.length&&(g.data.colors=
p);0<t.length&&(g.data.uvs=[t]);g.data.faces=k;return g},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;e<g;e++){for(var h=b[e],k=[],
m=0,n=h.length;m<n;m++)k.push(h[m].clone());this.faceVertexUvs[c].push(k)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.GeometryIdCount=0;
THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(THREE.DirectGeometry.prototype,THREE.EventDispatcher.prototype,{computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b,
c=[],d;a=a.faces;for(var e=0;e<a.length;e++){var g=a[e];g.materialIndex!==d&&(d=g.materialIndex,void 0!==b&&(b.count=3*e-b.start,c.push(b)),b={start:3*e,materialIndex:d})}void 0!==b&&(b.count=3*e-b.start,c.push(b));this.groups=c},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,h=a.morphTargets,k=h.length;if(0<k){var m=[];for(var n=0;n<k;n++)m[n]=[];this.morphTargets.position=m}var p=a.morphNormals,q=p.length;if(0<q){var t=[];for(n=
0;n<q;n++)t[n]=[];this.morphTargets.normal=t}for(var f=a.skinIndices,l=a.skinWeights,r=f.length===c.length,w=l.length===c.length,n=0;n<b.length;n++){var v=b[n];this.vertices.push(c[v.a],c[v.b],c[v.c]);var y=v.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=v.normal,this.normals.push(y,y,y));y=v.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=v.color,this.colors.push(y,y,y));!0===e&&(y=d[0][n],void 0!==y?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
n),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));!0===g&&(y=d[1][n],void 0!==y?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",n),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2)));for(y=0;y<k;y++){var F=h[y].vertices;m[y].push(F[v.a],F[v.b],F[v.c])}for(y=0;y<q;y++)F=p[y].vertexNormals[n],t[y].push(F.a,F.b,F.c);r&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]);w&&this.skinWeights.push(l[v.a],l[v.b],
l[v.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(THREE.BufferGeometry.prototype,THREE.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){if(!1===b instanceof THREE.BufferAttribute&&!1===b instanceof THREE.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new THREE.BufferAttribute(b,c));else if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new THREE.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),
center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Points||a instanceof THREE.Line){a=new THREE.Float32Attribute(3*b.vertices.length,3);var c=new THREE.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&
(a=new THREE.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof THREE.Mesh&&b instanceof THREE.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof THREE.Mesh){var c=b.__directGeometry;if(void 0===c||!0===b.elementsNeedUpdate)return this.fromGeometry(b);
c.verticesNeedUpdate=b.verticesNeedUpdate||b.elementsNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate||b.elementsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate||b.elementsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate||b.elementsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate||b.elementsNeedUpdate;b.elementsNeedUpdate=!1;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==
c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,
void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new THREE.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.vertices));
0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new THREE.BufferAttribute(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new THREE.BufferAttribute(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",
(new THREE.BufferAttribute(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new THREE.BufferAttribute(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){for(var b=[],d=a.morphTargets[c],e=0,g=d.length;e<g;e++){var h=d[e],k=new THREE.Float32Attribute(3*h.length,3);b.push(k.copyVector3sArray(h))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new THREE.Float32Attribute(4*
a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new THREE.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;
void 0!==a?this.boundingBox.setFromArray(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;return function(){var c;null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);if(c=this.attributes.position){c=
c.array;var d=this.boundingSphere.center;a.setFromArray(c);a.center(d);for(var e=0,g=0,h=c.length;g<h;g+=3)b.fromArray(c,g),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;
if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,g=0,h=e.length;g<h;g++)e[g]=0;var e=b.normal.array,k=new THREE.Vector3,m=new THREE.Vector3,n=new THREE.Vector3,p=new THREE.Vector3,q=new THREE.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var t=0,f=c.length;t<f;++t){g=c[t];h=g.start;var l=g.count;g=h;for(h+=l;g<h;g+=3){l=3*a[g+0];var r=3*a[g+1];var w=3*a[g+
2];k.fromArray(d,l);m.fromArray(d,r);n.fromArray(d,w);p.subVectors(n,m);q.subVectors(k,m);p.cross(q);e[l]+=p.x;e[l+1]+=p.y;e[l+2]+=p.z;e[r]+=p.x;e[r+1]+=p.y;e[r+2]+=p.z;e[w]+=p.x;e[w+1]+=p.y;e[w+2]+=p.z}}}else for(g=0,h=d.length;g<h;g+=9)k.fromArray(d,g),m.fromArray(d,g+3),n.fromArray(d,g+6),p.subVectors(n,m),q.subVectors(k,m),p.cross(q),e[g]=p.x,e[g+1]=p.y,e[g+2]=p.z,e[g+3]=p.x,e[g+4]=p.y,e[g+5]=p.z,e[g+6]=p.x,e[g+7]=p.y,e[g+8]=p.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,
b){if(!1===a instanceof THREE.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,g=a.attributes[d],h=g.array,k=0,g=g.itemSize*b;k<h.length;k++,g++)e[g]=h[k];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,g=a.length;e<g;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+
1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new THREE.BufferGeometry,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],g=e.array,e=e.itemSize,h=new g.constructor(b.length*e),k,m=0,n=0,p=b.length;n<p;n++){k=b[n]*e;for(var q=0;q<e;q++)h[m++]=g[k++]}a.addAttribute(d,new THREE.BufferAttribute(h,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",
generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;for(e in b)void 0!==b[e]&&(a[e]=b[e]);return a}a.data={attributes:{}};var c=this.index;null!==c&&(b=Array.prototype.slice.call(c.array),a.data.index={type:c.array.constructor.name,array:b});c=this.attributes;for(e in c){var d=c[e];b=Array.prototype.slice.call(d.array);a.data.attributes[e]={itemSize:d.itemSize,type:d.array.constructor.name,array:b,
normalized:d.normalized}}var e=this.groups;0<e.length&&(a.data.groups=JSON.parse(JSON.stringify(e)));e=this.boundingSphere;null!==e&&(a.data.boundingSphere={center:e.center.toArray(),radius:e.radius});return a},clone:function(){return(new THREE.BufferGeometry).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this},
dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.BufferGeometry.MaxIndex=65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;
THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};THREE.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};
THREE.Uniform=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a;this.dynamic=!1};THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(a){this.dynamic=!0;this.onUpdateCallback=a;return this}};THREE.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
THREE.AnimationAction._new=function(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},e=0;e!==b;++e){var g=a[e].createInterpolant(null);c[e]=g;g.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=THREE.LoopRepeat;this._loopCount=
-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};
THREE.AnimationAction._new.prototype={constructor:THREE.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,
e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/
a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,g=this._timeScaleInterpolant,h=this.timeScale;null===g&&(this._timeScaleInterpolant=g=d._lendControlInterpolant());d=g.parameterPositions;g=g.sampleValues;d[0]=e;d[1]=e+c;g[0]=a/h;g[1]=b/h;return this},stopWarping:function(){var a=this._timeScaleInterpolant;null!==a&&
(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e=this._propertyBindings,g=0,h=b.length;g!==
h;++g)b[g].evaluate(c),e[g].accumulate(d,a)}},_updateWeight:function(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=
b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop;var e=this._loopCount;if(d===THREE.LoopOnce)a:{if(-1===e&&(this.loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=d===THREE.LoopPingPong;-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,d)):
this._setEndings(0===this.repetitions,!0,d));if(b>=c||0>b){var g=Math.floor(b/c);b-=c*g;e+=Math.abs(g);var h=this.repetitions-e;0>h?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(0===h?(a=0>a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,
b,c){var d=this._interpolantSettings;c?(d.endingStart=THREE.ZeroSlopeEnding,d.endingEnd=THREE.ZeroSlopeEnding):(d.endingStart=a?this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding,d.endingEnd=b?this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:THREE.WrapAroundEnding)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,g=this._weightInterpolant;null===g&&(this._weightInterpolant=g=d._lendControlInterpolant());d=g.parameterPositions;
g=g.sampleValues;d[0]=e;g[0]=b;d[1]=e+a;g[1]=c;return this}};THREE.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=THREE.Math.generateUUID();0>this.duration&&this.resetDuration();this.trim();this.optimize()};
THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){for(var a,b=a=0,c=this.tracks.length;b!==c;++b){var d=this.tracks[b];a=Math.max(a,d.times[d.times.length-1])}this.duration=a},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
Object.assign(THREE.AnimationClip,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,g=c.length;e!==g;++e)b.push(THREE.KeyframeTrack.parse(c[e]).scale(d));return new THREE.AnimationClip(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(THREE.KeyframeTrack.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,g=[],h=0;h<e;h++){var k=[],m=[];k.push((h+e-1)%
e,h,(h+1)%e);m.push(0,1,0);var n=THREE.AnimationUtils.getKeyframeOrder(k),k=THREE.AnimationUtils.sortedArray(k,1,n),m=THREE.AnimationUtils.sortedArray(m,1,n);d||0!==k[0]||(k.push(e),m.push(m[0]));g.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+b[h].name+"]",k,m)).scale(1/c))}return new THREE.AnimationClip(a,-1,g)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,
b,c){for(var d,e={},g=/^([\w-]*?)([\d]+)$/,h=0,k=a.length;h<k;h++){var m=a[h],n=m.name.match(g);n&&1<n.length&&(d=n[1],(n=e[d])||(e[d]=n=[]),n.push(m))}a=[];for(d in e)a.push(THREE.AnimationClip.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b,c){if(!a)return console.error("  no animation in JSONLoader data"),null;c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];THREE.AnimationUtils.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}};var d=[],e=a.name||"default",
g=a.length||-1,h=a.fps||30;a=a.hierarchy||[];for(var k=0;k<a.length;k++){var m=a[k].keys;if(m&&0!==m.length)if(m[0].morphTargets){for(var g={},n=0;n<m.length;n++)if(m[n].morphTargets)for(var p=0;p<m[n].morphTargets.length;p++)g[m[n].morphTargets[p]]=-1;for(var q in g){for(var t=[],f=[],p=0;p!==m[n].morphTargets.length;++p){var l=m[n];t.push(l.time);f.push(l.morphTarget===q?1:0)}d.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence["+q+"]",t,f))}g=g.length*(h||1)}else n=".bones["+b[k].name+"]",
c(THREE.VectorKeyframeTrack,n+".position",m,"pos",d),c(THREE.QuaternionKeyframeTrack,n+".quaternion",m,"rot",d),c(THREE.VectorKeyframeTrack,n+".scale",m,"scl",d)}return 0===d.length?null:new THREE.AnimationClip(e,g,d)}});THREE.AnimationMixer=function(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(THREE.AnimationMixer.prototype,THREE.EventDispatcher.prototype,{clipAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"===typeof a?THREE.AnimationClip.findByName(c,a):a,c=null!==e?e.uuid:a;a=this._actionsByClip[c];var g=null;if(void 0!==a){g=a.actionByRoot[d];if(void 0!==g)return g;g=a.knownActions[0];null===e&&(e=g._clip)}if(null===e)return null;e=new THREE.AnimationMixer._Action(this,e,b);this._bindAction(e,g);this._addInactiveAction(e,c,d);return e},existingAction:function(a,
b){b=b||this._root;var c=b.uuid;b="string"===typeof a?THREE.AnimationClip.findByName(b,a):a;b=this._actionsByClip[b?b.uuid:a];return void 0!==b?b.actionByRoot[c]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=
a,e=Math.sign(a),g=this._accuIndex^=1,h=0;h!==c;++h){var k=b[h];k.enabled&&k._update(d,a,e,g)}a=this._bindings;b=this._nActiveBindings;for(h=0;h!==b;++h)a[h].apply(g);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,g=d.length;e!==g;++e){var h=d[e];this._deactivateAction(h);var k=h._cacheIndex,m=b[b.length-1];h._cacheIndex=null;h._byClipCacheIndex=null;m._cacheIndex=
k;b[k]=m;b.pop();this._removeInactiveBindingsForAction(h)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});
THREE.AnimationMixer._Action=THREE.AnimationAction._new;
Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,g=a._propertyBindings;a=a._interpolants;var h=c.uuid,k=this._bindingsByRootAndName,m=k[h];void 0===m&&(m={},k[h]=m);for(k=0;k!==e;++k){var n=d[k],p=n.name,q=m[p];if(void 0===q){q=g[k];if(void 0!==q){null===q._cacheIndex&&(++q.referenceCount,this._addInactiveBinding(q,h,p));continue}q=new THREE.PropertyMixer(THREE.PropertyBinding.create(c,p,b&&b._propertyBindings[k].binding.parsedPath),
n.ValueTypeName,n.getValueSize());++q.referenceCount;this._addInactiveBinding(q,h,p)}g[k]=q;a[k].resultBuffer=q.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid;var c=a._clip.uuid;var d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},
_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},
get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,g=e[b];void 0===g?(g={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=g):(b=
g.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);g.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var c=a._clip.uuid,d=this._actionsByClip,e=d[c],g=e.knownActions,h=g[g.length-1],k=a._byClipCacheIndex;h._byClipCacheIndex=k;g[k]=h;g.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===g.length&&delete d[c];this._removeInactiveBindingsForAction(a)},
_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,
e=d[b],g=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=g.length;g.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,g=e[d],h=b[b.length-1];a=a._cacheIndex;h._cacheIndex=a;b[a]=h;b.pop();delete g[c];a:{for(var k in g)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=
this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,
e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});
THREE.AnimationObjectGroup=function(a){this.uuid=THREE.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}};
THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(a){for(var b,c,d=this._objects,e=d.length,g=this.nCachedObjects_,h=this._indicesByUUID,k=this._paths,m=this._parsedPaths,n=this._bindings,p=n.length,q=0,t=arguments.length;q!==t;++q){var f=arguments[q],l=f.uuid,r=h[l];if(void 0===r)for(r=e++,h[l]=r,d.push(f),l=0,b=p;l!==b;++l)n[l].push(new THREE.PropertyBinding(f,k[l],m[l]));else if(r<g){c=d[r];var w=--g;b=d[w];h[b.uuid]=r;d[r]=b;h[l]=w;d[w]=f;l=0;for(b=p;l!==
b;++l){var v=n[l],y=v[r];v[r]=v[w];void 0===y&&(y=new THREE.PropertyBinding(f,k[l],m[l]));v[w]=y}}else d[r]!==c&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=g},remove:function(a){for(var b,c=this._objects,d=this.nCachedObjects_,e=this._indicesByUUID,g=this._bindings,h=g.length,k=0,m=arguments.length;k!==m;++k){var n=arguments[k],p=n.uuid,q=e[p];if(void 0!==q&&q>=d){var t=d++;b=c[t];e[b.uuid]=
q;c[q]=b;e[p]=t;c[t]=n;n=0;for(p=h;n!==p;++n){b=g[n];var f=b[q];b[q]=b[t];b[t]=f}}}this.nCachedObjects_=d},uncache:function(a){for(var b,c,d,e,g,h=this._objects,k=h.length,m=this.nCachedObjects_,n=this._indicesByUUID,p=this._bindings,q=p.length,t=0,f=arguments.length;t!==f;++t){g=arguments[t].uuid;var l=n[g];if(void 0!==l)if(delete n[g],l<m)for(g=--m,e=h[g],d=--k,c=h[d],n[e.uuid]=l,h[l]=e,n[c.uuid]=g,h[g]=c,h.pop(),e=0,c=q;e!==c;++e){b=p[e];var r=b[d];b[l]=b[g];b[g]=r;b.pop()}else for(d=--k,c=h[d],
n[c.uuid]=l,h[l]=c,h.pop(),e=0,c=q;e!==c;++e)b=p[e],b[l]=b[d],b.pop()}this.nCachedObjects_=m},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var g=this._paths,h=this._parsedPaths,k=this._objects,m=this.nCachedObjects_,n=Array(k.length),d=e.length;c[a]=d;g.push(a);h.push(b);e.push(n);c=m;for(d=k.length;c!==d;++c)n[c]=new THREE.PropertyBinding(k[c],a,b);return n},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==
c){var d=this._paths,e=this._parsedPaths,g=this._bindings,h=g.length-1,k=g[h];b[a[h]]=c;g[c]=k;g.pop();e[c]=e[h];e.pop();d[c]=d[h];d.pop()}}};
THREE.AnimationUtils={arraySlice:function(a,b,c){return THREE.AnimationUtils.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,
b,c){for(var d=a.length,e=new a.constructor(d),g=0,h=0;h!==d;++g)for(var k=c[g]*b,m=0;m!==b;++m)e[h++]=a[k+m];return e},flattenJSON:function(a,b,c,d){for(var e=1,g=a[0];void 0!==g&&void 0===g[d];)g=a[e++];if(void 0!==g){var h=g[d];if(void 0!==h)if(Array.isArray(h)){do h=g[d],void 0!==h&&(b.push(g.time),c.push.apply(c,h)),g=a[e++];while(void 0!==g)}else if(void 0!==h.toArray){do h=g[d],void 0!==h&&(b.push(g.time),h.toArray(c,c.length)),g=a[e++];while(void 0!==g)}else{do h=g[d],void 0!==h&&(b.push(g.time),
c.push(h)),g=a[e++];while(void 0!==g)}}}};THREE.KeyframeTrack=function(a,b,c,d){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keyframes in track named "+a);this.name=a;this.times=THREE.AnimationUtils.convertArray(b,this.TimeBufferType);this.values=THREE.AnimationUtils.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(a){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new THREE.CubicInterpolant(this.times,
this.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case THREE.InterpolateDiscrete:var b=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:b=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
else throw Error(b);console.warn(b)}else this.createInterpolant=b},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},
scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,g=d-1;e!==d&&c[e]<a;)++e;for(;-1!==g&&c[g]>b;)--g;++g;if(0!==e||g!==d)e>=g&&(g=Math.max(g,1),e=g-1),d=this.getValueSize(),this.times=THREE.AnimationUtils.arraySlice(c,e,g),this.values=THREE.AnimationUtils.arraySlice(this.values,e*d,g*d);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("invalid value size in track",
this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error("track is empty",this),a=!1);for(var e=null,g=0;g!==d;g++){var h=c[g];if("number"===typeof h&&isNaN(h)){console.error("time is not a valid number",this,g,h);a=!1;break}if(null!==e&&e>h){console.error("out of order keys",this,g,h,e);a=!1;break}e=h}if(void 0!==b&&THREE.AnimationUtils.isTypedArray(b))for(g=0,c=b.length;g!==c;++g)if(d=b[g],isNaN(d)){console.error("value is not a valid number",this,g,d);a=!1;break}return a},optimize:function(){for(var a=
this.times,b=this.values,c=this.getValueSize(),d=1,e=1,g=a.length-1;e<=g;++e){var h=!1,k=a[e];if(k!==a[e+1]&&(1!==e||k!==k[0]))for(var m=e*c,n=m-c,p=m+c,k=0;k!==c;++k){var q=b[m+k];if(q!==b[n+k]||q!==b[p+k]){h=!0;break}}if(h){if(e!==d)for(a[d]=a[e],h=e*c,m=d*c,k=0;k!==c;++k)b[m+k]=b[h+k];++d}}d!==a.length&&(this.times=THREE.AnimationUtils.arraySlice(a,0,d),this.values=THREE.AnimationUtils.arraySlice(b,0,d*c));return this}};
Object.assign(THREE.KeyframeTrack,{parse:function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");var b=THREE.KeyframeTrack._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];THREE.AnimationUtils.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:THREE.AnimationUtils.convertArray(a.times,
Array),values:THREE.AnimationUtils.convertArray(a.values,Array)};var c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return THREE.NumberKeyframeTrack;case "vector":case "vector2":case "vector3":case "vector4":return THREE.VectorKeyframeTrack;case "color":return THREE.ColorKeyframeTrack;case "quaternion":return THREE.QuaternionKeyframeTrack;
case "bool":case "boolean":return THREE.BooleanKeyframeTrack;case "string":return THREE.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);}});THREE.PropertyBinding=function(a,b,c){this.path=b;this.parsedPath=c||THREE.PropertyBinding.parseTrackName(b);this.node=THREE.PropertyBinding.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a};
THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=THREE.PropertyBinding.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var g=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===g){g=c;break}break;default:if(void 0===a[c]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[c]}if(void 0!==g){if(void 0===
a[g]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[g]}}g=a[d];if(void 0===g)console.error("  trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===
d){if(!a.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!a.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=g;this.propertyIndex=e}else void 0!==g.fromArray&&void 0!==g.toArray?
(c=this.BindingType.HasFromToArray,this.resolvedProperty=g):void 0!==g.length?(c=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(THREE.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=
c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,
b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});THREE.PropertyBinding.Composite=function(a,b,c){c=c||THREE.PropertyBinding.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)};
THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].unbind()}};THREE.PropertyBinding.create=function(a,b,c){return a instanceof THREE.AnimationObjectGroup?new THREE.PropertyBinding.Composite(a,b,c):new THREE.PropertyBinding(a,b,c)};
THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
THREE.PropertyBinding.findNode=function(a,b){var c;if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton&&(c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton)))return c;if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};if(c=d(a.children))return c}return null};
THREE.PropertyMixer=function(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0};
THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,g=b+b;d!==g;++d)if(c[d]!==c[d+b]){e.setValue(c,
a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){THREE.Quaternion.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var g=1-d,h=0;h!==e;++h){var k=b+h;a[k]=a[k]*g+a[c+h]*d}}};
THREE.BooleanKeyframeTrack=function(a,b,c){THREE.KeyframeTrack.call(this,a,b,c)};THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.ColorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.ColorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.ColorKeyframeTrack,ValueTypeName:"color"});THREE.NumberKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:"number"});THREE.QuaternionKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(a){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});THREE.StringKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:THREE.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});THREE.VectorKeyframeTrack=function(a,b,c,d){THREE.KeyframeTrack.call(this,a,b,c,d)};
THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:"vector"});
THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
THREE.Audio.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Audio,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.source.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-
1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(a){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=a},getVolume:function(){return this.gain.gain.value},
setVolume:function(a){this.gain.gain.value=a;return this}});THREE.AudioAnalyser=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};
Object.assign(THREE.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.defineProperty(THREE,"AudioContext",{get:function(){var a;return function(){void 0===a&&(a=new (window.AudioContext||window.webkitAudioContext));return a}}()});
THREE.PositionalAudio=function(a){THREE.Audio.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
THREE.PositionalAudio.prototype=Object.assign(Object.create(THREE.Audio.prototype),{constructor:THREE.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=
a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});
THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=THREE.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
THREE.AudioListener.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,
b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}()});THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.constructor=THREE.Camera;
THREE.Camera.prototype.getWorldDirection=function(){var a=new THREE.Quaternion;return function(b){b=b||new THREE.Vector3;this.getWorldQuaternion(a);return b.set(0,0,-1).applyQuaternion(a)}}();THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)};
THREE.Camera.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(1,0,0));this.add(d);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(-1,0,0));this.add(e);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var h=new THREE.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new THREE.Vector3(0,-1,0));
this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,1));this.add(k);var m=new THREE.PerspectiveCamera(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new THREE.Vector3(0,0,-1));this.add(m);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,n=c.texture.generateMipmaps;c.texture.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,k,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,m,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;
THREE.OrthographicCamera=function(a,b,c,d,e,g){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};
THREE.OrthographicCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.OrthographicCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,g){this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:g};this.updateProjectionMatrix()},
clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom);var b=(this.top-this.bottom)/(2*this.zoom);var c=(this.right+this.left)/2;var d=(this.top+this.bottom)/2;var e=c-a;c+=a;a=d+b;b=d-b;if(null!==this.view){c=this.zoom/(this.view.width/this.view.fullWidth);b=this.zoom/(this.view.height/this.view.fullHeight);var g=(this.right-this.left)/this.view.width;d=(this.top-this.bottom)/this.view.height;e+=this.view.offsetX/
c*g;c=e+this.view.width/c*g;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype=Object.assign(Object.create(THREE.Camera.prototype),{constructor:THREE.PerspectiveCamera,copy:function(a){THREE.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*THREE.Math.RAD2DEG*Math.atan(a);
this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*THREE.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*THREE.Math.RAD2DEG*Math.atan(Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,g){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,
width:e,height:g};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near;var b=a*Math.tan(.5*THREE.Math.DEG2RAD*this.fov)/this.zoom;var c=2*b;var d=this.aspect*c;var e=-.5*d;var g=this.view;if(null!==g){var h=g.fullWidth,k=g.fullHeight;e+=g.offsetX*d/h;b-=g.offsetY*c/k;d*=g.width/h;c*=g.height/k}g=this.filmOffset;0!==g&&(e+=a*g/this.getFilmWidth());this.projectionMatrix.makeFrustum(e,e+d,b-c,b,a,this.far)},
toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});
THREE.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new THREE.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new THREE.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(THREE.StereoCamera.prototype,{update:function(){var a,b,c,d,e,g=new THREE.Matrix4,h=new THREE.Matrix4;return function(k){if(a!==k.focus||b!==k.fov||c!==k.aspect*this.aspect||d!==k.near||e!==k.far){a=k.focus;b=k.fov;c=k.aspect*this.aspect;d=k.near;e=k.far;var m=k.projectionMatrix.clone(),n=.032*d/a,p=d*Math.tan(THREE.Math.DEG2RAD*b*.5);h.elements[12]=-.032;g.elements[12]=.032;var q=-p*c+n;var t=p*c+n;m.elements[0]=2*d/(t-q);m.elements[8]=(t+q)/(t-q);this.cameraL.projectionMatrix.copy(m);
q=-p*c-n;t=p*c-n;m.elements[0]=2*d/(t-q);m.elements[8]=(t+q)/(t-q);this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(h);this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(g)}}()});THREE.Light=function(a,b){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0};
THREE.Light.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Light,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==
this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);return a}});THREE.LightShadow=function(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new THREE.Vector2(512,512);this.map=null;this.matrix=new THREE.Matrix4};Object.assign(THREE.LightShadow.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
THREE.AmbientLight=function(a,b){THREE.Light.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0};THREE.AmbientLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.AmbientLight});THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a,b);this.type="DirectionalLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;this.shadow=new THREE.DirectionalLightShadow};
THREE.DirectionalLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.DirectionalLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.DirectionalLightShadow=function(a){THREE.LightShadow.call(this,new THREE.OrthographicCamera(-5,5,5,-5,.5,500))};THREE.DirectionalLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.DirectionalLightShadow});
THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.groundColor=new THREE.Color(b)};THREE.HemisphereLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.HemisphereLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
THREE.PointLight=function(a,b,c,d){THREE.Light.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,.5,500))};
THREE.PointLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.PointLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});
THREE.SpotLight=function(a,b,c,d,e,g){THREE.Light.call(this,a,b);this.type="SpotLight";this.position.copy(THREE.Object3D.DefaultUp);this.updateMatrix();this.target=new THREE.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==g?g:1;this.shadow=new THREE.SpotLightShadow};
THREE.SpotLight.prototype=Object.assign(Object.create(THREE.Light.prototype),{constructor:THREE.SpotLight,copy:function(a){THREE.Light.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});THREE.SpotLightShadow=function(){THREE.LightShadow.call(this,new THREE.PerspectiveCamera(50,1,.5,500))};
THREE.SpotLightShadow.prototype=Object.assign(Object.create(THREE.LightShadow.prototype),{constructor:THREE.SpotLightShadow,update:function(a){var b=2*THREE.Math.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});THREE.AudioLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.AudioLoader.prototype,{load:function(a,b,c,d){var e=new THREE.XHRLoader(this.manager);e.setResponseType("arraybuffer");e.load(a,function(a){THREE.AudioContext.decodeAudioData(a,function(a){b(a)})},c,d)}});THREE.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
THREE.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b,c){for(var d=[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a,b,c;return function(d,e,g){function h(a,c,d,h,m){a=e+a;var f=THREE.Loader.Handlers.get(a);null!==f?a=f.load(a):(b.setCrossOrigin(g),a=b.load(a));void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=
THREE.RepeatWrapping),1!==c[1]&&(a.wrapT=THREE.RepeatWrapping));void 0!==d&&a.offset.fromArray(d);void 0!==h&&("repeat"===h[0]&&(a.wrapS=THREE.RepeatWrapping),"mirror"===h[0]&&(a.wrapS=THREE.MirroredRepeatWrapping),"repeat"===h[1]&&(a.wrapT=THREE.RepeatWrapping),"mirror"===h[1]&&(a.wrapT=THREE.MirroredRepeatWrapping));void 0!==m&&(a.anisotropy=m);c=THREE.Math.generateUUID();k[c]=a;return c}void 0===a&&(a=new THREE.Color);void 0===b&&(b=new THREE.TextureLoader);void 0===c&&(c=new THREE.MaterialLoader);
var k={},m={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"},n;for(n in d){var p=d[n];switch(n){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":m.name=p;break;case "blending":m.blending=THREE[p];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",n,"is no longer supported.");break;case "colorDiffuse":m.color=a.fromArray(p).getHex();break;case "colorSpecular":m.specular=a.fromArray(p).getHex();break;case "colorEmissive":m.emissive=
a.fromArray(p).getHex();break;case "specularCoef":m.shininess=p;break;case "shading":"basic"===p.toLowerCase()&&(m.type="MeshBasicMaterial");"phong"===p.toLowerCase()&&(m.type="MeshPhongMaterial");"standard"===p.toLowerCase()&&(m.type="MeshStandardMaterial");break;case "mapDiffuse":m.map=h(p,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":m.emissiveMap=
h(p,d.mapEmissiveRepeat,d.mapEmissiveOffset,d.mapEmissiveWrap,d.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":m.lightMap=h(p,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":m.aoMap=h(p,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;
case "mapBump":m.bumpMap=h(p,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":m.bumpScale=p;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":m.normalMap=h(p,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":m.normalScale=[p,p];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":m.specularMap=
h(p,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":m.metalnessMap=h(p,d.mapMetalnessRepeat,d.mapMetalnessOffset,d.mapMetalnessWrap,d.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":m.roughnessMap=h(p,d.mapRoughnessRepeat,
d.mapRoughnessOffset,d.mapRoughnessWrap,d.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":m.alphaMap=h(p,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":m.side=THREE.BackSide;break;case "doubleSided":m.side=THREE.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");
m.opacity=p;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":m[n]=p;break;case "vertexColors":!0===p&&(m.vertexColors=THREE.VertexColors);"face"===p&&(m.vertexColors=THREE.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",n,p)}}"MeshBasicMaterial"===m.type&&delete m.emissive;"MeshPhongMaterial"!==m.type&&delete m.specular;1>m.opacity&&(m.transparent=!0);c.setTextures(k);
return c.parse(m)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.XHRLoader.prototype,{load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,g=THREE.Cache.get(a);if(void 0!==g)return e.manager.itemStart(a),setTimeout(function(){b&&b(g);e.manager.itemEnd(a)},0),g;var h=new XMLHttpRequest;h.overrideMimeType("text/plain");h.open("GET",a,!0);h.addEventListener("load",function(c){var g=c.target.response;THREE.Cache.add(a,g);200===this.status?(b&&b(g),e.manager.itemEnd(a)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),
b&&b(g),e.manager.itemEnd(a)):(d&&d(c),e.manager.itemError(a))},!1);void 0!==c&&h.addEventListener("progress",function(a){c(a)},!1);h.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.responseType&&(h.responseType=this.responseType);void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials);h.send(null);e.manager.itemStart(a);return h},setPath:function(a){this.path=a;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=
a;return this}});THREE.FontLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};Object.assign(THREE.FontLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(this.manager)).load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new THREE.Font(a)}});
THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.ImageLoader.prototype,{load:function(a,b,c,d){var e=this,g=document.createElementNS("http://www.w3.org/1999/xhtml","img");g.onload=function(){URL.revokeObjectURL(g.src);b&&b(g);e.manager.itemEnd(a)};if(0===a.indexOf("data:"))g.src=a;else{var h=new THREE.XHRLoader;h.setPath(this.path);h.setResponseType("blob");h.load(a,function(a){g.src=URL.createObjectURL(a)},c,d)}e.manager.itemStart(a);return g},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=
a;return this}});THREE.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.withCredentials=!1};
Object.assign(THREE.JSONLoader.prototype,{load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:THREE.Loader.prototype.extractUrlBase(a),h=new THREE.XHRLoader(this.manager);h.setWithCredentials(this.withCredentials);h.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===
d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,g);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new THREE.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,e,k,m,n,p,q,t=a.faces;var f=a.vertices;var l=a.normals,r=a.colors,w=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&w++;for(d=0;d<w;d++)c.faceVertexUvs[d]=[]}var v=0;for(m=f.length;v<
m;)d=new THREE.Vector3,d.x=f[v++]*b,d.y=f[v++]*b,d.z=f[v++]*b,c.vertices.push(d);v=0;for(m=t.length;v<m;)if(b=t[v++],p=b&1,k=b&2,d=b&8,n=b&16,q=b&32,f=b&64,b&=128,p){p=new THREE.Face3;p.a=t[v];p.b=t[v+1];p.c=t[v+3];var y=new THREE.Face3;y.a=t[v+1];y.b=t[v+2];y.c=t[v+3];v+=4;k&&(k=t[v++],p.materialIndex=k,y.materialIndex=k);k=c.faces.length;if(d)for(d=0;d<w;d++){var F=a.uvs[d];c.faceVertexUvs[d][k]=[];c.faceVertexUvs[d][k+1]=[];for(e=0;4>e;e++){var z=t[v++];var E=F[2*z];z=F[2*z+1];E=new THREE.Vector2(E,
z);2!==e&&c.faceVertexUvs[d][k].push(E);0!==e&&c.faceVertexUvs[d][k+1].push(E)}}n&&(n=3*t[v++],p.normal.set(l[n++],l[n++],l[n]),y.normal.copy(p.normal));if(q)for(d=0;4>d;d++)n=3*t[v++],q=new THREE.Vector3(l[n++],l[n++],l[n]),2!==d&&p.vertexNormals.push(q),0!==d&&y.vertexNormals.push(q);f&&(f=t[v++],f=r[f],p.color.setHex(f),y.color.setHex(f));if(b)for(d=0;4>d;d++)f=t[v++],f=r[f],2!==d&&p.vertexColors.push(new THREE.Color(f)),0!==d&&y.vertexColors.push(new THREE.Color(f));c.faces.push(p);c.faces.push(y)}else{p=
new THREE.Face3;p.a=t[v++];p.b=t[v++];p.c=t[v++];k&&(k=t[v++],p.materialIndex=k);k=c.faces.length;if(d)for(d=0;d<w;d++)for(F=a.uvs[d],c.faceVertexUvs[d][k]=[],e=0;3>e;e++)z=t[v++],E=F[2*z],z=F[2*z+1],E=new THREE.Vector2(E,z),c.faceVertexUvs[d][k].push(E);n&&(n=3*t[v++],p.normal.set(l[n++],l[n++],l[n]));if(q)for(d=0;3>d;d++)n=3*t[v++],q=new THREE.Vector3(l[n++],l[n++],l[n]),p.vertexNormals.push(q);f&&(f=t[v++],p.color.setHex(r[f]));if(b)for(d=0;3>d;d++)f=t[v++],p.vertexColors.push(new THREE.Color(r[f]));
c.faces.push(p)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,h=a.skinWeights.length;d<h;d+=b)c.skinWeights.push(new THREE.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,h=a.skinIndices.length;d<h;d+=b)c.skinIndices.push(new THREE.Vector4(a.skinIndices[d],1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<
c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(b){if(void 0!==a.morphTargets)for(var d=0,e=a.morphTargets.length;d<e;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var k=c.morphTargets[d].vertices,m=
a.morphTargets[d].vertices,n=0,p=m.length;n<p;n+=3){var q=new THREE.Vector3;q.x=m[n]*b;q.y=m[n+1]*b;q.z=m[n+2]*b;k.push(q)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,k=a.morphColors[0].colors,d=0,e=b.length;d<e;d++)b[d].color.fromArray(k,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):
d.push(a.animations));for(var h=0;h<d.length;h++){var k=THREE.AnimationClip.parseAnimation(d[h],c.bones);k&&b.push(k)}c.morphTargets&&(d=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}});
THREE.LoadingManager=function(a,b,c){var d=this,e=!1,g=0,h=0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){h++;if(!1===e&&void 0!==d.onStart)d.onStart(a,g,h);e=!0};this.itemEnd=function(a){g++;if(void 0!==d.onProgress)d.onProgress(a,g,h);if(g===h&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)}};THREE.DefaultLoadingManager=new THREE.LoadingManager;
THREE.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.BufferGeometryLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new THREE.BufferGeometry;var c=a.data.index;var d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),
b.setIndex(new THREE.BufferAttribute(c,1)));var e=a.data.attributes;for(h in e){var g=e[h];c=new d[g.type](g.array);b.addAttribute(h,new THREE.BufferAttribute(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d){var h=0;for(c=d.length;h!==c;++h)e=d[h],b.addGroup(e.start,e.count,e.materialIndex)}a=a.data.boundingSphere;void 0!==a&&(d=new THREE.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new THREE.Sphere(d,a.radius));return b}});
THREE.MaterialLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.textures={}};
Object.assign(THREE.MaterialLoader.prototype,{load:function(a,b,c,d){var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},setTextures:function(a){this.textures=a},getTexture:function(a){var b=this.textures;void 0===b[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return b[a]},parse:function(a){var b=new THREE[a.type];void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&b.color.setHex(a.color);void 0!==a.roughness&&
(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&b.emissive.setHex(a.emissive);void 0!==a.specular&&b.specular.setHex(a.specular);void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&
(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);
void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(b.map=this.getTexture(a.map));void 0!==a.alphaMap&&(b.alphaMap=this.getTexture(a.alphaMap),b.transparent=!0);void 0!==a.bumpMap&&(b.bumpMap=this.getTexture(a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=this.getTexture(a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new THREE.Vector2).fromArray(c)}void 0!==a.displacementMap&&
(b.displacementMap=this.getTexture(a.displacementMap));void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(b.roughnessMap=this.getTexture(a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=this.getTexture(a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=this.getTexture(a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&
(b.specularMap=this.getTexture(a.specularMap));void 0!==a.envMap&&(b.envMap=this.getTexture(a.envMap),b.combine=THREE.MultiplyOperation);void 0!==a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=this.getTexture(a.lightMap));void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=this.getTexture(a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials){c=0;for(var d=a.materials.length;c<
d;c++)b.materials.push(this.parse(a.materials[c]))}return b}});THREE.ObjectLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this.texturePath=""};
Object.assign(THREE.ObjectLoader.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new THREE.XHRLoader(e.manager)).load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void 0!==b&&b(e)}),d=this.parseTextures(a.textures,d),d=this.parseMaterials(a.materials,
d),e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseGeometries:function(a){var b={};if(void 0!==a)for(var c=new THREE.JSONLoader,d=new THREE.BufferGeometryLoader,e=0,g=a.length;e<g;e++){var h=a[e];switch(h.type){case "PlaneGeometry":case "PlaneBufferGeometry":var k=new THREE[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":k=
new THREE[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":k=new THREE[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":k=new THREE[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":k=new THREE[h.type](h.radius,h.height,h.radialSegments,
h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":k=new THREE[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":k=new THREE[h.type](h.radius,h.detail);break;case "RingGeometry":case "RingBufferGeometry":k=new THREE[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,
h.thetaStart,h.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":k=new THREE[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":k=new THREE[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case "LatheGeometry":case "LatheBufferGeometry":k=new THREE[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case "BufferGeometry":k=d.parse(h);break;case "Geometry":k=c.parse(h.data,this.texturePath).geometry;
break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);b[h.uuid]=k}return b},parseMaterials:function(a,b){var c={};if(void 0!==a){var d=new THREE.MaterialLoader;d.setTextures(b);b=0;for(var e=a.length;b<e;b++){var g=d.parse(a[b]);c[g.uuid]=g}}return c},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=THREE.AnimationClip.parse(a[c]);b.push(d)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);
return g.load(a,function(){d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new THREE.LoadingManager(b);var g=new THREE.ImageLoader(b);g.setCrossOrigin(this.crossOrigin);b=0;for(var h=a.length;b<h;b++){var k=a[b],m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:d.texturePath+k.url;e[k.uuid]=c(m)}}return e},parseTextures:function(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return THREE[a]}
var d={};if(void 0!==a)for(var e=0,g=a.length;e<g;e++){var h=a[e];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",h.image);var k=new THREE.Texture(b[h.image]);k.needsUpdate=!0;k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);void 0!==h.mapping&&(k.mapping=c(h.mapping));void 0!==h.offset&&k.offset.fromArray(h.offset);void 0!==h.repeat&&k.repeat.fromArray(h.repeat);void 0!==h.wrap&&(k.wrapS=c(h.wrap[0]),
k.wrapT=c(h.wrap[1]));void 0!==h.minFilter&&(k.minFilter=c(h.minFilter));void 0!==h.magFilter&&(k.magFilter=c(h.magFilter));void 0!==h.anisotropy&&(k.anisotropy=h.anisotropy);void 0!==h.flipY&&(k.flipY=h.flipY);d[h.uuid]=k}return d},parseObject:function(){var a=new THREE.Matrix4;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function g(a){if(void 0!==a)return void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",
a),d[a]}switch(b.type){case "Scene":var h=new THREE.Scene;break;case "PerspectiveCamera":h=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far);void 0!==b.focus&&(h.focus=b.focus);void 0!==b.zoom&&(h.zoom=b.zoom);void 0!==b.filmGauge&&(h.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(h.filmOffset=b.filmOffset);void 0!==b.view&&(h.view=Object.assign({},b.view));break;case "OrthographicCamera":h=new THREE.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":h=
new THREE.AmbientLight(b.color,b.intensity);break;case "DirectionalLight":h=new THREE.DirectionalLight(b.color,b.intensity);break;case "PointLight":h=new THREE.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":h=new THREE.SpotLight(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":h=new THREE.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":h=e(b.geometry);var k=g(b.material);h=h.bones&&0<h.bones.length?new THREE.SkinnedMesh(h,
k):new THREE.Mesh(h,k);break;case "LOD":h=new THREE.LOD;break;case "Line":h=new THREE.Line(e(b.geometry),g(b.material),b.mode);break;case "PointCloud":case "Points":h=new THREE.Points(e(b.geometry),g(b.material));break;case "Sprite":h=new THREE.Sprite(g(b.material));break;case "Group":h=new THREE.Group;break;default:h=new THREE.Object3D}h.uuid=b.uuid;void 0!==b.name&&(h.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(h.position,h.quaternion,h.scale)):(void 0!==b.position&&h.position.fromArray(b.position),
void 0!==b.rotation&&h.rotation.fromArray(b.rotation),void 0!==b.scale&&h.scale.fromArray(b.scale));void 0!==b.castShadow&&(h.castShadow=b.castShadow);void 0!==b.receiveShadow&&(h.receiveShadow=b.receiveShadow);void 0!==b.visible&&(h.visible=b.visible);void 0!==b.userData&&(h.userData=b.userData);if(void 0!==b.children)for(var m in b.children)h.add(this.parseObject(b.children[m],c,d));if("LOD"===b.type)for(b=b.levels,k=0;k<b.length;k++){var n=b[k];m=h.getObjectByProperty("uuid",n.object);void 0!==
m&&h.addLevel(m,n.distance)}return h}}()});THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.TextureLoader.prototype,{load:function(a,b,c,d){var e=new THREE.Texture,g=new THREE.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);g.load(a,function(c){var d=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=d?THREE.RGBFormat:THREE.RGBAFormat;e.image=c;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.CubeTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
Object.assign(THREE.CubeTextureLoader.prototype,{load:function(a,b,c,d){function e(c){h.load(a[c],function(a){g.images[c]=a;k++;6===k&&(g.needsUpdate=!0,b&&b(g))},void 0,d)}var g=new THREE.CubeTexture,h=new THREE.ImageLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);var k=0;for(c=0;c<a.length;++c)e(c);return g},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});
THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.BinaryTextureLoader.prototype,{load:function(a,b,c,d){var e=this,g=new THREE.DataTexture,h=new THREE.XHRLoader(this.manager);h.setResponseType("arraybuffer");h.load(a,function(a){if(a=e._parser(a))void 0!==a.image?g.image=a.image:void 0!==a.data&&(g.image.width=a.width,g.image.height=a.height,g.image.data=a.data),g.wrapS=void 0!==a.wrapS?a.wrapS:THREE.ClampToEdgeWrapping,g.wrapT=void 0!==a.wrapT?a.wrapT:THREE.ClampToEdgeWrapping,g.magFilter=void 0!==a.magFilter?a.magFilter:THREE.LinearFilter,
g.minFilter=void 0!==a.minFilter?a.minFilter:THREE.LinearMipMapLinearFilter,g.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(g.format=a.format),void 0!==a.type&&(g.type=a.type),void 0!==a.mipmaps&&(g.mipmaps=a.mipmaps),1===a.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.needsUpdate=!0,b&&b(g,a)},c,d);return g}});THREE.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=null};
Object.assign(THREE.CompressedTextureLoader.prototype,{load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=g._parser(a,!0);h[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};n+=1;6===n&&(1===a.mipmapCount&&(k.minFilter=THREE.LinearFilter),k.format=a.format,k.needsUpdate=!0,b&&b(k))},c,d)}var g=this,h=[],k=new THREE.CompressedTexture;k.image=h;var m=new THREE.XHRLoader(this.manager);m.setPath(this.path);m.setResponseType("arraybuffer");if(Array.isArray(a))for(var n=0,
p=0,q=a.length;p<q;++p)e(p);else m.load(a,function(a){a=g._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){h[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)h[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),h[d].format=a.format,h[d].width=a.width,h[d].height=a.height}else k.image.width=a.width,k.image.height=a.height,k.mipmaps=a.mipmaps;1===a.mipmapCount&&(k.minFilter=THREE.LinearFilter);k.format=a.format;k.needsUpdate=!0;b&&b(k)},c,d);return k},setPath:function(a){this.path=
a;return this}});
THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=THREE.NormalBlending;this.side=THREE.FrontSide;this.shading=THREE.SmoothShading;this.vertexColors=THREE.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=
this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):d instanceof THREE.Color?d.set(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):
this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color instanceof THREE.Color&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);
this.emissive instanceof THREE.Color&&(d.emissive=this.emissive.getHex());this.specular instanceof THREE.Color&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);this.map instanceof THREE.Texture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap instanceof THREE.Texture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof THREE.Texture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap instanceof THREE.Texture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,
d.bumpScale=this.bumpScale);this.normalMap instanceof THREE.Texture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap instanceof THREE.Texture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap instanceof THREE.Texture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap instanceof THREE.Texture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);
this.emissiveMap instanceof THREE.Texture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap instanceof THREE.Texture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof THREE.Texture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);this.blending!==THREE.NormalBlending&&(d.blending=this.blending);this.shading!==THREE.SmoothShading&&
(d.shading=this.shading);this.side!==THREE.FrontSide&&(d.side=this.side);this.vertexColors!==THREE.NoColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);c&&(c=b(a.textures),
a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.shading=a.shading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;
this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;a=a.clippingPlanes;var b=null;if(null!==
a)for(var c=a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(THREE.Material.prototype,THREE.EventDispatcher.prototype);THREE.MaterialIdCount=0;
THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial;
THREE.LineBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;THREE.LineDashedMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;
THREE.MeshBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=THREE.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;THREE.MeshDepthMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;
THREE.MeshLambertMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;this.setValues(a)};
THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;THREE.MeshNormalMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.specular=new THREE.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;
THREE.MeshPhongMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;
this.morphNormals=a.morphNormals;return this};
THREE.MeshStandardMaterial=function(a){THREE.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new THREE.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new THREE.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.displacementMap=null;this.displacementScale=
1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial;
THREE.MeshStandardMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=
a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};THREE.MeshPhysicalMaterial=function(a){THREE.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)};THREE.MeshPhysicalMaterial.prototype=Object.create(THREE.MeshStandardMaterial.prototype);THREE.MeshPhysicalMaterial.prototype.constructor=THREE.MeshPhysicalMaterial;
THREE.MeshPhysicalMaterial.prototype.copy=function(a){THREE.MeshStandardMaterial.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};THREE.MultiMaterial=function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var g=c[d].toJSON(a);delete g.metadata;b.materials.push(g)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};
THREE.PointsMaterial=function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;
THREE.PointsMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;
THREE.ShaderMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};
THREE.ShaderMaterial.prototype.toJSON=function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};THREE.RawShaderMaterial=function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial;
THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial;THREE.SpriteMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};
THREE.ShadowMaterial=function(){THREE.ShaderMaterial.call(this,{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:THREE.ShaderChunk.shadow_vert,fragmentShader:THREE.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})};THREE.ShadowMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);
THREE.ShadowMaterial.prototype.constructor=THREE.ShadowMaterial;
THREE.Texture=function(a,b,c,d,e,g,h,k,m,n){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:THREE.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;
this.anisotropy=void 0!==m?m:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==k?k:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==n?n:THREE.LinearEncoding;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void 0;THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping;
THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};
if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,g=c.uuid,h;void 0!==c.toDataURL?h=c:(h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0,c.width,c.height));h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");d[e]={uuid:g,url:h}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(a){if(this.mapping===THREE.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case THREE.RepeatWrapping:a.x-=Math.floor(a.x);break;case THREE.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case THREE.RepeatWrapping:a.y-=Math.floor(a.y);break;case THREE.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===
Math.abs(Math.floor(a.y)%2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(THREE.Texture.prototype,THREE.EventDispatcher.prototype);THREE.TextureIdCount=0;
THREE.DepthTexture=function(a,b,c,d,e,g,h,k,m){THREE.Texture.call(this,null,d,e,g,h,k,THREE.DepthFormat,c,m);this.image={width:a,height:b};this.type=void 0!==c?c:THREE.UnsignedShortType;this.magFilter=void 0!==h?h:THREE.NearestFilter;this.minFilter=void 0!==k?k:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DepthTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DepthTexture.prototype.constructor=THREE.DepthTexture;
THREE.CanvasTexture=function(a,b,c,d,e,g,h,k,m){THREE.Texture.call(this,a,b,c,d,e,g,h,k,m);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;THREE.CubeTexture=function(a,b,c,d,e,g,h,k,m,n){a=void 0!==a?a:[];b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,g,h,k,m,n);this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;Object.defineProperty(THREE.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});THREE.CompressedTexture=function(a,b,c,d,e,g,h,k,m,n,p,q){THREE.Texture.call(this,null,g,h,k,m,n,d,e,p,q);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(a,b,c,d,e,g,h,k,m,n,p,q){THREE.Texture.call(this,null,g,h,k,m,n,d,e,p,q);this.image={data:a,width:b,height:c};this.magFilter=void 0!==m?m:THREE.NearestFilter;this.minFilter=void 0!==n?n:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(a,b,c,d,e,g,h,k,m){function n(){requestAnimationFrame(n);a.readyState>=a.HAVE_CURRENT_DATA&&(p.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,g,h,k,m);this.generateMipmaps=!1;var p=this;n()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Group});
THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};
THREE.Points.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Points,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){function g(a,c){var f=b.distanceSqToPoint(a);if(f<p){a=b.closestPointToPoint(a);a.applyMatrix4(m);var g=d.ray.origin.distanceTo(a);g<d.near||g>d.far||e.push({distance:g,distanceToRay:Math.sqrt(f),point:a.clone(),index:c,face:null,object:h})}}var h=this;var k=this.geometry;var m=this.matrixWorld;var n=
d.params.Points.threshold;null===k.boundingSphere&&k.computeBoundingSphere();c.copy(k.boundingSphere);c.applyMatrix4(m);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(m);b.copy(d.ray).applyMatrix4(a);n/=(this.scale.x+this.scale.y+this.scale.z)/3;var p=n*n;n=new THREE.Vector3;if(k instanceof THREE.BufferGeometry){var q=k.index;k=k.attributes.position.array;if(null!==q){var t=q.array;q=0;for(var f=t.length;q<f;q++){var l=t[q];n.fromArray(k,3*l);g(n,l)}}else for(q=0,t=k.length/3;q<t;q++)n.fromArray(k,
3*q),g(n,q)}else for(n=k.vertices,q=0,t=n.length;q<t;q++)g(n[q],q)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});
THREE.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(a,b);THREE.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()})};
THREE.Line.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Line,raycast:function(){var a=new THREE.Matrix4,b=new THREE.Ray,c=new THREE.Sphere;return function(d,e){var g=d.linePrecision,g=g*g,h=this.geometry;var k=this.matrixWorld;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var m=new THREE.Vector3,n=new THREE.Vector3;k=new THREE.Vector3;
var p=new THREE.Vector3,q=this instanceof THREE.LineSegments?2:1;if(h instanceof THREE.BufferGeometry){var t=h.index,f=h.attributes.position.array;if(null!==t)for(var t=t.array,h=0,l=t.length-1;h<l;h+=q){var r=t[h+1];m.fromArray(f,3*t[h]);n.fromArray(f,3*r);r=b.distanceSqToSegment(m,n,p,k);r>g||(p.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(p),r<d.near||r>d.far||e.push({distance:r,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else for(h=
0,l=f.length/3-1;h<l;h+=q)m.fromArray(f,3*h),n.fromArray(f,3*h+3),r=b.distanceSqToSegment(m,n,p,k),r>g||(p.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(p),r<d.near||r>d.far||e.push({distance:r,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else if(h instanceof THREE.Geometry)for(m=h.vertices,n=m.length,h=0;h<n-1;h+=q)r=b.distanceSqToSegment(m[h],m[h+1],p,k),r>g||(p.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(p),r<d.near||r>d.far||
e.push({distance:r,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.assign(Object.create(THREE.Line.prototype),{constructor:THREE.LineSegments});
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.BufferGeometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=THREE.TrianglesDrawMode;this.updateMorphTargets()};
THREE.Mesh.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Mesh,setDrawMode:function(a){this.drawMode=a},copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.drawMode=a.drawMode;return this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),
this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},getMorphTargetIndexByName:function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0},raycast:function(){function a(a,b,c,d,e,f,g){THREE.Triangle.barycoordFromPoint(a,b,c,d,r);e.multiplyScalar(r.x);f.multiplyScalar(r.y);g.multiplyScalar(r.z);e.add(f).add(g);return e.clone()}function b(a,b,c,
d,e,f,g){var h=a.material;if(null===(h.side===THREE.BackSide?c.intersectTriangle(f,e,d,!0,g):c.intersectTriangle(d,e,f,h.side!==THREE.DoubleSide,g)))return null;v.copy(g);v.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(v);return c<b.near||c>b.far?null:{distance:c,point:v.clone(),object:a}}function c(c,d,e,g,n,p,q,r){h.fromArray(g,3*p);k.fromArray(g,3*q);m.fromArray(g,3*r);if(c=b(c,d,e,h,k,m,w))n&&(t.fromArray(n,2*p),f.fromArray(n,2*q),l.fromArray(n,2*r),c.uv=a(w,h,k,m,t,f,l)),c.face=new THREE.Face3(p,
q,r,THREE.Triangle.normal(h,k,m)),c.faceIndex=p;return c}var d=new THREE.Matrix4,e=new THREE.Ray,g=new THREE.Sphere,h=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3,n=new THREE.Vector3,p=new THREE.Vector3,q=new THREE.Vector3,t=new THREE.Vector2,f=new THREE.Vector2,l=new THREE.Vector2,r=new THREE.Vector3,w=new THREE.Vector3,v=new THREE.Vector3;return function(r,v){var y,F,G;var O=this.geometry;var P=this.material;var L=this.matrixWorld;if(void 0!==P&&(null===O.boundingSphere&&O.computeBoundingSphere(),
g.copy(O.boundingSphere),g.applyMatrix4(L),!1!==r.ray.intersectsSphere(g)&&(d.getInverse(L),e.copy(r.ray).applyMatrix4(d),null===O.boundingBox||!1!==e.intersectsBox(O.boundingBox)))){var I,B;if(O instanceof THREE.BufferGeometry)if(P=O.index,L=O.attributes,O=L.position.array,void 0!==L.uv&&(I=L.uv.array),null!==P){L=P.array;var M=0;for(y=L.length;M<y;M+=3)if(P=L[M],G=L[M+1],F=L[M+2],B=c(this,r,e,O,I,P,G,F))B.faceIndex=Math.floor(M/3),v.push(B)}else for(M=0,y=O.length;M<y;M+=9){if(P=M/3,G=P+1,F=P+2,
B=c(this,r,e,O,I,P,G,F))B.index=P,v.push(B)}else if(O instanceof THREE.Geometry){L=P instanceof THREE.MultiMaterial;M=!0===L?P.materials:null;y=O.vertices;G=O.faces;F=O.faceVertexUvs[0];0<F.length&&(I=F);for(var R=0,S=G.length;R<S;R++){var J=G[R];B=!0===L?M[J.materialIndex]:P;if(void 0!==B){F=y[J.a];var Q=y[J.b];var D=y[J.c];if(!0===B.morphTargets){B=O.morphTargets;var H=this.morphTargetInfluences;h.set(0,0,0);k.set(0,0,0);m.set(0,0,0);for(var C=0,N=B.length;C<N;C++){var ka=H[C];if(0!==ka){var ha=
B[C].vertices;h.addScaledVector(n.subVectors(ha[J.a],F),ka);k.addScaledVector(p.subVectors(ha[J.b],Q),ka);m.addScaledVector(q.subVectors(ha[J.c],D),ka)}}h.add(F);k.add(Q);m.add(D);F=h;Q=k;D=m}if(B=b(this,r,e,F,Q,D,w))I&&(H=I[R],t.copy(H[0]),f.copy(H[1]),l.copy(H[2]),B.uv=a(w,F,Q,D,t,f,l)),B.face=J,B.faceIndex=R,v.push(B)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});THREE.Bone=function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};
THREE.Bone.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Bone,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this}});
THREE.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)):
this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new THREE.Matrix4)};
Object.assign(THREE.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new THREE.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent instanceof THREE.Bone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):
a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new THREE.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new THREE.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(g=this.geometry.bones.length;e<g;++e)d=
this.geometry.bones[e],-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new THREE.Skeleton(a,void 0,c),this.matrixWorld)};
THREE.SkinnedMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.SkinnedMesh,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof THREE.Geometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=
1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry instanceof THREE.BufferGeometry){b=new THREE.Vector4;for(var d=this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)}},updateMatrixWorld:function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):
"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture)).copy(this)}});THREE.LOD=function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
THREE.LOD.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LOD,copy:function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<
d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;e<g;e++)if(c>=
d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});THREE.Sprite=function(a){THREE.Object3D.call(this);this.type="Sprite";this.material=void 0!==a?a:new THREE.SpriteMaterial};
THREE.Sprite.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.Sprite,raycast:function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);b=b.ray.distanceSqToPoint(a);b>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(b),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
THREE.LensFlare.prototype=Object.assign(Object.create(THREE.Object3D.prototype),{constructor:THREE.LensFlare,copy:function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);
c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});
THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;
THREE.Scene.prototype.copy=function(a,b){THREE.Object3D.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";
THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";
THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n";THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n";THREE.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
THREE.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n";THREE.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
THREE.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";THREE.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";THREE.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
THREE.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n";THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";THREE.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
THREE.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
THREE.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";THREE.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
THREE.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
THREE.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";THREE.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
THREE.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";
THREE.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
THREE.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";
THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";
THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";THREE.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n";
THREE.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n";THREE.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
THREE.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
THREE.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n";THREE.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n";
THREE.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n";THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";THREE.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";
THREE.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
THREE.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix3||e instanceof THREE.Matrix4||e instanceof THREE.Texture?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return b}};
THREE.UniformsLib={common:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},
normalScale:{value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new THREE.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},
directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},
skyColor:{},groundColor:{}}}},points:{diffuse:{value:new THREE.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new THREE.Vector4(0,0,1,1)}}};THREE.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";
THREE.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";THREE.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
THREE.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";THREE.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n";
THREE.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";THREE.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";
THREE.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n";
THREE.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n";THREE.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";
THREE.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";
THREE.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";THREE.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n";
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.meshbasic_vert,fragmentShader:THREE.ShaderChunk.meshbasic_frag},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)}}]),vertexShader:THREE.ShaderChunk.meshlambert_vert,
fragmentShader:THREE.ShaderChunk.meshlambert_frag},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},specular:{value:new THREE.Color(1118481)},shininess:{value:30}}]),vertexShader:THREE.ShaderChunk.meshphong_vert,fragmentShader:THREE.ShaderChunk.meshphong_frag},
standard:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,{emissive:{value:new THREE.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,
fragmentShader:THREE.ShaderChunk.meshphysical_frag},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.fog]),vertexShader:THREE.ShaderChunk.points_vert,fragmentShader:THREE.ShaderChunk.points_frag},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:THREE.ShaderChunk.linedashed_vert,fragmentShader:THREE.ShaderChunk.linedashed_frag},depth:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,
THREE.UniformsLib.displacementmap]),vertexShader:THREE.ShaderChunk.depth_vert,fragmentShader:THREE.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:THREE.ShaderChunk.normal_vert,fragmentShader:THREE.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:THREE.ShaderChunk.cube_vert,fragmentShader:THREE.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:THREE.ShaderChunk.equirect_vert,
fragmentShader:THREE.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new THREE.Vector3}},vertexShader:THREE.ShaderChunk.distanceRGBA_vert,fragmentShader:THREE.ShaderChunk.distanceRGBA_frag}};THREE.ShaderLib.physical={uniforms:THREE.UniformsUtils.merge([THREE.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:THREE.ShaderChunk.meshphysical_vert,fragmentShader:THREE.ShaderChunk.meshphysical_frag};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===P&&(a*=d,b*=d,c*=d);T.clearColor(a,b,c,d)}function c(){T.init();T.scissor(X.copy(xb).multiplyScalar(pa));T.viewport(ya.copy(Ma).multiplyScalar(pa));b(ea.r,ea.g,ea.b,fa)}function d(){qa=C=null;ga="";ha=-1;T.reset()}function e(a){a.preventDefault();d();c();V.clear()}function g(a){a=a.target;a.removeEventListener("dispose",g);h(a);V.delete(a)}function h(a){var b=V.get(a).program;a.program=void 0;void 0!==b&&bb.releaseProgram(b)}function k(a,b){return Math.abs(b[0])-
Math.abs(a[0])}function m(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.program&&b.material.program&&a.material.program!==b.material.program?a.material.program.id-b.material.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function n(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function p(a,b,c,d,e){var f;c.transparent?
(d=R,f=++S):(d=B,f=++M);f=d[f];void 0!==f?(f.id=a.id,f.object=a,f.geometry=b,f.material=c,f.z=ta.z,f.group=e):(f={id:a.id,object:a,geometry:b,material:c,z:ta.z,group:e},d.push(f))}function q(a){if(!aa.intersectsSphere(a))return!1;var b=Sa.numPlanes;if(0===b)return!0;var c=H.clippingPlanes,d=a.center;a=-a.radius;var e=0;do if(c[e].distanceToPoint(d)<a)return!1;while(++e!==b);return!0}function t(a,b){var c;if(!1!==a.visible){if(a.layers.test(b.layers))if(a instanceof THREE.Light)I.push(a);else if(a instanceof
THREE.Sprite)(c=!1===a.frustumCulled)||($a.center.set(0,0,0),$a.radius=.7071067811865476,$a.applyMatrix4(a.matrixWorld),c=!0===q($a)),c&&Q.push(a);else if(a instanceof THREE.LensFlare)D.push(a);else if(a instanceof THREE.ImmediateRenderObject)!0===H.sortObjects&&(ta.setFromMatrixPosition(a.matrixWorld),ta.applyProjection(Da)),p(a,null,a.material,ta.z,null);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),(c=
!1===a.frustumCulled)||(c=a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),$a.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===q($a)),c){var d=a.material;if(!0===d.visible)if(!0===H.sortObjects&&(ta.setFromMatrixPosition(a.matrixWorld),ta.applyProjection(Da)),c=u.update(a),d instanceof THREE.MultiMaterial){var e=c.groups,f=d.materials;d=0;for(var g=e.length;d<g;d++){var h=e[d],k=f[h.materialIndex];!0===k.visible&&p(a,c,k,ta.z,h)}}else p(a,c,d,ta.z,null)}c=a.children;d=0;for(g=
c.length;d<g;d++)t(c[d],b)}}function f(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,k=g.geometry,m=void 0===d?g.material:d,g=g.group;h.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,h.matrixWorld);h.normalMatrix.getNormalMatrix(h.modelViewMatrix);if(h instanceof THREE.ImmediateRenderObject){l(m);var n=r(b,c,m,h);ga="";h.render(function(a){H.renderBufferImmediate(a,n,m)})}else H.renderBufferDirect(b,c,k,m,h,g)}}function l(a){a.side!==THREE.DoubleSide?T.enable(K.CULL_FACE):
T.disable(K.CULL_FACE);T.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?T.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):T.setBlending(THREE.NoBlending);T.setDepthFunc(a.depthFunc);T.setDepthTest(a.depthTest);T.setDepthWrite(a.depthWrite);T.setColorWrite(a.colorWrite);T.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function r(a,b,c,d){var e;da=0;var f=V.get(c);Ta&&((Ra||
a!==qa)&&Sa.setState(c.clippingPlanes,c.clipShadows,a,f,a===qa&&c.id===ha),void 0!==f.numClippingPlanes&&f.numClippingPlanes!==Sa.numPlanes&&(c.needsUpdate=!0));void 0===f.program&&(c.needsUpdate=!0);void 0!==f.lightsHash&&f.lightsHash!==ca.hash&&(c.needsUpdate=!0);if(c.needsUpdate){a:{var k=V.get(c);var l=bb.getParameters(c,ca,b,Sa.numPlanes,d);var m=bb.getProgramCode(c,l);var n=k.program;var p=!0;if(void 0===n)c.addEventListener("dispose",g);else if(n.code!==m)h(c);else if(void 0!==l.shaderID)break a;
else p=!1;p&&(l.shaderID?(n=THREE.ShaderLib[l.shaderID],k.__webglShader={name:c.type,uniforms:THREE.UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):k.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=k.__webglShader,n=bb.acquireProgram(c,l,m),k.program=n,c.program=n);l=n.getAttributes();if(c.morphTargets)for(m=c.numSupportedMorphTargets=0;m<H.maxMorphTargets;m++)0<=l["morphTarget"+
m]&&c.numSupportedMorphTargets++;if(c.morphNormals)for(m=c.numSupportedMorphNormals=0;m<H.maxMorphNormals;m++)0<=l["morphNormal"+m]&&c.numSupportedMorphNormals++;l=k.__webglShader.uniforms;(c instanceof THREE.ShaderMaterial||c instanceof THREE.RawShaderMaterial)&&!0!==c.clipping||(k.numClippingPlanes=Sa.numPlanes,l.clippingPlanes=Sa.uniform);c.lights&&(k.lightsHash=ca.hash,l.ambientLightColor.value=ca.ambient,l.directionalLights.value=ca.directional,l.spotLights.value=ca.spot,l.pointLights.value=
ca.point,l.hemisphereLights.value=ca.hemi,l.directionalShadowMap.value=ca.directionalShadowMap,l.directionalShadowMatrix.value=ca.directionalShadowMatrix,l.spotShadowMap.value=ca.spotShadowMap,l.spotShadowMatrix.value=ca.spotShadowMatrix,l.pointShadowMap.value=ca.pointShadowMap,l.pointShadowMatrix.value=ca.pointShadowMatrix);m=k.program.getUniforms();m=THREE.WebGLUniforms.seqWithValue(m.seq,l);k.uniformsList=m;k.dynamicUniforms=THREE.WebGLUniforms.splitDynamic(m,l)}c.needsUpdate=!1}var q=!1;p=n=!1;
k=f.program;m=k.getUniforms();l=f.__webglShader.uniforms;k.id!==C&&(K.useProgram(k.program),C=k.id,p=n=q=!0);c.id!==ha&&(ha=c.id,n=!0);if(q||a!==qa){m.set(K,a,"projectionMatrix");Y.logarithmicDepthBuffer&&m.setValue(K,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));a!==qa&&(qa=a,p=n=!0);if(c instanceof THREE.ShaderMaterial||c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c.envMap)q=m.map.cameraPosition,void 0!==q&&q.setValue(K,ta.setFromMatrixPosition(a.matrixWorld));
(c instanceof THREE.MeshPhongMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshStandardMaterial||c instanceof THREE.ShaderMaterial||c.skinning)&&m.setValue(K,"viewMatrix",a.matrixWorldInverse);m.set(K,H,"toneMappingExposure");m.set(K,H,"toneMappingWhitePoint")}c.skinning&&(m.setOptional(K,d,"bindMatrix"),m.setOptional(K,d,"bindMatrixInverse"),q=d.skeleton)&&(Y.floatVertexTextures&&q.useVertexTexture?(m.set(K,q,"boneTexture"),m.set(K,q,"boneTextureWidth"),
m.set(K,q,"boneTextureHeight")):m.setOptional(K,q,"boneMatrices"));if(n){c.lights&&(n=p,l.ambientLightColor.needsUpdate=n,l.directionalLights.needsUpdate=n,l.pointLights.needsUpdate=n,l.spotLights.needsUpdate=n,l.hemisphereLights.needsUpdate=n);b&&c.fog&&(l.fogColor.value=b.color,b instanceof THREE.Fog?(l.fogNear.value=b.near,l.fogFar.value=b.far):b instanceof THREE.FogExp2&&(l.fogDensity.value=b.density));if(c instanceof THREE.MeshBasicMaterial||c instanceof THREE.MeshLambertMaterial||c instanceof
THREE.MeshPhongMaterial||c instanceof THREE.MeshStandardMaterial||c instanceof THREE.MeshDepthMaterial)l.opacity.value=c.opacity,l.diffuse.value=c.color,c.emissive&&l.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity),l.map.value=c.map,l.specularMap.value=c.specularMap,l.alphaMap.value=c.alphaMap,c.aoMap&&(l.aoMap.value=c.aoMap,l.aoMapIntensity.value=c.aoMapIntensity),c.map?e=c.map:c.specularMap?e=c.specularMap:c.displacementMap?e=c.displacementMap:c.normalMap?e=c.normalMap:c.bumpMap?
e=c.bumpMap:c.roughnessMap?e=c.roughnessMap:c.metalnessMap?e=c.metalnessMap:c.alphaMap?e=c.alphaMap:c.emissiveMap&&(e=c.emissiveMap),void 0!==e&&(e instanceof THREE.WebGLRenderTarget&&(e=e.texture),b=e.offset,e=e.repeat,l.offsetRepeat.value.set(b.x,b.y,e.x,e.y)),l.envMap.value=c.envMap,l.flipEnvMap.value=c.envMap instanceof THREE.CubeTexture?-1:1,l.reflectivity.value=c.reflectivity,l.refractionRatio.value=c.refractionRatio;c instanceof THREE.LineBasicMaterial?(l.diffuse.value=c.color,l.opacity.value=
c.opacity):c instanceof THREE.LineDashedMaterial?(l.diffuse.value=c.color,l.opacity.value=c.opacity,l.dashSize.value=c.dashSize,l.totalSize.value=c.dashSize+c.gapSize,l.scale.value=c.scale):c instanceof THREE.PointsMaterial?(l.diffuse.value=c.color,l.opacity.value=c.opacity,l.size.value=c.size*pa,l.scale.value=.5*y.clientHeight,l.map.value=c.map,null!==c.map&&(e=c.map.offset,c=c.map.repeat,l.offsetRepeat.value.set(e.x,e.y,c.x,c.y))):c instanceof THREE.MeshLambertMaterial?(c.lightMap&&(l.lightMap.value=
c.lightMap,l.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(l.emissiveMap.value=c.emissiveMap)):c instanceof THREE.MeshPhongMaterial?(l.specular.value=c.specular,l.shininess.value=Math.max(c.shininess,1E-4),c.lightMap&&(l.lightMap.value=c.lightMap,l.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(l.emissiveMap.value=c.emissiveMap),c.bumpMap&&(l.bumpMap.value=c.bumpMap,l.bumpScale.value=c.bumpScale),c.normalMap&&(l.normalMap.value=c.normalMap,l.normalScale.value.copy(c.normalScale)),
c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias)):c instanceof THREE.MeshPhysicalMaterial?(l.clearCoat.value=c.clearCoat,l.clearCoatRoughness.value=c.clearCoatRoughness,w(l,c)):c instanceof THREE.MeshStandardMaterial?w(l,c):c instanceof THREE.MeshDepthMaterial?c.displacementMap&&(l.displacementMap.value=c.displacementMap,l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias):
c instanceof THREE.MeshNormalMaterial&&(l.opacity.value=c.opacity);THREE.WebGLUniforms.upload(K,f.uniformsList,l,H)}m.set(K,d,"modelViewMatrix");m.set(K,d,"normalMatrix");m.setValue(K,"modelMatrix",d.matrixWorld);f=f.dynamicUniforms;null!==f&&(THREE.WebGLUniforms.evalDynamic(f,l,d,a),THREE.WebGLUniforms.upload(K,f,l,H));return k}function w(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);
b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function v(a){if(a===
THREE.RepeatWrapping)return K.REPEAT;if(a===THREE.ClampToEdgeWrapping)return K.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return K.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return K.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return K.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return K.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return K.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return K.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return K.LINEAR_MIPMAP_LINEAR;
if(a===THREE.UnsignedByteType)return K.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return K.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return K.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return K.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return K.BYTE;if(a===THREE.ShortType)return K.SHORT;if(a===THREE.UnsignedShortType)return K.UNSIGNED_SHORT;if(a===THREE.IntType)return K.INT;if(a===THREE.UnsignedIntType)return K.UNSIGNED_INT;if(a===THREE.FloatType)return K.FLOAT;
var b=ja.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return b.HALF_FLOAT_OES;if(a===THREE.AlphaFormat)return K.ALPHA;if(a===THREE.RGBFormat)return K.RGB;if(a===THREE.RGBAFormat)return K.RGBA;if(a===THREE.LuminanceFormat)return K.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return K.LUMINANCE_ALPHA;if(a===THREE.DepthFormat)return K.DEPTH_COMPONENT;if(a===THREE.AddEquation)return K.FUNC_ADD;if(a===THREE.SubtractEquation)return K.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return K.FUNC_REVERSE_SUBTRACT;
if(a===THREE.ZeroFactor)return K.ZERO;if(a===THREE.OneFactor)return K.ONE;if(a===THREE.SrcColorFactor)return K.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return K.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return K.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return K.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return K.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return K.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return K.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return K.ONE_MINUS_DST_COLOR;
if(a===THREE.SrcAlphaSaturateFactor)return K.SRC_ALPHA_SATURATE;b=ja.get("WEBGL_compressed_texture_s3tc");if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=ja.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
if(a===THREE.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===THREE.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===THREE.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=ja.get("WEBGL_compressed_texture_etc1");if(null!==b&&a===THREE.RGB_ETC1_Format)return b.COMPRESSED_RGB_ETC1_WEBGL;b=ja.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return b.MIN_EXT;if(a===THREE.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",
THREE.REVISION);a=a||{};var y=void 0!==a.canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),F=void 0!==a.context?a.context:null,z=void 0!==a.alpha?a.alpha:!1,E=void 0!==a.depth?a.depth:!0,G=void 0!==a.stencil?a.stencil:!0,O=void 0!==a.antialias?a.antialias:!1,P=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,L=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,I=[],B=[],M=-1,R=[],S=-1,J=new Float32Array(8),Q=[],D=[];this.domElement=y;this.context=null;
this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=THREE.LinearToneMapping;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var H=this,C=null,N=null,ka=null,ha=-1,ga="",qa=null,X=new THREE.Vector4,Aa=null,ya=new THREE.Vector4,da=0,ea=new THREE.Color(0),
fa=0,za=y.width,Ha=y.height,pa=1,xb=new THREE.Vector4(0,0,za,Ha),fb=!1,Ma=new THREE.Vector4(0,0,za,Ha),aa=new THREE.Frustum,Sa=new THREE.WebGLClipping,Ta=!1,Ra=!1,$a=new THREE.Sphere,Da=new THREE.Matrix4,ta=new THREE.Vector3,ca={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ab={calls:0,vertices:0,faces:0,points:0};this.info={render:ab,memory:{geometries:0,
textures:0},programs:null};try{z={alpha:z,depth:E,stencil:G,antialias:O,premultipliedAlpha:P,preserveDrawingBuffer:L};var K=F||y.getContext("webgl",z)||y.getContext("experimental-webgl",z);if(null===K){if(null!==y.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===K.getShaderPrecisionFormat&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});y.addEventListener("webglcontextlost",e,!1)}catch(na){console.error("THREE.WebGLRenderer: "+
na)}var ja=new THREE.WebGLExtensions(K);ja.get("WEBGL_depth_texture");ja.get("OES_texture_float");ja.get("OES_texture_float_linear");ja.get("OES_texture_half_float");ja.get("OES_texture_half_float_linear");ja.get("OES_standard_derivatives");ja.get("ANGLE_instanced_arrays");ja.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var Y=new THREE.WebGLCapabilities(K,ja,a),T=new THREE.WebGLState(K,ja,v),V=new THREE.WebGLProperties,ob=new THREE.WebGLTextures(K,ja,T,V,Y,v,this.info),
u=new THREE.WebGLObjects(K,V,this.info),bb=new THREE.WebGLPrograms(this,Y),sa=new THREE.WebGLLights;this.info.programs=bb.programs;var qb=new THREE.WebGLBufferRenderer(K,ja,ab),Qb=new THREE.WebGLIndexedBufferRenderer(K,ja,ab),yb=new THREE.OrthographicCamera(-1,1,1,-1,0,1),lb=new THREE.PerspectiveCamera,Eb=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1}));a=THREE.ShaderLib.cube;var rb=new THREE.Mesh(new THREE.BoxBufferGeometry(5,5,5),
new THREE.ShaderMaterial({uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:THREE.BackSide,depthTest:!1,depthWrite:!1,fog:!1}));c();this.context=K;this.capabilities=Y;this.extensions=ja;this.properties=V;this.state=T;var Fb=new THREE.WebGLShadowMap(this,ca,u,Y);this.shadowMap=Fb;var bc=new THREE.SpritePlugin(this,Q),Xa=new THREE.LensFlarePlugin(this,D);this.getContext=function(){return K};this.getContextAttributes=function(){return K.getContextAttributes()};this.forceContextLoss=
function(){ja.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){return Y.getMaxAnisotropy()};this.getPrecision=function(){return Y.precision};this.getPixelRatio=function(){return pa};this.setPixelRatio=function(a){void 0!==a&&(pa=a,this.setSize(Ma.z,Ma.w,!1))};this.getSize=function(){return{width:za,height:Ha}};this.setSize=function(a,b,c){za=a;Ha=b;y.width=a*pa;y.height=b*pa;!1!==c&&(y.style.width=a+"px",y.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=function(a,
b,c,d){T.viewport(Ma.set(a,b,c,d))};this.setScissor=function(a,b,c,d){T.scissor(xb.set(a,b,c,d))};this.setScissorTest=function(a){T.setScissorTest(fb=a)};this.getClearColor=function(){return ea};this.setClearColor=function(a,c){ea.set(a);fa=void 0!==c?c:1;b(ea.r,ea.g,ea.b,fa)};this.getClearAlpha=function(){return fa};this.setClearAlpha=function(a){fa=a;b(ea.r,ea.g,ea.b,fa)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=K.COLOR_BUFFER_BIT;if(void 0===b||b)d|=K.DEPTH_BUFFER_BIT;if(void 0===
c||c)d|=K.STENCIL_BUFFER_BIT;K.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){R=[];S=-1;B=[];M=-1;y.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){T.initAttributes();var d=V.get(a);a.hasPositions&&!d.position&&(d.position=K.createBuffer());
a.hasNormals&&!d.normal&&(d.normal=K.createBuffer());a.hasUvs&&!d.uv&&(d.uv=K.createBuffer());a.hasColors&&!d.color&&(d.color=K.createBuffer());b=b.getAttributes();a.hasPositions&&(K.bindBuffer(K.ARRAY_BUFFER,d.position),K.bufferData(K.ARRAY_BUFFER,a.positionArray,K.DYNAMIC_DRAW),T.enableAttribute(b.position),K.vertexAttribPointer(b.position,3,K.FLOAT,!1,0,0));if(a.hasNormals){K.bindBuffer(K.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&"MeshStandardMaterial"!==c.type&&"MeshPhysicalMaterial"!==
c.type&&c.shading===THREE.FlatShading)for(var e=0,f=3*a.count;e<f;e+=9){var g=a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,l=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=l;g[e+3]=h;g[e+4]=k;g[e+5]=l;g[e+6]=h;g[e+7]=k;g[e+8]=l}K.bufferData(K.ARRAY_BUFFER,a.normalArray,K.DYNAMIC_DRAW);T.enableAttribute(b.normal);K.vertexAttribPointer(b.normal,3,K.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(K.bindBuffer(K.ARRAY_BUFFER,d.uv),K.bufferData(K.ARRAY_BUFFER,a.uvArray,K.DYNAMIC_DRAW),T.enableAttribute(b.uv),
K.vertexAttribPointer(b.uv,2,K.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(K.bindBuffer(K.ARRAY_BUFFER,d.color),K.bufferData(K.ARRAY_BUFFER,a.colorArray,K.DYNAMIC_DRAW),T.enableAttribute(b.color),K.vertexAttribPointer(b.color,3,K.FLOAT,!1,0,0));T.disableUnusedAttributes();K.drawArrays(K.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){var g;l(d);var h=r(a,b,d,e);var m=!1;a=c.id+"_"+h.id+"_"+d.wireframe;a!==ga&&(ga=a,m=!0);b=e.morphTargetInfluences;if(void 0!==
b){a=[];var n=0;for(m=b.length;n<m;n++){var p=b[n];a.push([p,n])}a.sort(k);8<a.length&&(a.length=8);var q=c.morphAttributes;n=0;for(m=a.length;n<m;n++)p=a[n],J[n]=p[0],0!==p[0]?(b=p[1],!0===d.morphTargets&&q.position&&c.addAttribute("morphTarget"+n,q.position[b]),!0===d.morphNormals&&q.normal&&c.addAttribute("morphNormal"+n,q.normal[b])):(!0===d.morphTargets&&c.removeAttribute("morphTarget"+n),!0===d.morphNormals&&c.removeAttribute("morphNormal"+n));h.getUniforms().setValue(K,"morphTargetInfluences",
J);m=!0}b=c.index;n=c.attributes.position;!0===d.wireframe&&(b=u.getWireframeAttribute(c));null!==b?(a=Qb,a.setIndex(b)):a=qb;if(m){m=void 0;if(c instanceof THREE.InstancedBufferGeometry&&(g=ja.get("ANGLE_instanced_arrays"),null===g))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===m&&(m=0);T.initAttributes();p=c.attributes;h=h.getAttributes();q=d.defaultAttributeValues;for(D in h){var t=
h[D];if(0<=t){var y=p[D];if(void 0!==y){var v=K.FLOAT;var w=y.array,H=y.normalized;w instanceof Float32Array?v=K.FLOAT:w instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):w instanceof Uint16Array?v=K.UNSIGNED_SHORT:w instanceof Int16Array?v=K.SHORT:w instanceof Uint32Array?v=K.UNSIGNED_INT:w instanceof Int32Array?v=K.INT:w instanceof Int8Array?v=K.BYTE:w instanceof Uint8Array&&(v=K.UNSIGNED_BYTE);var w=y.itemSize,z=u.getAttributeBuffer(y);if(y instanceof THREE.InterleavedBufferAttribute){var F=
y.data,C=F.stride;y=y.offset;F instanceof THREE.InstancedInterleavedBuffer?(T.enableAttributeAndDivisor(t,F.meshPerAttribute,g),void 0===c.maxInstancedCount&&(c.maxInstancedCount=F.meshPerAttribute*F.count)):T.enableAttribute(t);K.bindBuffer(K.ARRAY_BUFFER,z);K.vertexAttribPointer(t,w,v,H,C*F.array.BYTES_PER_ELEMENT,(m*C+y)*F.array.BYTES_PER_ELEMENT)}else y instanceof THREE.InstancedBufferAttribute?(T.enableAttributeAndDivisor(t,y.meshPerAttribute,g),void 0===c.maxInstancedCount&&(c.maxInstancedCount=
y.meshPerAttribute*y.count)):T.enableAttribute(t),K.bindBuffer(K.ARRAY_BUFFER,z),K.vertexAttribPointer(t,w,v,H,0,m*w*y.array.BYTES_PER_ELEMENT)}else if(void 0!==q&&(v=q[D],void 0!==v))switch(v.length){case 2:K.vertexAttrib2fv(t,v);break;case 3:K.vertexAttrib3fv(t,v);break;case 4:K.vertexAttrib4fv(t,v);break;default:K.vertexAttrib1fv(t,v)}}}T.disableUnusedAttributes()}null!==b&&K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,u.getAttributeBuffer(b))}g=Infinity;null!==b?g=b.count:void 0!==n&&(g=n.count);var D=
c.drawRange.start;b=c.drawRange.count;n=null!==f?f.start:0;m=null!==f?f.count:Infinity;f=Math.max(0,D,n);g=Math.min(0+g,D+b,n+m)-1;g=Math.max(0,g-f+1);if(e instanceof THREE.Mesh)if(!0===d.wireframe)T.setLineWidth(d.wireframeLinewidth*(null===N?pa:1)),a.setMode(K.LINES);else switch(e.drawMode){case THREE.TrianglesDrawMode:a.setMode(K.TRIANGLES);break;case THREE.TriangleStripDrawMode:a.setMode(K.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:a.setMode(K.TRIANGLE_FAN)}else e instanceof THREE.Line?
(d=d.linewidth,void 0===d&&(d=1),T.setLineWidth(d*(null===N?pa:1)),e instanceof THREE.LineSegments?a.setMode(K.LINES):a.setMode(K.LINE_STRIP)):e instanceof THREE.Points&&a.setMode(K.POINTS);c instanceof THREE.InstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,f,g):a.render(f,g)};this.render=function(a,c,d,e){if(!1===c instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var g=a.fog;ga="";ha=-1;qa=null;!0===a.autoUpdate&&
a.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);Da.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);aa.setFromMatrix(Da);I.length=0;S=M=-1;Q.length=0;D.length=0;Ra=this.localClippingEnabled;Ta=Sa.init(this.clippingPlanes,Ra,c);t(a,c);B.length=M+1;R.length=S+1;!0===H.sortObjects&&(B.sort(m),R.sort(n));Ta&&Sa.beginShadows();for(var h=I,k=0,l=0,p=h.length;l<p;l++){var q=h[l];q.castShadow&&(ca.shadows[k++]=q)}ca.shadows.length=k;Fb.render(a,
c);for(var h=I,r=q=0,y=0,v,w,z,N,F=c.matrixWorldInverse,C=0,J=0,G=0,ka=0,k=0,l=h.length;k<l;k++)if(p=h[k],v=p.color,w=p.intensity,z=p.distance,N=p.shadow&&p.shadow.map?p.shadow.map.texture:null,p instanceof THREE.AmbientLight)q+=v.r*w,r+=v.g*w,y+=v.b*w;else if(p instanceof THREE.DirectionalLight){var E=sa.get(p);E.color.copy(p.color).multiplyScalar(p.intensity);E.direction.setFromMatrixPosition(p.matrixWorld);ta.setFromMatrixPosition(p.target.matrixWorld);E.direction.sub(ta);E.direction.transformDirection(F);
if(E.shadow=p.castShadow)E.shadowBias=p.shadow.bias,E.shadowRadius=p.shadow.radius,E.shadowMapSize=p.shadow.mapSize;ca.directionalShadowMap[C]=N;ca.directionalShadowMatrix[C]=p.shadow.matrix;ca.directional[C++]=E}else if(p instanceof THREE.SpotLight){E=sa.get(p);E.position.setFromMatrixPosition(p.matrixWorld);E.position.applyMatrix4(F);E.color.copy(v).multiplyScalar(w);E.distance=z;E.direction.setFromMatrixPosition(p.matrixWorld);ta.setFromMatrixPosition(p.target.matrixWorld);E.direction.sub(ta);
E.direction.transformDirection(F);E.coneCos=Math.cos(p.angle);E.penumbraCos=Math.cos(p.angle*(1-p.penumbra));E.decay=0===p.distance?0:p.decay;if(E.shadow=p.castShadow)E.shadowBias=p.shadow.bias,E.shadowRadius=p.shadow.radius,E.shadowMapSize=p.shadow.mapSize;ca.spotShadowMap[G]=N;ca.spotShadowMatrix[G]=p.shadow.matrix;ca.spot[G++]=E}else if(p instanceof THREE.PointLight){E=sa.get(p);E.position.setFromMatrixPosition(p.matrixWorld);E.position.applyMatrix4(F);E.color.copy(p.color).multiplyScalar(p.intensity);
E.distance=p.distance;E.decay=0===p.distance?0:p.decay;if(E.shadow=p.castShadow)E.shadowBias=p.shadow.bias,E.shadowRadius=p.shadow.radius,E.shadowMapSize=p.shadow.mapSize;ca.pointShadowMap[J]=N;void 0===ca.pointShadowMatrix[J]&&(ca.pointShadowMatrix[J]=new THREE.Matrix4);ta.setFromMatrixPosition(p.matrixWorld).negate();ca.pointShadowMatrix[J].identity().setPosition(ta);ca.point[J++]=E}else p instanceof THREE.HemisphereLight&&(E=sa.get(p),E.direction.setFromMatrixPosition(p.matrixWorld),E.direction.transformDirection(F),
E.direction.normalize(),E.skyColor.copy(p.color).multiplyScalar(w),E.groundColor.copy(p.groundColor).multiplyScalar(w),ca.hemi[ka++]=E);ca.ambient[0]=q;ca.ambient[1]=r;ca.ambient[2]=y;ca.directional.length=C;ca.spot.length=G;ca.point.length=J;ca.hemi.length=ka;ca.hash=C+","+J+","+G+","+ka+","+ca.shadows.length;Ta&&Sa.endShadows();ab.calls=0;ab.vertices=0;ab.faces=0;ab.points=0;void 0===d&&(d=null);this.setRenderTarget(d);h=a.background;null===h?b(ea.r,ea.g,ea.b,fa):h instanceof THREE.Color&&b(h.r,
h.g,h.b,1);(this.autoClear||e)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);h instanceof THREE.CubeTexture?(lb.projectionMatrix.copy(c.projectionMatrix),lb.matrixWorld.extractRotation(c.matrixWorld),lb.matrixWorldInverse.getInverse(lb.matrixWorld),rb.material.uniforms.tCube.value=h,rb.modelViewMatrix.multiplyMatrices(lb.matrixWorldInverse,rb.matrixWorld),u.update(rb),H.renderBufferDirect(lb,null,rb.geometry,rb.material,rb,null)):h instanceof THREE.Texture&&(Eb.material.map=
h,u.update(Eb),H.renderBufferDirect(yb,null,Eb.geometry,Eb.material,Eb,null));a.overrideMaterial?(e=a.overrideMaterial,f(B,c,g,e),f(R,c,g,e)):(T.setBlending(THREE.NoBlending),f(B,c,g),f(R,c,g));bc.render(a,c);Xa.render(a,c,ya);d&&ob.updateRenderTargetMipmap(d);T.setDepthTest(!0);T.setDepthWrite(!0);T.setColorWrite(!0)}};this.setFaceCulling=function(a,b){T.setCullFace(a);T.setFlipSided(b===THREE.FrontFaceDirectionCW)};this.allocTextureUnit=function(){var a=da;a>=Y.maxTextures&&console.warn("WebGLRenderer: trying to use "+
a+" texture units while this GPU supports only "+Y.maxTextures);da+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b instanceof THREE.WebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);ob.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),
a=!0);ob.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b instanceof THREE.WebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b instanceof THREE.CubeTexture||Array.isArray(b.image)&&6===b.image.length?ob.setTextureCube(b,c):ob.setTextureCubeDynamic(b,c)}}();this.getCurrentRenderTarget=function(){return N};this.setRenderTarget=function(a){(N=
a)&&void 0===V.get(a).__webglFramebuffer&&ob.setupRenderTarget(a);var b=a instanceof THREE.WebGLRenderTargetCube,c;a?(c=V.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,X.copy(a.scissor),Aa=a.scissorTest,ya.copy(a.viewport)):(c=null,X.copy(xb).multiplyScalar(pa),Aa=fb,ya.copy(Ma).multiplyScalar(pa));ka!==c&&(K.bindFramebuffer(K.FRAMEBUFFER,c),ka=c);T.scissor(X);T.setScissorTest(Aa);T.viewport(ya);b&&(b=V.get(a.texture),K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,
K.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(!1===a instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var g=V.get(a).__webglFramebuffer;if(g){var h=!1;g!==ka&&(K.bindFramebuffer(K.FRAMEBUFFER,g),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&v(k.format)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT)?
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):k.type===THREE.UnsignedByteType||v(k.type)===K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&ja.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&ja.get("EXT_color_buffer_half_float")?K.checkFramebufferStatus(K.FRAMEBUFFER)===K.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&K.readPixels(b,c,d,e,v(k.format),v(k.type),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&K.bindFramebuffer(K.FRAMEBUFFER,ka)}}}}};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;this.scissor=new THREE.Vector4(0,0,a,b);this.scissorTest=!1;this.viewport=new THREE.Vector4(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:
!0;this.depthTexture=null};
Object.assign(THREE.WebGLRenderTarget.prototype,THREE.EventDispatcher.prototype,{setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;
return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,g){a.drawArrays(d,b,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(e){var g=b.get("ANGLE_instanced_arrays");if(null===g)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var h=e.attributes.position,h=h instanceof THREE.InterleavedBufferAttribute?h.data.count:
h.count;g.drawArraysInstancedANGLE(d,0,h,e.maxInstancedCount);c.calls++;c.vertices+=h*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*h/3)}}};
THREE.WebGLClipping=function(){function a(){n.value!==d&&(n.value=d,n.needsUpdate=0<e);c.numPlanes=e}function b(a,b,d,e){var f=null!==a?a.length:0,g=null;if(0!==f){g=n.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;m.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)k.copy(a[e]).applyMatrix4(b,m),k.normal.toArray(g,d),g[d+3]=k.constant}n.value=g;n.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,g=!1,h=!1,k=new THREE.Plane,m=new THREE.Matrix3,
n={value:null,needsUpdate:!1};this.uniform=n;this.numPlanes=0;this.init=function(a,c,h){var f=0!==a.length||c||0!==e||g;g=c;d=b(a,h,0);e=a.length;return f};this.beginShadows=function(){h=!0;b(null)};this.endShadows=function(){h=!1;a()};this.setState=function(c,k,m,f,l){if(!g||null===c||0===c.length||h&&!k)h?b(null):a();else{k=h?0:e;var p=4*k,q=f.clippingState||null;n.value=q;q=b(c,m,p,l);for(c=0;c!==p;++c)q[c]=d[c];f.clippingState=q;this.numPlanes+=k}}};
THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(b,k){a.drawElements(d,k,e,b*g);c.calls++;c.vertices+=k;d===a.TRIANGLES&&(c.faces+=k/3)};this.renderInstances=function(h,k,m){var n=b.get("ANGLE_instanced_arrays");null===n?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(n.drawElementsInstancedANGLE(d,m,e,k*g,h.maxInstancedCount),c.calls++,c.vertices+=m*h.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=h.maxInstancedCount*m/3))}};
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=
a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}};
THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}var e;this.getMaxAnisotropy=function(){if(void 0!==e)return e;var c=b.get("EXT_texture_filter_anisotropic");
return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0};this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=
a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",
c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
THREE.WebGLGeometries=function(a,b,c){function d(a){var h=a.target;a=g[h.id];null!==a.index&&e(a.index);var m=a.attributes;for(n in m)e(m[n]);h.removeEventListener("dispose",d);delete g[h.id];var n=b.get(h);n.wireframe&&e(n.wireframe);b.delete(h);h=b.get(a);h.wireframe&&e(h.wireframe);b.delete(a);c.memory.geometries--}function e(c){var d=c instanceof THREE.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof THREE.InterleavedBufferAttribute?
b.delete(c.data):b.delete(c))}var g={};this.get=function(a){var b=a.geometry;if(void 0!==g[b.id])return g[b.id];b.addEventListener("dispose",d);var e;b instanceof THREE.BufferGeometry?e=b:b instanceof THREE.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new THREE.BufferGeometry).setFromObject(a)),e=b._bufferGeometry);g[b.id]=e;c.memory.geometries++;return e}};
THREE.WebGLLights=function(){var a={};this.get=function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c={direction:new THREE.Vector3,color:new THREE.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "SpotLight":c={position:new THREE.Vector3,direction:new THREE.Vector3,color:new THREE.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "PointLight":c=
{position:new THREE.Vector3,color:new THREE.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case "HemisphereLight":c={direction:new THREE.Vector3,skyColor:new THREE.Color,groundColor:new THREE.Color}}return a[b.id]=c}};
THREE.WebGLObjects=function(a,b,c){function d(c,d){c=c instanceof THREE.InterleavedBufferAttribute?c.data:c;var e=b.get(c);void 0===e.__webglBuffer?(e.__webglBuffer=a.createBuffer(),a.bindBuffer(d,e.__webglBuffer),a.bufferData(d,c.array,c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),e.version=c.version):e.version!==c.version&&(a.bindBuffer(d,e.__webglBuffer),!1===c.dynamic||-1===c.updateRange.count?a.bufferSubData(d,0,c.array):0===c.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(d,c.updateRange.offset*c.array.BYTES_PER_ELEMENT,c.array.subarray(c.updateRange.offset,c.updateRange.offset+c.updateRange.count)),c.updateRange.count=0),e.version=c.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var g=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var g=b.get(c);if(void 0!==g.wireframe)return g.wireframe;var h=[],n=c.index,p=c.attributes;c=p.position;if(null!==n)for(var p={},n=n.array,q=0,t=n.length;q<t;q+=3){var f=n[q+0];var l=n[q+1];var r=n[q+2];e(p,f,l)&&h.push(f,l);e(p,l,r)&&h.push(l,r);e(p,r,f)&&h.push(r,f)}else for(n=p.position.array,q=0,t=n.length/3-1;q<t;q+=3)f=q+0,l=q+1,r=q+2,h.push(f,l,l,r,r,f);h=new THREE.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(h),1);d(h,a.ELEMENT_ARRAY_BUFFER);return g.wireframe=
h};this.update=function(b){var c=g.get(b);b.geometry instanceof THREE.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var h in e)d(e[h],a.ARRAY_BUFFER);b=c.morphAttributes;for(h in b)for(var e=b[h],p=0,q=e.length;p<q;p++)d(e[p],a.ARRAY_BUFFER);return c}};
THREE.WebGLProgram=function(){function a(a){switch(a){case THREE.LinearEncoding:return["Linear","( value )"];case THREE.sRGBEncoding:return["sRGB","( value )"];case THREE.RGBEEncoding:return["RGBE","( value )"];case THREE.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case THREE.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case THREE.RGBDEncoding:return["RGBD","( value, 256.0 )"];case THREE.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+
a);}}function b(b,c){c=a(c);return"vec4 "+b+"( vec4 value ) { return "+c[0]+"ToLinear"+c[1]+"; }"}function c(b,c){c=a(c);return"vec4 "+b+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function d(a,b){switch(b){case THREE.LinearToneMapping:b="Linear";break;case THREE.ReinhardToneMapping:b="Reinhard";break;case THREE.Uncharted2ToneMapping:b="Uncharted2";break;case THREE.CineonToneMapping:b="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+b);}return"vec3 "+a+"( vec3 color ) { return "+
b+"ToneMapping( color ); }"}function e(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(h).join("\n")}
function g(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function h(a){return""!==a}function k(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function m(a){return a.replace(/#include +<([\w\d.]+)>/g,function(a,b){a=THREE.ShaderChunk[b];if(void 0===a)throw Error("Can not resolve #include <"+b+">");return m(a)})}
function n(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,b,c,d){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=d.replace(/\[ i \]/g,"[ "+b+" ]");return a})}var p=0;return function(a,t,f,l){var q=a.context,w=f.extensions,v=f.defines,y=f.__webglShader.vertexShader,F=f.__webglShader.fragmentShader,z="SHADOWMAP_TYPE_BASIC";l.shadowMapType===THREE.PCFShadowMap?z="SHADOWMAP_TYPE_PCF":l.shadowMapType===THREE.PCFSoftShadowMap&&(z="SHADOWMAP_TYPE_PCF_SOFT");
var E="ENVMAP_TYPE_CUBE",G="ENVMAP_MODE_REFLECTION",O="ENVMAP_BLENDING_MULTIPLY";if(l.envMap){switch(f.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:E="ENVMAP_TYPE_CUBE";break;case THREE.CubeUVReflectionMapping:case THREE.CubeUVRefractionMapping:E="ENVMAP_TYPE_CUBE_UV";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:E="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:E="ENVMAP_TYPE_SPHERE"}switch(f.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:G=
"ENVMAP_MODE_REFRACTION"}switch(f.combine){case THREE.MultiplyOperation:O="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:O="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:O="ENVMAP_BLENDING_ADD"}}var P=0<a.gammaFactor?a.gammaFactor:1,w=e(w,l,a.extensions),L=g(v),I=q.createProgram();f instanceof THREE.RawShaderMaterial?(v=[L].filter(h).join("\n"),z=[L].filter(h).join("\n")):(v=["precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+f.__webglShader.name,
L,l.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+P,"#define MAX_BONES "+l.maxBones,l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+G:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":
"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&!1===l.flatShading?"#define USE_MORPHNORMALS":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+
l.numClippingPlanes,l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+z:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;",
"\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(h).join("\n"),z=[w,"precision "+l.precision+" float;","precision "+l.precision+" int;","#define SHADER_NAME "+f.__webglShader.name,L,l.alphaTest?"#define ALPHATEST "+l.alphaTest:"","#define GAMMA_FACTOR "+P,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp?"#define FOG_EXP2":"",l.map?"#define USE_MAP":
"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+E:"",l.envMap?"#define "+G:"",l.envMap?"#define "+O:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.vertexColors?"#define USE_COLOR":
"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+l.numClippingPlanes,l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+z:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":
"",l.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",l.toneMapping!==THREE.NoToneMapping?"#define TONE_MAPPING":"",l.toneMapping!==THREE.NoToneMapping?THREE.ShaderChunk.tonemapping_pars_fragment:"",l.toneMapping!==THREE.NoToneMapping?d("toneMapping",l.toneMapping):"",l.outputEncoding||l.mapEncoding||l.envMapEncoding||l.emissiveMapEncoding?THREE.ShaderChunk.encodings_pars_fragment:"",l.mapEncoding?b("mapTexelToLinear",
l.mapEncoding):"",l.envMapEncoding?b("envMapTexelToLinear",l.envMapEncoding):"",l.emissiveMapEncoding?b("emissiveMapTexelToLinear",l.emissiveMapEncoding):"",l.outputEncoding?c("linearToOutputTexel",l.outputEncoding):"",l.depthPacking?"#define DEPTH_PACKING "+f.depthPacking:"","\n"].filter(h).join("\n"));y=m(y,l);y=k(y,l);F=m(F,l);F=k(F,l);!1===f instanceof THREE.ShaderMaterial&&(y=n(y),F=n(F));F=z+F;y=THREE.WebGLShader(q,q.VERTEX_SHADER,v+y);F=THREE.WebGLShader(q,q.FRAGMENT_SHADER,F);q.attachShader(I,
y);q.attachShader(I,F);void 0!==f.index0AttributeName?q.bindAttribLocation(I,0,f.index0AttributeName):!0===l.morphTargets&&q.bindAttribLocation(I,0,"position");q.linkProgram(I);l=q.getProgramInfoLog(I);E=q.getShaderInfoLog(y);G=q.getShaderInfoLog(F);P=O=!0;if(!1===q.getProgramParameter(I,q.LINK_STATUS))O=!1,console.error("THREE.WebGLProgram: shader error: ",q.getError(),"gl.VALIDATE_STATUS",q.getProgramParameter(I,q.VALIDATE_STATUS),"gl.getProgramInfoLog",l,E,G);else if(""!==l)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",
l);else if(""===E||""===G)P=!1;P&&(this.diagnostics={runnable:O,material:f,programLog:l,vertexShader:{log:E,prefix:v},fragmentShader:{log:G,prefix:z}});q.deleteShader(y);q.deleteShader(F);var B;this.getUniforms=function(){void 0===B&&(B=new THREE.WebGLUniforms(q,I,a));return B};var M;this.getAttributes=function(){if(void 0===M){for(var a={},b=q.getProgramParameter(I,q.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=q.getActiveAttrib(I,c).name;a[d]=q.getAttribLocation(I,d)}M=a}return M};this.destroy=function(){q.deleteProgram(I);
this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=p++;this.code=t;this.usedTimes=1;this.program=I;this.vertexShader=y;this.fragmentShader=F;return this}}();
THREE.WebGLPrograms=function(a,b){function c(a,b){var c;a?a instanceof THREE.Texture?c=a.encoding:a instanceof THREE.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding):c=THREE.LinearEncoding;c===THREE.LinearEncoding&&b&&(c=THREE.GammaEncoding);return c}var d=[],e={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",
MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(d,g,m,n,p){var h=e[d.type],k;b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture?k=1024:(k=Math.floor((b.maxVertexUniforms-20)/4),void 0!==p&&p instanceof THREE.SkinnedMesh&&(k=Math.min(p.skeleton.bones.length,k),k<p.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+p.skeleton.bones.length+", this GPU supports just "+k+" (try OpenGL instead of ANGLE)")));var f=a.getPrecision();null!==d.precision&&(f=b.getMaxPrecision(d.precision),f!==
d.precision&&console.warn("THREE.WebGLProgram.getParameters:",d.precision,"not supported, using",f,"instead."));var l=a.getCurrentRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:b.vertexTextures,outputEncoding:c(l?l.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(d.envMap.mapping===THREE.CubeUVReflectionMapping||d.envMap.mapping===
THREE.CubeUVRefractionMapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap,emissiveMap:!!d.emissiveMap,emissiveMapEncoding:c(d.emissiveMap,a.gammaInput),bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,displacementMap:!!d.displacementMap,roughnessMap:!!d.roughnessMap,metalnessMap:!!d.metalnessMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,combine:d.combine,vertexColors:d.vertexColors,fog:!!m,useFog:d.fog,fogExp:m instanceof THREE.FogExp2,flatShading:d.shading===THREE.FlatShading,sizeAttenuation:d.sizeAttenuation,
logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:d.skinning,maxBones:k,useVertexTexture:b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture,morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:g.directional.length,numPointLights:g.point.length,numSpotLights:g.spot.length,numHemiLights:g.hemi.length,numClippingPlanes:n,shadowMapEnabled:a.shadowMap.enabled&&p.receiveShadow&&0<g.shadows.length,shadowMapType:a.shadowMap.type,
toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:d.premultipliedAlpha,alphaTest:d.alphaTest,doubleSided:d.side===THREE.DoubleSide,flipSided:d.side===THREE.BackSide,depthPacking:void 0!==d.depthPacking?d.depthPacking:!1}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(d=0;d<g.length;d++)c.push(b[g[d]]);
return c.join()};this.acquireProgram=function(b,c,e){for(var g,h=0,k=d.length;h<k;h++){var m=d[h];if(m.code===e){g=m;++g.usedTimes;break}}void 0===g&&(g=new THREE.WebGLProgram(a,e,b,c),d.push(g));return g};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=d.indexOf(a);d[b]=d[d.length-1];d.pop();a.destroy()}};this.programs=d};
THREE.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
THREE.WebGLShader=function(){function a(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+": "+a[b];return a.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
THREE.WebGLShadowMap=function(a,b,c,d){function e(b,c,d,e){var f=b.geometry;var g=w;var h=b.customDepthMaterial;d&&(g=v,h=b.customDistanceMaterial);h?g=h:(h=!1,c.morphTargets&&(f instanceof THREE.BufferGeometry?h=f.morphAttributes&&f.morphAttributes.position&&0<f.morphAttributes.position.length:f instanceof THREE.Geometry&&(h=f.morphTargets&&0<f.morphTargets.length)),b=b instanceof THREE.SkinnedMesh&&c.skinning,f=0,h&&(f|=1),b&&(f|=2),g=g[f]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&
(h=g.uuid,b=c.uuid,f=y[h],void 0===f&&(f={},y[h]=f),h=f[b],void 0===h&&(h=g.clone(),f[b]=h),g=h);g.visible=c.visible;g.wireframe=c.wireframe;b=c.side;B.renderSingleSided&&b==THREE.DoubleSide&&(b=THREE.FrontSide);B.renderReverseSided&&(b===THREE.FrontSide?b=THREE.BackSide:b===THREE.BackSide&&(b=THREE.FrontSide));g.side=b;g.clipShadows=c.clipShadows;g.clippingPlanes=c.clippingPlanes;g.wireframeLinewidth=c.wireframeLinewidth;g.linewidth=c.linewidth;d&&void 0!==g.uniforms.lightPos&&g.uniforms.lightPos.value.copy(e);
return g}function g(a,b,c){if(!1!==a.visible){a.layers.test(b.layers)&&(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===m.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),r.push(a));a=a.children;for(var d=0,e=a.length;d<e;d++)g(a[d],b,c)}}var h=a.context,k=a.state,m=new THREE.Frustum,n=new THREE.Matrix4,p=b.shadows,q=new THREE.Vector2,t=new THREE.Vector2(d.maxTextureSize,
d.maxTextureSize),f=new THREE.Vector3,l=new THREE.Vector3,r=[],w=Array(4),v=Array(4),y={},F=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],z=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],E=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4];
b=new THREE.MeshDepthMaterial;b.depthPacking=THREE.RGBADepthPacking;b.clipping=!0;d=THREE.ShaderLib.distanceRGBA;for(var G=THREE.UniformsUtils.clone(d.uniforms),O=0;4!==O;++O){var P=0!==(O&1),L=0!==(O&2),I=b.clone();I.morphTargets=P;I.skinning=L;w[O]=I;P=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:G,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,morphTargets:P,skinning:L,clipping:!0});v[O]=P}var B=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=
THREE.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,d){if(!1!==B.enabled&&(!1!==B.autoUpdate||!1!==B.needsUpdate)&&0!==p.length){k.clearColor(1,1,1,1);k.disable(h.BLEND);k.setDepthTest(!0);k.setScissorTest(!1);for(var y,v,w=0,D=p.length;w<D;w++){var H=p[w],C=H.shadow;if(void 0===C)console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");else{var N=C.camera;q.copy(C.mapSize);q.min(t);if(H instanceof THREE.PointLight){y=6;v=!0;var G=q.x;var O=q.y;E[0].set(2*G,
O,G,O);E[1].set(0,O,G,O);E[2].set(3*G,O,G,O);E[3].set(G,O,G,O);E[4].set(3*G,0,G,O);E[5].set(G,0,G,O);q.x*=4;q.y*=2}else y=1,v=!1;null===C.map&&(C.map=new THREE.WebGLRenderTarget(q.x,q.y,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat}),N.updateProjectionMatrix());C instanceof THREE.SpotLightShadow&&C.update(H);G=C.map;C=C.matrix;l.setFromMatrixPosition(H.matrixWorld);N.position.copy(l);a.setRenderTarget(G);a.clear();for(G=0;G<y;G++){v?(f.copy(N.position),f.add(F[G]),
N.up.copy(z[G]),N.lookAt(f),k.viewport(E[G])):(f.setFromMatrixPosition(H.target.matrixWorld),N.lookAt(f));N.updateMatrixWorld();N.matrixWorldInverse.getInverse(N.matrixWorld);C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);C.multiply(N.projectionMatrix);C.multiply(N.matrixWorldInverse);n.multiplyMatrices(N.projectionMatrix,N.matrixWorldInverse);m.setFromMatrix(n);r.length=0;g(b,d,N);O=0;for(var L=r.length;O<L;O++){var I=r[O],P=c.update(I),M=I.material;if(M instanceof THREE.MultiMaterial)for(var R=P.groups,
M=M.materials,da=0,ea=R.length;da<ea;da++){var fa=R[da];var za=M[fa.materialIndex];!0===za.visible&&(za=e(I,za,v,l),a.renderBufferDirect(N,null,P,za,I,fa))}else za=e(I,M,v,l),a.renderBufferDirect(N,null,P,za,I,null)}}}}y=a.getClearColor();v=a.getClearAlpha();a.setClearColor(y,v);B.needsUpdate=!1}}};
THREE.WebGLState=function(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);return f}var e=this;this.buffers={color:new THREE.WebGLColorBuffer(a,this),depth:new THREE.WebGLDepthBuffer(a,this),stencil:new THREE.WebGLStencilBuffer(a,this)};var g=a.getParameter(a.MAX_VERTEX_ATTRIBS),h=new Uint8Array(g),
k=new Uint8Array(g),m=new Uint8Array(g),n={},p=null,q=null,t=null,f=null,l=null,r=null,w=null,v=null,y=!1,F=null,z=null,E=null,G=null,O=null,P=null,L=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),I=null,B={},M=new THREE.Vector4,R=new THREE.Vector4,S={};S[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);S[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(a.DEPTH_TEST);this.setDepthFunc(THREE.LessEqualDepth);
this.setFlipSided(!1);this.setCullFace(THREE.CullFaceBack);this.enable(a.CULL_FACE);this.enable(a.BLEND);this.setBlending(THREE.NormalBlending)};this.initAttributes=function(){for(var a=0,b=h.length;a<b;a++)h[a]=0};this.enableAttribute=function(c){h[c]=1;0===k[c]&&(a.enableVertexAttribArray(c),k[c]=1);0!==m[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),m[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){h[b]=1;0===k[b]&&(a.enableVertexAttribArray(b),k[b]=1);m[b]!==c&&(d.vertexAttribDivisorANGLE(b,
c),m[b]=c)};this.disableUnusedAttributes=function(){for(var b=0,c=k.length;b!==c;++b)k[b]!==h[b]&&(a.disableVertexAttribArray(b),k[b]=0)};this.enable=function(b){!0!==n[b]&&(a.enable(b),n[b]=!0)};this.disable=function(b){!1!==n[b]&&(a.disable(b),n[b]=!1)};this.getCompressedTextureFormats=function(){if(null===p&&(p=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<
c.length;d++)p.push(c[d]);return p};this.setBlending=function(b,d,e,g,h,k,m,n){if(b!==THREE.NoBlending){this.enable(a.BLEND);if(b!==q||n!==y)b===THREE.AdditiveBlending?n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===THREE.SubtractiveBlending?n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),
a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):b===THREE.MultiplyBlending?n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):n?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),
q=b,y=n;if(b===THREE.CustomBlending){h=h||d;k=k||e;m=m||g;if(d!==t||h!==r)a.blendEquationSeparate(c(d),c(h)),t=d,r=h;if(e!==f||g!==l||k!==w||m!==v)a.blendFuncSeparate(c(e),c(g),c(k),c(m)),f=e,l=g,w=k,v=m}else v=w=r=l=f=t=null}else this.disable(a.BLEND),q=b};this.setColorWrite=function(a){this.buffers.color.setMask(a)};this.setDepthTest=function(a){this.buffers.depth.setTest(a)};this.setDepthWrite=function(a){this.buffers.depth.setMask(a)};this.setDepthFunc=function(a){this.buffers.depth.setFunc(a)};
this.setStencilTest=function(a){this.buffers.stencil.setTest(a)};this.setStencilWrite=function(a){this.buffers.stencil.setMask(a)};this.setStencilFunc=function(a,b,c){this.buffers.stencil.setFunc(a,b,c)};this.setStencilOp=function(a,b,c){this.buffers.stencil.setOp(a,b,c)};this.setFlipSided=function(b){F!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),F=b)};this.setCullFace=function(b){b!==THREE.CullFaceNone?(this.enable(a.CULL_FACE),b!==z&&(b===THREE.CullFaceBack?a.cullFace(a.BACK):b===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):this.disable(a.CULL_FACE);z=b};this.setLineWidth=function(b){b!==E&&(a.lineWidth(b),E=b)};this.setPolygonOffset=function(b,c,d){if(b){if(this.enable(a.POLYGON_OFFSET_FILL),G!==c||O!==d)a.polygonOffset(c,d),G=c,O=d}else this.disable(a.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return P};this.setScissorTest=function(b){(P=b)?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+
L-1);I!==b&&(a.activeTexture(b),I=b)};this.bindTexture=function(b,c){null===I&&e.activeTexture();var d=B[I];void 0===d&&(d={type:void 0,texture:void 0},B[I]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||S[b]),d.type=b,d.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(J){console.error(J)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(J){console.error(J)}};this.clearColor=function(a,b,c,d){this.buffers.color.setClear(a,
b,c,d)};this.clearDepth=function(a){this.buffers.depth.setClear(a)};this.clearStencil=function(a){this.buffers.stencil.setClear(a)};this.scissor=function(b){!1===M.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),M.copy(b))};this.viewport=function(b){!1===R.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),R.copy(b))};this.reset=function(){for(var b=0;b<k.length;b++)1===k[b]&&(a.disableVertexAttribArray(b),k[b]=0);n={};I=p=null;B={};z=F=q=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
THREE.WebGLColorBuffer=function(a,b){var c=!1,d=new THREE.Vector4,e=null,g=new THREE.Vector4;this.setMask=function(b){e===b||c||(a.colorMask(b,b,b,b),e=b)};this.setLocked=function(a){c=a};this.setClear=function(b,c,e,n){d.set(b,c,e,n);!1===g.equals(d)&&(a.clearColor(b,c,e,n),g.copy(d))};this.reset=function(){c=!1;e=null;g=new THREE.Vector4}};
THREE.WebGLDepthBuffer=function(a,b){var c=!1,d=null,e=null,g=null;this.setTest=function(c){c?b.enable(a.DEPTH_TEST):b.disable(a.DEPTH_TEST)};this.setMask=function(b){d===b||c||(a.depthMask(b),d=b)};this.setFunc=function(b){if(e!==b){if(b)switch(b){case THREE.NeverDepth:a.depthFunc(a.NEVER);break;case THREE.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case THREE.LessDepth:a.depthFunc(a.LESS);break;case THREE.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case THREE.EqualDepth:a.depthFunc(a.EQUAL);break;case THREE.GreaterEqualDepth:a.depthFunc(a.GEQUAL);
break;case THREE.GreaterDepth:a.depthFunc(a.GREATER);break;case THREE.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);e=b}};this.setLocked=function(a){c=a};this.setClear=function(b){g!==b&&(a.clearDepth(b),g=b)};this.reset=function(){c=!1;g=e=d=null}};
THREE.WebGLStencilBuffer=function(a,b){var c=!1,d=null,e=null,g=null,h=null,k=null,m=null,n=null,p=null;this.setTest=function(c){c?b.enable(a.STENCIL_TEST):b.disable(a.STENCIL_TEST)};this.setMask=function(b){d===b||c||(a.stencilMask(b),d=b)};this.setFunc=function(b,c,d){if(e!==b||g!==c||h!==d)a.stencilFunc(b,c,d),e=b,g=c,h=d};this.setOp=function(b,c,d){if(k!==b||m!==c||n!==d)a.stencilOp(b,c,d),k=b,m=c,n=d};this.setLocked=function(a){c=a};this.setClear=function(b){p!==b&&(a.clearStencil(b),p=b)};this.reset=
function(){c=!1;p=n=m=k=h=g=e=d=null}};
THREE.WebGLTextures=function(a,b,c,d,e,g,h){function k(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function m(a){return THREE.Math.isPowerOfTwo(a.width)&&THREE.Math.isPowerOfTwo(a.height)}
function n(b){return b===THREE.NearestFilter||b===THREE.NearestMipMapNearestFilter||b===THREE.NearestMipMapLinearFilter?a.NEAREST:a.LINEAR}function p(b){b=b.target;b.removeEventListener("dispose",p);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.delete(b)}w.textures--}function q(b){b=b.target;b.removeEventListener("dispose",q);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==
e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b instanceof THREE.WebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.delete(b.texture);d.delete(b)}w.textures--}function t(b,h){var l=d.get(b);if(0<b.version&&l.__version!==b.version){var n=
b.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===l.__webglInit&&(l.__webglInit=!0,b.addEventListener("dispose",p),l.__webglTexture=a.createTexture(),w.textures++);c.activeTexture(a.TEXTURE0+h);c.bindTexture(a.TEXTURE_2D,l.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var q=k(b.image,e.maxTextureSize);(b.wrapS!==THREE.ClampToEdgeWrapping||b.wrapT!==THREE.ClampToEdgeWrapping||b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter)&&!1===m(q)&&((n=q,n instanceof HTMLImageElement||n instanceof HTMLCanvasElement)?(h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),h.width=THREE.Math.nearestPowerOfTwo(n.width),h.height=THREE.Math.nearestPowerOfTwo(n.height),h.getContext("2d").drawImage(n,
0,0,h.width,h.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+h.width+"x"+h.height,n),q=h):q=n);n=m(q);h=g(b.format);var t=g(b.type);f(a.TEXTURE_2D,b,n);var r=b.mipmaps;if(b instanceof THREE.DepthTexture){r=a.DEPTH_COMPONENT;if(b.type===THREE.FloatType){if(!v)throw Error("Float Depth Texture only supported in WebGL2.0");r=a.DEPTH_COMPONENT32F}else v&&(r=a.DEPTH_COMPONENT16);c.texImage2D(a.TEXTURE_2D,0,r,q.width,q.height,0,h,t,null)}else if(b instanceof
THREE.DataTexture)if(0<r.length&&n){for(var y=0,F=r.length;y<F;y++)q=r[y],c.texImage2D(a.TEXTURE_2D,y,h,q.width,q.height,0,h,t,q.data);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,h,q.width,q.height,0,h,t,q.data);else if(b instanceof THREE.CompressedTexture)for(y=0,F=r.length;y<F;y++)q=r[y],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(h)?c.compressedTexImage2D(a.TEXTURE_2D,y,h,q.width,q.height,0,q.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):
c.texImage2D(a.TEXTURE_2D,y,h,q.width,q.height,0,h,t,q.data);else if(0<r.length&&n){y=0;for(F=r.length;y<F;y++)q=r[y],c.texImage2D(a.TEXTURE_2D,y,h,h,t,q);b.generateMipmaps=!1}else c.texImage2D(a.TEXTURE_2D,0,h,h,t,q);b.generateMipmaps&&n&&a.generateMipmap(a.TEXTURE_2D);l.__version=b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+h);c.bindTexture(a.TEXTURE_2D,l.__webglTexture)}function f(c,f,h){h?(a.texParameteri(c,a.TEXTURE_WRAP_S,g(f.wrapS)),a.texParameteri(c,a.TEXTURE_WRAP_T,
g(f.wrapT)),a.texParameteri(c,a.TEXTURE_MAG_FILTER,g(f.magFilter)),a.texParameteri(c,a.TEXTURE_MIN_FILTER,g(f.minFilter))):(a.texParameteri(c,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(c,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),f.wrapS===THREE.ClampToEdgeWrapping&&f.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",f),a.texParameteri(c,a.TEXTURE_MAG_FILTER,n(f.magFilter)),
a.texParameteri(c,a.TEXTURE_MIN_FILTER,n(f.minFilter)),f.minFilter!==THREE.NearestFilter&&f.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",f));!(h=b.get("EXT_texture_filter_anisotropic"))||f.type===THREE.FloatType&&null===b.get("OES_texture_float_linear")||f.type===THREE.HalfFloatType&&null===b.get("OES_texture_half_float_linear")||!(1<f.anisotropy||d.get(f).__currentAnisotropy)||
(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(f.anisotropy,e.getMaxAnisotropy())),d.get(f).__currentAnisotropy=f.anisotropy)}function l(b,e,f,h){var k=g(e.texture.format),l=g(e.texture.type);c.texImage2D(h,0,k,e.width,e.height,0,k,l,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,f,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(a.FRAMEBUFFER,null)}function r(b,c){a.bindRenderbuffer(a.RENDERBUFFER,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,b)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,c.width,c.height);a.bindRenderbuffer(a.RENDERBUFFER,null)}var w=h.memory,v="undefined"!==typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext;
this.setTexture2D=t;this.setTextureCube=function(b,h){var l=d.get(b);if(6===b.image.length)if(0<b.version&&l.__version!==b.version){l.__image__webglTextureCube||(b.addEventListener("dispose",p),l.__image__webglTextureCube=a.createTexture(),w.textures++);c.activeTexture(a.TEXTURE0+h);c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.flipY);h=b instanceof THREE.CompressedTexture;for(var n=b.image[0]instanceof THREE.DataTexture,q=[],t=0;6>t;t++)q[t]=
h||n?n?b.image[t].image:b.image[t]:k(b.image[t],e.maxCubemapSize);var r=m(q[0]),v=g(b.format),y=g(b.type);f(a.TEXTURE_CUBE_MAP,b,r);for(t=0;6>t;t++)if(h)for(var F,M=q[t].mipmaps,R=0,S=M.length;R<S;R++)F=M[R],b.format!==THREE.RGBAFormat&&b.format!==THREE.RGBFormat?-1<c.getCompressedTextureFormats().indexOf(v)?c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,R,v,F.width,F.height,0,F.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,R,v,F.width,F.height,0,v,y,F.data);else n?c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,q[t].width,q[t].height,0,v,y,q[t].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,v,y,q[t]);b.generateMipmaps&&r&&a.generateMipmap(a.TEXTURE_CUBE_MAP);l.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(a.TEXTURE0+h),c.bindTexture(a.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)};this.setTextureCubeDynamic=function(b,e){c.activeTexture(a.TEXTURE0+
e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),g=d.get(b.texture);b.addEventListener("dispose",q);g.__webglTexture=a.createTexture();w.textures++;var h=b instanceof THREE.WebGLRenderTargetCube,k=m(b);if(h){e.__webglFramebuffer=[];for(var n=0;6>n;n++)e.__webglFramebuffer[n]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(a.TEXTURE_CUBE_MAP,g.__webglTexture);f(a.TEXTURE_CUBE_MAP,b.texture,k);for(n=
0;6>n;n++)l(e.__webglFramebuffer[n],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+n);b.texture.generateMipmaps&&k&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,g.__webglTexture),f(a.TEXTURE_2D,b.texture,k),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),b.texture.generateMipmaps&&k&&a.generateMipmap(a.TEXTURE_2D),c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);g=b instanceof THREE.WebGLRenderTargetCube;if(b.depthTexture){if(g)throw Error("target.depthTexture not supported in Cube render targets");
if(b instanceof THREE.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!(b.depthTexture instanceof THREE.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=
!0);t(b.depthTexture,0);b=d.get(b.depthTexture).__webglTexture;a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,b,0)}else if(g)for(e.__webglDepthbuffer=[],g=0;6>g;g++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[g]),e.__webglDepthbuffer[g]=a.createRenderbuffer(),r(e.__webglDepthbuffer[g],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),r(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=
function(b){var e=b.texture;e.generateMipmaps&&m(b)&&e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter&&(b=b instanceof THREE.WebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}};
THREE.WebGLUniforms=function(){var a=new THREE.Texture,b=new THREE.CubeTexture,c=[],d=[],e=function(a,b,d){var e=a[0];if(0>=e||0<e)return a;var f=b*d,g=c[f];void 0===g&&(g=new Float32Array(f),c[f]=g);if(0!==b)for(e.toArray(g,0),e=1,f=0;e!==b;++e)f+=d,a[e].toArray(g,f);return g},g=function(a,b){var c=d[b];void 0===c&&(c=new Int32Array(b),d[b]=c);for(var e=0;e!==b;++e)c[e]=a.allocTextureUnit();return c},h=function(a,b){a.uniform1f(this.addr,b)},k=function(a,b){a.uniform1i(this.addr,b)},m=function(a,
b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)},n=function(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)},p=function(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)},q=function(a,b){a.uniformMatrix2fv(this.addr,!1,b.elements||b)},t=function(a,b){a.uniformMatrix3fv(this.addr,!1,b.elements||b)},f=function(a,b){a.uniformMatrix4fv(this.addr,!1,b.elements||b)},l=
function(b,c,d){var e=d.allocTextureUnit();b.uniform1i(this.addr,e);d.setTexture2D(c||a,e)},r=function(a,c,d){var e=d.allocTextureUnit();a.uniform1i(this.addr,e);d.setTextureCube(c||b,e)},w=function(a,b){a.uniform2iv(this.addr,b)},v=function(a,b){a.uniform3iv(this.addr,b)},y=function(a,b){a.uniform4iv(this.addr,b)},F=function(a){switch(a){case 5126:return h;case 35664:return m;case 35665:return n;case 35666:return p;case 35674:return q;case 35675:return t;case 35676:return f;case 35678:return l;case 35680:return r;
case 5124:case 35670:return k;case 35667:case 35671:return w;case 35668:case 35672:return v;case 35669:case 35673:return y}},z=function(a,b){a.uniform1fv(this.addr,b)},E=function(a,b){a.uniform1iv(this.addr,b)},G=function(a,b){a.uniform2fv(this.addr,e(b,this.size,2))},O=function(a,b){a.uniform3fv(this.addr,e(b,this.size,3))},P=function(a,b){a.uniform4fv(this.addr,e(b,this.size,4))},L=function(a,b){a.uniformMatrix2fv(this.addr,!1,e(b,this.size,4))},I=function(a,b){a.uniformMatrix3fv(this.addr,!1,e(b,
this.size,9))},B=function(a,b){a.uniformMatrix4fv(this.addr,!1,e(b,this.size,16))},M=function(b,c,d){var e=c.length,f=g(d,e);b.uniform1iv(this.addr,f);for(b=0;b!==e;++b)d.setTexture2D(c[b]||a,f[b])},R=function(a,c,d){var e=c.length,f=g(d,e);a.uniform1iv(this.addr,f);for(a=0;a!==e;++a)d.setTextureCube(c[a]||b,f[a])},S=function(a){switch(a){case 5126:return z;case 35664:return G;case 35665:return O;case 35666:return P;case 35674:return L;case 35675:return I;case 35676:return B;case 35678:return M;case 35680:return R;
case 5124:case 35670:return E;case 35667:case 35671:return w;case 35668:case 35672:return v;case 35669:case 35673:return y}},J=function(a,b,c){this.id=a;this.addr=c;this.setValue=F(b.type)},Q=function(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=S(b.type)},D=function(a){this.id=a;this.seq=[];this.map={}};D.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,b[f.id])}};var H=/([\w\d_]+)(\])?(\[|\.)?/g,C=function(a,b,c){this.seq=[];this.map=
{};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var d=0;d!==c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(H.lastIndex=0;;){var l=H.exec(h),m=H.lastIndex,n=l[1],p=l[3];"]"===l[2]&&(n|=0);if(void 0===p||"["===p&&m+2===k){h=g;e=void 0===p?new J(n,e,f):new Q(n,e,f);h.seq.push(e);h.map[e.id]=e;break}else p=g.map[n],void 0===p&&(p=new D(n),n=g,g=p,n.seq.push(g),n.map[g.id]=g),g=p}}};C.prototype.setValue=function(a,b,c){b=this.map[b];
void 0!==b&&b.setValue(a,c,this.renderer)};C.prototype.set=function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};C.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};C.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};C.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};C.splitDynamic=function(a,b){for(var c=null,
d=a.length,e=0,f=0;f!==d;++f){var g=a[f],h=b[g.id];h&&!0===h.dynamic?(null===c&&(c=[]),c.push(g)):(e<f&&(a[e]=g),++e)}e<d&&(a.length=e);return c};C.evalDynamic=function(a,b,c,d){for(var e=0,f=a.length;e!==f;++e){var g=b[a[e].id],h=g.onUpdateCallback;void 0!==h&&h.call(g,c,d)}};return C}();
THREE.LensFlarePlugin=function(a,b){var c,d,e,g,h,k,m,n,p,q,t=a.context,f=a.state,l,r,w,v,y;this.render=function(F,z,E){if(0!==b.length){F=new THREE.Vector3;var G=E.w/E.z,O=.5*E.z,P=.5*E.w;var L=16/E.w;var I=new THREE.Vector2(L*G,L),B=new THREE.Vector3(1,1,0),M=new THREE.Vector2(1,1),R=new THREE.Box2;R.min.set(0,0);R.max.set(E.z-16,E.w-16);if(void 0===w){L=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var S=new Uint16Array([0,1,2,0,2,3]);l=t.createBuffer();r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,
l);t.bufferData(t.ARRAY_BUFFER,L,t.STATIC_DRAW);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r);t.bufferData(t.ELEMENT_ARRAY_BUFFER,S,t.STATIC_DRAW);v=t.createTexture();y=t.createTexture();f.bindTexture(t.TEXTURE_2D,v);t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,
t.NEAREST);f.bindTexture(t.TEXTURE_2D,y);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);L={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"};S=t.createProgram();var J=t.createShader(t.FRAGMENT_SHADER);
var Q=t.createShader(t.VERTEX_SHADER);var D="precision "+a.getPrecision()+" float;\n";t.shaderSource(J,D+L.fragmentShader);t.shaderSource(Q,D+L.vertexShader);t.compileShader(J);t.compileShader(Q);t.attachShader(S,J);t.attachShader(S,Q);t.linkProgram(S);w=S;p=t.getAttribLocation(w,"position");q=t.getAttribLocation(w,"uv");c=t.getUniformLocation(w,"renderType");d=t.getUniformLocation(w,"map");e=t.getUniformLocation(w,"occlusionMap");g=t.getUniformLocation(w,"opacity");h=t.getUniformLocation(w,"color");
k=t.getUniformLocation(w,"scale");m=t.getUniformLocation(w,"rotation");n=t.getUniformLocation(w,"screenPosition")}t.useProgram(w);f.initAttributes();f.enableAttribute(p);f.enableAttribute(q);f.disableUnusedAttributes();t.uniform1i(e,0);t.uniform1i(d,1);t.bindBuffer(t.ARRAY_BUFFER,l);t.vertexAttribPointer(p,2,t.FLOAT,!1,16,0);t.vertexAttribPointer(q,2,t.FLOAT,!1,16,8);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r);f.disable(t.CULL_FACE);f.setDepthWrite(!1);S=0;for(J=b.length;S<J;S++)if(L=16/E.w,I.set(L*G,
L),Q=b[S],F.set(Q.matrixWorld.elements[12],Q.matrixWorld.elements[13],Q.matrixWorld.elements[14]),F.applyMatrix4(z.matrixWorldInverse),F.applyProjection(z.projectionMatrix),B.copy(F),M.x=E.x+B.x*O+O-8,M.y=E.y+B.y*P+P-8,!0===R.containsPoint(M)){f.activeTexture(t.TEXTURE0);f.bindTexture(t.TEXTURE_2D,null);f.activeTexture(t.TEXTURE1);f.bindTexture(t.TEXTURE_2D,v);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,M.x,M.y,16,16,0);t.uniform1i(c,0);t.uniform2f(k,I.x,I.y);t.uniform3f(n,B.x,B.y,B.z);f.disable(t.BLEND);
f.enable(t.DEPTH_TEST);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);f.activeTexture(t.TEXTURE0);f.bindTexture(t.TEXTURE_2D,y);t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,M.x,M.y,16,16,0);t.uniform1i(c,1);f.disable(t.DEPTH_TEST);f.activeTexture(t.TEXTURE1);f.bindTexture(t.TEXTURE_2D,v);t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0);Q.positionScreen.copy(B);Q.customUpdateCallback?Q.customUpdateCallback(Q):Q.updateLensFlares();t.uniform1i(c,2);f.enable(t.BLEND);D=0;for(var H=Q.lensFlares.length;D<H;D++){var C=
Q.lensFlares[D];.001<C.opacity&&.001<C.scale&&(B.x=C.x,B.y=C.y,B.z=C.z,L=C.size*C.scale/E.w,I.x=L*G,I.y=L,t.uniform3f(n,B.x,B.y,B.z),t.uniform2f(k,I.x,I.y),t.uniform1f(m,C.rotation),t.uniform1f(g,C.opacity),t.uniform3f(h,C.color.r,C.color.g,C.color.b),f.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),a.setTexture2D(C.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}f.enable(t.CULL_FACE);f.enable(t.DEPTH_TEST);f.setDepthWrite(!0);a.resetGLState()}}};
THREE.SpritePlugin=function(a,b){function c(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var d,e,g,h,k,m,n,p,q,t,f,l,r,w,v,y,F,z=a.context,E=a.state,G,O,P,L,I=new THREE.Vector3,B=new THREE.Quaternion,M=new THREE.Vector3;this.render=function(R,S){if(0!==b.length){if(void 0===P){var J=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var Q=new Uint16Array([0,1,2,0,2,3]);G=z.createBuffer();O=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,
G);z.bufferData(z.ARRAY_BUFFER,J,z.STATIC_DRAW);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,O);z.bufferData(z.ELEMENT_ARRAY_BUFFER,Q,z.STATIC_DRAW);J=z.createProgram();Q=z.createShader(z.VERTEX_SHADER);var D=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(Q,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n"));
z.shaderSource(D,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
z.compileShader(Q);z.compileShader(D);z.attachShader(J,Q);z.attachShader(J,D);z.linkProgram(J);P=J;y=z.getAttribLocation(P,"position");F=z.getAttribLocation(P,"uv");d=z.getUniformLocation(P,"uvOffset");e=z.getUniformLocation(P,"uvScale");g=z.getUniformLocation(P,"rotation");h=z.getUniformLocation(P,"scale");k=z.getUniformLocation(P,"color");m=z.getUniformLocation(P,"map");n=z.getUniformLocation(P,"opacity");p=z.getUniformLocation(P,"modelViewMatrix");q=z.getUniformLocation(P,"projectionMatrix");t=
z.getUniformLocation(P,"fogType");f=z.getUniformLocation(P,"fogDensity");l=z.getUniformLocation(P,"fogNear");r=z.getUniformLocation(P,"fogFar");w=z.getUniformLocation(P,"fogColor");v=z.getUniformLocation(P,"alphaTest");J=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");J.width=8;J.height=8;Q=J.getContext("2d");Q.fillStyle="white";Q.fillRect(0,0,8,8);L=new THREE.Texture(J);L.needsUpdate=!0}z.useProgram(P);E.initAttributes();E.enableAttribute(y);E.enableAttribute(F);E.disableUnusedAttributes();
E.disable(z.CULL_FACE);E.enable(z.BLEND);z.bindBuffer(z.ARRAY_BUFFER,G);z.vertexAttribPointer(y,2,z.FLOAT,!1,16,0);z.vertexAttribPointer(F,2,z.FLOAT,!1,16,8);z.bindBuffer(z.ELEMENT_ARRAY_BUFFER,O);z.uniformMatrix4fv(q,!1,S.projectionMatrix.elements);E.activeTexture(z.TEXTURE0);z.uniform1i(m,0);Q=J=0;(D=R.fog)?(z.uniform3f(w,D.color.r,D.color.g,D.color.b),D instanceof THREE.Fog?(z.uniform1f(l,D.near),z.uniform1f(r,D.far),z.uniform1i(t,1),Q=J=1):D instanceof THREE.FogExp2&&(z.uniform1f(f,D.density),
z.uniform1i(t,2),Q=J=2)):(z.uniform1i(t,0),Q=J=0);D=0;for(var H=b.length;D<H;D++){var C=b[D];C.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,C.matrixWorld);C.z=-C.modelViewMatrix.elements[14]}b.sort(c);S=[];D=0;for(H=b.length;D<H;D++){C=b[D];var N=C.material;!1!==N.visible&&(z.uniform1f(v,N.alphaTest),z.uniformMatrix4fv(p,!1,C.modelViewMatrix.elements),C.matrixWorld.decompose(I,B,M),S[0]=M.x,S[1]=M.y,C=0,R.fog&&N.fog&&(C=Q),J!==C&&(z.uniform1i(t,C),J=C),null!==N.map?(z.uniform2f(d,N.map.offset.x,
N.map.offset.y),z.uniform2f(e,N.map.repeat.x,N.map.repeat.y)):(z.uniform2f(d,0,0),z.uniform2f(e,1,1)),z.uniform1f(n,N.opacity),z.uniform3f(k,N.color.r,N.color.g,N.color.b),z.uniform1f(g,N.rotation),z.uniform2fv(h,S),E.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst),E.setDepthTest(N.depthTest),E.setDepthWrite(N.depthWrite),N.map?a.setTexture2D(N.map,0):a.setTexture2D(L,0),z.drawElements(z.TRIANGLES,6,z.UNSIGNED_SHORT,0))}E.enable(z.CULL_FACE);a.resetGLState()}}};
Object.assign(THREE,{Face4:function(a,b,c,d,e,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,e,g,h)},LineStrip:0,LinePieces:1,MeshFaceMaterial:THREE.MultiMaterial,PointCloud:function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new THREE.Points(a,b)},Particle:THREE.Sprite,ParticleSystem:function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new THREE.Points(a,
b)},PointCloudMaterial:function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleBasicMaterial:function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},ParticleSystemMaterial:function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new THREE.PointsMaterial(a)},Vertex:function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");
return new THREE.Vector3(a,b,c)}});Object.assign(THREE.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)}});
Object.assign(THREE.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Matrix3.prototype,{multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)}});
Object.assign(THREE.Matrix4.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(a){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(a){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(a){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(a){console.error("THREE.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(a,b){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});Object.assign(THREE.Plane.prototype,{isIntersectionLine:function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)}});Object.assign(THREE.Quaternion.prototype,{multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)}});
Object.assign(THREE.Ray.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(THREE.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)}});
Object.assign(THREE.Object3D.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(a){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});
Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(a){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(THREE.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});THREE.PerspectiveCamera.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};
Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(a){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(a){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(THREE.BufferGeometry.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(a){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new THREE.Color}}});
Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(a){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});
THREE.EventDispatcher.prototype=Object.assign(Object.create({constructor:THREE.EventDispatcher,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(a,this)}}),THREE.EventDispatcher.prototype);
Object.assign(THREE.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(THREE.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=a}}});Object.defineProperties(THREE.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?THREE.CullFaceFront:THREE.CullFaceBack},set:function(a){a=a!==THREE.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});
Object.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});
Object.assign(THREE.Audio.prototype,{load:function(a){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var b=this;(new THREE.AudioLoader).load(a,function(a){b.setBuffer(a)});return this}});Object.assign(THREE.AudioAnalyser.prototype,{getData:function(a){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
THREE.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var d;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),d=b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new THREE.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new THREE.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,
c,void 0,d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(a,b){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
THREE.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a,b,c,d,e){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};
THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Group,d=0,e=b.length;d<e;d++)c.add(new THREE.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
THREE.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h;if(0<THREE.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var k=2*c;for(h=c-1;2<c;){if(0>=k--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}var m=h;c<=m&&(m=0);h=m+1;c<=h&&(h=0);var n=h+1;c<=n&&(n=0);a:{var p,q;
var t=a[e[m]].x;var f=a[e[m]].y;var l=a[e[h]].x;var r=a[e[h]].y;var w=a[e[n]].x;var v=a[e[n]].y;if(Number.EPSILON>(l-t)*(v-f)-(r-f)*(w-t))var y=!1;else{var F,z,E=void 0;var G=z=F=q=p=void 0;var O=w-l;var P=v-r;var L=t-w;var I=f-v;var B=l-t;var M=r-f;for(y=0;y<c;y++)if(p=a[e[y]].x,q=a[e[y]].y,!(p===t&&q===f||p===l&&q===r||p===w&&q===v)&&(F=p-t,z=q-f,G=p-l,E=q-r,p-=w,q-=v,G=O*E-P*G,F=B*z-M*F,z=L*q-I*p,G>=-Number.EPSILON&&z>=-Number.EPSILON&&F>=-Number.EPSILON)){y=!1;break a}y=!0}}if(y){d.push([a[e[m]],
a[e[h]],a[e[n]]]);g.push([e[m],e[h],e[n]]);m=h;for(n=h+1;n<c;m++,n++)e[m]=e[n];c--;k=2*c}}return b?g:d}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function e(a,b,c,e,g){var f=b.x-a.x,h=b.y-a.y,k=e.x-c.x,l=e.y-c.y,m=a.x-c.x,n=a.y-c.y,p=h*k-f*l,q=h*m-f*n;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>q||q>p)return[];k=l*m-k*
n;if(0>k||k>p)return[]}else{if(0<q||q<p)return[];k=l*m-k*n;if(0<k||k<p)return[]}if(0===k)return!g||0!==q&&q!==p?[a]:[];if(k===p)return!g||0!==q&&q!==p?[b]:[];if(0===q)return[c];if(q===p)return[e];g=k/p;return[{x:a.x+g*f,y:a.y+g*h}]}if(0!==q||l*m!==k*n)return[];h=0===f&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==c.x||a.y!==c.y?[]:[a];if(h)return d(c,e,a)?[a]:[];if(k)return d(a,b,c)?[c]:[];0!==f?(a.x<b.x?(f=a,k=a.x,h=b,a=b.x):(f=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,l=e,c=e.x):(b=e,p=e.x,l=c,c=c.x)):
(a.y<b.y?(f=a,k=a.y,h=b,a=b.y):(f=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,l=e,c=e.y):(b=e,p=e.y,l=c,c=c.y));return k<=p?a<p?[]:a===p?g?[]:[b]:a<=c?[b,h]:[b,l]:k>c?[]:k===c?g?[]:[f]:a<=c?[f,h]:[f,l]}function g(a,b,c,d){var e=b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var g=d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return Math.abs(a)>Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.forEach(c);var h,k={};var m=a.concat();var n=0;for(h=b.length;n<h;n++)Array.prototype.push.apply(m,b[n]);n=0;for(h=
m.length;n<h;n++){var p=m[n].x+":"+m[n].y;void 0!==k[p]&&console.warn("THREE.ShapeUtils: Duplicate point",p,n);k[p]=n}n=function(a,b){function c(a,b){var c=k.length-1,d=a-1;0>d&&(d=c);var e=a+1;e>c&&(e=0);c=g(k[a],k[d],k[e],B[b]);if(!c)return!1;c=B.length-1;d=b-1;0>d&&(d=c);e=b+1;e>c&&(e=0);return g(B[b],B[d],B[e],k[a])?!0:!1}function d(a,b){var c,d;for(c=0;c<k.length;c++)if(d=c+1,d%=k.length,d=e(a,b,k[c],k[d],!0),0<d.length)return!0;return!1}function h(a,c){var d,f,g;for(d=0;d<m.length;d++){var h=
b[m[d]];for(f=0;f<h.length;f++)if(g=f+1,g%=h.length,g=e(a,c,h[f],h[g],!0),0<g.length)return!0}return!1}var k=a.concat(),m=[],n,p,q,t=[],G,O=0;for(a=b.length;O<a;O++)m.push(O);var P=0;for(var L=2*m.length;0<m.length;){L--;if(0>L){console.log("Infinite Loop! Holes left:"+m.length+", Probably Hole outside Shape!");break}for(n=P;n<k.length;n++){var I=k[n];a=-1;for(O=0;O<m.length;O++)if(p=m[O],q=I.x+":"+I.y+":"+p,void 0===t[q]){var B=b[p];for(G=0;G<B.length;G++)if(p=B[G],c(n,G)&&!d(I,p)&&!h(I,p)){a=G;
m.splice(O,1);P=k.slice(0,n+1);p=k.slice(n);G=B.slice(a);var M=B.slice(0,a+1);k=P.concat(G).concat(M).concat(p);P=n;break}if(0<=a)break;t[q]=!0}if(0<=a)break}}return k}(a,b);b=THREE.ShapeUtils.triangulate(n,!1);n=0;for(h=b.length;n<h;n++)for(a=b[n],m=0;3>m;m++)p=a[m].x+":"+a[m].y,p=k[p],void 0!==p&&(a[m]=p);return b.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,
b,c,d,e){var g=1-a,h=1-a;return g*g*g*b+3*h*h*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){a||(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){a||
(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var g=this.getPoint(d/a);e+=g.distanceTo(c);b.push(e);c=g}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=0,e=c.length;a=b?b:a*c[e-1];b=0;for(var g=
e-1,h;b<=g;)if(d=Math.floor(b+(g-b)/2),h=c[d]-a,0>h)b=d+1;else if(0<h)g=d-1;else{g=d;break}d=g;if(c[d]===a)return d/(e-1);b=c[d];return(d+(a-b)/(c[d+1]-b))/(e-1)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)}};
THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};THREE.CurvePath=function(){this.curves=[];this.autoClose=!1};
THREE.CurvePath.prototype=Object.assign(Object.create(THREE.Curve.prototype),{constructor:THREE.CurvePath,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new THREE.LineCurve(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=
this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){a||(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},
getPoints:function(a){a=a||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++)for(var g=e[d],g=g.getPoints(g instanceof THREE.EllipseCurve?2*a:g instanceof THREE.LineCurve?1:g instanceof THREE.SplineCurve?a*g.points.length:a),h=0;h<g.length;h++){var k=g[h];c&&c.equals(k)||(b.push(k),c=k)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);
return this.createGeometry(a)},createGeometry:function(a){for(var b=new THREE.Geometry,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new THREE.Vector3(e.x,e.y,e.z||0))}return b}});THREE.Font=function(a){this.data=a};
Object.assign(THREE.Font.prototype,{generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,g=0;b=[];for(var h=0;h<a.length;h++){var k=e;var m=g,n=d.glyphs[a[h]]||d.glyphs["?"];if(n){var p=new THREE.ShapePath,q=[],t=THREE.ShapeUtils.b2,f=THREE.ShapeUtils.b3,l;var r=l=void 0;var w,v=void 0,y=void 0,F=void 0,z=void 0;if(n.o)for(var E=n._cachedOutline||(n._cachedOutline=n.o.split(" ")),G=0,O=E.length;G<O;)switch(E[G++]){case "m":l=
E[G++]*k+m;r=E[G++]*k;p.moveTo(l,r);break;case "l":l=E[G++]*k+m;r=E[G++]*k;p.lineTo(l,r);break;case "q":l=E[G++]*k+m;r=E[G++]*k;v=E[G++]*k+m;y=E[G++]*k;p.quadraticCurveTo(v,y,l,r);if(w=q[q.length-1]){var P=w.x;w=w.y;for(var L=1;L<=c;L++){var I=L/c;t(I,P,v,l);t(I,w,y,r)}}break;case "b":if(l=E[G++]*k+m,r=E[G++]*k,v=E[G++]*k+m,y=E[G++]*k,F=E[G++]*k+m,z=E[G++]*k,p.bezierCurveTo(v,y,F,z,l,r),w=q[q.length-1])for(P=w.x,w=w.y,L=1;L<=c;L++)I=L/c,f(I,P,v,F,l),f(I,w,y,z,r)}k={offset:n.ha*k,path:p}}else k=void 0;
g+=k.offset;b.push(k.path)}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});THREE.Path=function(a){THREE.CurvePath.call(this);this.currentPoint=new THREE.Vector2;a&&this.fromPoints(a)};
THREE.Path.prototype=Object.assign(Object.create(THREE.CurvePath.prototype),{constructor:THREE.Path,fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new THREE.LineCurve(this.currentPoint.clone(),new THREE.Vector2(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new THREE.QuadraticBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,
b),new THREE.Vector2(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,g){a=new THREE.CubicBezierCurve(this.currentPoint.clone(),new THREE.Vector2(a,b),new THREE.Vector2(c,d),new THREE.Vector2(e,g));this.curves.push(a);this.currentPoint.set(e,g)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a),b=new THREE.SplineCurve(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,g){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,
c,d,e,g)},absarc:function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)},ellipse:function(a,b,c,d,e,g,h,k){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,g,h,k)},absellipse:function(a,b,c,d,e,g,h,k){a=new THREE.EllipseCurve(a,b,c,d,e,g,h,k);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)}});THREE.ShapePath=function(){this.subPaths=[];this.currentPath=null};
THREE.ShapePath.prototype={moveTo:function(a,b){this.currentPath=new THREE.Path;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,g){this.currentPath.bezierCurveTo(a,b,c,d,e,g)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new THREE.Shape;
f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=THREE.ShapeUtils.isClockWise,g=this.subPaths;if(0===g.length)return[];if(!0===b)return c(g);var h,
k,m=[];if(1===g.length)return h=g[0],k=new THREE.Shape,k.curves=h.curves,m.push(k),m;var n=!e(g[0].getPoints()),n=a?!n:n;k=[];var p=[],q=[],t=0;p[t]=void 0;q[t]=[];for(var f=0,l=g.length;f<l;f++){h=g[f];var r=h.getPoints();b=e(r);(b=a?!b:b)?(!n&&p[t]&&t++,p[t]={s:new THREE.Shape,p:r},p[t].s.curves=h.curves,n&&t++,q[t]=[]):q[t].push({h:h,p:r[0]})}if(!p[0])return c(g);if(1<p.length){f=!1;h=[];e=0;for(g=p.length;e<g;e++)k[e]=[];e=0;for(g=p.length;e<g;e++)for(b=q[e],n=0;n<b.length;n++){t=b[n];r=!0;for(l=
0;l<p.length;l++)d(t.p,p[l].p)&&(e!==l&&h.push({froms:e,tos:l,hole:n}),r?(r=!1,k[l].push(t)):f=!0);r&&k[e].push(t)}0<h.length&&(f||(q=k))}f=0;for(e=p.length;f<e;f++)for(k=p[f].s,m.push(k),h=q[f],g=0,b=h.length;g<b;g++)k.holes.push(h[g].h);return m}};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};
THREE.Shape.prototype=Object.assign(Object.create(THREE.Path.prototype),{constructor:THREE.Shape,extrude:function(a){return new THREE.ExtrudeGeometry(this,a)},makeGeometry:function(a){return new THREE.ShapeGeometry(this,a)},getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});
THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.constructor=THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()};
THREE.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};
THREE.QuadraticBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};THREE.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;
THREE.CubicBezierCurve.prototype.getPoint=function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};THREE.CubicBezierCurve.prototype.getTangent=function(a){var b=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};THREE.SplineCurve=function(a){this.points=void 0==a?[]:a};
THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;THREE.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};
THREE.EllipseCurve=function(a,b,c,d,e,g,h,k){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=h;this.aRotation=k||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(a){for(var b=2*Math.PI,c=this.aEndAngle-this.aStartAngle,d=Math.abs(c)<Number.EPSILON;0>c;)c+=b;for(;c>b;)c-=b;c<Number.EPSILON&&(c=d?0:b);!0!==this.aClockwise||d||(c=c===b?-b:c-b);b=this.aStartAngle+a*c;a=this.aX+this.xRadius*Math.cos(b);var e=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return new THREE.Vector2(a,e)};
THREE.ArcCurve=function(a,b,c,d,e,g){THREE.EllipseCurve.call(this,a,b,c,c,d,e,g)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){if(1===a)return this.v2.clone();var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,p,q){this.init(b,c,((b-a)/e-(c-a)/(e+p)+(c-b)/p)*p,((c-b)/p-(d-b)/(p+q)+(d-c)/q)*p)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*b*a};
return THREE.Curve.create(function(a){this.points=a||[];this.closed=!1},function(a){var g=this.points;var k=g.length;2>k&&console.log("duh, you need at least 2 points");a*=k-(this.closed?0:1);var m=Math.floor(a);a-=m;this.closed?m+=0<m?0:(Math.floor(Math.abs(m)/g.length)+1)*g.length:0===a&&m===k-1&&(m=k-2,a=1);var n;this.closed||0<m?n=g[(m-1)%k]:(b.subVectors(g[0],g[1]).add(g[0]),n=b);var p=g[m%k];var q=g[(m+1)%k];this.closed||m+2<k?g=g[(m+2)%k]:(b.subVectors(g[k-1],g[k-2]).add(g[k-1]),g=b);if(void 0===
this.type||"centripetal"===this.type||"chordal"===this.type){var t="chordal"===this.type?.5:.25;k=Math.pow(n.distanceToSquared(p),t);m=Math.pow(p.distanceToSquared(q),t);t=Math.pow(q.distanceToSquared(g),t);1E-4>m&&(m=1);1E-4>k&&(k=m);1E-4>t&&(t=m);c.initNonuniformCatmullRom(n.x,p.x,q.x,g.x,k,m,t);d.initNonuniformCatmullRom(n.y,p.y,q.y,g.y,k,m,t);e.initNonuniformCatmullRom(n.z,p.z,q.z,g.z,k,m,t)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(n.x,p.x,q.x,g.x,
k),d.initCatmullRom(n.y,p.y,q.y,g.y,k),e.initCatmullRom(n.z,p.z,q.z,g.z,k));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();THREE.ClosedSplineCurve3=function(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");THREE.CatmullRomCurve3.call(this,a);this.type="catmullrom";this.closed=!0};THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype);
THREE.BoxGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.fromBufferGeometry(new THREE.BoxBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry;THREE.CubeGeometry=THREE.BoxGeometry;
THREE.BoxBufferGeometry=function(a,b,c,d,e,g){function h(a,b,c,d,e,g,h,m,n,M,R){var z=g/n,B=h/M,G=g/2,D=h/2,H=m/2;h=n+1;for(var C=M+1,N=g=0,F=new THREE.Vector3,E=0;E<C;E++)for(var I=E*B-D,L=0;L<h;L++)F[a]=(L*z-G)*d,F[b]=I*e,F[c]=H,q[l]=F.x,q[l+1]=F.y,q[l+2]=F.z,F[a]=0,F[b]=0,F[c]=0<m?1:-1,t[l]=F.x,t[l+1]=F.y,t[l+2]=F.z,f[r]=L/n,f[r+1]=1-E/M,l+=3,r+=2,g+=1;for(E=0;E<M;E++)for(L=0;L<n;L++)a=v+L+h*(E+1),b=v+(L+1)+h*(E+1),c=v+(L+1)+h*E,p[w]=v+L+h*E,p[w+1]=a,p[w+2]=c,p[w+3]=a,p[w+4]=b,p[w+5]=c,w+=6,N+=
6;k.addGroup(y,N,R);y+=N;v+=g}THREE.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};var k=this;d=Math.floor(d)||1;e=Math.floor(e)||1;g=Math.floor(g)||1;var m=0+(d+1)*(e+1)*2+(d+1)*(g+1)*2+(g+1)*(e+1)*2,n=6*(0+d*e*2+d*g*2+g*e*2),p=new (65535<n?Uint32Array:Uint16Array)(n),q=new Float32Array(3*m),t=new Float32Array(3*m),f=new Float32Array(2*m),l=0,r=0,w=0,v=0,y=0;h("z","y","x",-1,-1,c,b,a,g,e,0);h("z",
"y","x",1,-1,c,b,-a,g,e,1);h("x","z","y",1,1,a,c,b,d,g,2);h("x","z","y",1,-1,a,c,-b,d,g,3);h("x","y","z",1,-1,a,b,c,d,e,4);h("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(new THREE.BufferAttribute(p,1));this.addAttribute("position",new THREE.BufferAttribute(q,3));this.addAttribute("normal",new THREE.BufferAttribute(t,3));this.addAttribute("uv",new THREE.BufferAttribute(f,2))};THREE.BoxBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.BoxBufferGeometry.prototype.constructor=THREE.BoxBufferGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new THREE.CircleBufferGeometry(a,b,c,d))};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;
THREE.CircleBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),h=new Float32Array(3*e),e=new Float32Array(2*e);h[2]=1;e[0]=.5;e[1]=.5;for(var k=0,m=3,n=2;k<=b;k++,m+=3,n+=2){var p=c+k/b*d;g[m]=a*Math.cos(p);g[m+1]=a*Math.sin(p);h[m+2]=1;e[n]=(g[m]/a+1)/2;e[n+1]=(g[m+1]/a+1)/2}c=
[];for(m=1;m<=b;m++)c.push(m,m+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new THREE.BufferAttribute(g,3));this.addAttribute("normal",new THREE.BufferAttribute(h,3));this.addAttribute("uv",new THREE.BufferAttribute(e,2));this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;
THREE.CylinderBufferGeometry=function(a,b,c,d,e,g,h,k){function m(c){var e,g=new THREE.Vector2,m=new THREE.Vector3,p=0,q=!0===c?a:b,t=!0===c?1:-1;var F=v;for(e=1;e<=d;e++)l.setXYZ(v,0,z*t,0),r.setXYZ(v,0,t,0),g.x=.5,g.y=.5,w.setXY(v,g.x,g.y),v++;var G=v;for(e=0;e<=d;e++){var J=e/d*k+h,Q=Math.cos(J),J=Math.sin(J);m.x=q*J;m.y=z*t;m.z=q*Q;l.setXYZ(v,m.x,m.y,m.z);r.setXYZ(v,0,t,0);g.x=.5*Q+.5;g.y=.5*J*t+.5;w.setXY(v,g.x,g.y);v++}for(e=0;e<d;e++)g=F+e,m=G+e,!0===c?(f.setX(y,m),y++,f.setX(y,m+1)):(f.setX(y,
m+1),y++,f.setX(y,m)),y++,f.setX(y,g),y++,p+=3;n.addGroup(E,p,!0===c?1:2);E+=p}THREE.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};var n=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;g=void 0!==g?g:!1;h=void 0!==h?h:0;k=void 0!==k?k:2*Math.PI;var p=0;!1===g&&(0<a&&p++,0<b&&p++);var q=function(){var a=(d+1)*
(e+1);!1===g&&(a+=(d+1)*p+d*p);return a}(),t=function(){var a=d*e*6;!1===g&&(a+=d*p*3);return a}(),f=new THREE.BufferAttribute(new (65535<t?Uint32Array:Uint16Array)(t),1),l=new THREE.BufferAttribute(new Float32Array(3*q),3),r=new THREE.BufferAttribute(new Float32Array(3*q),3),w=new THREE.BufferAttribute(new Float32Array(2*q),2),v=0,y=0,F=[],z=c/2,E=0;(function(){var g,m,p=new THREE.Vector3,q=new THREE.Vector3,t=0,B=(b-a)/c;for(m=0;m<=e;m++){var M=[],R=m/e,S=R*(b-a)+a;for(g=0;g<=d;g++){var J=g/d;q.x=
S*Math.sin(J*k+h);q.y=-R*c+z;q.z=S*Math.cos(J*k+h);l.setXYZ(v,q.x,q.y,q.z);p.copy(q);if(0===a&&0===m||0===b&&m===e)p.x=Math.sin(J*k+h),p.z=Math.cos(J*k+h);p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*B).normalize();r.setXYZ(v,p.x,p.y,p.z);w.setXY(v,J,1-R);M.push(v);v++}F.push(M)}for(g=0;g<d;g++)for(m=0;m<e;m++)p=F[m+1][g],q=F[m+1][g+1],B=F[m][g+1],f.setX(y,F[m][g]),y++,f.setX(y,p),y++,f.setX(y,B),y++,f.setX(y,p),y++,f.setX(y,q),y++,f.setX(y,B),y++,t+=6;n.addGroup(E,t,0);E+=t})();!1===g&&(0<a&&m(!0),0<b&&m(!1));
this.setIndex(f);this.addAttribute("position",l);this.addAttribute("normal",r);this.addAttribute("uv",w)};THREE.CylinderBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.CylinderBufferGeometry.prototype.constructor=THREE.CylinderBufferGeometry;
THREE.CylinderGeometry=function(a,b,c,d,e,g,h,k){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};this.fromBufferGeometry(new THREE.CylinderBufferGeometry(a,b,c,d,e,g,h,k));this.mergeVertices()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;
THREE.ConeBufferGeometry=function(a,b,c,d,e,g,h){THREE.CylinderBufferGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,thetaStart:g,thetaLength:h}};THREE.ConeBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.ConeBufferGeometry.prototype.constructor=THREE.ConeBufferGeometry;
THREE.ConeGeometry=function(a,b,c,d,e,g,h){THREE.CylinderGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:g,thetaLength:h}};THREE.ConeGeometry.prototype=Object.create(THREE.CylinderGeometry.prototype);THREE.ConeGeometry.prototype.constructor=THREE.ConeGeometry;
THREE.EdgesGeometry=function(a,b){function c(a,b){return a-b}THREE.BufferGeometry.call(this);b=Math.cos(THREE.Math.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},g=["a","b","c"],h;a instanceof THREE.BufferGeometry?(h=new THREE.Geometry,h.fromBufferGeometry(a)):h=a.clone();h.mergeVertices();h.computeFaceNormals();a=h.vertices;h=h.faces;for(var k=0,m=h.length;k<m;k++)for(var n=h[k],p=0;3>p;p++){d[0]=n[g[p]];d[1]=n[g[(p+1)%3]];d.sort(c);var q=d.toString();void 0===e[q]?e[q]={vert1:d[0],vert2:d[1],face1:k,
face2:void 0}:e[q].face2=k}d=[];for(q in e)if(g=e[q],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=b)k=a[g.vert1],d.push(k.x),d.push(k.y),d.push(k.z),k=a[g.vert2],d.push(k.x),d.push(k.y),d.push(k.z);this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(d),3))};THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y,f=c.x-a.x,g=c.y-a.y;var h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g);h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,d>Number.EPSILON?
f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(c=-e,a=d,d=Math.sqrt(h)):(c=d,a=e,d=Math.sqrt(h/2));return new THREE.Vector2(c/d,a/d)}function e(a,b){for(D=a.length;0<=--D;){var c=D;var d=D-1;0>d&&(d=a.length-1);var e,g=f+2*p;for(e=0;e<g;e++){var h=S*e,k=S*(e+1),l=b+c+h,h=b+d+h,m=b+d+k,k=b+c+k,l=l+P,h=h+P,m=m+P,k=k+P;O.faces.push(new THREE.Face3(l,h,k,null,null,1));O.faces.push(new THREE.Face3(h,m,k,null,null,1));l=v.generateSideWallUV(O,
l,h,m,k);O.faceVertexUvs[0].push([l[0],l[1],l[3]]);O.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function g(a,b,c){O.vertices.push(new THREE.Vector3(a,b,c))}function h(a,b,c){a+=P;b+=P;c+=P;O.faces.push(new THREE.Face3(a,b,c,null,null,0));a=v.generateTopUV(O,a,b,c);O.faceVertexUvs[0].push(a)}var k=void 0!==b.amount?b.amount:100,m=void 0!==b.bevelThickness?b.bevelThickness:6,n=void 0!==b.bevelSize?b.bevelSize:m-2,p=void 0!==b.bevelSegments?b.bevelSegments:3,q=void 0!==b.bevelEnabled?b.bevelEnabled:!0,
t=void 0!==b.curveSegments?b.curveSegments:12,f=void 0!==b.steps?b.steps:1,l=b.extrudePath,r,w=!1,v=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,y,F,z,E;l&&(r=l.getSpacedPoints(f),w=!0,q=!1,y=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(l,f,!1),F=new THREE.Vector3,z=new THREE.Vector3,E=new THREE.Vector3);q||(n=m=p=0);var G,O=this,P=this.vertices.length,l=a.extractPoints(t),t=l.shape,L=l.holes;if(l=!THREE.ShapeUtils.isClockWise(t)){t=t.reverse();var I=
0;for(G=L.length;I<G;I++){var B=L[I];THREE.ShapeUtils.isClockWise(B)&&(L[I]=B.reverse())}l=!1}var M=THREE.ShapeUtils.triangulateShape(t,L),R=t;I=0;for(G=L.length;I<G;I++)B=L[I],t=t.concat(B);var S=t.length,J,Q=M.length,l=[],D=0;var H=R.length;a=H-1;for(b=D+1;D<H;D++,a++,b++)a===H&&(a=0),b===H&&(b=0),l[D]=d(R[D],R[a],R[b]);var C=[],N=l.concat();I=0;for(G=L.length;I<G;I++){B=L[I];var ka=[];D=0;H=B.length;a=H-1;for(b=D+1;D<H;D++,a++,b++)a===H&&(a=0),b===H&&(b=0),ka[D]=d(B[D],B[a],B[b]);C.push(ka);N=
N.concat(ka)}for(a=0;a<p;a++){H=a/p;var ha=m*(1-H);b=n*Math.sin(H*Math.PI/2);D=0;for(H=R.length;D<H;D++){var ga=c(R[D],l[D],b);g(ga.x,ga.y,-ha)}I=0;for(G=L.length;I<G;I++)for(B=L[I],ka=C[I],D=0,H=B.length;D<H;D++)ga=c(B[D],ka[D],b),g(ga.x,ga.y,-ha)}b=n;for(D=0;D<S;D++)ga=q?c(t[D],N[D],b):t[D],w?(z.copy(y.normals[0]).multiplyScalar(ga.x),F.copy(y.binormals[0]).multiplyScalar(ga.y),E.copy(r[0]).add(z).add(F),g(E.x,E.y,E.z)):g(ga.x,ga.y,0);for(H=1;H<=f;H++)for(D=0;D<S;D++)ga=q?c(t[D],N[D],b):t[D],w?
(z.copy(y.normals[H]).multiplyScalar(ga.x),F.copy(y.binormals[H]).multiplyScalar(ga.y),E.copy(r[H]).add(z).add(F),g(E.x,E.y,E.z)):g(ga.x,ga.y,k/f*H);for(a=p-1;0<=a;a--){H=a/p;ha=m*(1-H);b=n*Math.sin(H*Math.PI/2);D=0;for(H=R.length;D<H;D++)ga=c(R[D],l[D],b),g(ga.x,ga.y,k+ha);I=0;for(G=L.length;I<G;I++)for(B=L[I],ka=C[I],D=0,H=B.length;D<H;D++)ga=c(B[D],ka[D],b),w?g(ga.x,ga.y+r[f-1].y,r[f-1].x+ha):g(ga.x,ga.y,k+ha)}(function(){if(q){var a=0*S;for(D=0;D<Q;D++)J=M[D],h(J[2]+a,J[1]+a,J[0]+a);a=f+2*p;a*=
S;for(D=0;D<Q;D++)J=M[D],h(J[0]+a,J[1]+a,J[2]+a)}else{for(D=0;D<Q;D++)J=M[D],h(J[2],J[1],J[0]);for(D=0;D<Q;D++)J=M[D],h(J[0]+S*f,J[1]+S*f,J[2]+S*f)}})();(function(){var a=0;e(R,a);a+=R.length;I=0;for(G=L.length;I<G;I++)B=L[I],e(B,a),a+=B.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new THREE.Vector2(b.x,b.y),new THREE.Vector2(c.x,c.y),new THREE.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e=this.vertices.length;a=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var g=a.shape,h=a.holes;if(!THREE.ShapeUtils.isClockWise(g))for(g=g.reverse(),a=0,b=h.length;a<b;a++){var k=h[a];THREE.ShapeUtils.isClockWise(k)&&(h[a]=k.reverse())}var m=THREE.ShapeUtils.triangulateShape(g,h);a=0;for(b=h.length;a<b;a++)k=h[a],g=g.concat(k);
h=g.length;b=m.length;for(a=0;a<h;a++)k=g[a],this.vertices.push(new THREE.Vector3(k.x,k.y,0));for(a=0;a<b;a++)h=m[a],g=h[0]+e,k=h[1]+e,h=h[2]+e,this.faces.push(new THREE.Face3(g,k,h,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,g,k,h))};
THREE.LatheBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=THREE.Math.clamp(d,0,2*Math.PI);for(var e=(b+1)*a.length,g=b*a.length*6,h=new THREE.BufferAttribute(new (65535<g?Uint32Array:Uint16Array)(g),1),k=new THREE.BufferAttribute(new Float32Array(3*e),3),m=new THREE.BufferAttribute(new Float32Array(2*e),2),n=0,p=0,q=1/b,t=new THREE.Vector3,f=new THREE.Vector2,
e=0;e<=b;e++)for(var g=c+e*q*d,l=Math.sin(g),r=Math.cos(g),g=0;g<=a.length-1;g++)t.x=a[g].x*l,t.y=a[g].y,t.z=a[g].x*r,k.setXYZ(n,t.x,t.y,t.z),f.x=e/b,f.y=g/(a.length-1),m.setXY(n,f.x,f.y),n++;for(e=0;e<b;e++)for(g=0;g<a.length-1;g++)c=g+e*a.length,n=c+a.length,q=c+a.length+1,t=c+1,h.setX(p,c),p++,h.setX(p,n),p++,h.setX(p,t),p++,h.setX(p,n),p++,h.setX(p,q),p++,h.setX(p,t),p++;this.setIndex(h);this.addAttribute("position",k);this.addAttribute("uv",m);this.computeVertexNormals();if(d===2*Math.PI)for(d=
this.attributes.normal.array,h=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3,c=b*a.length*3,g=e=0;e<a.length;e++,g+=3)h.x=d[g+0],h.y=d[g+1],h.z=d[g+2],k.x=d[c+g+0],k.y=d[c+g+1],k.z=d[c+g+2],m.addVectors(h,k).normalize(),d[g+0]=d[c+g+0]=m.x,d[g+1]=d[c+g+1]=m.y,d[g+2]=d[c+g+2]=m.z};THREE.LatheBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.LatheBufferGeometry.prototype.constructor=THREE.LatheBufferGeometry;
THREE.LatheGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new THREE.LatheBufferGeometry(a,b,c,d));this.mergeVertices()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;
THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a,b,c,d))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;
THREE.PlaneBufferGeometry=function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var h=c+1,k=d+1,m=a/c,n=b/d;b=new Float32Array(h*k*3);a=new Float32Array(h*k*3);for(var p=new Float32Array(h*k*2),q=0,t=0,f=0;f<k;f++)for(var l=f*n-g,r=0;r<h;r++)b[q]=r*m-e,b[q+1]=-l,a[q+2]=1,p[t]=r/c,p[t+1]=1-f/d,q+=3,t+=2;q=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(f=0;f<d;f++)for(r=0;r<c;r++)g=r+h*(f+1),k=r+1+h*(f+1),m=r+1+h*f,e[q]=r+h*f,e[q+1]=g,e[q+2]=m,e[q+3]=g,e[q+4]=k,e[q+5]=m,q+=6;this.setIndex(new THREE.BufferAttribute(e,1));this.addAttribute("position",new THREE.BufferAttribute(b,3));this.addAttribute("normal",new THREE.BufferAttribute(a,3));this.addAttribute("uv",new THREE.BufferAttribute(p,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;
THREE.RingBufferGeometry=function(a,b,c,d,e,g){THREE.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||20;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var h=(c+1)*(d+1),k=c*d*6,k=new THREE.BufferAttribute(new (65535<k?Uint32Array:Uint16Array)(k),1),m=new THREE.BufferAttribute(new Float32Array(3*h),3),n=new THREE.BufferAttribute(new Float32Array(3*
h),3),h=new THREE.BufferAttribute(new Float32Array(2*h),2),p=0,q=0,t=a,f=(b-a)/d,l=new THREE.Vector3,r=new THREE.Vector2,w;for(a=0;a<=d;a++){for(w=0;w<=c;w++){var v=e+w/c*g;l.x=t*Math.cos(v);l.y=t*Math.sin(v);m.setXYZ(p,l.x,l.y,l.z);n.setXYZ(p,0,0,1);r.x=(l.x/b+1)/2;r.y=(l.y/b+1)/2;h.setXY(p,r.x,r.y);p++}t+=f}for(a=0;a<d;a++)for(b=a*(c+1),w=0;w<c;w++)e=v=w+b,g=v+c+1,p=v+c+2,v+=1,k.setX(q,e),q++,k.setX(q,g),q++,k.setX(q,p),q++,k.setX(q,e),q++,k.setX(q,p),q++,k.setX(q,v),q++;this.setIndex(k);this.addAttribute("position",
m);this.addAttribute("normal",n);this.addAttribute("uv",h)};THREE.RingBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingBufferGeometry.prototype.constructor=THREE.RingBufferGeometry;THREE.RingGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};this.fromBufferGeometry(new THREE.RingBufferGeometry(a,b,c,d,e,g))};
THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.SphereGeometry=function(a,b,c,d,e,g,h){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new THREE.SphereBufferGeometry(a,b,c,d,e,g,h))};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;
THREE.SphereBufferGeometry=function(a,b,c,d,e,g,h){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;for(var k=g+h,m=(b+1)*(c+1),n=new THREE.BufferAttribute(new Float32Array(3*m),3),p=new THREE.BufferAttribute(new Float32Array(3*
m),3),m=new THREE.BufferAttribute(new Float32Array(2*m),2),q=0,t=[],f=new THREE.Vector3,l=0;l<=c;l++){for(var r=[],w=l/c,v=0;v<=b;v++){var y=v/b,F=-a*Math.cos(d+y*e)*Math.sin(g+w*h),z=a*Math.cos(g+w*h),E=a*Math.sin(d+y*e)*Math.sin(g+w*h);f.set(F,z,E).normalize();n.setXYZ(q,F,z,E);p.setXYZ(q,f.x,f.y,f.z);m.setXY(q,y,1-w);r.push(q);q++}t.push(r)}d=[];for(l=0;l<c;l++)for(v=0;v<b;v++)e=t[l][v+1],h=t[l][v],q=t[l+1][v],f=t[l+1][v+1],(0!==l||0<g)&&d.push(e,h,f),(l!==c-1||k<Math.PI)&&d.push(h,q,f);this.setIndex(new (65535<
n.count?THREE.Uint32Attribute:THREE.Uint16Attribute)(d,1));this.addAttribute("position",n);this.addAttribute("normal",p);this.addAttribute("uv",m);this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;
THREE.TextGeometry=function(a,b){b=b||{};var c=b.font;if(!1===c instanceof THREE.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Geometry;c=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b);this.type="TextGeometry"};
THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TextGeometry.prototype.constructor=THREE.TextGeometry;
THREE.TorusBufferGeometry=function(a,b,c,d,e){THREE.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var g=(c+1)*(d+1),h=c*d*6,h=new (65535<h?Uint32Array:Uint16Array)(h),k=new Float32Array(3*g),m=new Float32Array(3*g),g=new Float32Array(2*g),n=0,p=0,q=0,t=new THREE.Vector3,f=new THREE.Vector3,l=new THREE.Vector3,r,w;for(r=0;r<=c;r++)for(w=0;w<=d;w++){var v=
w/d*e,y=r/c*Math.PI*2;f.x=(a+b*Math.cos(y))*Math.cos(v);f.y=(a+b*Math.cos(y))*Math.sin(v);f.z=b*Math.sin(y);k[n]=f.x;k[n+1]=f.y;k[n+2]=f.z;t.x=a*Math.cos(v);t.y=a*Math.sin(v);l.subVectors(f,t).normalize();m[n]=l.x;m[n+1]=l.y;m[n+2]=l.z;g[p]=w/d;g[p+1]=r/c;n+=3;p+=2}for(r=1;r<=c;r++)for(w=1;w<=d;w++)a=(d+1)*(r-1)+w-1,b=(d+1)*(r-1)+w,e=(d+1)*r+w,h[q]=(d+1)*r+w-1,h[q+1]=a,h[q+2]=e,h[q+3]=a,h[q+4]=b,h[q+5]=e,q+=6;this.setIndex(new THREE.BufferAttribute(h,1));this.addAttribute("position",new THREE.BufferAttribute(k,
3));this.addAttribute("normal",new THREE.BufferAttribute(m,3));this.addAttribute("uv",new THREE.BufferAttribute(g,2))};THREE.TorusBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusBufferGeometry.prototype.constructor=THREE.TorusBufferGeometry;
THREE.TorusGeometry=function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new THREE.TorusBufferGeometry(a,b,c,d,e))};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;
THREE.TorusKnotBufferGeometry=function(a,b,c,d,e,g){function h(a,b,c,d,e){var f=Math.cos(a),g=Math.sin(a);a*=c/b;b=Math.cos(a);e.x=d*(2+b)*.5*f;e.y=d*(2+b)*g*.5;e.z=d*Math.sin(a)*.5}THREE.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;g=g||3;var k=(d+1)*(c+1),m=d*c*6,m=new THREE.BufferAttribute(new (65535<m?Uint32Array:Uint16Array)(m),1),n=new THREE.BufferAttribute(new Float32Array(3*
k),3),p=new THREE.BufferAttribute(new Float32Array(3*k),3),k=new THREE.BufferAttribute(new Float32Array(2*k),2),q,t=0,f=0,l=new THREE.Vector3,r=new THREE.Vector3,w=new THREE.Vector2,v=new THREE.Vector3,y=new THREE.Vector3,F=new THREE.Vector3,z=new THREE.Vector3,E=new THREE.Vector3;for(q=0;q<=c;++q){var G=q/c*e*Math.PI*2;h(G,e,g,a,v);h(G+.01,e,g,a,y);z.subVectors(y,v);E.addVectors(y,v);F.crossVectors(z,E);E.crossVectors(F,z);F.normalize();E.normalize();for(G=0;G<=d;++G){var O=G/d*Math.PI*2,P=-b*Math.cos(O),
O=b*Math.sin(O);l.x=v.x+(P*E.x+O*F.x);l.y=v.y+(P*E.y+O*F.y);l.z=v.z+(P*E.z+O*F.z);n.setXYZ(t,l.x,l.y,l.z);r.subVectors(l,v).normalize();p.setXYZ(t,r.x,r.y,r.z);w.x=q/c;w.y=G/d;k.setXY(t,w.x,w.y);t++}}for(G=1;G<=c;G++)for(q=1;q<=d;q++)a=(d+1)*G+(q-1),b=(d+1)*G+q,e=(d+1)*(G-1)+q,m.setX(f,(d+1)*(G-1)+(q-1)),f++,m.setX(f,a),f++,m.setX(f,e),f++,m.setX(f,a),f++,m.setX(f,b),f++,m.setX(f,e),f++;this.setIndex(m);this.addAttribute("position",n);this.addAttribute("normal",p);this.addAttribute("uv",k)};
THREE.TorusKnotBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.TorusKnotBufferGeometry.prototype.constructor=THREE.TorusKnotBufferGeometry;
THREE.TorusKnotGeometry=function(a,b,c,d,e,g,h){THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};void 0!==h&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new THREE.TorusKnotBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;
THREE.TubeGeometry=function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||THREE.TubeGeometry.NoTaper;var h=[],k=b+1,m=new THREE.Vector3;var n=new THREE.TubeGeometry.FrenetFrames(a,b,e);var p=n.normals;var q=n.binormals;this.tangents=n.tangents;this.normals=p;this.binormals=q;for(n=0;n<k;n++){h[n]=[];var t=n/(k-1);var f=a.getPointAt(t);var l=p[n];var r=q[n];var w=c*g(t);
for(t=0;t<d;t++){var v=t/d*2*Math.PI;var y=-w*Math.cos(v);v=w*Math.sin(v);m.copy(f);m.x+=y*l.x+v*r.x;m.y+=y*l.y+v*r.y;m.z+=y*l.z+v*r.z;h[n][t]=this.vertices.push(new THREE.Vector3(m.x,m.y,m.z))-1}}for(n=0;n<b;n++)for(t=0;t<d;t++)g=e?(n+1)%b:n+1,k=(t+1)%d,a=h[n][t],c=h[g][t],g=h[g][k],k=h[n][k],m=new THREE.Vector2(n/b,t/d),p=new THREE.Vector2((n+1)/b,t/d),q=new THREE.Vector2((n+1)/b,(t+1)/d),l=new THREE.Vector2(n/b,(t+1)/d),this.faces.push(new THREE.Face3(a,c,k)),this.faceVertexUvs[0].push([m,p,l]),
this.faces.push(new THREE.Face3(c,g,k)),this.faceVertexUvs[0].push([p.clone(),q,l.clone()]);this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.NoTaper=function(a){return 1};THREE.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
THREE.TubeGeometry.FrenetFrames=function(a,b,c){var d=new THREE.Vector3,e=[],g=[],h=[],k=new THREE.Vector3,m=new THREE.Matrix4;b+=1;var n;this.tangents=e;this.normals=g;this.binormals=h;for(n=0;n<b;n++){var p=n/(b-1);e[n]=a.getTangentAt(p);e[n].normalize()}g[0]=new THREE.Vector3;h[0]=new THREE.Vector3;a=Number.MAX_VALUE;n=Math.abs(e[0].x);p=Math.abs(e[0].y);var q=Math.abs(e[0].z);n<=a&&(a=n,d.set(1,0,0));p<=a&&(a=p,d.set(0,1,0));q<=a&&d.set(0,0,1);k.crossVectors(e[0],d).normalize();g[0].crossVectors(e[0],
k);h[0].crossVectors(e[0],g[0]);for(n=1;n<b;n++)g[n]=g[n-1].clone(),h[n]=h[n-1].clone(),k.crossVectors(e[n-1],e[n]),k.length()>Number.EPSILON&&(k.normalize(),d=Math.acos(THREE.Math.clamp(e[n-1].dot(e[n]),-1,1)),g[n].applyMatrix4(m.makeRotationAxis(k,d))),h[n].crossVectors(e[n],g[n]);if(c)for(d=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(k.crossVectors(g[0],g[b-1]))&&(d=-d),n=1;n<b;n++)g[n].applyMatrix4(m.makeRotationAxis(e[n],d*n)),h[n].crossVectors(e[n],g[n])};
THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=m.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new THREE.Vector2(c,1-a);return b}function g(a,b,c){var d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]);m.faces.push(d);w.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(w.z,-w.x);m.faceVertexUvs[0].push([k(a.uv,a,d),k(b.uv,b,d),k(c.uv,c,d)])}function h(a,
b){b=Math.pow(2,b);var c=e(m.vertices[a.a]),d=e(m.vertices[a.b]);a=e(m.vertices[a.c]);for(var f=[],h=0;h<=b;h++){f[h]=[];for(var k=e(c.clone().lerp(a,h/b)),l=e(d.clone().lerp(a,h/b)),n=b-h,p=0;p<=n;p++)f[h][p]=0===p&&h===b?k:e(k.clone().lerp(l,p/n))}for(h=0;h<b;h++)for(p=0;p<2*(b-h)-1;p++)c=Math.floor(p/2),0===p%2?g(f[h][c+1],f[h+1][c],f[h][c]):g(f[h][c+1],f[h+1][c+1],f[h+1][c])}function k(a,b,c){0>c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/2/Math.PI+.5,
a.y));return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var m=this,n=0,p=a.length;n<p;n+=3)e(new THREE.Vector3(a[n],a[n+1],a[n+2]));a=this.vertices;for(var q=[],t=n=0,p=b.length;n<p;n+=3,t++){var f=a[b[n]];var l=a[b[n+1]],r=a[b[n+2]];q[t]=new THREE.Face3(f.index,l.index,r.index,[f.clone(),l.clone(),r.clone()])}for(var w=new THREE.Vector3,n=0,p=q.length;n<p;n++)h(q[n],d);n=0;for(p=this.faceVertexUvs[0].length;n<
p;n++)b=this.faceVertexUvs[0][n],d=b[0].x,a=b[1].x,q=b[2].x,t=Math.max(d,a,q),f=Math.min(d,a,q),.9<t&&.1>f&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>q&&(b[2].x+=1));n=0;for(p=this.vertices.length;n<p;n++)this.vertices[n].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,c)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;
THREE.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,
12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;
THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);
THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry;THREE.OctahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry;
THREE.TetrahedronGeometry=function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,g=this.faceVertexUvs[0],h,k,m=b+1;for(h=0;h<=c;h++){var n=h/c;for(k=0;k<=b;k++){var p=k/b;p=a(p,n);d.push(p)}}for(h=0;h<c;h++)for(k=0;k<b;k++){a=h*m+k;d=h*m+k+1;n=(h+1)*m+k+1;p=(h+1)*m+k;var q=new THREE.Vector2(k/b,h/c);var t=new THREE.Vector2((k+1)/b,h/c);var f=new THREE.Vector2((k+1)/b,(h+1)/c);var l=new THREE.Vector2(k/b,(h+
1)/c);e.push(new THREE.Face3(a,d,p));g.push([q,t,l]);e.push(new THREE.Face3(d,n,p));g.push([t.clone(),f,l.clone()])}this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;
THREE.WireframeGeometry=function(a){function b(a,b){return a-b}THREE.BufferGeometry.call(this);var c=[0,0],d={},e=["a","b","c"];if(a instanceof THREE.Geometry){var g=a.vertices;var h=a.faces;var k=0;var m=new Uint32Array(6*h.length);a=0;for(var n=h.length;a<n;a++)for(var p=h[a],q=0;3>q;q++){c[0]=p[e[q]];c[1]=p[e[(q+1)%3]];c.sort(b);var t=c.toString();void 0===d[t]&&(m[2*k]=c[0],m[2*k+1]=c[1],d[t]=!0,k++)}c=new Float32Array(6*k);a=0;for(n=k;a<n;a++)for(q=0;2>q;q++)d=g[m[2*a+q]],k=6*a+3*q,c[k+0]=d.x,
c[k+1]=d.y,c[k+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(a instanceof THREE.BufferGeometry){if(null!==a.index){n=a.index.array;g=a.attributes.position;e=a.groups;k=0;0===e.length&&a.addGroup(0,n.length);m=new Uint32Array(2*n.length);h=0;for(p=e.length;h<p;++h){a=e[h];q=a.start;t=a.count;a=q;for(var f=q+t;a<f;a+=3)for(q=0;3>q;q++)c[0]=n[a+q],c[1]=n[a+(q+1)%3],c.sort(b),t=c.toString(),void 0===d[t]&&(m[2*k]=c[0],m[2*k+1]=c[1],d[t]=!0,k++)}c=new Float32Array(6*k);a=
0;for(n=k;a<n;a++)for(q=0;2>q;q++)k=6*a+3*q,d=m[2*a+q],c[k+0]=g.getX(d),c[k+1]=g.getY(d),c[k+2]=g.getZ(d)}else for(g=a.attributes.position.array,k=g.length/3,m=k/3,c=new Float32Array(6*k),a=0,n=m;a<n;a++)for(q=0;3>q;q++)k=18*a+6*q,m=9*a+3*q,c[k+0]=g[m],c[k+1]=g[m+1],c[k+2]=g[m+2],d=9*a+(q+1)%3*3,c[k+3]=g[d],c[k+4]=g[d+1],c[k+5]=g[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var b=new THREE.CylinderBufferGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,g,h,k){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===h&&(h=.2*e);void 0===k&&(k=.2*h);this.position.copy(d);this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:g}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new THREE.Mesh(b,
new THREE.MeshBasicMaterial({color:g}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,h,k)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;
THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};
THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};THREE.BoxHelper=function(a,b){void 0===b&&(b=16776960);var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new THREE.BufferGeometry;e.setIndex(new THREE.BufferAttribute(c,1));e.addAttribute("position",new THREE.BufferAttribute(d,3));THREE.LineSegments.call(this,e,new THREE.LineBasicMaterial({color:b}));void 0!==a&&this.update(a)};
THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.BoxHelper.prototype.constructor=THREE.BoxHelper;
THREE.BoxHelper.prototype.update=function(){var a=new THREE.Box3;return function(b){b instanceof THREE.Box3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
THREE.BoundingBoxHelper=function(a,b){b=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:b,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new THREE.Vector3);d.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var d=new THREE.Geometry,e=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=
!1;this.pointMap=g;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;
THREE.CameraHelper.prototype.update=function(){function a(a,h,k,m){d.set(h,k,m).unproject(e);a=c[a];if(void 0!==a)for(h=0,k=a.length;h<k;h++)b.vertices[a[h]].copy(d)}var b,c,d=new THREE.Vector3,e=new THREE.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,
-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new THREE.LineBasicMaterial({fog:!1});this.add(new THREE.Line(a,b));a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3));this.add(new THREE.Line(a,b));
this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;THREE.DirectionalLightHelper.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);e.scale.z=c.length()}}();
THREE.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(a.geometry,c),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;
THREE.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=
!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;
THREE.FaceNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry,h=g.vertices,g=g.faces,k=0,m=0,n=g.length;m<n;m++){var p=g[m],q=p.normal;a.copy(h[p.a]).add(h[p.b]).add(h[p.c]).divideScalar(3).applyMatrix4(d);b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);
e.setXYZ(k,a.x,a.y,a.z);k+=1;e.setXYZ(k,b.x,b.y,b.z);k+=1}e.needsUpdate=!0;return this}}();
THREE.GridHelper=function(a,b,c,d){b=b||1;c=new THREE.Color(void 0!==c?c:4473924);d=new THREE.Color(void 0!==d?d:8947848);for(var e=b/2,g=2*a/b,h=[],k=[],m=0,n=0,p=-a;m<=b;m++,p+=g){h.push(-a,0,p,a,0,p);h.push(p,0,-a,p,0,a);var q=m===e?c:d;q.toArray(k,n);n+=3;q.toArray(k,n);n+=3;q.toArray(k,n);n+=3;q.toArray(k,n);n+=3}a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute(h,3));a.addAttribute("color",new THREE.Float32Attribute(k,3));h=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});
THREE.LineSegments.call(this,a,h)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.GridHelper.prototype.constructor=THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
THREE.HemisphereLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];a=new THREE.SphereGeometry(b,4,2);a.rotateX(-Math.PI/2);for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(a,b);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();a=new THREE.SphereBufferGeometry(b,4,2);b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof THREE.Bone&&(b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3),b.colors.push(new THREE.Color(0,0,1)),b.colors.push(new THREE.Color(0,1,0)));b.dynamic=!0;c=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;
this.matrixAutoUpdate=!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var b=[];a instanceof THREE.Bone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return b};
THREE.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new THREE.Matrix4).getInverse(this.root.matrixWorld),c=new THREE.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof THREE.Bone&&(c.multiplyMatrices(b,g.matrixWorld),a.vertices[d].setFromMatrixPosition(c),c.multiplyMatrices(b,g.parent.matrixWorld),a.vertices[d+1].setFromMatrixPosition(c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.BufferGeometry;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,g=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(g),Math.sin(g),1)}a.addAttribute("position",new THREE.Float32Attribute(b,3));b=new THREE.LineBasicMaterial({fog:!1});this.cone=new THREE.LineSegments(a,
b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof THREE.Geometry?b=3*c.faces.length:c instanceof THREE.BufferGeometry&&(b=c.attributes.normal.count);c=new THREE.BufferGeometry;b=new THREE.Float32Attribute(6*b,3);c.addAttribute("position",b);THREE.LineSegments.call(this,c,new THREE.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;
THREE.VertexNormalsHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,g=this.geometry.attributes.position,h=this.object.geometry;if(h instanceof THREE.Geometry)for(var k=h.vertices,m=h.faces,n=h=0,p=m.length;n<p;n++)for(var q=m[n],t=0,f=q.vertexNormals.length;t<f;t++){var l=q.vertexNormals[t];a.copy(k[q[d[t]]]).applyMatrix4(e);
b.copy(l).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(h,a.x,a.y,a.z);h+=1;g.setXYZ(h,b.x,b.y,b.z);h+=1}else if(h instanceof THREE.BufferGeometry)for(d=h.attributes.position,k=h.attributes.normal,t=h=0,f=d.count;t<f;t++)a.set(d.getX(t),d.getY(t),d.getZ(t)).applyMatrix4(e),b.set(k.getX(t),k.getY(t),k.getZ(t)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(h,a.x,a.y,a.z),h+=1,g.setXYZ(h,b.x,b.y,b.z),h+=1;g.needsUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){b=void 0!==b?b:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(a.geometry),new THREE.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};
THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];a=this.geometry.morphTargets.length;this.createAnimation("__default",0,a-1,a/1);this.setAnimationWeight("__default",1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh;
THREE.MorphBlendMesh.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};
THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(a){for(var b,c,d=/([a-z]+)_?(\d+)/i,e,g={},h=this.geometry,k=0,m=h.morphTargets.length;k<m;k++)(c=h.morphTargets[k].name.match(d))&&1<c.length&&(b=c[1],g[b]||(g[b]={start:Infinity,end:-Infinity}),c=g[b],k<c.start&&(c.start=k),k>c.end&&(c.end=k),e||(e=b));for(b in g)c=g[b],this.createAnimation(b,c.start,c.end,a);this.firstAnimation=e};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){(a=this.animationsMap[a])&&(a.fps=b,a.duration=(a.end-a.start)/a.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){(a=this.animationsMap[a])&&(a.duration=b,a.fps=(a.end-a.start)/a.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){(a=this.animationsMap[a])&&(a.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){(a=this.animationsMap[a])&&(a.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;g!==d.currentFrame&&
(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*h,this.morphTargetInfluences[d.lastFrame]=(1-e)*h):this.morphTargetInfluences[d.currentFrame]=h}}};var Stats=function(){var a=Date.now(),b=a,c=0,d=Infinity,e=0,g=0,h=Infinity,k=0,m=0,n=0,p=document.createElement("div");p.id="stats";p.addEventListener("mousedown",function(a){a.preventDefault();y(++n%2)},!1);p.style.cssText="width:80px;opacity:0.9;cursor:pointer";var q=document.createElement("div");q.id="fps";q.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";p.appendChild(q);var t=document.createElement("div");t.id="fpsText";t.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
t.innerHTML="FPS";q.appendChild(t);var f=document.createElement("div");f.id="fpsGraph";f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(q.appendChild(f);74>f.children.length;){var l=document.createElement("span");l.style.cssText="width:1px;height:30px;float:left;background-color:#113";f.appendChild(l)}var r=document.createElement("div");r.id="ms";r.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";p.appendChild(r);var w=document.createElement("div");
w.id="msText";w.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";w.innerHTML="MS";r.appendChild(w);var v=document.createElement("div");v.id="msGraph";v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(r.appendChild(v);74>v.children.length;)l=document.createElement("span"),l.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(l);var y=function(a){n=a;switch(n){case 0:q.style.display=
"block";r.style.display="none";break;case 1:q.style.display="none",r.style.display="block"}};return{REVISION:11,domElement:p,setMode:y,begin:function(){a=Date.now()},end:function(){var l=Date.now();c=l-a;d=Math.min(d,c);e=Math.max(e,c);w.textContent=c+" MS ("+d+"-"+e+")";var n=Math.min(30,30-c/200*30);v.appendChild(v.firstChild).style.height=n+"px";m++;l>b+1E3&&(g=Math.round(1E3*m/(l-b)),h=Math.min(h,g),k=Math.max(k,g),t.textContent=g+" FPS ("+h+"-"+k+")",n=Math.min(30,30-g/100*30),f.appendChild(f.firstChild).style.height=
n+"px",b=l,m=0);return l},update:function(){a=this.end()}}};var dat=dat||{};dat.gui=dat.gui||{};dat.utils=dat.utils||{};dat.controllers=dat.controllers||{};dat.dom=dat.dom||{};dat.color=dat.color||{};dat.utils.css=function(){return{load:function(a,b){b=b||document;var c=b.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=a;b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){b=b||document;var c=document.createElement("style");c.type="text/css";c.innerHTML=a;b.getElementsByTagName("head")[0].appendChild(c)}}}();
dat.utils.common=function(){var a=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(a){this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(b[c])||(a[c]=b[c])},this);return a},defaults:function(a){this.each(b.call(arguments,1),function(b){for(var c in b)this.isUndefined(a[c])&&(a[c]=b[c])},this);return a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),e=a.length-1;0<=e;e--)c=[a[e].apply(this,c)];return c[0]}},
each:function(b,d,e){if(a&&b.forEach===a)b.forEach(d,e);else if(b.length===b.length+0)for(var c=0,h=b.length;c<h&&!(c in b&&d.call(e,b[c],c)===this.BREAK);c++);else for(c in b)if(d.call(e,b[c],c)===this.BREAK)break},defer:function(a){setTimeout(a,0)},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){return a!==a},isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===
Object(a)},isNumber:function(a){return a===a+0},isString:function(a){return a===a+""},isBoolean:function(a){return!1===a||!0===a},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}}}();
dat.controllers.Controller=function(a){var b=function(a,b){this.initialValue=a[b];this.domElement=document.createElement("div");this.object=a;this.property=b;this.__onFinishChange=this.__onChange=void 0};a.extend(b.prototype,{onChange:function(a){this.__onChange=a;return this},onFinishChange:function(a){this.__onFinishChange=a;return this},setValue:function(a){this.object[this.property]=a;this.__onChange&&this.__onChange.call(this,a);this.updateDisplay();return this},getValue:function(){return this.object[this.property]},
updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}});return b}(dat.utils.common);
dat.dom.dom=function(a){function b(b){if("0"===b||a.isUndefined(b))return 0;b=b.match(d);return a.isNull(b)?0:parseFloat(b[1])}var c={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(b,d){a.each(b,function(a){c[a]=d})});var d=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=
b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(b,c,d){a.isUndefined(c)&&(c=!0);a.isUndefined(d)&&(d=!0);b.style.position="absolute";c&&(b.style.left=0,b.style.right=0);d&&(b.style.top=0,b.style.bottom=0)},fakeEvent:function(b,d,e,m){e=e||{};var g=c[d];if(!g)throw Error("Event type "+d+" not supported.");var h=document.createEvent(g);switch(g){case "MouseEvents":h.initMouseEvent(d,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,
!1,!1,!1,0,null);break;case "KeyboardEvents":g=h.initKeyboardEvent||h.initKeyEvent;a.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});g(d,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:h.initEvent(d,e.bubbles||!1,e.cancelable||!0)}a.defaults(h,m);b.dispatchEvent(h)},bind:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c);return e},
unbind:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c);return e},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return e},removeClass:function(a,b){if(b){if(void 0!==a.className)if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/);b=c.indexOf(b);-1!=
b&&(c.splice(b,1),a.className=c.join(" "))}}else a.className=void 0;return e},hasClass:function(a,b){return RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||!1},getWidth:function(a){a=getComputedStyle(a);return b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){a=getComputedStyle(a);return b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b=
{left:0,top:0};if(a.offsetParent){do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent)}return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common);
dat.controllers.OptionController=function(a,b,c){var d=function(a,g,h){d.superclass.call(this,a,g);var e=this;this.__select=document.createElement("select");if(c.isArray(h)){var m={};c.each(h,function(a){m[a]=a});h=m}c.each(h,function(a,b){var c=document.createElement("option");c.innerHTML=b;c.setAttribute("value",a);e.__select.appendChild(c)});this.updateDisplay();b.bind(this.__select,"change",function(){e.setValue(this.options[this.selectedIndex].value)});this.domElement.appendChild(this.__select)};
d.superclass=a;c.extend(d.prototype,a.prototype,{setValue:function(a){a=d.superclass.prototype.setValue.call(this,a);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());return a},updateDisplay:function(){this.__select.value=this.getValue();return d.superclass.prototype.updateDisplay.call(this)}});return d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.NumberController=function(a,b){var c=function(a,e,g){c.superclass.call(this,a,e);g=g||{};this.__min=g.min;this.__max=g.max;this.__step=g.step;a=this.__impliedStep=b.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step;a=a.toString();this.__precision=-1<a.indexOf(".")?a.length-a.indexOf(".")-1:0};c.superclass=a;b.extend(c.prototype,a.prototype,{setValue:function(a){void 0!==this.__min&&a<this.__min?a=this.__min:
void 0!==this.__max&&a>this.__max&&(a=this.__max);void 0!==this.__step&&0!=a%this.__step&&(a=Math.round(a/this.__step)*this.__step);return c.superclass.prototype.setValue.call(this,a)},min:function(a){this.__min=a;return this},max:function(a){this.__max=a;return this},step:function(a){this.__step=a;return this}});return c}(dat.controllers.Controller,dat.utils.common);
dat.controllers.NumberControllerBox=function(a,b,c){var d=function(a,g,h){function e(){var a=parseFloat(p.__input.value);c.isNaN(a)||p.setValue(a)}function m(a){var b=q-a.clientY;p.setValue(p.getValue()+b*p.__impliedStep);q=a.clientY}function n(){b.unbind(window,"mousemove",m);b.unbind(window,"mouseup",n)}this.__truncationSuspended=!1;d.superclass.call(this,a,g,h);var p=this,q;this.__input=document.createElement("input");this.__input.setAttribute("type","text");b.bind(this.__input,"change",e);b.bind(this.__input,
"blur",function(){e();p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())});b.bind(this.__input,"mousedown",function(a){b.bind(window,"mousemove",m);b.bind(window,"mouseup",n);q=a.clientY});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(p.__truncationSuspended=!0,this.blur(),p.__truncationSuspended=!1)});this.updateDisplay();this.domElement.appendChild(this.__input)};d.superclass=a;c.extend(d.prototype,a.prototype,{updateDisplay:function(){var a=this.__input;if(this.__truncationSuspended)var b=
this.getValue();else{b=this.getValue();var c=Math.pow(10,this.__precision);b=Math.round(b*c)/c}a.value=b;return d.superclass.prototype.updateDisplay.call(this)}});return d}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common);
dat.controllers.NumberControllerSlider=function(a,b,c,d,e){var g=function(a,c,d,e,p){function h(a){a.preventDefault();var c=b.getOffset(f.__background),d=b.getWidth(f.__background);f.setValue(f.__min+(a.clientX-c.left)/(c.left+d-c.left)*(f.__max-f.__min));return!1}function k(){b.unbind(window,"mousemove",h);b.unbind(window,"mouseup",k);f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}g.superclass.call(this,a,c,{min:d,max:e,step:p});var f=this;this.__background=document.createElement("div");
this.__foreground=document.createElement("div");b.bind(this.__background,"mousedown",function(a){b.bind(window,"mousemove",h);b.bind(window,"mouseup",k);h(a)});b.addClass(this.__background,"slider");b.addClass(this.__foreground,"slider-fg");this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)};g.superclass=a;g.useDefaultStyles=function(){c.inject(e)};d.extend(g.prototype,a.prototype,{updateDisplay:function(){this.__foreground.style.width=
(this.getValue()-this.__min)/(this.__max-this.__min)*100+"%";return g.superclass.prototype.updateDisplay.call(this)}});return g}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}");
dat.controllers.FunctionController=function(a,b,c){var d=function(a,c,h){d.superclass.call(this,a,c);var e=this;this.__button=document.createElement("div");this.__button.innerHTML=void 0===h?"Fire":h;b.bind(this.__button,"click",function(a){a.preventDefault();e.fire();return!1});b.addClass(this.__button,"button");this.domElement.appendChild(this.__button)};d.superclass=a;c.extend(d.prototype,a.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this);this.__onFinishChange&&this.__onFinishChange.call(this,
this.getValue());this.getValue().call(this.object)}});return d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.BooleanController=function(a,b,c){var d=function(a,c){d.superclass.call(this,a,c);var e=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");b.bind(this.__checkbox,"change",function(){e.setValue(!e.__prev)},!1);this.domElement.appendChild(this.__checkbox);this.updateDisplay()};d.superclass=a;c.extend(d.prototype,a.prototype,{setValue:function(a){a=d.superclass.prototype.setValue.call(this,a);this.__onFinishChange&&
this.__onFinishChange.call(this,this.getValue());this.__prev=this.getValue();return a},updateDisplay:function(){!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1;return d.superclass.prototype.updateDisplay.call(this)}});return d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.color.toString=function(a){return function(b){if(1==b.a||a.isUndefined(b.a)){for(b=b.hex.toString(16);6>b.length;)b="0"+b;return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common);
dat.color.interpret=function(a,b){var c,d,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:a},SIX_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9]{6})$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:a},CSS_RGB:{read:function(a){a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a},CSS_RGBA:{read:function(a){a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=
a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&
b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){d=!1;
var a=1<arguments.length?b.toArray(arguments):arguments[0];b.each(e,function(e){if(e.litmus(a))return b.each(e.conversions,function(e,g){c=e.read(a);if(!1===d&&!1!==c)return d=c,c.conversionName=g,c.conversion=e,b.BREAK}),b.BREAK});return d}}(dat.color.toString,dat.utils.common);
dat.GUI=dat.gui.GUI=function(a,b,c,d,e,g,h,k,m,n,p,q,t,f,l){function r(a,b,c,g){if(void 0===b[c])throw Error("Object "+b+' has no property "'+c+'"');g.color?b=new p(b,c):(b=[b,c].concat(g.factoryArgs),b=d.apply(a,b));g.before instanceof e&&(g.before=g.before.__li);y(a,b);f.addClass(b.domElement,"c");c=document.createElement("span");f.addClass(c,"property-name");c.innerHTML=b.property;var h=document.createElement("div");h.appendChild(c);h.appendChild(b.domElement);g=w(a,h,g.before);f.addClass(g,D.CLASS_CONTROLLER_ROW);
f.addClass(g,typeof b.getValue());v(a,g,b);a.__controllers.push(b);return b}function w(a,b,c){var d=document.createElement("li");b&&d.appendChild(b);c?a.__ul.insertBefore(d,params.before):a.__ul.appendChild(d);a.onResize();return d}function v(a,b,c){c.__li=b;c.__gui=a;l.extend(c,{options:function(b){if(1<arguments.length)return c.remove(),r(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[l.toArray(arguments)]});if(l.isArray(b)||l.isObject(b))return c.remove(),r(a,c.object,c.property,
{before:c.__li.nextElementSibling,factoryArgs:[b]})},name:function(a){c.__li.firstElementChild.firstElementChild.innerHTML=a;return c},listen:function(){c.__gui.listen(c);return c},remove:function(){c.__gui.remove(c);return c}});if(c instanceof m){var d=new k(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});l.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],e=d[a];c[a]=d[a]=function(){var a=Array.prototype.slice.call(arguments);b.apply(c,a);return e.apply(d,a)}});
f.addClass(b,"has-slider");c.domElement.insertBefore(d.domElement,c.domElement.firstElementChild)}else if(c instanceof k){var e=function(b){return l.isNumber(c.__min)&&l.isNumber(c.__max)?(c.remove(),r(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):b};c.min=l.compose(e,c.min);c.max=l.compose(e,c.max)}else c instanceof g?(f.bind(b,"click",function(){f.fakeEvent(c.__checkbox,"click")}),f.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):
c instanceof h?(f.bind(b,"click",function(){f.fakeEvent(c.__button,"click")}),f.bind(b,"mouseover",function(){f.addClass(c.__button,"hover")}),f.bind(b,"mouseout",function(){f.removeClass(c.__button,"hover")})):c instanceof p&&(f.addClass(b,"color"),c.updateDisplay=l.compose(function(a){b.style.borderLeftColor=c.__color.toString();return a},c.updateDisplay),c.updateDisplay());c.setValue=l.compose(function(b){a.getRoot().__preset_select&&c.isModified()&&P(a.getRoot(),!0);return b},c.setValue)}function y(a,
b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e);e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])c=c[a.preset];else if(c[I])c=c[I];else return;c[d]&&void 0!==c[d][b.property]&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function F(a){var b=a.__save_row=document.createElement("li");f.addClass(a.domElement,"has-save");a.__ul.insertBefore(b,
a.__ul.firstChild);f.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";f.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";f.addClass(d,"button");f.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";f.addClass(e,"button");f.addClass(e,"save-as");var g=document.createElement("span");g.innerHTML="Revert";f.addClass(g,"button");f.addClass(g,"revert");var h=a.__preset_select=document.createElement("select");a.load&&
a.load.remembered?l.each(a.load.remembered,function(b,c){O(a,c,c==a.preset)}):O(a,I,!1);f.bind(h,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value});b.appendChild(h);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(g);if(B){b=document.getElementById("dg-save-locally");var k=document.getElementById("dg-local-explain");b.style.display="block";b=document.getElementById("dg-local-storage");"true"===
localStorage.getItem(document.location.href+".isLocal")&&b.setAttribute("checked","checked");var m=function(){k.style.display=a.useLocalStorage?"block":"none"};m();f.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage;m()})}var n=document.getElementById("dg-new-constructor");f.bind(n,"keydown",function(a){a.metaKey&&(67===a.which||67==a.keyCode)&&M.hide()});f.bind(c,"click",function(){n.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);M.show();n.focus();n.select()});f.bind(d,"click",
function(){a.save()});f.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});f.bind(g,"click",function(){a.revert()})}function z(a){function b(b){b.preventDefault();e=b.clientX;f.addClass(a.__closeButton,D.CLASS_DRAG);f.bind(window,"mousemove",c);f.bind(window,"mouseup",d);return!1}function c(b){b.preventDefault();a.width+=e-b.clientX;a.onResize();e=b.clientX;return!1}function d(){f.removeClass(a.__closeButton,D.CLASS_DRAG);f.unbind(window,"mousemove",c);f.unbind(window,
"mouseup",d)}a.__resize_handle=document.createElement("div");l.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;f.bind(a.__resize_handle,"mousedown",b);f.bind(a.__closeButton,"mousedown",b);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function E(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}
function G(a,b){var c={};l.each(a.__rememberedObjects,function(d,e){var f={};l.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f});return c}function O(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function P(a,b){a=a.__preset_select[a.__preset_select.selectedIndex];a.innerHTML=b?a.value+"*":a.value}function L(a){0!=a.length&&
q(function(){L(a)});l.each(a,function(a){a.updateDisplay()})}a.inject(c);var I="Default";try{var B="localStorage"in window&&null!==window.localStorage}catch(H){B=!1}var M,R=!0,S,J=!1,Q=[],D=function(a){function b(){localStorage.setItem(document.location.href+".gui",JSON.stringify(e.getSaveObject()))}function c(){var a=e.getRoot();a.width+=1;l.defer(function(){--a.width})}var d,e=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);
f.addClass(this.domElement,"dg");this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];a=a||{};a=l.defaults(a,{autoPlace:!0,width:D.DEFAULT_WIDTH});a=l.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace});l.isUndefined(a.load)?a.load={preset:I}:a.preset&&(a.load.preset=a.preset);l.isUndefined(a.parent)&&a.hideable&&Q.push(this);a.resizable=l.isUndefined(a.parent)&&a.resizable;a.autoPlace&&l.isUndefined(a.scrollable)&&
(a.scrollable=!0);var g=B&&"true"===localStorage.getItem(document.location.href+".isLocal");Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return e.parent?e.getRoot().preset:a.load.preset},set:function(b){e.parent?e.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=
b);e.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b;E(e,b)}},name:{get:function(){return a.name},set:function(b){a.name=b;h&&(h.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b;a.closed?f.addClass(e.__ul,D.CLASS_CLOSED):f.removeClass(e.__ul,D.CLASS_CLOSED);this.onResize();e.__closeButton&&(e.__closeButton.innerHTML=b?D.TEXT_OPEN:D.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return g},set:function(a){B&&
((g=a)?f.bind(window,"unload",b):f.unbind(window,"unload",b),localStorage.setItem(document.location.href+".isLocal",a))}}});if(l.isUndefined(a.parent))a.closed=!1,f.addClass(this.domElement,D.CLASS_MAIN),f.makeSelectable(this.domElement,!1),B&&g&&(e.useLocalStorage=!0,d=localStorage.getItem(document.location.href+".gui"))&&(a.load=JSON.parse(d)),this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=D.TEXT_CLOSED,f.addClass(this.__closeButton,D.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),
f.bind(this.__closeButton,"click",function(){e.closed=!e.closed});else{void 0===a.closed&&(a.closed=!0);var h=document.createTextNode(a.name);f.addClass(h,"controller-name");d=w(e,h);f.addClass(this.__ul,D.CLASS_CLOSED);f.addClass(d,"title");f.bind(d,"click",function(a){a.preventDefault();e.closed=!e.closed;return!1});a.closed||(this.closed=!1)}a.autoPlace&&(l.isUndefined(a.parent)&&(R&&(S=document.createElement("div"),f.addClass(S,"dg"),f.addClass(S,D.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(S),
R=!1),S.appendChild(this.domElement),f.addClass(this.domElement,D.CLASS_AUTO_PLACE)),this.parent||E(e,a.width));f.bind(window,"resize",function(){e.onResize()});f.bind(this.__ul,"webkitTransitionEnd",function(){e.onResize()});f.bind(this.__ul,"transitionend",function(){e.onResize()});f.bind(this.__ul,"oTransitionEnd",function(){e.onResize()});this.onResize();a.resizable&&z(this);e.getRoot();a.parent||c()};D.toggleHide=function(){J=!J;l.each(Q,function(a){a.domElement.style.zIndex=J?-999:999;a.domElement.style.opacity=
J?0:1})};D.CLASS_AUTO_PLACE="a";D.CLASS_AUTO_PLACE_CONTAINER="ac";D.CLASS_MAIN="main";D.CLASS_CONTROLLER_ROW="cr";D.CLASS_TOO_TALL="taller-than-window";D.CLASS_CLOSED="closed";D.CLASS_CLOSE_BUTTON="close-button";D.CLASS_DRAG="drag";D.DEFAULT_WIDTH=245;D.TEXT_CLOSED="Close Controls";D.TEXT_OPEN="Open Controls";f.bind(window,"keydown",function(a){"text"===document.activeElement.type||72!==a.which&&72!=a.keyCode||D.toggleHide()},!1);l.extend(D.prototype,{add:function(a,b){return r(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,
2)})},addColor:function(a,b){return r(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.slice(this.__controllers.indexOf(a),1);var b=this;l.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&S.removeChild(this.domElement)},addFolder:function(a){if(void 0!==this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace;this.load&&this.load.folders&&this.load.folders[a]&&
(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);b=new D(b);this.__folders[a]=b;a=w(this,b.domElement);f.addClass(a,"folder");return b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=f.getOffset(a.__ul).top,c=0;l.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=f.getHeight(b))});window.innerHeight-b-20<c?(f.addClass(a.domElement,D.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-
b-20+"px"):(f.removeClass(a.domElement,D.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&l.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){l.isUndefined(M)&&(M=new t,M.domElement.innerHTML=b);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;l.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&F(a);-1==
a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)});this.autoPlace&&E(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;a.closed=this.closed;0<this.__rememberedObjects.length&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=G(this));a.folders={};l.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()});return a},save:function(){this.load.remembered||(this.load.remembered=
{});this.load.remembered[this.preset]=G(this);P(this,!1)},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered[I]=G(this,!0));this.load.remembered[a]=G(this);this.preset=a;O(this,a,!0)},revert:function(a){l.each(this.__controllers,function(b){this.getRoot().load.remembered?y(a||this.getRoot(),b):b.setValue(b.initialValue)},this);l.each(this.__folders,function(a){a.revert(a)});a||P(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a);
b&&L(this.__listening)}});return D}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',
".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",
dat.controllers.factory=function(a,b,c,d,e,g,h){return function(k,m,n,p){var q=k[m];if(h.isArray(n)||h.isObject(n))return new a(k,m,n);if(h.isNumber(q))return h.isNumber(n)&&h.isNumber(p)?new c(k,m,n,p):new b(k,m,{min:n,max:p});if(h.isString(q))return new d(k,m);if(h.isFunction(q))return new e(k,m,"");if(h.isBoolean(q))return new g(k,m)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(a,b,c){var d=
function(a,c){function e(){g.setValue(g.__input.value)}d.superclass.call(this,a,c);var g=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");b.bind(this.__input,"keyup",e);b.bind(this.__input,"change",e);b.bind(this.__input,"blur",function(){g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()});this.updateDisplay();this.domElement.appendChild(this.__input)};d.superclass=a;c.extend(d.prototype,
a.prototype,{updateDisplay:function(){b.isActive(this.__input)||(this.__input.value=this.getValue());return d.superclass.prototype.updateDisplay.call(this)}});return d}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,
dat.controllers.ColorController=function(a,b,c,d,e){function g(a,b,c,d){a.style.background="";e.each(m,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function h(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";
a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var k=function(a,m){function n(a){r(a);b.bind(window,"mousemove",r);b.bind(window,
"mouseup",p)}function p(){b.unbind(window,"mousemove",r);b.unbind(window,"mouseup",p)}function f(){var a=d(this.value);!1!==a?(v.__color.__state=a,v.setValue(v.__color.toOriginal())):this.value=v.__color.toString()}function l(){b.unbind(window,"mousemove",w);b.unbind(window,"mouseup",l)}function r(a){a.preventDefault();var c=b.getWidth(v.__saturation_field),d=b.getOffset(v.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c;a=1-(a.clientY-d.top+document.body.scrollTop)/c;1<a?a=1:0>
a&&(a=0);1<e?e=1:0>e&&(e=0);v.__color.v=a;v.__color.s=e;v.setValue(v.__color.toOriginal());return!1}function w(a){a.preventDefault();var c=b.getHeight(v.__hue_field),d=b.getOffset(v.__hue_field);a=1-(a.clientY-d.top+document.body.scrollTop)/c;1<a?a=1:0>a&&(a=0);v.__color.h=360*a;v.setValue(v.__color.toOriginal());return!1}k.superclass.call(this,a,m);this.__color=new c(this.getValue());this.__temp=new c(0);var v=this;this.domElement=document.createElement("div");b.makeSelectable(this.domElement,!1);
this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");
this.__input.type="text";this.__input_textShadow="0 1px 1px ";b.bind(this.__input,"keydown",function(a){13===a.keyCode&&f.call(this)});b.bind(this.__input,"blur",f);b.bind(this.__selector,"mousedown",function(){b.addClass(this,"drag").bind(window,"mouseup",function(){b.removeClass(v.__selector,"drag")})});a=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});e.extend(this.__field_knob.style,
{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});e.extend(a.style,{width:"100%",height:"100%",
background:"none"});g(a,"top","rgba(0,0,0,0)","#000");e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});h(this.__hue_field);e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});b.bind(this.__saturation_field,"mousedown",n);b.bind(this.__field_knob,"mousedown",n);b.bind(this.__hue_field,"mousedown",function(a){w(a);b.bind(window,
"mousemove",w);b.bind(window,"mouseup",l)});this.__saturation_field.appendChild(a);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay()};k.superclass=a;e.extend(k.prototype,a.prototype,{updateDisplay:function(){var a=d(this.getValue());if(!1!==a){var b=!1;
e.each(c.COMPONENTS,function(c){if(!e.isUndefined(a[c])&&!e.isUndefined(this.__color.__state[c])&&a[c]!==this.__color.__state[c])return b=!0,{}},this);b&&e.extend(this.__color.__state,a)}e.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var h=.5>this.__color.v||.5<this.__color.s?255:0,k=255-h;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+h+
","+h+","+h+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;g(this.__saturation_field,"left","#fff",this.__temp.toString());e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+h+","+h+","+h+")",textShadow:this.__input_textShadow+"rgba("+k+","+k+","+k+",.7)"})}});var m=["-moz-","-o-","-webkit-","-ms-",""];return k}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(a,b,c,d){function e(a,
b,c){Object.defineProperty(a,b,{get:function(){if("RGB"===this.__state.space)return this.__state[b];h(this,b,c);return this.__state[b]},set:function(a){"RGB"!==this.__state.space&&(h(this,b,c),this.__state.space="RGB");this.__state[b]=a}})}function g(a,b){Object.defineProperty(a,b,{get:function(){if("HSV"===this.__state.space)return this.__state[b];k(this);return this.__state[b]},set:function(a){"HSV"!==this.__state.space&&(k(this),this.__state.space="HSV");this.__state[b]=a}})}function h(a,c,e){if("HEX"===
a.__state.space)a.__state[c]=b.component_from_hex(a.__state.hex,e);else if("HSV"===a.__state.space)d.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw"Corrupted color state";}function k(a){var c=b.rgb_to_hsv(a.r,a.g,a.b);d.extend(a.__state,{s:c.s,v:c.v});d.isNaN(c.h)?d.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=c.h}var m=function(){this.__state=a.apply(this,arguments);if(!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||
1};m.COMPONENTS="r g b h s v hex a".split(" ");d.extend(m.prototype,{toString:function(){return c(this)},toOriginal:function(){return this.__state.conversion.write(this)}});e(m.prototype,"r",2);e(m.prototype,"g",1);e(m.prototype,"b",0);g(m.prototype,"h");g(m.prototype,"s");g(m.prototype,"v");Object.defineProperty(m.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}});Object.defineProperty(m.prototype,"hex",{get:function(){this.__state.hex=b.rgb_to_hex(this.r,this.g,
this.b);return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});return m}(dat.color.interpret,dat.color.math=function(){var a;return{hsv_to_rgb:function(a,c,d){var b=a/60-Math.floor(a/60),g=d*(1-c),h=d*(1-b*c);c=d*(1-(1-b)*c);a=[[d,c,g],[h,d,g],[g,d,c],[g,h,d],[c,g,d],[d,g,h]][Math.floor(a/60)%6];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,c,d){var b=Math.min(a,c,d),g=Math.max(a,c,d),b=g-b;if(0==g)return{h:NaN,s:0,v:0};a=(a==g?(c-d)/b:c==g?2+(d-
a)/b:4+(a-c)/b)/6;0>a&&(a+=1);return{h:360*a,s:b/g,v:g/255}},rgb_to_hex:function(a,c,d){a=this.hex_with_component(0,2,a);a=this.hex_with_component(a,1,c);return this.hex_with_component(a,0,d)},component_from_hex:function(a,c){return a>>8*c&255},hex_with_component:function(b,c,d){return d<<(a=8*c)|b&~(255<<a)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}(),dat.dom.CenteredDiv=function(a,b){var c=function(){this.backgroundElement=document.createElement("div");b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"});a.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";this.domElement=
document.createElement("div");b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var c=this;a.bind(this.backgroundElement,"click",function(){c.hide()})};c.prototype.show=function(){var a=this;this.backgroundElement.style.display="block";this.domElement.style.display="block";this.domElement.style.opacity=
0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();b.defer(function(){a.backgroundElement.style.opacity=1;a.domElement.style.opacity=1;a.domElement.style.webkitTransform="scale(1)"})};c.prototype.hide=function(){var b=this,c=function(){b.domElement.style.display="none";b.backgroundElement.style.display="none";a.unbind(b.domElement,"webkitTransitionEnd",c);a.unbind(b.domElement,"transitionend",c);a.unbind(b.domElement,"oTransitionEnd",c)};a.bind(this.domElement,"webkitTransitionEnd",
c);a.bind(this.domElement,"transitionend",c);a.bind(this.domElement,"oTransitionEnd",c);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};c.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-a.getHeight(this.domElement)/2+"px"};return c}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);THREE.OrbitControls=function(a,b){function c(a){if(!1!==g.enabled){a.preventDefault();var b=g.domElement===document?g.domElement.body:g.domElement;if(I===L.ROTATE){if(!0===g.noRotate)return;k.set(a.clientX,a.clientY);m.subVectors(k,h);g.rotateLeft(2*Math.PI*m.x/b.clientWidth*g.rotateSpeed);g.rotateUp(2*Math.PI*m.y/b.clientHeight*g.rotateSpeed);h.copy(k)}else if(I===L.DOLLY){if(!0===g.noZoom)return;r.set(a.clientX,a.clientY);w.subVectors(r,l);0<w.y?g.dollyIn():0>w.y&&g.dollyOut();l.copy(r)}else if(I===
L.PAN){if(!0===g.noPan)return;p.set(a.clientX,a.clientY);q.subVectors(p,n);g.pan(q.x,q.y);n.copy(p)}I!==L.NONE&&g.update()}}function d(){!1!==g.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",d,!1),g.dispatchEvent(J),I=L.NONE)}function e(a){if(!1!==g.enabled&&!0!==g.noZoom&&I===L.NONE){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?g.dollyOut():0>b&&g.dollyIn();g.update();g.dispatchEvent(S);
g.dispatchEvent(J)}}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=!1;this.keys={LEFT:37,UP:38,
RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var g=this,h=new THREE.Vector2,k=new THREE.Vector2,m=new THREE.Vector2,n=new THREE.Vector2,p=new THREE.Vector2,q=new THREE.Vector2,t=new THREE.Vector3,f=new THREE.Vector3,l=new THREE.Vector2,r=new THREE.Vector2,w=new THREE.Vector2,v,y,F=0,z=0,E=1,G=new THREE.Vector3,O=new THREE.Vector3,P=new THREE.Quaternion,L={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},I=L.NONE;
this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var B=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),M=B.clone().inverse(),R={type:"change"},S={type:"start"},J={type:"end"};this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*g.autoRotateSpeed);z-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*g.autoRotateSpeed);F-=a};this.panLeft=function(a){var b=this.object.matrix.elements;t.set(b[0],b[1],b[2]);
t.multiplyScalar(-a);G.add(t)};this.panUp=function(a){var b=this.object.matrix.elements;t.set(b[4],b[5],b[6]);t.multiplyScalar(a);G.add(t)};this.pan=function(a,b){var c=g.domElement===document?g.domElement.body:g.domElement;if(g.object instanceof THREE.PerspectiveCamera){var d=g.object.position.clone().sub(g.target).length(),d=d*Math.tan(g.object.fov/2*Math.PI/180);g.panLeft(2*a*d/c.clientHeight);g.panUp(2*b*d/c.clientHeight)}else g.object instanceof THREE.OrthographicCamera?(g.panLeft(a*(g.object.right-
g.object.left)/c.clientWidth),g.panUp(b*(g.object.top-g.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,g.zoomSpeed));g.object instanceof THREE.PerspectiveCamera?E/=a:g.object instanceof THREE.OrthographicCamera?(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*a)),g.object.updateProjectionMatrix(),g.dispatchEvent(R)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};
this.dollyOut=function(a){void 0===a&&(a=Math.pow(.95,g.zoomSpeed));g.object instanceof THREE.PerspectiveCamera?E*=a:g.object instanceof THREE.OrthographicCamera?(g.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/a)),g.object.updateProjectionMatrix(),g.dispatchEvent(R)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.update=function(){var a=this.object.position;f.copy(a).sub(this.target);f.applyQuaternion(B);v=Math.atan2(f.x,
f.z);y=Math.atan2(Math.sqrt(f.x*f.x+f.z*f.z),f.y);this.autoRotate&&I===L.NONE&&this.rotateLeft(2*Math.PI/60/60*g.autoRotateSpeed);v+=z;y+=F;v=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,v));y=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,y));y=Math.max(1E-6,Math.min(Math.PI-1E-6,y));var b=f.length()*E,b=Math.max(this.minDistance,Math.min(this.maxDistance,b));this.target.add(G);f.x=b*Math.sin(y)*Math.sin(v);f.y=b*Math.cos(y);f.z=b*Math.sin(y)*Math.cos(v);f.applyQuaternion(M);
a.copy(this.target).add(f);this.object.lookAt(this.target);F=z=0;E=1;G.set(0,0,0);if(1E-6<O.distanceToSquared(this.object.position)||1E-6<8*(1-P.dot(this.object.quaternion)))this.dispatchEvent(R),O.copy(this.object.position),P.copy(this.object.quaternion)};this.reset=function(){I=L.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(R);this.update()};this.getPolarAngle=function(){return y};
this.getAzimuthalAngle=function(){return v};this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1);this.domElement.addEventListener("mousedown",function(a){if(!1!==g.enabled){a.preventDefault();if(a.button===g.mouseButtons.ORBIT){if(!0===g.noRotate)return;I=L.ROTATE;h.set(a.clientX,a.clientY)}else if(a.button===g.mouseButtons.ZOOM){if(!0===g.noZoom)return;I=L.DOLLY;l.set(a.clientX,a.clientY)}else if(a.button===g.mouseButtons.PAN){if(!0===g.noPan)return;I=L.PAN;n.set(a.clientX,
a.clientY)}I!==L.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",d,!1),g.dispatchEvent(S))}},!1);this.domElement.addEventListener("mousewheel",e,!1);this.domElement.addEventListener("DOMMouseScroll",e,!1);this.domElement.addEventListener("touchstart",function(a){if(!1!==g.enabled){switch(a.touches.length){case 1:if(!0===g.noRotate)return;I=L.TOUCH_ROTATE;h.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===g.noZoom)return;I=L.TOUCH_DOLLY;var b=a.touches[0].pageX-
a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;l.set(0,Math.sqrt(b*b+a*a));break;case 3:if(!0===g.noPan)return;I=L.TOUCH_PAN;n.set(a.touches[0].pageX,a.touches[0].pageY);break;default:I=L.NONE}I!==L.NONE&&g.dispatchEvent(S)}},!1);this.domElement.addEventListener("touchend",function(){!1!==g.enabled&&(g.dispatchEvent(J),I=L.NONE)},!1);this.domElement.addEventListener("touchmove",function(a){if(!1!==g.enabled){a.preventDefault();a.stopPropagation();var b=g.domElement===document?g.domElement.body:
g.domElement;switch(a.touches.length){case 1:if(!0===g.noRotate)break;if(I!==L.TOUCH_ROTATE)break;k.set(a.touches[0].pageX,a.touches[0].pageY);m.subVectors(k,h);g.rotateLeft(2*Math.PI*m.x/b.clientWidth*g.rotateSpeed);g.rotateUp(2*Math.PI*m.y/b.clientHeight*g.rotateSpeed);h.copy(k);g.update();break;case 2:if(!0===g.noZoom)break;if(I!==L.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;r.set(0,Math.sqrt(b*b+a*a));w.subVectors(r,l);0<w.y?g.dollyOut():
0>w.y&&g.dollyIn();l.copy(r);g.update();break;case 3:if(!0===g.noPan)break;if(I!==L.TOUCH_PAN)break;p.set(a.touches[0].pageX,a.touches[0].pageY);q.subVectors(p,n);g.pan(q.x,q.y);n.copy(p);g.update();break;default:I=L.NONE}}},!1);window.addEventListener("keydown",function(a){if(!1!==g.enabled&&!0!==g.noKeys&&!0!==g.noPan)switch(a.keyCode){case g.keys.UP:g.pan(0,g.keyPanSpeed);g.update();break;case g.keys.BOTTOM:g.pan(0,-g.keyPanSpeed);g.update();break;case g.keys.LEFT:g.pan(g.keyPanSpeed,0);g.update();
break;case g.keys.RIGHT:g.pan(-g.keyPanSpeed,0),g.update()}},!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;var GLU={},gl;
(function(){this.setupGL=function(b){this.canvas=b;try{var c=this.canvas.getContext("webgl2",{preserveDrawingBuffer:!0,antialias:!0})}catch(d){this.fail(d.message+". This can't run in your browser.")}c||this.fail("Could not initialise WebGL");a=this.gl=c;0<=a.getSupportedExtensions().indexOf("EXT_frag_depth")&&((this.depthExt=a.getExtension("EXT_frag_depth"))||this.fail("Your platform does not support EXT_frag_depth"));0<=a.getSupportedExtensions().indexOf("EXT_color_buffer_float")&&((this.floatBufExt=
a.getExtension("EXT_color_buffer_float"))||this.fail("Your platform does not support EXT_color_buffer_float"));0<=a.getSupportedExtensions().indexOf("OES_texture_float_linear")&&((this.floatLinExt=a.getExtension("OES_texture_float_linear"))||this.fail("Your platform does not support OES_texture_float_linear"))};this.glTypeSize=function(b){switch(b){case a.BYTE:case a.UNSIGNED_BYTE:return 1;case a.SHORT:case a.UNSIGNED_SHORT:return 2;case a.INT:case a.UNSIGNED_INT:case a.FLOAT:return 4;default:return 0}};
this.resolveShaderSource=function(a){for(var b={},d=0;d<a.length;d++){var e=a[d];b[e]={v:Shaders[e+"-vertex-shader"],f:Shaders[e+"-fragment-shader"]}}return b};this.createProgram=function(b,c){var d=a.createProgram();a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);a.getProgramParameter(d,a.LINK_STATUS)||(trinity.link_error(a.getProgramInfoLog(d),a.getShaderInfoLog(c)+a.getShaderInfoLog(b)),d=null);return d};this.compileShaderSource=function(b,c,d){var e=a.createShader(d);a.shaderSource(e,
c);a.compileShader(e);return a.getShaderParameter(e,a.COMPILE_STATUS)?e:(trinity.compile_error(b,d==a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(e)),null)};this.Shader=function(b,c,d){shaderSource=c[b];vertSource=(" "+shaderSource.v).slice(1);fragSource=(" "+shaderSource.f).slice(1);if(null!=d)for(var e in d)d.hasOwnProperty(e)&&(vertSource=vertSource.replace(new RegExp(e,"g"),d[e]),fragSource=fragSource.replace(new RegExp(e,"g"),d[e]));c=GLU.compileShaderSource(b,vertSource,a.VERTEX_SHADER);
b=GLU.compileShaderSource(b,fragSource,a.FRAGMENT_SHADER);this.program=null;c&&b&&(this.program=GLU.createProgram(c,b));this.program&&!a.getProgramParameter(this.program,a.LINK_STATUS)&&(trinity.link_error(a.getProgramInfoLog(this.program),"failed to link"),this.program=null);this.uniforms={}};this.Shader.prototype.bind=function(){a.useProgram(this.program)};this.Shader.prototype.getProgram=function(){return this.program};this.Shader.prototype.getAttribLocation=function(b){return a.getAttribLocation(this.program,
b)};this.Shader.prototype.getUniformLocation=function(b){return a.getUniformLocation(this.program,b)};this.Shader.prototype.uniformIndex=function(b){b in this.uniforms||(this.uniforms[b]=a.getUniformLocation(this.program,b));return this.uniforms[b]};this.Shader.prototype.uniformTexture=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform1i(b,c.boundUnit)};this.Shader.prototype.uniformI=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform1i(b,c)};this.Shader.prototype.uniformF=function(b,c){b=this.uniformIndex(b);
-1!=b&&a.uniform1f(b,c)};this.Shader.prototype.uniform2F=function(b,c,d){b=this.uniformIndex(b);-1!=b&&a.uniform2f(b,c,d)};this.Shader.prototype.uniform1Fv=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform1fv(b,c)};this.Shader.prototype.uniform2Fv=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform2fv(b,c)};this.Shader.prototype.uniform3F=function(b,c,d,e){b=this.uniformIndex(b);-1!=b&&a.uniform3f(b,c,d,e)};this.Shader.prototype.uniform3Fv=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform3fv(b,
c)};this.Shader.prototype.uniform4F=function(b,c,d,e,g){b=this.uniformIndex(b);-1!=b&&a.uniform4F(b,c,d,e,g)};this.Shader.prototype.uniform4Fv=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniform4fv(b,c)};this.Shader.prototype.uniformMatrix4fv=function(b,c){b=this.uniformIndex(b);-1!=b&&a.uniformMatrix4fv(b,!1,c)};this.VertexBuffer=function(){this.attributes=[];this.elementSize=0};this.VertexBuffer.prototype.bind=function(){a.bindBuffer(a.ARRAY_BUFFER,this.glName)};this.VertexBuffer.prototype.addAttribute=
function(a,c,d,e){this.attributes.push({name:a,size:c,type:d,norm:e,offset:this.elementSize,index:-1});this.elementSize+=c*GLU.glTypeSize(d)};this.VertexBuffer.prototype.init=function(b){this.length=b;this.glName=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.glName);a.bufferData(a.ARRAY_BUFFER,this.length*this.elementSize,a.STATIC_DRAW)};this.VertexBuffer.prototype.copy=function(b){if(b.byteLength!=this.length*this.elementSize)throw Error("Resizing VBO during copy strongly discouraged");a.bufferData(a.ARRAY_BUFFER,
b,a.STATIC_DRAW)};this.VertexBuffer.prototype.draw=function(b,c,d){for(var e=0;e<this.attributes.length;++e)if(this.attributes[e].index=a.getAttribLocation(b.program,this.attributes[e].name),0<=this.attributes[e].index){var g=this.attributes[e];a.enableVertexAttribArray(g.index);a.vertexAttribPointer(g.index,g.size,g.type,g.norm,this.elementSize,g.offset)}a.drawArrays(c,0,d?d:this.length);for(e=0;e<this.attributes.length;++e)0<=this.attributes[e].index&&(a.disableVertexAttribArray(this.attributes[e].index),
this.attributes[e].index=-1)};this.Texture=function(b,c,d,e,g,h,k){this.width=b;this.height=c;this.coordMode=h?a.CLAMP_TO_EDGE:a.REPEAT;this.type=e?a.FLOAT:a.UNSIGNED_BYTE;this.internalformat=[a.R32F,a.RG32F,a.RGB32F,a.RGBA32F][d-1];this.format=[a.RED,a.RG,a.RGB,a.RGBA][d-1];this.interpMode=g?a.LINEAR:a.NEAREST;this.glName=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.glName);a.texImage2D(a.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.type,k);this.setFilter();this.boundUnit=
-1};this.Texture.prototype.copy=function(b){a.texImage2D(a.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.type,b);null!==b&&this.setFilter()};this.Texture.prototype.setFilter=function(){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this.coordMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this.coordMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.interpMode);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,this.interpMode)};this.Texture.prototype.bind=
function(b){a.activeTexture(a.TEXTURE0+b);a.bindTexture(a.TEXTURE_2D,this.glName);this.boundUnit=b};this.loadImageAndCreateTextureInfo=function(b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texImage2D(a.TEXTURE_2D,0,a.SRGB8,1,1,0,a.RGB,a.UNSIGNED_BYTE,new Uint8Array([0,0,255,255]));var e={width:1,height:1,texture:d,url:b},g=new Image;g.addEventListener("load",function(){e.width=g.width;e.height=g.height;e.url=b;e.tex=d;a.bindTexture(a.TEXTURE_2D,d);a.texImage2D(a.TEXTURE_2D,0,a.SRGB8,
a.RGB,a.UNSIGNED_BYTE,g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);c(e)});g.crossOrigin="";g.src=b;return e};this.RenderTarget=function(){this.glName=a.createFramebuffer()};this.RenderTarget.prototype.bind=function(){a.bindFramebuffer(a.FRAMEBUFFER,this.glName)};this.RenderTarget.prototype.unbind=function(){a.bindFramebuffer(a.FRAMEBUFFER,null)};this.RenderTarget.prototype.delete=
function(){a.deleteFramebuffer(this.glName)};this.RenderTarget.prototype.attachTexture=function(b,c){a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+c,a.TEXTURE_2D,b.glName,0)};this.RenderTarget.prototype.detachTexture=function(b){a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+b,a.TEXTURE_2D,null,0)};this.RenderTarget.prototype.drawBuffers=function(b){for(var c=[],d=0;d<b;++d)c.push(a.COLOR_ATTACHMENT0+d);a.drawBuffers(c)};this.fail=function(a){var b=document.createElement("p");
b.appendChild(document.createTextNode("[Trinity] error occurred:"));b.style.fontSize="32px";b.style.fontFamily="courier";b.style.color="red";b.style.position="absolute";b.style.top="0px";var d=document.createElement("p");d.className="warning-box";d.style.fontSize="24px";d.style.fontFamily="courier";d.style.position="absolute";d.style.top="40px";d.innerHTML="<pre>    "+a+"</pre>";a=document.createElement("div");a.className="center";a.appendChild(b);a.appendChild(d);document.getElementById("container").appendChild(a);
this.canvas.style.display="none";$(trinity.editor.getWrapperElement()).hide();$(trinity.error_editor.getWrapperElement()).hide();$("#toggle-code-button").hide();trinity.terminated=!0;throw Error("Terminating Trinity");};var a=this.gl}).apply(GLU);var _presets_table={"Basic plume":'\n{"RENDERER_STATE":{"Nraymarch":50,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":-0.022591910933594583,"sunLatitude":76.73485298771871,"sunLongitude":138.94571082309892,"colliderSpec":[0.5,0.5,0.5],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.2,"exposure":2.350729850942127,"gamma":1.8195271655405811,"saturation":1.025551675122873,"anisotropy":0.5438412313677659,"extinctionScale":-0.5959881967375598,"emissionScale":2.159026557340489,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":12,"vorticity_scale":0.4476323128992883,"Nx":128,"Ny":512,"Nz":128,"max_timesteps":200,"expansion":0.1},"SIMULATION_STATE":{"gravity":0.31523402185697563,"buoyancy":0.06192096857904879,"radiationLoss":0.999,"blast_height":0.1,"blast_radius":0.022516715846926834,"blast_velocity":100,"blast_heat_flux":81.0601770489366,"dust_inflow_rate":4.962346815110676,"dust_absorption":[0.24392018305823482,0.27436140371452433,0.013395718376239856],"dust_scattering":[0.7156281176719081,0.7156281176719081,0.7156281176719081],"TtoKelvin":97.94771393413171},"CAMERA_STATE":{"pos":[-624.0634897818458,283.27264122224386,553.0279493488317],"tar":[42.57196035861968,272.6939714310104,82.66879528244912],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"///////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation (velocity, temperature, and medium density/albedo)\\n// at time 0.0 (if unspecified, all quantities default to zero).\\n///////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<200.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field \\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emiss\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   \\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : \\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275)); \\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), \\n             vec3(1.0), \\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify the phase function of the scattering medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Plume + sphere collider I":'\n{"RENDERER_STATE":{"Nraymarch":32,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.1881091475283911,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[0.21568627450980393,0.21568627450980393,0.21568627450980393],"colliderRoughness":0.341872424239417,"exposure":2.350729850942127,"gamma":1.3232924840295135,"saturation":0.8601401146191838,"anisotropy":0.5438412313677659,"extinctionScale":-1.4065899672269264,"emissionScale":-0.54297934429073,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.11145774344228782,"Nx":128,"Ny":256,"Nz":128,"max_timesteps":500,"expansion":0},"SIMULATION_STATE":{"gravity":0.01407294740432927,"buoyancy":0.0056291789617317085,"radiationLoss":1,"blast_height":0.11764502834784088,"blast_radius":0.1,"blast_velocity":0,"blast_heat_flux":141.85530983563905,"dust_inflow_rate":9.569604234943904,"dust_absorption":[0.36759617341746326,0.3391003460207612,0.8235294117647058],"dust_scattering":[0.45146097654748174,0.6656546124793631,0.7549019607843137],"TtoKelvin":43.90759590150732,"collider_radius":0.46159267486200006},"CAMERA_STATE":{"pos":[302.4148626593571,225.416750761726,-301.17800376677013],"tar":[46.202378739626724,119.65020777952873,108.86732872268958],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.05,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n// Collision\\nuniform float collider_radius;            // {\\"name\\":\\"collider_radius\\",  \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01, \\"default\\":0.5}\\n\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<400.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n      \\tmediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n \\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdSphere(vec3 X, in vec3 C, float r) { return length(X-C) - r; }\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n\\t// (where the interior with SDF < 0.0 is a solid obstacle)\\n    return sdSphere(wsP, vec3(L.x/2.0, L.y/3.0, L.z/2.0), 0.5*L.x*collider_radius);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n             vec3(1.0),\\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Plume + sphere collider II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":-0.1549211593365456,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[1,0,0],"colliderRoughness":0.341872424239417,"exposure":2.350729850942127,"gamma":1.3232924840295135,"saturation":0.8601401146191838,"anisotropy":0.5438412313677659,"extinctionScale":-1.1363893770638036,"emissionScale":1.689831280444583,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.14193219677294505,"Nx":160,"Ny":200,"Nz":160,"max_timesteps":150,"expansion":0.06616462420147567},"SIMULATION_STATE":{"gravity":0.008271107038050412,"buoyancy":0.0270200590163122,"radiationLoss":0.9948359613554485,"blast_height":0.1,"blast_radius":0.07278574193484362,"blast_velocity":0,"blast_heat_flux":51.832270771782575,"dust_inflow_rate":4.962346815110676,"dust_absorption":[0.5247606104630443,0.5783451399962777,0.11897711296939269],"dust_scattering":[0.9411644381390155,0.6458367660244194,0.6458367660244194],"TtoKelvin":76.09418475006379,"collider_radius":0.3859849951090192},"CAMERA_STATE":{"pos":[-94.27673602898626,113.2816247267118,-229.99156574188515],"tar":[82.2828994130199,103.10960926293166,87.96199208943263],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.05,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n// Collision\\nuniform float collider_radius;            // {\\"name\\":\\"collider_radius\\",  \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01, \\"default\\":0.5}\\n\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<400.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n      \\tmediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n \\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdSphere(vec3 X, in vec3 C, float r) { return length(X-C) - r; }\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n\\t// (where the interior with SDF < 0.0 is a solid obstacle)\\n    return sdSphere(wsP, L/2.0, 0.5*L.x*collider_radius);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n             vec3(1.0),\\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Plume + walls":'\n{"RENDERER_STATE":{"Nraymarch":32,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.1881091475283911,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[0.21568627450980393,0.21568627450980393,0.21568627450980393],"colliderRoughness":0.341872424239417,"exposure":2.350729850942127,"gamma":1.3232924840295135,"saturation":0.8601401146191838,"anisotropy":0.5438412313677659,"extinctionScale":-0.4418160704301233,"emissionScale":-0.07467155433950623,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":32,"vorticity_scale":0,"Nx":32,"Ny":512,"Nz":180,"max_timesteps":500,"expansion":0},"SIMULATION_STATE":{"gravity":0,"buoyancy":0.007719699902180384,"radiationLoss":1,"blast_height":0.1,"blast_radius":0.035290056695681755,"blast_velocity":16.542214076100823,"blast_heat_flux":148.87992668490742,"dust_inflow_rate":0.6616885630440329,"dust_absorption":[0.36759617341746326,0.3391003460207612,0.8235294117647058],"dust_scattering":[0.21914648212226065,0.5904064047764433,0.7450980392156863],"TtoKelvin":33.084428152201646,"collider_width":0.01,"collider_length":0.2,"collider_angle":30},"CAMERA_STATE":{"pos":[725.8330660275855,297.463024462745,99.85303278636057],"tar":[53.67074804236368,258.34810046615513,96.5296940918786],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.05,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n// Collision\\nuniform float collider_width;             // {\\"name\\":\\"collider_width\\",  \\"min\\":0.0, \\"max\\":0.05,    \\"step\\":0.01, \\"default\\":0.5}\\nuniform float collider_length;            // {\\"name\\":\\"collider_length\\", \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.01, \\"default\\":0.5}\\nuniform float collider_angle;             // {\\"name\\":\\"collider_angle\\",  \\"min\\":0.0, \\"max\\":90.0,    \\"step\\":0.01, \\"default\\":0.5}\\n\\n \\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<400.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n      \\tmediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n \\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 X, vec3 bmin, vec3 bmax)\\n{\\n  vec3 d = abs(X-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n  return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\nvoid rotateZY(inout vec3 v, float angle)\\n{\\n\\tfloat C = cos(angle);\\n    float S = sin(angle);\\n    v = vec3(v.x, C*v.z + S*v.y, -S*v.z + C*v.y);\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n\\t// (where the interior with SDF < 0.0 is a solid obstacle)\\n    float sdf = 1.0e6;\\n    vec3 E = vec3(0.5*L.x, collider_width*L.y, collider_length*L.z);\\n \\n    vec3 C1 = vec3(0.5*L.x, 0.25*L.y, 0.5*L.z); \\n    float A1 = radians(collider_angle);\\n    vec3 dX1 = wsP - C1;\\n    rotateZY(dX1, A1);  \\n    sdf = min(sdf, sdBox(dX1, -E, E));\\n    \\n    vec3 C2 = vec3(0.5*L.x, 0.35*L.y, 0.3*L.z); \\n    float A2 = radians(-collider_angle);\\n    vec3 dX2 = wsP - C2;\\n    rotateZY(dX2, A2);  \\n    sdf = min(sdf, sdBox(dX2, -E, E));\\n  \\n    vec3 C3 = vec3(0.5*L.x, 0.45*L.y, 0.5*L.z); \\n    float A3 = radians(collider_angle); \\n    vec3 dX3 = wsP - C3;\\n    rotateZY(dX3, A3);  \\n    sdf = min(sdf, sdBox(dX3, -E, E));\\n  \\n    vec3 C4 = vec3(0.5*L.x, 0.55*L.y, 0.3*L.z); \\n    float A4 = radians(-collider_angle);\\n    vec3 dX4 = wsP - C4;\\n    rotateZY(dX4, A4);  \\n    sdf = min(sdf, sdBox(dX4, -E, E));\\n   \\n    return sdf;\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n             vec3(1.0),\\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Dye collision":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[1,1,1],"sunPower":1.2348068034818107,"sunLatitude":48.954598239246906,"sunLongitude":166.7455178870963,"colliderSpec":[0.38235294117647056,0.35236447520184544,0.35236447520184544],"colliderDiffuse":[0.5,0.09342560553633233,0.03921568627450983],"colliderRoughness":0.09925328445660495,"exposure":2.350729850942127,"gamma":1.3232924840295135,"saturation":0.9594484164138477,"anisotropy":0.5659962658708779,"extinctionScale":-1.3681800586917703,"emissionScale":-10,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.29478225483611664,"Nx":400,"Ny":160,"Nz":160,"max_timesteps":1764,"expansion":0.06616462420147567},"SIMULATION_STATE":{"inject_radius":0.16542214076100822,"inject_offset":0,"inject_period":100,"inject_velocity":255.85291104369273,"swing_angle":19.850656891320988,"swing_period":49.62664222830247,"dye_inflow_rate":37.495685239161865,"dye1_absorption":[0,0,0],"dye1_scattering":[1,1,1],"dye2_absorption":[0.6274509803921569,0.6274509803921569,0.6274509803921569],"dye2_scattering":[0.18013433747201316,0.5294117647058824,0.07266435986159167]},"CAMERA_STATE":{"pos":[205.85960373981933,371.5731226119417,-544.9747275775544],"tar":[202.00925064526763,71.90921072184656,71.50614968220333],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Injection geometry \\nuniform float inject_radius;              // {\\"name\\":\\"inject_radius\\",     \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01, \\"default\\":0.1}\\nuniform float inject_offset;              // {\\"name\\":\\"inject_offset\\",     \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.01, \\"default\\":0.1}\\nuniform float inject_period;              // {\\"name\\":\\"inject_period\\",     \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.01, \\"default\\":25.0}\\nuniform float inject_velocity;            // {\\"name\\":\\"inject_velocity\\",   \\"min\\":0.0, \\"max\\":400.0,  \\"step\\":0.01,  \\"default\\":50.0}\\n\\nuniform float swing_angle;                // {\\"name\\":\\"swing_angle\\",    \\"min\\":0.0, \\"max\\":60.0,  \\"step\\":0.01,  \\"default\\":50.0}\\nuniform float swing_period;               // {\\"name\\":\\"swing_period\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Dust\\nuniform float dye_inflow_rate;            // {\\"name\\":\\"dye_inflow_rate\\",  \\"min\\":0.0, \\"max\\":100.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dye1_absorption;            // {\\"name\\":\\"dye1_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye1_scattering;            // {\\"name\\":\\"dye1_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye2_absorption;            // {\\"name\\":\\"dye2_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye2_scattering;            // {\\"name\\":\\"dye2_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.1415926;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 inject_center1 = vec3(0.1*L.x, 0.5*L.y, (0.5+inject_offset)*L.z);\\n    vec3 inject_center2 = vec3(0.9*L.x, 0.5*L.y, (0.5-inject_offset)*L.z);\\n  \\n    float r1 = length(wsP - inject_center1);\\n    float rt1 = r1/(inject_radius*L.y);\\n  \\n    float r2 = length(wsP - inject_center2);\\n    float rt2 = r2/(inject_radius*L.y);\\n  \\n    float vz = sin(radians(swing_angle) * sin(2.0*M_PI*time/swing_period));\\n    \\n    if (rt1 <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt1*rt1*(3.0 - 2.0*rt1));\\n        vInflow = vec3(1.0, 0.0, -vz) * inject_velocity * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dye1_extinction = dye1_absorption + dye1_scattering;\\n        mediumInflow = dye1_extinction * dye_inflow_rate * radial_falloff;\\n        mediumAlbedo = dye1_scattering / dye1_extinction;\\n    }\\n    if (rt2 <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt2*rt2*(3.0 - 2.0*rt2));\\n        vInflow = vec3(-1.0, 0.0, vz) * inject_velocity * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dye2_extinction = dye2_absorption + dye2_scattering;\\n        mediumInflow = dye2_extinction * dye_inflow_rate * radial_falloff;\\n      \\tmediumAlbedo = dye2_scattering / dye2_extinction;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n  \\nfloat sdBoundingBox( vec3 p, vec3 b, float e )\\n{\\n      p = abs(p  )-b;\\n      vec3 q = abs(p+e)-e;\\n      return min(min(\\n            length(max(vec3(p.x,q.y,q.z),0.0))+min(max(p.x,max(q.y,q.z)),0.0),\\n            length(max(vec3(q.x,p.y,q.z),0.0))+min(max(q.x,max(p.y,q.z)),0.0)),\\n            length(max(vec3(q.x,q.y,p.z),0.0))+min(max(q.x,max(q.y,p.z)),0.0));\\n}\\n\\nvoid rotateXZ(inout vec3 v, float angle)\\n{\\n\\tfloat C = cos(angle);\\n    float S = sin(angle);\\n    v = vec3(C*v.x + S*v.z, v.y, -S*v.x + C*v.z);\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n  // Regions which are solid obstacles have SDF < 0.0\\n  vec3 C = L/2.0;  \\n  float H = 0.3*L.y;\\n  vec3 E = vec3(H);\\n  \\n  float angle = radians(60.0);//time/10.0;\\n  vec3 dX = wsP - C;\\n  rotateXZ(dX, angle);  \\n  return sdBoundingBox(dX, E, 0.03*L.x);\\n}     \\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Dye collision II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[1,1,1],"sunPower":1.2348068034818107,"sunLatitude":53.88181426186247,"sunLongitude":166.17336295032,"colliderSpec":[0.38235294117647056,0.35236447520184544,0.35236447520184544],"colliderDiffuse":[0.5,0.09342560553633233,0.03921568627450983],"colliderRoughness":0.09925328445660495,"exposure":2.350729850942127,"gamma":1.0917861290226543,"saturation":0.9594484164138477,"anisotropy":-0.49270543499957475,"extinctionScale":-0.6320581640279892,"emissionScale":-10,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.2690765781069514,"Nx":400,"Ny":160,"Nz":160,"max_timesteps":1764,"expansion":0.06616462420147567},"SIMULATION_STATE":{"inject_radius":0.14155964757310155,"inject_offset":0.27745690924327904,"inject_period":100,"inject_velocity":396.3670132046843,"swing_angle":59.79479513487809,"swing_period":54.925143258363406,"dye_inflow_rate":65.11743788362672,"dye1_absorption":[1,1,1],"dye1_scattering":[0.08823529411764708,0.01557093425605537,0.01557093425605537],"dye2_absorption":[0.48039215686274506,0.48039215686274506,0.48039215686274506],"dye2_scattering":[0.1470588235294118,0.1470588235294118,0.1470588235294118]},"CAMERA_STATE":{"pos":[206.49009528069323,504.7720162875638,602.5131150614815],"tar":[206.60280858218326,63.20031934070458,78.22657023471508],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Injection geometry \\nuniform float inject_radius;              // {\\"name\\":\\"inject_radius\\",     \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01, \\"default\\":0.1}\\nuniform float inject_offset;              // {\\"name\\":\\"inject_offset\\",     \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.01, \\"default\\":0.1}\\nuniform float inject_period;              // {\\"name\\":\\"inject_period\\",     \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.01, \\"default\\":25.0}\\nuniform float inject_velocity;            // {\\"name\\":\\"inject_velocity\\",   \\"min\\":0.0, \\"max\\":400.0,  \\"step\\":0.01,  \\"default\\":50.0}\\n\\nuniform float swing_angle;                // {\\"name\\":\\"swing_angle\\",    \\"min\\":0.0, \\"max\\":60.0,  \\"step\\":0.01,  \\"default\\":50.0}\\nuniform float swing_period;               // {\\"name\\":\\"swing_period\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Dust\\nuniform float dye_inflow_rate;            // {\\"name\\":\\"dye_inflow_rate\\",  \\"min\\":0.0, \\"max\\":100.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dye1_absorption;            // {\\"name\\":\\"dye1_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye1_scattering;            // {\\"name\\":\\"dye1_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye2_absorption;            // {\\"name\\":\\"dye2_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dye2_scattering;            // {\\"name\\":\\"dye2_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.1415926;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    vec3 inject_center1 = vec3(0.1*L.x, 0.5*L.y, (0.5+inject_offset)*L.z);\\n    vec3 inject_center2 = vec3(0.9*L.x, 0.5*L.y, (0.5-inject_offset)*L.z);\\n  \\n    float r1 = length(wsP - inject_center1);\\n    float rt1 = r1/(inject_radius*L.y);\\n  \\n    float r2 = length(wsP - inject_center2);\\n    float rt2 = r2/(inject_radius*L.y);\\n  \\n    float vz = sin(radians(swing_angle) * sin(2.0*M_PI*time/swing_period));\\n    \\n    if (rt1 <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt1*rt1*(3.0 - 2.0*rt1));\\n        vInflow = vec3(1.0, 0.0, -vz) * inject_velocity * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dye1_extinction = dye1_absorption + dye1_scattering;\\n        mediumInflow = dye1_extinction * dye_inflow_rate * radial_falloff;\\n        mediumAlbedo = dye1_scattering / dye1_extinction;\\n    }\\n    if (rt2 <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt2*rt2*(3.0 - 2.0*rt2));\\n        vInflow = vec3(-1.0, 0.0, vz) * inject_velocity * radial_falloff;\\n\\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dye2_extinction = dye2_absorption + dye2_scattering;\\n        mediumInflow = dye2_extinction * dye_inflow_rate * radial_falloff;\\n      \\tmediumAlbedo = dye2_scattering / dye2_extinction;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n  \\nfloat sdBoundingBox( vec3 p, vec3 b, float e )\\n{\\n      p = abs(p  )-b;\\n      vec3 q = abs(p+e)-e;\\n      return min(min(\\n            length(max(vec3(p.x,q.y,q.z),0.0))+min(max(p.x,max(q.y,q.z)),0.0),\\n            length(max(vec3(q.x,p.y,q.z),0.0))+min(max(q.x,max(p.y,q.z)),0.0)),\\n            length(max(vec3(q.x,q.y,p.z),0.0))+min(max(q.x,max(q.y,p.z)),0.0));\\n}\\n\\nvoid rotateXZ(inout vec3 v, float angle)\\n{\\n\\tfloat C = cos(angle);\\n    float S = sin(angle);\\n    v = vec3(C*v.x + S*v.z, v.y, -S*v.x + C*v.z);\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n  // Regions which are solid obstacles have SDF < 0.0\\n  vec3 C = L/2.0;  \\n  float H = 0.3*L.y;\\n  vec3 E = vec3(H);\\n  \\n  float angle = radians(60.0);//time/10.0;\\n  vec3 dX = wsP - C;\\n  rotateXZ(dX, angle);\\n  return sdBoundingBox(dX, E, 0.02*L.x);\\n}     \\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Ink mix":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":0.6392870967421813,"sunLatitude":31.0812622887005,"sunLongitude":83.36742649385936,"colliderSpec":[0.38235294117647056,0.35236447520184544,0.35236447520184544],"colliderDiffuse":[0.5,0.09342560553633233,0.03921568627450983],"colliderRoughness":0.09925328445660495,"exposure":2.572082697836626,"gamma":1.3232924840295135,"saturation":1,"anisotropy":0.5438412313677659,"extinctionScale":0.2198724926139093,"emissionScale":-10,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1.2130956989140604,"NprojSteps":8,"vorticity_scale":0.05458930645113272,"Nx":400,"Ny":64,"Nz":400,"max_timesteps":500,"expansion":0},"SIMULATION_STATE":{"inject_radius":0.15,"inject_period":400,"inject_angle":360,"inject_velocity":10,"ink_inflow_rate":0.08822514173920439},"CAMERA_STATE":{"pos":[-136.56344835616565,607.2760906365112,-289.5904468801808],"tar":[195.3731270391555,-7.663367095905049,179.35431289282414],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Injection geometry \\nuniform float inject_radius;              // {\\"name\\":\\"inject_radius\\",     \\"min\\":0.0, \\"max\\":0.2,    \\"step\\":0.01, \\"default\\":0.01}\\nuniform float inject_period;              // {\\"name\\":\\"inject_period\\",     \\"min\\":0.0, \\"max\\":400.0,  \\"step\\":0.01, \\"default\\":25.0}\\nuniform float inject_angle;               // {\\"name\\":\\"inject_angle\\",      \\"min\\":0.0, \\"max\\":360.0,  \\"step\\":0.01, \\"default\\":0.0}\\nuniform float inject_velocity;            // {\\"name\\":\\"inject_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":50.0}\\n\\n// Ink\\nuniform float ink_inflow_rate;            // {\\"name\\":\\"ink_inflow_rate\\",  \\"min\\":0.0, \\"max\\":1.0,     \\"step\\":0.01, \\"default\\":1.0}\\n\\nfloat length2(vec3 v) { return dot(v, v); }\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat cos60;\\nfloat sin60;\\nfloat M_PI = 3.1415926;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tcos60 = 0.5;\\n    sin60 = sqrt(3.0)/2.0;\\n  \\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nvoid rotateXZ(inout vec3 v, float angle)\\n{\\n\\tfloat C = cos(angle);\\n  \\tfloat S = sin(angle);\\n  \\tv = vec3(C*v.x + S*v.z, v.y, -S*v.x + C*v.z);\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    float scale = 0.2*L.x;\\n    vec3 origin = L/2.0;\\n    vec3 inject_center1 = origin + scale*vec3(-1.0, 0.0, 0.0);\\n    vec3 inject_center2 = origin + scale*vec3( 1.0, 0.0, 0.0);\\n  \\tvec3 inject_center3 = origin + scale*vec3( cos60, 0.0, sin60);\\n    vec3 inject_center4 = origin + scale*vec3(-cos60, 0.0, sin60);\\n    vec3 inject_center5 = origin + scale*vec3(-cos60, 0.0,-sin60);\\n    vec3 inject_center6 = origin + scale*vec3( cos60, 0.0,-sin60);\\n  \\n  \\tfloat R = 0.5*L.y * inject_radius;\\n    float R2 = R*R;\\n  \\tvec3 center;\\n    vec3 color;\\n    bool hit = false;\\n  \\tif      (length2(wsP - inject_center1) <= R2) { hit = true; center = inject_center1; color = vec3(1.0, 0.0, 0.0); }\\n\\telse if (length2(wsP - inject_center2) <= R2) { hit = true; center = inject_center2; color = vec3(1.0, 1.0, 0.0); }\\n    else if (length2(wsP - inject_center3) <= R2) { hit = true; center = inject_center3; color = vec3(0.0, 1.0, 0.0); }\\n    else if (length2(wsP - inject_center4) <= R2) { hit = true; center = inject_center4; color = vec3(0.0, 1.0, 1.0); }\\n    else if (length2(wsP - inject_center5) <= R2) { hit = true; center = inject_center5; color = vec3(0.0, 0.0, 1.0); }\\n  \\telse if (length2(wsP - inject_center6) <= R2) { hit = true; center = inject_center6; color = vec3(1.0, 0.0, 1.0); }\\n  \\n    if (hit)\\n    {\\n        float swing_angle = radians(inject_angle) * sin(2.0*M_PI*time/inject_period);\\n        float r = length(wsP - center);\\n        float radial_falloff = max(0.0, 1.0 - r*r*(3.0 - 2.0*r));\\n        vInflow = normalize(origin-center) * inject_velocity * radial_falloff;\\n        rotateXZ(vInflow, swing_angle);\\n\\n        // Also inject absorbing/scattering medium\\n      \\tmediumInflow = color * ink_inflow_rate * radial_falloff;\\n        mediumAlbedo = vec3(1.0);\\n    }\\n}\\n\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Ink mix II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[1,1,1],"sunPower":2.293508504352264,"sunLatitude":29.103941347925925,"sunLongitude":190.5663061566815,"colliderSpec":[0.38235294117647056,0.35236447520184544,0.35236447520184544],"colliderDiffuse":[0.5,0.09342560553633233,0.03921568627450983],"colliderRoughness":0.09925328445660495,"exposure":3.2337712608806584,"gamma":1.3232924840295135,"saturation":0.9925328445660493,"anisotropy":-0.2721425806515638,"extinctionScale":-0.30947835782131694,"emissionScale":-10,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1.2130956989140604,"NprojSteps":8,"vorticity_scale":0.1746857806436247,"Nx":512,"Ny":3,"Nz":512,"max_timesteps":1000,"expansion":0},"SIMULATION_STATE":{"inject_radius":0.059551970673962965,"inject_period":163.21651221752813,"inject_angle":186.59617477841726,"inject_velocity":628.6041348918313,"ink_inflow_rate":0.4300975659786214},"CAMERA_STATE":{"pos":[754.6102156123451,607.8114656331106,256.5972348707234],"tar":[274.6357787142348,-83.4652411968122,254.96352781862745],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Injection geometry \\nuniform float inject_radius;              // {\\"name\\":\\"inject_radius\\",     \\"min\\":0.0, \\"max\\":0.2,    \\"step\\":0.01, \\"default\\":0.01}\\nuniform float inject_period;              // {\\"name\\":\\"inject_period\\",     \\"min\\":0.0, \\"max\\":400.0,  \\"step\\":0.01, \\"default\\":25.0}\\nuniform float inject_angle;               // {\\"name\\":\\"inject_angle\\",      \\"min\\":0.0, \\"max\\":360.0,  \\"step\\":0.01, \\"default\\":0.0}\\nuniform float inject_velocity;            // {\\"name\\":\\"inject_velocity\\",   \\"min\\":0.0, \\"max\\":1000.0,  \\"step\\":0.01, \\"default\\":50.0}\\n\\n// Ink\\nuniform float ink_inflow_rate;            // {\\"name\\":\\"ink_inflow_rate\\",  \\"min\\":0.0, \\"max\\":1.0,     \\"step\\":0.01, \\"default\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat cos60;\\nfloat sin60;\\nfloat M_PI = 3.1415926;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tcos60 = 0.5;\\n    sin60 = sqrt(3.0)/2.0;\\n  \\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);     \\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nvoid rotateXZ(inout vec3 v, float angle)\\n{\\n\\tfloat C = cos(angle);\\n  \\tfloat S = sin(angle);\\n  \\tv = vec3(C*v.x + S*v.z, v.y, -S*v.x + C*v.z);\\n}\\n\\nfloat length2(vec2 v) { return dot(v, v); }\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    float scale = 0.333*L.x;\\n    vec3 origin = L/2.0;\\n    vec3 inject_center1 = origin + scale*vec3(-1.0, 0.0, 0.0);\\n    vec3 inject_center2 = origin + scale*vec3( 1.0, 0.0, 0.0);\\n  \\tvec3 inject_center3 = origin + scale*vec3( cos60, 0.0, sin60);\\n    vec3 inject_center4 = origin + scale*vec3(-cos60, 0.0, sin60);\\n    vec3 inject_center5 = origin + scale*vec3(-cos60, 0.0,-sin60);\\n    vec3 inject_center6 = origin + scale*vec3( cos60, 0.0,-sin60);\\n  \\n  \\tfloat R = 10.0*L.y * inject_radius;\\n    float R2 = R*R;\\n  \\tvec3 center;\\n    vec3 color;\\n    bool hit = false;\\n  \\tif      (length2(wsP.xz - inject_center1.xz) <= R2) { hit = true; center = inject_center1; color = vec3(1.0, 0.0, 0.0); }\\n\\telse if (length2(wsP.xz - inject_center2.xz) <= R2) { hit = true; center = inject_center2; color = vec3(1.0, 1.0, 0.0); }\\n    else if (length2(wsP.xz - inject_center3.xz) <= R2) { hit = true; center = inject_center3; color = vec3(0.0, 1.0, 0.0); }\\n    else if (length2(wsP.xz - inject_center4.xz) <= R2) { hit = true; center = inject_center4; color = vec3(0.0, 1.0, 1.0); }\\n    else if (length2(wsP.xz - inject_center5.xz) <= R2) { hit = true; center = inject_center5; color = vec3(0.0, 0.0, 1.0); }\\n  \\telse if (length2(wsP.xz - inject_center6.xz) <= R2) { hit = true; center = inject_center6; color = vec3(1.0, 0.0, 1.0); }\\n  \\n    if (hit)\\n    {\\n        float swing_angle = radians(inject_angle) * (-time/inject_period);\\n        float r = length(wsP.xz - center.xz);\\n        float radial_falloff = max(0.0, 1.0 - r*r*(3.0 - 2.0*r));\\n        vInflow = normalize(origin-center) * inject_velocity * radial_falloff;\\n        rotateXZ(vInflow, swing_angle);\\n\\n        // Also inject absorbing/scattering medium\\n      \\tmediumInflow = color * ink_inflow_rate * radial_falloff;\\n        mediumAlbedo = vec3(1.0);\\n    }\\n}\\n\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n","render_glsl":"// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
Nuke:'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0.09496347558631295,0.16027772123843773,0.37254901960784315],"sunColor":[1,1,1],"sunPower":0.7716248093509881,"sunLatitude":31.089007037058025,"sunLongitude":170.7156492653605,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":2.350729850942127,"gamma":1.8195271655405811,"saturation":1.0587017008704527,"anisotropy":0.5438412313677659,"extinctionScale":2.3762182950567823,"emissionScale":2.384193715809758,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.613017588932583,"Nx":128,"Ny":300,"Nz":128,"max_timesteps":170,"expansion":0.01},"SIMULATION_STATE":{"gravity":0.0005629178961731708,"buoyancy":0.0008822514173920439,"radiationLoss":0.995696042349439,"blast_height":0.09925328445660495,"blast_radius":0.08271107038050411,"blast_velocity":0.011028142717400548,"blast_heat_flux":500,"blast_duration":1.2384193715809757,"dust_inflow_rate":0.33084428152201645,"dust_absorption":[0.31718569780853517,0.4901960784313726,0.46984191600515646],"dust_scattering":[0.7450980392156863,0.6999796458375737,0.48942714340638216],"TtoKelvin":158.74284672083417},"CAMERA_STATE":{"pos":[-276.5427065780057,175.2926230717627,535.3595409495922],"tar":[50.41672426144093,153.69365255298203,81.10486659006659],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.01,   \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.01,   \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.0, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":500.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float blast_duration;             // {\\"name\\":\\"blast_duration\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":1.0,   \\"default\\":100.0}\\n\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T.r = Tambient;\\n    if (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmedium = dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n    {\\n        medium = vec3(0.0);\\n        mediumAlbedo = vec3(0.0);\\n    }\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary values due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<=blast_duration)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = sin(M_PI*time/blast_duration) * dir * blast_velocity * radial_falloff;\\n        Tinflow.r = time/blast_duration * blast_heat_flux * radial_falloff;\\n    }\\n  \\tif (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmediumInflow = dust_inflow_rate * dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\n    // Apply thermal relaxation due to \\"radiation loss\\" \\n    T.r *= radiationLoss;\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n    mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n                                            vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n                                            vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n                                        mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n                                            vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n                                            vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n    return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n                vec3(1.0),\\n                smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Nuke II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0.09496347558631295,0.16027772123843773,0.37254901960784315],"sunColor":[1,1,1],"sunPower":0.7716248093509881,"sunLatitude":31.089007037058025,"sunLongitude":170.7156492653605,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":2.350729850942127,"gamma":1.8195271655405811,"saturation":1.0587017008704527,"anisotropy":0.5438412313677659,"extinctionScale":1.410911906093169,"emissionScale":-0.5157972630355285,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":10,"vorticity_scale":0.99,"Nx":192,"Ny":256,"Nz":192,"max_timesteps":170,"expansion":0.025},"SIMULATION_STATE":{"gravity":0.009925328445660495,"buoyancy":0.06616885630440329,"radiationLoss":0.9915335845544245,"blast_height":0.10917861290226544,"blast_radius":0.09373921309790466,"blast_velocity":1,"blast_heat_flux":170.9362121197085,"blast_duration":5.403789931526269,"dust_inflow_rate":4.962346815110676,"dust_absorption":[0.31718569780853517,0.4901960784313726,0.46984191600515646],"dust_scattering":[0.6920415224913494,0.8487685731732139,0.8823529411764706],"TtoKelvin":29.775985336981485},"CAMERA_STATE":{"pos":[-295.025270804485,313.2914673343268,-185.32422610082574],"tar":[93.77729064612959,93.02648543827851,110.8912667189282],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":2.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.0, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":500.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float blast_duration;             // {\\"name\\":\\"blast_duration\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":1.0,   \\"default\\":100.0}\\n\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T.r = Tambient;\\n    if (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmedium = dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n    {\\n        medium = vec3(0.0);\\n        mediumAlbedo = vec3(0.0);\\n    }\\n}\\n\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary values due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<=blast_duration)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = sin(M_PI*time/blast_duration) * dir * blast_velocity * radial_falloff;\\n        Tinflow.r = time/blast_duration * blast_heat_flux * radial_falloff;\\n    }\\n  \\tif (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmediumInflow = dust_inflow_rate * dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\n    // Apply thermal relaxation due to \\"radiation loss\\" \\n    T.r *= radiationLoss;\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    float buoyancy_force = gravity*buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n    mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n                                            vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n                                            vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n                                        mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n                                            vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n                                            vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n    return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n                vec3(1.0),\\n                smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Nuke III":'\n{"RENDERER_STATE":{"Nraymarch":86,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.168637947177407,"sunLatitude":33.074072726190124,"sunLongitude":222.32735718279505,"colliderSpec":[0.5,0.5,0.5],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.2,"exposure":2.350729850942127,"gamma":1.8195271655405811,"saturation":1.025551675122873,"anisotropy":0.5438412313677659,"extinctionScale":0.8815610556579418,"emissionScale":1.9103941347925932,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.8952646257985766,"Nx":200,"Ny":400,"Nz":200,"max_timesteps":170,"expansion":0.09925328445660495},"SIMULATION_STATE":{"gravity":0.009925328445660495,"buoyancy":0.4190694232612209,"radiationLoss":0.9893279560109445,"blast_height":0.06947729911962346,"blast_radius":0.04962664222830247,"blast_velocity":0.14336585532620713,"blast_heat_flux":55,"blast_duration":5.403789931526269,"dust_inflow_rate":4.962346815110676,"dust_absorption":[0.49115724721261056,0.5175724268946335,0.7156862745098039],"dust_scattering":[0.3844675124951945,0.3844675124951942,0.7843137254901961],"TtoKelvin":82.71107038050411},"CAMERA_STATE":{"pos":[411.5489310326121,270.0141450334331,805.9451591191405],"tar":[100,200,100],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":2.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.0, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.5,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":500.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float blast_duration;             // {\\"name\\":\\"blast_duration\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":1.0,   \\"default\\":100.0}\\n\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T.r = Tambient;\\n    if (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmedium = dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n    {\\n        medium = vec3(0.0);\\n        mediumAlbedo = vec3(0.0);\\n    }\\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary values due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec3 blast_center = vec3(0.5*L.x, blast_height*L.y, 0.5*L.z);\\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0 && time<=blast_duration)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = sin(M_PI*time/blast_duration) * dir * blast_velocity * radial_falloff;\\n        Tinflow.r = time/blast_duration * blast_heat_flux * radial_falloff;\\n    }\\n  \\tif (wsP.y < L.y*0.05)\\n    {\\n      \\tvec3 dust_extinction = dust_absorption + dust_scattering;\\n\\t\\tmediumInflow = dust_inflow_rate * dust_extinction;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\n    // Apply thermal relaxation due to \\"radiation loss\\" \\n    T.r *= radiationLoss;\\n}\\n\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    float buoyancy_force = gravity*buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emission color.\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n    mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n                                            vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n                                            vec3(1.0, 1.3302673723350029, 1.8993753891711275)) :\\n                                        mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n                                            vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n                                            vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275));\\n    return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)),\\n                vec3(1.0),\\n                smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}"}}\n    ',
"Vortex street":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0.5098039215686274,0.44482891195693963,0.44482891195693963],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.3009756597862143,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":3.4543341152286704,"gamma":1.224123841631461,"saturation":1,"anisotropy":-0.051579726303552786,"extinctionScale":1.8079250439195889,"emissionScale":-3.1625515152116606,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":32,"vorticity_scale":0.0764250290315858,"Nx":512,"Ny":1024,"Nz":4,"max_timesteps":10000,"expansion":0},"SIMULATION_STATE":{"inflow_spacing":0.20953471163061044,"inflow_velocity":5.6,"collider_width":0.23159099706541153},"CAMERA_STATE":{"pos":[245.55864555665045,418.4850427112441,-1372.5953468829084],"tar":[248.7823608641542,506.8909315419636,49.185928351108736],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Inflow geometry \\nuniform float inflow_spacing;              // {\\"name\\":\\"inflow_spacing\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float inflow_velocity;             // {\\"name\\":\\"inflow_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Collider\\nuniform float collider_width;              // {\\"name\\":\\"collider_width\\",  \\"min\\":0.0, \\"max\\":1.0,   \\"step\\":0.01, \\"default\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat M_PI = 3.1415926;\\nvoid init()\\n{\\n\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    if (wsP.y <= 0.03*L.y)\\n    {\\n        v = vec3(0.0, 1.0, 0.0) * inflow_velocity;\\n      \\n        if (wsP.y >= 0.01*L.y)\\n        {\\n            float w = inflow_spacing*0.1*L.x;\\n            float ink = 0.0;\\n            float phase = 2.0*M_PI*wsP.x/w;\\n            if (cos(phase)>0.0) \\n              ink = 0.01; // * abs(sin(2.0* M_PI*time/500.0));\\n\\n            vec3 color = vec3(abs(cos(0.1*phase)), abs(cos(0.2*phase)), abs(cos(0.3*phase)));\\n            mediumInflow = ink * color;\\n            mediumAlbedo = vec3(0.0);\\n        }\\n\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 X, vec3 bmin, vec3 bmax)\\n{\\n  vec3 d = abs(X-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n  return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n    // (where the interior with SDF < 0.0 is a solid obstacle)\\n    vec3 C = vec3(L.x/2.0, L.y/5.0, 0.0);  \\n    float W = 0.5*L.x*collider_width;\\n    float H =  0.01*L.y;\\n  \\tvec3 E = vec3(W, H, 1.0e6);\\n    return sdBox(wsP, C-E, C+E);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Vortex street II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":96,"show_bounds":true,"skyColor":[0.5098039215686274,0.44482891195693963,0.44482891195693963],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.3009756597862143,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":2.572082697836626,"gamma":1.7534746920666873,"saturation":1,"anisotropy":-0.051579726303552786,"extinctionScale":0.2,"emissionScale":-3.1625515152116606,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":32,"vorticity_scale":0.0764250290315858,"Nx":512,"Ny":1024,"Nz":2,"max_timesteps":10000,"expansion":0},"SIMULATION_STATE":{"inflow_spacing":0.20953471163061044,"inflow_velocity":5.5,"collider_width":0.08},"CAMERA_STATE":{"pos":[248.31203478022866,559.2990781973805,-1378.1112782461523],"tar":[237.9280951118418,530.3155421784738,46.08678261585806],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Inflow geometry \\nuniform float inflow_spacing;              // {\\"name\\":\\"inflow_spacing\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float inflow_velocity;             // {\\"name\\":\\"inflow_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Collider\\nuniform float collider_width;              // {\\"name\\":\\"collider_width\\",  \\"min\\":0.0, \\"max\\":1.0,   \\"step\\":0.01, \\"default\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat M_PI = 3.141592;\\nvoid init()\\n{\\n\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    if (wsP.y <= 0.03*L.y)\\n    {\\n        v = vec3(0.0, 1.0, 0.0) * inflow_velocity;\\n        if (wsP.y >= 0.01*L.y)\\n        {\\n            float w = inflow_spacing*0.1*L.x;\\n            float ink = 0.0;\\n            float phase = 2.0*M_PI*wsP.x/w;\\n            if (cos(phase)>0.0) \\n              ink = 1.0;\\n            vec3 color = vec3(abs(cos(0.1*phase)), abs(cos(0.2*phase)), abs(cos(0.3*phase)));\\n            mediumInflow = ink * color;\\n            mediumAlbedo = vec3(0.0);\\n        }\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 X, vec3 bmin, vec3 bmax)\\n{\\n  vec3 d = abs(X-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n  return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n    // (where the interior with SDF < 0.0 is a solid obstacle)\\n    vec3 C = vec3(L.x/2.0, L.y/5.0, 0.0);  \\n    float W = 0.5*L.x*collider_width;\\n    float H =  0.01*L.y;\\n  \\tvec3 E = vec3(W, H, 1.0e6);\\n    return sdBox(wsP, C-E, C+E);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Vortex street III":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":96,"show_bounds":true,"skyColor":[0.5098039215686274,0.44482891195693963,0.44482891195693963],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.3009756597862143,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.5,0.5,0.5],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.2,"exposure":3.4543341152286704,"gamma":1.4887992668490742,"saturation":0.6286041348918313,"anisotropy":-0.051579726303552786,"extinctionScale":0.48454791783152373,"emissionScale":-3.1625515152116606,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":76,"vorticity_scale":0.0764250290315858,"Nx":512,"Ny":1024,"Nz":2,"max_timesteps":10000,"expansion":0},"SIMULATION_STATE":{"inflow_spacing":0.16542214076100822,"inflow_velocity":8.601951319572429,"collider_width":0.20953471163061044},"CAMERA_STATE":{"pos":[252.8376472817318,477.49715276182314,-1269.5513435977102],"tar":[249.55344176778806,511.28659402261036,15.639395955077259],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Inflow geometry \\nuniform float inflow_spacing;              // {\\"name\\":\\"inflow_spacing\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float inflow_velocity;             // {\\"name\\":\\"inflow_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Collider\\nuniform float collider_width;              // {\\"name\\":\\"collider_width\\",  \\"min\\":0.0, \\"max\\":1.0,   \\"step\\":0.01, \\"default\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat M_PI = 3.141592;\\nvoid init()\\n{\\n\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    if (wsP.y <= 0.03*L.y)\\n    {\\n        v = vec3(0.0, 1.0, 0.0) * inflow_velocity;\\n        if (wsP.y >= 0.01*L.y)\\n        {\\n            float w = inflow_spacing*0.1*L.x;\\n            float ink = 0.0;\\n            float phase = 2.0*M_PI*wsP.x/w;\\n            if (cos(phase)>0.0) \\n              ink = 1.0; \\n            vec3 color = vec3(abs(cos(0.05*phase)), abs(sin(0.5*phase)), abs(sin(0.08*phase)));\\n            mediumInflow = ink * color;\\n            mediumAlbedo = vec3(0.0);\\n        }\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 X, vec3 bmin, vec3 bmax)\\n{\\n  vec3 d = abs(X-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n  return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n    // (where the interior with SDF < 0.0 is a solid obstacle)\\n    vec3 C = vec3(L.x/2.0, L.y/5.0, 0.0);  \\n    float W = 0.5*L.x*collider_width;\\n    float H =  0.01*L.y;\\n  \\tvec3 E = vec3(W, H, 1.0e6);\\n    return sdBox(wsP, C-E, C+E);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n "}}\n    ',
"Vortex street IV":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0.5098039215686274,0.44482891195693963,0.44482891195693963],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.3009756597862143,"sunLatitude":25.126446110567684,"sunLongitude":273.92154419410934,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":3.4543341152286704,"gamma":1.224123841631461,"saturation":1,"anisotropy":-0.051579726303552786,"extinctionScale":2.2049381817460088,"emissionScale":-3.1625515152116606,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":32,"vorticity_scale":0,"Nx":512,"Ny":1024,"Nz":4,"max_timesteps":10000,"expansion":0},"SIMULATION_STATE":{"inflow_spacing":0.20953471163061044,"inflow_velocity":4.962664222830247,"collider_width":0.08822514173920439},"CAMERA_STATE":{"pos":[263.7957084363256,465.95503803433115,-1369.547702497721],"tar":[259.65074612326106,528.3028333385018,53.61200738537287],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Inflow geometry \\nuniform float inflow_spacing;              // {\\"name\\":\\"inflow_spacing\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float inflow_velocity;             // {\\"name\\":\\"inflow_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01,  \\"default\\":50.0}\\n\\n// Collider\\nuniform float collider_width;              // {\\"name\\":\\"collider_width\\",  \\"min\\":0.0, \\"max\\":1.0,   \\"step\\":0.01, \\"default\\":1.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat M_PI = 3.1415926;\\nvoid init()\\n{\\n\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    if (wsP.y <= 0.03*L.y)\\n    {\\n        v = vec3(0.0, 1.0, 0.0) * inflow_velocity;\\n      \\n        if (wsP.y >= 0.01*L.y)\\n        {\\n            float w = inflow_spacing*0.1*L.x;\\n            float ink = 0.0;\\n            float phase = 2.0*M_PI*wsP.x/w;\\n            if (cos(phase)>0.0) \\n              ink = 0.01 * max(0.0, sin(2.0* M_PI*time/30.0));\\n\\n            vec3 color = vec3(abs(cos(0.1*phase)), abs(cos(0.2*phase)), abs(cos(0.3*phase)));\\n            mediumInflow = ink * color;\\n            mediumAlbedo = vec3(0.0);\\n        }\\n\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    return vec3(0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 X, vec3 bmin, vec3 bmax)\\n{\\n  vec3 d = abs(X-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n  return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Return SDF of the collider surface.\\n    // (where the interior with SDF < 0.0 is a solid obstacle)\\n    vec3 C = vec3(L.x/2.0, L.y/5.0, 0.0);  \\n    float W = 0.5*L.x*collider_width;\\n    float H =  0.01*L.y;\\n  \\tvec3 E = vec3(W, H, 1.0e6);\\n    return sdBox(wsP, C-E, C+E);\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Dust devil":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.7254901960784313,0.6790487821426148,0.4623221837754709],"sunPower":1.6979887976126342,"sunLatitude":19.178612902265442,"sunLongitude":230.26761993932345,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":1.689831280444583,"gamma":1.4887992668490742,"saturation":1.025551675122873,"anisotropy":0.3013208406532648,"extinctionScale":-2.9562326099974485,"emissionScale":1.6890836089273709,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.906182487088803,"Nx":160,"Ny":256,"Nz":160,"max_timesteps":200,"expansion":0},"SIMULATION_STATE":{"viscosity":0.2757035679350137,"circulation":0.40804128054382033,"buoyancy":0.6727167057614335,"A":0.4,"B":0,"scale_height":0.1621136979457881,"dust_inflow_rate":10,"dust_absorption":[0.8333333333333334,0.8213187235678586,0.6290849673202614],"dust_scattering":[0.4607843137254902,0.20355293213017622,0.06324490580545943],"TtoKelvin":82.7057802518446},"CAMERA_STATE":{"pos":[-370.169324081514,316.5993849464716,-129.51202859190022],"tar":[90.09918768541567,125.15041655058573,81.47518510214913],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\" \\nuniform float viscosity;                  // {\\"name\\":\\"viscosity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float circulation;                // {\\"name\\":\\"circulation\\", \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float A;                          // {\\"name\\":\\"A\\",           \\"min\\":0.0, \\"max\\":10.0,    \\"step\\":0.0001, \\"default\\":0.5}\\nuniform float B;                          // {\\"name\\":\\"B\\",           \\"min\\":0.0, \\"max\\":10.0,    \\"step\\":0.0001, \\"default\\":0.5}\\n\\n// injection geometry \\nuniform float scale_height;               // {\\"name\\":\\"scale_height\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float rt = wsP.y/(scale_height*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float zfalloff = exp(-10.0*rt*rt);\\n        float theta = atan(Xperp.y, Xperp.x);\\n        float vtheta = exp(-100.0*A*r*r) * circulation / (r + viscosity);\\n        float vx = -vtheta*sin(theta);\\n        float vz =  vtheta*cos(theta);\\n        if (r<0.3)\\n        \\tvInflow = vec3(vx, 0.0, vz);\\n   \\n        // Also inject absorbing/scattering \\"dust\\"\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * zfalloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float z = wsP.y / L.y;\\n    float fy = 1.0 * buoyancy * exp(-100.0*A*r*r);\\n    return vec3(0.0, fy, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 pW, vec3 bmin, vec3 bmax)\\n{\\n    vec3 d = abs(pW-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return sdBox(wsP, vec3(-1.0e3, 0.0, -1.0e3), vec3(1.0e3, 0.02*L.y, 1.0e3));\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n\\n"}}\n    ',
"Dust devil II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.7254901960784313,0.6790487821426148,0.4623221837754709],"sunPower":1.6979887976126342,"sunLatitude":72.7753865088321,"sunLongitude":134.9844668609827,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":1.689831280444583,"gamma":1.4887992668490742,"saturation":1.025551675122873,"anisotropy":0.3013208406532648,"extinctionScale":-1.5005177713005766,"emissionScale":1.6890836089273709,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":10,"vorticity_scale":0.5568109258015538,"Nx":160,"Ny":256,"Nz":160,"max_timesteps":200,"expansion":0},"SIMULATION_STATE":{"viscosity":0.12130956989140604,"circulation":0.1985065689132099,"buoyancy":0.09925328445660495,"A":0.7719699902180384,"B":3.4187242423941697,"scale_height":0.07940262756528395,"dust_inflow_rate":10,"dust_absorption":[0.8333333333333334,0.8213187235678586,0.6290849673202614],"dust_scattering":[0.4607843137254902,0.20355293213017622,0.06324490580545943],"TtoKelvin":82.7057802518446},"CAMERA_STATE":{"pos":[-287.8480943813848,290.052239198272,434.4030366498164],"tar":[83.14182135217739,110.82453511125604,83.31995919081363],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\" \\nuniform float viscosity;                  // {\\"name\\":\\"viscosity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float circulation;                // {\\"name\\":\\"circulation\\", \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float A;                          // {\\"name\\":\\"A\\",           \\"min\\":0.0, \\"max\\":10.0,    \\"step\\":0.0001, \\"default\\":0.5}\\nuniform float B;                          // {\\"name\\":\\"B\\",           \\"min\\":0.0, \\"max\\":10.0,    \\"step\\":0.0001, \\"default\\":0.5}\\n\\n// injection geometry \\nuniform float scale_height;               // {\\"name\\":\\"scale_height\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float rt = wsP.y/(scale_height*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // inject absorbing/scattering \\"dust\\"\\n        float zfalloff = exp(-10.0*rt*rt);\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * zfalloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n    if (r<0.3)\\n    {\\n        float theta = atan(Xperp.y, Xperp.x);\\n        float vtheta = exp(-100.0*A*r*r) * circulation / (r + viscosity);\\n        float vx = -vtheta*sin(theta);\\n        float vz =  vtheta*cos(theta);\\n        vInflow = vec3(vx, 0.0, vz);\\n    }\\n} \\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float z = wsP.y / L.y;\\n    float fy = 1.0 * buoyancy * exp(-100.0*A*r*r);\\n    return vec3(0.0, fy, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 pW, vec3 bmin, vec3 bmax)\\n{\\n    vec3 d = abs(pW-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return sdBox(wsP, vec3(-1.0e3, 0.0, -1.0e3), vec3(1.0e3, 0.02*L.y, 1.0e3));\\n}\\n","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n\\n"}}\n    ',
"Dust devil III":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[1,1,1],"sunPower":1.2348068034818107,"sunLatitude":19.178612902265442,"sunLongitude":218.35722580453088,"colliderSpec":[0.3431372549019608,0.3431372549019608,0.3431372549019608],"colliderDiffuse":[0.8,0.2,0.2],"colliderRoughness":0.33084428152201645,"exposure":1.689831280444583,"gamma":1.4887992668490742,"saturation":1.025551675122873,"anisotropy":-0.051579726303552786,"extinctionScale":-0.1771406452125106,"emissionScale":1.6890836089273709,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.5568109258015538,"Nx":128,"Ny":400,"Nz":128,"max_timesteps":200,"expansion":0},"SIMULATION_STATE":{"viscosity":0.07719699902180384,"circulation":0.37495685239161863,"buoyancy":0.23159099706541153,"A":1.7645028347840876,"scale_height":0.04300975659786214,"dust_inflow_rate":0.4411257086960219,"dust_absorption":[0.047481737793156474,0.37254901960784315,0.3534274147952147],"dust_scattering":[0.5588235294117647,0.23977203338082645,0.06574394463667822],"TtoKelvin":82.7057802518446},"CAMERA_STATE":{"pos":[492.71768940613987,321.74947535894637,-377.81991616305476],"tar":[78.41425626834838,210.1744589019207,41.28596733952731],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\" \\nuniform float viscosity;                  // {\\"name\\":\\"viscosity\\",   \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float circulation;                // {\\"name\\":\\"circulation\\", \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",    \\"min\\":0.0, \\"max\\":1.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float A;                          // {\\"name\\":\\"A\\",           \\"min\\":0.0, \\"max\\":10.0,    \\"step\\":0.0001, \\"default\\":0.5}\\n\\n// injection geometry \\nuniform float scale_height;               // {\\"name\\":\\"scale_height\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n}","initial_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation, \\n// i.e. populate all the relevant fields (velocity, temperature, debris density/albedo) at time 0.0\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(0.0);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);  \\n}\\n\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature and medium fields via:\\n//\\n//  - specification of boundary   inflow/outflow      due to Dirichlet BC (i.e. v, T are modified in-place)\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo (defaults to 0.5)\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float rt = wsP.y/(scale_height*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // inject absorbing/scattering \\"dust\\"\\n        float zfalloff = exp(-10.0*rt*rt);\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * zfalloff;\\n      \\tmediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n    if (r<0.3)\\n    {\\n        float theta = atan(Xperp.y, Xperp.x);\\n        float vtheta = exp(-100.0*A*r*r) * circulation / (r + viscosity);\\n        float vx = -vtheta*sin(theta);\\n        float vz =  vtheta*cos(theta);\\n        vInflow = vec3(vx, 0.0, vz);\\n    }\\n} \\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    vec2 Xperp = (wsP - L/2.0).xz;\\n    float r = length(Xperp) / L.x;\\n    float z = wsP.y / L.y;\\n    float fy = 1.0 * buoyancy * exp(-100.0*A*r*r);\\n    return vec3(0.0, fy, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable, static collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\nfloat sdBox(vec3 pW, vec3 bmin, vec3 bmax)\\n{\\n    vec3 d = abs(pW-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\\n}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return sdBox(wsP, vec3(-1.0e3, 0.0, -1.0e3), vec3(1.0e3, 0.02*L.y, 1.0e3));\\n}","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field and phase function\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n  \\treturn vec3(0.0);\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify phase function of medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Moving fireball":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.367144516090617,"sunLatitude":76.73485298771871,"sunLongitude":138.94571082309892,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[1,0,0],"colliderRoughness":0.341872424239417,"exposure":0.3664541543565143,"gamma":1.5549681231534773,"saturation":1.025551675122873,"anisotropy":0.5438412313677659,"extinctionScale":-1.5005177713005766,"emissionScale":1.0281427174005486,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":16,"vorticity_scale":0.43671445160906175,"Nx":160,"Ny":160,"Nz":160,"max_timesteps":500,"expansion":0.1},"SIMULATION_STATE":{"gravity":0.029775985336981482,"buoyancy":0.009925328445660495,"radiationLoss":0.9970476559131248,"blast_height":0.1,"blast_radius":0.08932795601094444,"blast_velocity":48.523827956562414,"blast_heat_flux":49.62664222830247,"animation_period":13.233771260880658,"dust_inflow_rate":4.962346815110676,"dust_absorption":[0.7024221453287197,0.7451658864237736,0.8235294117647058],"dust_scattering":[0.5613225682429838,0.5613225682429834,0.7843137254901961],"TtoKelvin":52.93508504352263},"CAMERA_STATE":{"pos":[428.5065222671221,231.18004269182862,-137.9063177523132],"tar":[95.47877293559753,48.26456077993378,85.76052711016654],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float animation_period;           // {\\"name\\":\\"animation_period\\", \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"///////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation (velocity, temperature, and medium density/albedo)\\n// at time 0.0 (if unspecified, all quantities default to zero).\\n///////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    float phase = 0.05*M_PI*time/animation_period;\\n    vec3 blast_center = 0.5*L + 0.5*vec3(0.5*L.x*sin(13.0*phase),\\n                                         0.5*L.y*sin(17.0*phase),\\n                                         0.5*L.z*sin(19.0*phase));\\n  \\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n      \\t// Also inject absorbing/scattering \\"dust\\"\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field \\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emiss\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   \\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : \\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275)); \\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), \\n             vec3(1.0), \\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify the phase function of the scattering medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Moving fireball II":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":2.318481723990864,"sunLatitude":60.52306766011881,"sunLongitude":0,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[0.6147635524798154,0.64814437885881,0.803921568627451],"colliderRoughness":0.341872424239417,"exposure":0.3664541543565143,"gamma":0.9594484164138477,"saturation":1.4887992668490742,"anisotropy":0.5438412313677659,"extinctionScale":-1.7651931965181893,"emissionScale":-2.500862952167627,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":23,"vorticity_scale":0.22352675547527642,"Nx":128,"Ny":200,"Nz":128,"max_timesteps":500,"expansion":0.016724785295568756},"SIMULATION_STATE":{"gravity":0.004411257086960219,"buoyancy":0.04411257086960219,"radiationLoss":0.9434844417684788,"blast_height":0.1,"blast_radius":0.08601951319572428,"blast_velocity":51.832270771782575,"blast_heat_flux":200,"animation_period":24.261913978281207,"dust_inflow_rate":5.184683441626314,"dust_absorption":[0,0,0],"dust_scattering":[0.8674548250672819,0.87873442341181,0.9313725490196079],"TtoKelvin":2.5087177943353134},"CAMERA_STATE":{"pos":[419.65356811528306,221.54997814431192,-184.40375823705278],"tar":[43.18632881054206,66.65170079206099,85.67369005710059],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.1,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":2.0,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":200.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float animation_period;           // {\\"name\\":\\"animation_period\\", \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"///////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation (velocity, temperature, and medium density/albedo)\\n// at time 0.0 (if unspecified, all quantities default to zero).\\n///////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    float phase = 0.05*M_PI*time/animation_period;\\n    vec3 blast_center = 0.5*L + 0.5*vec3(0.5*L.x*sin(13.0*phase),\\n                                         0.5*L.y*sin(17.0*phase),\\n                                         0.5*L.z*sin(19.0*phase));\\n  \\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n      \\t// Also inject absorbing/scattering \\"dust\\"\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}\\n","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    // Tbuoyancy is the reference temperature for buoyancy\\n    float buoyancy_force = gravity*buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field \\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emiss\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   \\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : \\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275)); \\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), \\n             vec3(1.0), \\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify the phase function of the scattering medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    ',
"Moving fireball III":'\n{"RENDERER_STATE":{"Nraymarch":64,"spp_per_frame":1,"max_spp":32,"show_bounds":true,"skyColor":[0,0,0],"sunColor":[0.5489273590657855,0.5489273590657855,0.5489273590657855],"sunPower":1.6979887976126342,"sunLatitude":-12.58243812384815,"sunLongitude":91.31302170007655,"colliderSpec":[0.6666666666666667,0.6013071895424837,0.6013071895424837],"colliderDiffuse":[0.6147635524798154,0.64814437885881,0.803921568627451],"colliderRoughness":0.341872424239417,"exposure":0.3664541543565143,"gamma":0.9594484164138477,"saturation":1.4887992668490742,"anisotropy":-0.051579726303552786,"extinctionScale":-2.029868621735803,"emissionScale":-1.8391743891235937,"blackbodyEmission":-11.619147601146414,"TtoKelvin":0.9924693630221351},"SOLVER_STATE":{"timestep":1,"NprojSteps":23,"vorticity_scale":0.1528500580631716,"Nx":64,"Ny":256,"Nz":128,"max_timesteps":1000,"expansion":0},"SIMULATION_STATE":{"gravity":0.0003308442815220165,"buoyancy":0.0012130956989140605,"radiationLoss":0.9860195131957243,"blast_height":0.4881906236524993,"blast_radius":0.08271107038050411,"blast_velocity":1.4336585532620714,"blast_heat_flux":44.112570869602195,"animation_period":15.439399804360768,"dust_inflow_rate":1.985065689132099,"dust_absorption":[0.4659746251441753,0.4659746251441753,0.47058823529411764],"dust_scattering":[0.8223760092272203,0.8411018386593392,0.9019607843137255],"TtoKelvin":13.233771260880658},"CAMERA_STATE":{"pos":[410.643261895476,162.7336190799166,69.48707321629786],"tar":[-28.382639151179635,122.68482185517172,76.17773010829605],"near":1,"far":20000},"GUI_STATE":{"visible":true},"EDITOR_STATE":{"common_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Bind UI parameters to uniforms used in the various programs\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// \\"Physics\\"\\nuniform float gravity;                    // {\\"name\\":\\"gravity\\",      \\t \\"min\\":0.0, \\"max\\":0.01,    \\"step\\":0.001, \\"default\\":0.05}\\nuniform float buoyancy;                   // {\\"name\\":\\"buoyancy\\",         \\"min\\":0.0, \\"max\\":0.01,    \\"step\\":0.001, \\"default\\":0.5}\\nuniform float radiationLoss;              // {\\"name\\":\\"radiationLoss\\",    \\"min\\":0.9, \\"max\\":1.0,    \\"step\\":0.01,  \\"default\\":0.999}\\n\\n// Blast geometry \\nuniform float blast_height;               // {\\"name\\":\\"blast_height\\",     \\"min\\":0.1, \\"max\\":0.9,    \\"step\\":0.001, \\"default\\":0.25}\\nuniform float blast_radius;               // {\\"name\\":\\"blast_radius\\",     \\"min\\":0.0, \\"max\\":0.3,    \\"step\\":0.001, \\"default\\":0.1}\\nuniform float blast_velocity;             // {\\"name\\":\\"blast_velocity\\",   \\"min\\":0.0, \\"max\\":10.0,  \\"step\\":0.1,   \\"default\\":50.0}\\nuniform float blast_heat_flux;            // {\\"name\\":\\"blast_heat_flux\\",  \\"min\\":0.0, \\"max\\":200.0,  \\"step\\":1.0,   \\"default\\":100.0}\\nuniform float animation_period;           // {\\"name\\":\\"animation_period\\", \\"min\\":0.0, \\"max\\":100.0,  \\"step\\":1.0,   \\"default\\":100.0}\\n\\n// Dust\\nuniform float dust_inflow_rate;           // {\\"name\\":\\"dust_inflow_rate\\", \\"min\\":0.0, \\"max\\":10.0,   \\"step\\":0.01, \\"default\\":1.0}\\nuniform vec3  dust_absorption;            // {\\"name\\":\\"dust_absorption\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\nuniform vec3  dust_scattering;            // {\\"name\\":\\"dust_scattering\\",  \\"default\\":[0.5,0.5,0.5], \\"scale\\":1.0}\\n\\n// Rendering\\nuniform float TtoKelvin;                  // {\\"name\\":\\"TtoKelvin\\",        \\"min\\":0.0, \\"max\\":300.0,  \\"step\\":0.01, \\"default\\":10.0}\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat Tambient;\\nfloat M_PI = 3.141592;\\n\\nvoid init()\\n{\\n\\t// Any global constants defined here are available in all functions\\n \\tTambient = 1.0;\\n}","initial_glsl":"///////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the initial conditions for the simulation (velocity, temperature, and medium density/albedo)\\n// at time 0.0 (if unspecified, all quantities default to zero).\\n///////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid initial_conditions(in vec3 wsP,               // world space center of current voxel\\n                        in vec3 L, in float dL,    // world-space extents of grid, and voxel-size\\n                        inout vec3 v,              // initial velocity\\n                        inout vec4 T,              // initial temperature\\n                        inout vec3 medium,         // initial per-channel medium density (extinction)\\n                        inout vec3 mediumAlbedo)   // initial per-channel medium albedo\\n{\\n    v = vec3(0.0);\\n    T = vec4(Tambient);\\n    medium = vec3(0.0);\\n    mediumAlbedo = vec3(0.0);\\n}\\n","inject_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Update the velocity, temperature via either:\\n//  - specification of volumetric inflow/outflow rate due to sources/sinks (vInflow, Tinflow)\\n//  - modification in-place, i.e. Dirichlet boundary conditions (v, T)\\n// Also specify the injected medium density inflow rate, and its scattering albedo.\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvoid inject(in vec3 wsP,                 // world space center of current voxel\\n            in float time,               // time\\n            in vec3 L, in float dL,      // world-space extents of grid, and voxel-size\\n            inout vec3 v,                // modify velocity in-place (defaults to no change)\\n            inout vec3 vInflow,          // velocity inflow rate (defaults to zero)\\n            inout vec4 T,                // modify temperature in-place (defaults to no change)\\n            inout vec4 Tinflow,          // temperature inflow rate (defaults to zero)\\n            inout vec3 mediumInflow,     // medium density (extinction) inflow rate (defaults to zero)\\n            inout vec3 mediumAlbedo)     // medium albedo\\n{\\n    float phase = 0.05*M_PI*time/animation_period;\\n    vec3 C = vec3(0.5*L.x, L.y*blast_height, 0.5*L.z);\\n    vec3 blast_center = C + 0.5*vec3(0.5*L.x*sin(3.0*phase),\\n                                     0.5*L.y*sin(7.0*phase),\\n                                     0.5*L.z*sin(17.0*phase));\\n  \\n    vec3 dir = wsP - blast_center;\\n    float r = length(dir);\\n    dir /= r;\\n    float rt = r/(blast_radius*L.y);\\n    if (rt <= 1.0)\\n    {\\n        // Within blast radius: inject velocity and temperature\\n        float radial_falloff = max(0.0, 1.0 - rt*rt*(3.0 - 2.0*rt));\\n        vInflow = dir * blast_velocity * radial_falloff;\\n        Tinflow.r = blast_heat_flux * radial_falloff;\\n\\n      \\t// Also inject absorbing/scattering \\"dust\\"\\n        vec3 dust_extinction = dust_absorption + dust_scattering;\\n        mediumInflow = dust_extinction * dust_inflow_rate * radial_falloff;\\n        mediumAlbedo = dust_scattering / dust_extinction;\\n    }\\n  \\telse\\n  \\t{\\n        // Apply thermal relaxation due to \\"radiation loss\\" \\n        T.r *= radiationLoss;\\n    }\\n}","influence_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Apply any external forces to the fluid\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nvec3 externalForces(in vec3 wsP,                       // world space center of current voxel\\n                    in float time,                     // time\\n                    in vec3 L, in float dL,            // world-space extents of grid, and voxel-size\\n                    in vec3 v, in float P, in vec4 T,  // velocity, pressure, temperature at current voxel\\n                    in vec3 medium)                    // medium density (extinction) at current voxel\\n{\\n    // Boussinesq approximation (a la Fedkiw & Stam)\\n    float densityAvg = (medium.r + medium.g + medium.b)/3.0;\\n    float buoyancy_force = -densityAvg*gravity + buoyancy*(T.r - Tambient);\\n    return vec3(0.0, buoyancy_force, 0.0);\\n}","collide_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify regions which contain impenetrable collider material\\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n/******************************************************/\\n/*                 mandatory function                 */\\n/******************************************************/\\n\\nfloat collisionSDF(in vec3 wsP,            // world space center of current voxel\\n                   in float time,          // time\\n                   in vec3 L, in float dL) // world-space extents of grid, and voxel-size\\n{\\n    // Regions which are solid obstacles have SDF < 0.0\\n    return 1.0e6;\\n}","render_glsl":"//////////////////////////////////////////////////////////////////////////////////////////////////////\\n// Specify the fluid emission field \\n//////////////////////////////////////////////////////////////////////////////////////////////////////\\n\\n// Approximate map from temperature in Kelvin to blackbody emiss\\n// Valid from 1000 to 40000 K (and additionally 0 for pure full white)\\nvec3 colorTemperatureToRGB(const in float temperature)\\n{\\n  // Values from: http://blenderartists.org/forum/showthread.php?270332-OSL-Goodness&p=2268693&viewfull=1#post2268693   \\n  mat3 m = (temperature <= 6500.0) ? mat3(vec3(0.0, -2902.1955373783176, -8257.7997278925690),\\n\\t                                      vec3(0.0, 1669.5803561666639, 2575.2827530017594),\\n\\t                                      vec3(1.0, 1.3302673723350029, 1.8993753891711275)) : \\n\\t \\t\\t\\t\\t\\t\\t\\t\\t mat3(vec3(1745.0425298314172, 1216.6168361476490, -8257.7997278925690),\\n   \\t                                      vec3(-2666.3474220535695, -2173.1012343082230, 2575.2827530017594),\\n\\t                                      vec3(0.55995389139931482, 0.70381203140554553, 1.8993753891711275)); \\n  return mix(clamp(vec3(m[0] / (vec3(clamp(temperature, 1000.0, 40000.0)) + m[1]) + m[2]), vec3(0.0), vec3(1.0)), \\n             vec3(1.0), \\n             smoothstep(1000.0, 0.0, temperature));\\n}\\n\\n\\n/******************************************************/\\n/*                 mandatory functions                */\\n/******************************************************/\\n\\n// Specify how the temperature is mapped to the local emission radiance\\nvec3 temperatureToEmission(in vec4 T)\\n{\\n    vec3 emission = colorTemperatureToRGB(T.r * TtoKelvin) * pow(T.r/100.0, 4.0);\\n  \\treturn emission;\\n}\\n\\n// Optionally remap the medium density (extinction) and albedo\\nvoid mediumRemap(inout vec3 medium,\\n                 inout vec3 mediumAlbedo)\\n{}\\n\\n// Specify the phase function of the scattering medium\\nfloat phaseFunction(float mu,         // cosine of angle between incident and scattered ray\\n                    float anisotropy) // anisotropy coefficient\\n{\\n    const float pi = 3.141592653589793;\\n    float g = anisotropy;\\n    float gSqr = g*g;\\n    return (1.0/(4.0*pi)) * (1.0 - gSqr) / pow(1.0 - 2.0*g*mu + gSqr, 1.5);\\n}\\n"}}\n    '},
Presets=function(){this.preset_names=[];for(var a in _presets_table)_presets_table.hasOwnProperty(a)&&this.preset_names.push(a)};Presets.prototype.get_preset_names=function(){return this.preset_names};Presets.prototype.get_preset=function(a){return this.preset_names[a]};Presets.prototype.load_preset=function(a){if(a in _presets_table){var b=JSON.parse(_presets_table[a]);trinity.preset_selection=a;return trinity.load_state(b)}return!1};var GUI=function(a){a=void 0===a?!0:a;this.gui=new dat.GUI;this.gui.domElement.id="gui";(this.visible=a)||this.gui.__proto__.constructor.toggleHide()};function updateDisplay(a){for(var b in a.__controllers)a.__controllers[b].updateDisplay();for(var c in a.__folders)updateDisplay(a.__folders[c])}GUI.prototype.sync=function(){updateDisplay(this.gui)};
dat.GUI.prototype.removeFolder=function(a){var b=this.__folders[a];b&&(b.close(),this.__ul.removeChild(b.domElement.parentNode),delete this.__folders[a],this.onResize())};GUI.prototype.wipe=function(){void 0!=this.presetsFolder&&this.gui.removeFolder(this.presetsFolder.name);this.gui.removeFolder("Simulation");void 0!=this.solverFolder&&this.gui.removeFolder(this.solverFolder.name);void 0!=this.rendererFolder&&this.gui.removeFolder(this.rendererFolder.name)};
GUI.prototype.refresh=function(){void 0!=this.simulationFolder&&(this.simulationFolderParametersCached=jQuery.extend(!0,{},this.simulationFolder.parameters));this.wipe();this.addPresetsFolder();this.generateSimulationSettings();this.createSolverSettings();this.createRendererSettings()};GUI.prototype.toggleHide=function(){this.visible=!this.visible};
function hexToRgb(a){return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}
GUI.prototype.generateSimulationSettings=function(){var a=this.gui.addFolder("Simulation");this.simulationFolder=a;a.parameters={};var b=""+(trinity.getGlsl("common")+"\n");b+=trinity.getGlsl("initial")+"\n";b+=trinity.getGlsl("inject")+"\n";b+=trinity.getGlsl("influence")+"\n";b+=trinity.getGlsl("collide")+"\n";var c=trinity.getSolver(),d=this,e=this.simulationFolderParametersCached;b.split("\n").forEach(function(b){b=b.trim();if(b.startsWith("uniform")){b=b.substr(b.indexOf("//")+2);try{var g=JSON.parse(b),
h=g.name,k=g.default;if(void 0!==h&&void 0!==k)if("number"==typeof k){b=0;var q=5*k,t=.001;"number"==typeof g.min&&(b=g.min);"number"==typeof g.max&&(q=g.max);"number"==typeof g.step&&(t=g.step);g=k;void 0!=e&&e.hasOwnProperty(h)&&(g=e[h]);a.parameters[h]=g;d.addSlider(a.parameters,{name:h,min:b,max:q,step:t},a,!0);c.syncFloatToShader(h,g)}else Array.isArray(k)&&3==k.length&&(b=1,"number"==typeof g.scale&&(b=g.scale),g=k,void 0!=e&&e.hasOwnProperty(h)&&(g=e[h]),a.parameters[h]=g,d.addColor(a.parameters,
h,b,a,!0),c.syncColorToShader(h,g))}catch(f){console.log(f)}}});if(void 0!=this.simulationFolderParametersCached){b=$jscomp.makeIterator(Object.keys(this.simulationFolderParametersCached));for(var g=b.next();!g.done;g=b.next())if(g=g.value,a.parameters.hasOwnProperty(g)){var h=this.simulationFolderParametersCached[g];a.parameters[g]=h;"number"==typeof h&&c.syncFloatToShader(g,h);Array.isArray(h)&&3==h.length&&c.syncColorToShader(g,h)}this.sync()}a.open()};
GUI.prototype.addPresetsFolder=function(){this.presetsFolder=this.gui.addFolder("Presets");var a=trinity.presets.get_preset_names();this.presetSettings={};this.presetSettings.preset=trinity.preset_selection;this.presetsFolder.add(this.presetSettings,"preset",a).onChange(function(a){trinity.presets.load_preset(a)});this.presetSettings["load scene"]=function(){trinity.load_scene()};this.presetSettings["save scene"]=function(){trinity.save_scene()};this.presetsFolder.add(this.presetSettings,"load scene");
this.presetsFolder.add(this.presetSettings,"save scene");this.presetsFolder.open()};
GUI.prototype.createSolverSettings=function(){var a=trinity.getSolver();trinity.getRenderer();this.solverFolder=this.gui.addFolder("Solver");this.solverFolder.Nx=a.settings.Nx;this.solverFolder.Ny=a.settings.Ny;this.solverFolder.Nz=a.settings.Nz;this.solverFolder.add(this.solverFolder,"Nx",2,2048).onChange(function(b){a.resize(Math.floor(b),a.settings.Ny,a.settings.Nz)});this.solverFolder.add(this.solverFolder,"Ny",2,2048).onChange(function(b){a.resize(a.settings.Nx,Math.floor(b),a.settings.Nz)});
this.solverFolder.add(this.solverFolder,"Nz",2,2048).onChange(function(b){a.resize(a.settings.Nx,a.settings.Ny,Math.floor(b))});this.solverFolder.add(a.settings,"NprojSteps",1,256).onChange(function(b){a.settings.NprojSteps=Math.floor(b);trinity.render_dirty()});this.solverFolder.add(a.settings,"max_timesteps",0,1E4).onChange(function(b){a.settings.max_timesteps=Math.floor(b);trinity.render_dirty()});this.solverFolder.add(a.settings,"vorticity_scale",0,.99).onChange(function(){trinity.render_dirty()});
this.solverFolder.add(a.settings,"expansion",0,.05).onChange(function(){trinity.render_dirty()});this.solverFolder.add(a.settings,"timestep",0,10).onChange(function(){trinity.render_dirty()});this.solverFolder.open()};
GUI.prototype.createRendererSettings=function(){this.rendererFolder=this.gui.addFolder("Raymarcher");var a=trinity.getRenderer();trinity.getCamera();this.rendererFolder.add(a.settings,"extinctionScale",-6,6).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"emissionScale",-10,10).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"anisotropy",-1,1).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"exposure",
-10,10).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"gamma",0,3).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"saturation",0,3).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"sunLatitude",-90,90).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"sunLongitude",0,360).onChange(function(){trinity.render_dirty()});this.rendererFolder.add(a.settings,"sunPower",-3,3).onChange(function(){trinity.render_dirty()});
this.rendererFolder.sunColor=[255*a.settings.sunColor[0],255*a.settings.sunColor[1],255*a.settings.sunColor[2]];this.rendererFolder.addColor(this.rendererFolder,"sunColor").onChange(function(b){"string"===typeof b||b instanceof String?(b=hexToRgb(b),a.settings.sunColor[0]=b.r/255,a.settings.sunColor[1]=b.g/255,a.settings.sunColor[2]=b.b/255):(a.settings.sunColor[0]=b[0]/255,a.settings.sunColor[1]=b[1]/255,a.settings.sunColor[2]=b[2]/255);trinity.render_dirty()});this.rendererFolder.skyColor=[255*
a.settings.skyColor[0],255*a.settings.skyColor[1],255*a.settings.skyColor[2]];this.rendererFolder.addColor(this.rendererFolder,"skyColor").onChange(function(b){"string"===typeof b||b instanceof String?(b=hexToRgb(b),a.settings.skyColor[0]=b.r/255,a.settings.skyColor[1]=b.g/255,a.settings.skyColor[2]=b.b/255):(a.settings.skyColor[0]=b[0]/255,a.settings.skyColor[1]=b[1]/255,a.settings.skyColor[2]=b[2]/255);trinity.render_dirty()});this.rendererFolder.add(a.settings,"Nraymarch",8,1024).onChange(function(b){a.settings.Nraymarch=
Math.floor(b);trinity.render_dirty()});this.rendererFolder.add(a.settings,"max_spp",1,1024).onChange(function(b){a.settings.max_spp=Math.floor(b);trinity.render_dirty()});this.rendererFolder.add(a.settings,"spp_per_frame",1,8).onChange(function(b){a.settings.spp_per_frame=Math.floor(b);trinity.render_dirty()});this.rendererFolder.add(a.settings,"show_bounds").onChange(function(){trinity.render_dirty()});this.rendererFolder.colliderDiffuse=[255*a.settings.colliderDiffuse[0],255*a.settings.colliderDiffuse[1],
255*a.settings.colliderDiffuse[2]];this.rendererFolder.addColor(this.rendererFolder,"colliderDiffuse").onChange(function(b){"string"===typeof b||b instanceof String?(b=hexToRgb(b),a.settings.colliderDiffuse[0]=b.r/255,a.settings.colliderDiffuse[1]=b.g/255,a.settings.colliderDiffuse[2]=b.b/255):(a.settings.colliderDiffuse[0]=b[0]/255,a.settings.colliderDiffuse[1]=b[1]/255,a.settings.colliderDiffuse[2]=b[2]/255);trinity.render_dirty()});this.rendererFolder.colliderSpec=[255*a.settings.colliderSpec[0],
255*a.settings.colliderSpec[1],255*a.settings.colliderSpec[2]];this.rendererFolder.addColor(this.rendererFolder,"colliderSpec").onChange(function(b){"string"===typeof b||b instanceof String?(b=hexToRgb(b),a.settings.colliderSpec[0]=b.r/255,a.settings.colliderSpec[1]=b.g/255,a.settings.colliderSpec[2]=b.b/255):(a.settings.colliderSpec[0]=b[0]/255,a.settings.colliderSpec[1]=b[1]/255,a.settings.colliderSpec[2]=b[2]/255);trinity.render_dirty()});this.rendererFolder.add(a.settings,"colliderRoughness",
0,1).onChange(function(){trinity.render_dirty()});this.rendererFolder.close()};
GUI.prototype.addSlider=function(a,b,c,d){d=void 0===d?!1:d;var e=this.userFolder;"undefined"!==typeof c&&(e=c);var g=b.name;c=b.min;var h=b.max;b=b.step;a=null==b||void 0==b?e.add(a,g,c,h,b):e.add(a,g,c,h);a.onChange(function(a){trinity.camera.enabled=!1;d&&trinity.getSolver().syncFloatToShader(g,a);trinity.render_dirty()});a.onFinishChange(function(a){d&&trinity.getSolver().syncFloatToShader(g,a);trinity.render_dirty();trinity.camera.enabled=!0});return a};
GUI.prototype.addColor=function(a,b,c,d,e){c=void 0===c?1:c;e=void 0===e?!1:e;var g=this.userFolder;"undefined"!==typeof d&&(g=d);g[b]=[255*a[b][0],255*a[b][1],255*a[b][2]];d=g.addColor(g,b);d.onChange(function(d){"string"===typeof d||d instanceof String?(d=hexToRgb(d),a[b][0]=c*d.r/255,a[b][1]=c*d.g/255,a[b][2]=c*d.b/255):(a[b][0]=c*d[0]/255,a[b][1]=c*d[1]/255,a[b][2]=c*d[2]/255);e&&trinity.getSolver().syncColorToShader(b,a[b]);trinity.render_dirty()});d.onFinishChange(function(c){e&&trinity.getSolver().syncColorToShader(b,
a[b]);trinity.render_dirty();trinity.render_dirty()});return d};GUI.prototype.getGUI=function(){return this.gui};GUI.prototype.getUserFolder=function(){return this.userFolder};var Shaders={"advect-fragment-shader":"#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform int W;\nuniform int H;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n// Physics\nuniform float time;\nuniform float timestep;\nuniform float vorticity_scale;\n\nin vec2 v_texcoord;\n\n/////// input buffers ///////\nuniform sampler2D Vair_sampler;       // 0, vec3 air velocity field\nuniform sampler2D Pair_sampler;       // 1, float air pressure field\nuniform sampler2D Tair_sampler;       // 2, float air temperature field\nuniform sampler2D absorption_sampler; // 3, vec3 absorption field\nuniform sampler2D scattering_sampler; // 4, vec3 scattering field\nuniform sampler2D vorticity_sampler;  // 5, vec3 air vorticity field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Vair_output;\nlayout(location = 1) out vec4 Pair_output;\nlayout(location = 2) out vec4 Tair_output;\nlayout(location = 3) out vec4 absorption_output;\nlayout(location = 4) out vec4 scattering_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords in [W, H]\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    int iu = col*Nx + i;\n    int iv = row*Nz + k;\n    return ivec2(iu, iv);\n}\n\nvec2 slicetoUV(int j, vec3 vsP)\n{\n    // Given y-slice index j, and continuous voxel space xz-location,\n    // return corresponding continuous frag UV for interpolation within this slice\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    vec2 uv_ll = vec2(float(col*Nx)/float(W), float(row*Nz)/float(H));\n    float du = vsP.x/float(W);\n    float dv = vsP.z/float(H);\n    return uv_ll + vec2(du, dv);\n}\n\nvec4 interp(in sampler2D S, in vec3 wsP)\n{\n    vec3 vsP = wsP / dL;\n    float pY = vsP.y - 0.5;\n    int jlo = clamp(int(floor(pY)), 0, Ny-1); // lower j-slice\n    int jhi = clamp(         jlo+1, 0, Ny-1); // upper j-slice\n    float flo = float(jhi) - pY;              // lower j fraction\n    float fhi = 1.0 - flo;                    // upper j fraction\n    vec2 uv_lo = slicetoUV(jlo, vsP);\n    vec2 uv_hi = slicetoUV(jhi, vsP);\n    vec4 Slo = texture(S, uv_lo);\n    vec4 Shi = texture(S, uv_hi);\n    return flo*Slo + fhi*Shi;\n}\n\nvec3 clampToBounds(in vec3 wsP)\n{\n    vec3 voxel = vec3(dL);\n    return clamp(wsP, voxel, L-voxel);\n}\n\nvec3 back_advect(in vec3 wsP, in vec3 vX, float h)\n{\n    // RK4 integration for position wsP advected backwards through time h:\n    vec3 k1 = vX;\n    vec3 k2 = interp(Vair_sampler, clampToBounds(wsP - 0.5*h*k1)).xyz;\n    vec3 k3 = interp(Vair_sampler, clampToBounds(wsP - 0.5*h*k2)).xyz;\n    vec3 k4 = interp(Vair_sampler, clampToBounds(wsP -     h*k3)).xyz;\n    return clampToBounds(wsP - h*(k1 + 2.0*k2 + 2.0*k3 + k4)/6.0);\n}\n\nvec3 vorticityConfinementForce(ivec2 frag, in ivec3 vsPi)\n{\n    int ix = vsPi.x;\n    int iy = vsPi.y;\n    int iz = vsPi.z;\n    ivec3 X_ip = ivec3(min(ix+1, Nx-1), iy, iz);\n    ivec3 X_in = ivec3(max(ix-1,    0), iy, iz);\n    ivec3 X_jp = ivec3(ix, min(iy+1, Ny-1), iz);\n    ivec3 X_jn = ivec3(ix, max(iy-1,    0), iz);\n    ivec3 X_kp = ivec3(ix, iy, min(iz+1, Nz-1));\n    ivec3 X_kn = ivec3(ix, iy, max(iz-1,    0));\n\n    // Take gradient of vorticity magnitude field\n    float omega_xp = length(texelFetch(vorticity_sampler, mapVsToFrag(X_ip), 0).rgb);\n    float omega_xn = length(texelFetch(vorticity_sampler, mapVsToFrag(X_in), 0).rgb);\n    float omega_yp = length(texelFetch(vorticity_sampler, mapVsToFrag(X_jp), 0).rgb);\n    float omega_yn = length(texelFetch(vorticity_sampler, mapVsToFrag(X_jn), 0).rgb);\n    float omega_zp = length(texelFetch(vorticity_sampler, mapVsToFrag(X_kp), 0).rgb);\n    float omega_zn = length(texelFetch(vorticity_sampler, mapVsToFrag(X_kn), 0).rgb);\n\n    vec3 eta = vec3(omega_xp - omega_xn, omega_yp - omega_yn, omega_zp - omega_zn);\n    vec3 N = eta / (length(eta) + 1.0e-6);\n    vec3 omega = texelFetch(vorticity_sampler, frag, 0).rgb;\n    return vorticity_scale * cross(N, omega);\n}\n\nbool isSolidCell(in ivec3 vsPi)\n{\n    vec3 vsP = vec3(float(vsPi.x)+0.5, float(vsPi.y)+0.5,float(vsPi.z)+0.5);\n    vec3 wsP = vsP*dL;\n    return collisionSDF(wsP, time, L, dL) < 0.0;\n}\n\nvoid main()\n{\n    init();\n\n    // fragment range over [N*N, N] space\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    vec3 vsP = mapFragToVs(frag);\n    ivec3 vsPi = ivec3(floor(vsP));\n\n    if (isSolidCell(vsPi))\n    {\n        Vair_output       = texelFetch(Vair_sampler, frag, 0);\n        Pair_output       = texelFetch(Pair_sampler, frag, 0);\n        Tair_output       = texelFetch(Tair_sampler, frag, 0);\n        absorption_output = texelFetch(absorption_sampler, frag, 0);\n        scattering_output = texelFetch(scattering_sampler, frag, 0);\n    }\n    else\n    {\n        // Apply semi-Lagrangian advection\n        vec3 v0 = texelFetch(Vair_sampler, frag, 0).xyz;\n        vec3 wsP = vsP*dL;\n        vec3 wsP_back = back_advect(wsP, v0, timestep);\n        vec3 v          = interp(Vair_sampler, wsP_back).rgb;\n        float P         = interp(Pair_sampler, wsP_back).r;\n        vec4 T          = interp(Tair_sampler, wsP_back);\n        vec3 absorption = interp(absorption_sampler, wsP_back).rgb;\n        vec3 scattering = interp(scattering_sampler, wsP_back).rgb;\n        vec3 medium = absorption + scattering;\n\n        // Apply external forces\n        v += timestep * externalForces(wsP, time, L, dL, v, P, T, medium);\n\n        // Apply vorticity confinement:\n        if (vorticity_scale > 0.0)\n            v += timestep * vorticityConfinementForce(frag, vsPi);\n\n        Vair_output       = vec4(v, 0.0);\n        Pair_output       = vec4(vec3(P), 0.0);\n        Tair_output       = T;\n        absorption_output = vec4(absorption, 0.0);\n        scattering_output = vec4(scattering, 0.0);\n    }\n}\n",
"advect-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nout vec2 v_texcoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n    v_texcoord = TexCoord;\n}\n","copy-fragment-shader":"#version 300 es\nprecision highp float;\n\n/////// input buffers ///////\nuniform sampler2D Qin;\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Qcopy;\n\n\nvoid main()\n{\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    Qcopy = texelFetch(Qin, frag, 0);\n}\n",
"copy-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","div-fragment-shader":"#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\nuniform float time;\n\n/////// input buffers ///////\nuniform sampler2D Vair_sampler; // 0, vec3 velocity field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 divVair_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords in [W, H]\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    int iu = col*Nx + i;\n    int iv = row*Nz + k;\n    return ivec2(iu, iv);\n}\n\nbool isSolidCell(in ivec3 vsPi)\n{\n    vec3 vsP = vec3(float(vsPi.x)+0.5, float(vsPi.y)+0.5,float(vsPi.z)+0.5);\n    vec3 wsP = vsP*dL;\n    return collisionSDF(wsP, time, L, dL) < 0.0;\n}\n\nvoid main()\n{\n    init();\n\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    ivec3 vsX = ivec3(floor(mapFragToVs(frag)));\n    int ix = vsX.x;\n    int iy = vsX.y;\n    int iz = vsX.z;\n\n    // Apply Neumann boundary conditions at grid boundaries\n    ivec3 X_ip = ivec3(min(ix+1, Nx-1), iy, iz);\n    ivec3 X_in = ivec3(max(ix-1,    0), iy, iz);\n    ivec3 X_jp = ivec3(ix, min(iy+1, Ny-1), iz);\n    ivec3 X_jn = ivec3(ix, max(iy-1,    0), iz);\n    ivec3 X_kp = ivec3(ix, iy, min(iz+1, Nz-1));\n    ivec3 X_kn = ivec3(ix, iy, max(iz-1,    0));\n\n    float V_xp = texelFetch(Vair_sampler, mapVsToFrag(X_ip), 0).x;\n    float V_xn = texelFetch(Vair_sampler, mapVsToFrag(X_in), 0).x;\n    float V_yp = texelFetch(Vair_sampler, mapVsToFrag(X_jp), 0).y;\n    float V_yn = texelFetch(Vair_sampler, mapVsToFrag(X_jn), 0).y;\n    float V_zp = texelFetch(Vair_sampler, mapVsToFrag(X_kp), 0).z;\n    float V_zn = texelFetch(Vair_sampler, mapVsToFrag(X_kn), 0).z;\n\n    // Apply solid no-slip boundary conditions\n    if (isSolidCell(X_ip)) V_xp = 0.0;\n    if (isSolidCell(X_in)) V_xn = 0.0;\n    if (isSolidCell(X_jp)) V_yp = 0.0;\n    if (isSolidCell(X_jn)) V_yn = 0.0;\n    if (isSolidCell(X_kp)) V_zp = 0.0;\n    if (isSolidCell(X_kn)) V_zn = 0.0;\n\n    float divVair = 0.5 * ((V_xp - V_xn) + (V_yp - V_yn) + (V_zp - V_zn)) / dL;\n    divVair_output = vec4(divVair);\n}\n",
"div-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","initial-fragment-shader":"#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform int W;\nuniform int H;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Vair_output;\nlayout(location = 1) out vec4 Pair_output;\nlayout(location = 2) out vec4 Tair_output;\nlayout(location = 3) out vec4 absorption_output;\nlayout(location = 4) out vec4 scattering_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nvoid main()\n{\n    init();\n\n    // fragment range over [N*N, N] space\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    vec3 vsP = mapFragToVs(frag);\n    ivec3 vsPi = ivec3(floor(vsP));\n    vec3 wsP = vsP*dL;\n\n    vec3 v = vec3(0.0);\n    vec4 T = vec4(0.0);\n    vec3 mediumDensity = vec3(0.0);\n    vec3 mediumAlbedo = vec3(0.0);\n    initial_conditions(wsP, L, dL,\n                       v, T,\n                       mediumDensity, mediumAlbedo);\n\n    vec3 scattering = mediumDensity * mediumAlbedo;\n    vec3 absorption = mediumDensity - scattering;\n\n    Vair_output   = vec4(v, 0.0);\n    Pair_output   = vec4(0.0);\n    Tair_output   = T;\n    absorption_output = vec4(absorption, 0.0);\n    scattering_output = vec4(scattering, 0.0);\n}\n",
"initial-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","inject-fragment-shader":"#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform int W;\nuniform int H;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n// Physics\nuniform float time;\nuniform float timestep;\n\n/////// input buffers ///////\nuniform sampler2D Vair_sampler;       // 0, vec3 air velocity field\nuniform sampler2D Tair_sampler;       // 1, float air temperature field\nuniform sampler2D absorption_sampler; // 2, vec3 absorption field\nuniform sampler2D scattering_sampler; // 3, vec3 scattering field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Vair_output;\nlayout(location = 1) out vec4 Tair_output;\nlayout(location = 2) out vec4 absorption_output;\nlayout(location = 3) out vec4 scattering_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\nbool isSolidCell(in ivec3 vsPi)\n{\n    vec3 vsP = vec3(float(vsPi.x)+0.5, float(vsPi.y)+0.5,float(vsPi.z)+0.5);\n    vec3 wsP = vsP*dL;\n    return collisionSDF(wsP, time, L, dL) < 0.0;\n}\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nvoid main()\n{\n    init();\n\n    // fragment range over [N*N, N] space\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    vec3 vsP = mapFragToVs(frag);\n    ivec3 vsPi = ivec3(floor(vsP));\n    vec3 wsP = vsP*dL;\n\n    if (isSolidCell(vsPi))\n    {\n        Vair_output   = texelFetch(Vair_sampler, frag, 0);\n        Tair_output   = texelFetch(Tair_sampler, frag, 0);\n        absorption_output = texelFetch(absorption_sampler, frag, 0);\n        scattering_output = texelFetch(scattering_sampler, frag, 0);\n    }\n    else\n    {\n        // Get current velocity, temperature, and debris fields:\n        vec3 v = texelFetch(Vair_sampler, frag, 0).rgb;\n        vec4 T = texelFetch(Tair_sampler, frag, 0);\n        vec3 absorption = texelFetch(absorption_sampler, frag, 0).rgb;\n        vec3 scattering = texelFetch(scattering_sampler, frag, 0).rgb;\n\n        // Inject mass and modify temperature:\n        vec3 vInflow      = vec3(0.0);\n        vec4 Tinflow      = vec4(0.0);\n        vec3 mediumInflow = vec3(0.0);\n        vec3 mediumAlbedo = vec3(0.5);\n\n        inject(wsP, time, L, dL,\n               v, vInflow,\n               T, Tinflow,\n               mediumInflow, mediumAlbedo);\n\n        v += vInflow * timestep;\n        T += Tinflow * timestep;\n\n        vec3 scatteringInflow = mediumAlbedo * mediumInflow;\n        vec3 absorptionInflow = mediumInflow - scatteringInflow;\n        absorption += absorptionInflow * timestep;\n        scattering += scatteringInflow * timestep;\n\n        Vair_output       = vec4(v, 0.0);\n        Tair_output       = T;\n        absorption_output = vec4(absorption, 0.0);\n        scattering_output = vec4(scattering, 0.0);\n    }\n}\n",
"inject-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","line-fragment-shader":"#version 300 es\nprecision highp float;\n\nout vec4 outputColor;\nuniform vec4 color;\n\nvoid main() \n{\n\toutputColor = color;\n}\n","line-vertex-shader":"#version 300 es\nprecision highp float;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_modelViewMatrix;\n\nin vec3 Position;\n\nvoid main()\n{\n\tgl_Position = u_projectionMatrix * u_modelViewMatrix * vec4(Position, 1.0);\n}\n",
"project-fragment-shader":'#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n// Physics\nuniform float time;\nuniform float timestep;\nuniform float expansion;\n\n/////// input buffers ///////\nuniform sampler2D Pair_sampler;    // 0, float pressure field\nuniform sampler2D Tair_sampler;    // 1, float temperature field\nuniform sampler2D divVair_sampler; // 2, float divergence field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Pair_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords in [W, H]\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    int iu = col*Nx + i;\n    int iv = row*Nz + k;\n    return ivec2(iu, iv);\n}\n\nbool isSolidCell(in ivec3 vsPi)\n{\n    vec3 vsP = vec3(float(vsPi.x)+0.5, float(vsPi.y)+0.5,float(vsPi.z)+0.5);\n    vec3 wsP = vsP*dL;\n    return collisionSDF(wsP, time, L, dL) < 0.0;\n}\n\nvoid main()\n{\n    init();\n\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    ivec3 vsX = ivec3(floor(mapFragToVs(frag)));\n    int ix = vsX.x;\n    int iy = vsX.y;\n    int iz = vsX.z;\n\n    // Apply Neumann boundary conditions at grid boundaries\n    ivec3 X_ip = ivec3(min(ix+1, Nx-1), iy, iz);\n    ivec3 X_in = ivec3(max(ix-1,    0), iy, iz);\n    ivec3 X_jp = ivec3(ix, min(iy+1, Ny-1), iz);\n    ivec3 X_jn = ivec3(ix, max(iy-1,    0), iz);\n    ivec3 X_kp = ivec3(ix, iy, min(iz+1, Nz-1));\n    ivec3 X_kn = ivec3(ix, iy, max(iz-1,    0));\n\n    // Get air pressure, temperature and velocity divergence at voxel\n    float P     = texelFetch(Pair_sampler, frag, 0).x;\n    float T     = texelFetch(Tair_sampler, frag, 0).x;\n    float div_v = texelFetch(divVair_sampler, frag, 0).x;\n\n    // Introduce local expansion due to heated fluid\n    div_v -= timestep * expansion * T;\n\n    // Get pressure values at local stencil\n    float P_xp = texelFetch(Pair_sampler, mapVsToFrag(X_ip), 0).r;\n    float P_xn = texelFetch(Pair_sampler, mapVsToFrag(X_in), 0).r;\n    float P_yp = texelFetch(Pair_sampler, mapVsToFrag(X_jp), 0).r;\n    float P_yn = texelFetch(Pair_sampler, mapVsToFrag(X_jn), 0).r;\n    float P_zp = texelFetch(Pair_sampler, mapVsToFrag(X_kp), 0).r;\n    float P_zn = texelFetch(Pair_sampler, mapVsToFrag(X_kn), 0).r;\n\n    // Apply pressure Neumann boundary-condition for solid cells:\n    if (isSolidCell(X_ip)) P_xp = P;\n    if (isSolidCell(X_in)) P_xn = P;\n    if (isSolidCell(X_jp)) P_yp = P;\n    if (isSolidCell(X_jn)) P_yn = P;\n    if (isSolidCell(X_kp)) P_zp = P;\n    if (isSolidCell(X_kn)) P_zn = P;\n\n    // Thus compute Jacobi-relaxation solution of Poisson equation:\n    //   Laplacian[p] = Divergence[v]\n    float avgp = (P_xp + P_xn + P_yp + P_yn + P_zp + P_zn) / 6.0;\n\n    // For the pressure projection formula, see:\n    //  - "Fast Fluid Dynamics Simulation on the GPU", Harris\n    //  - "Real-Time Simulation and Rendering of 3D Fluids", Crane et. al\n    //  - Numerical Recipes 19.5.5, extended to 3d\n    float P_relax = avgp - dL*dL*div_v/6.0;\n\n    Pair_output = vec4(P_relax);\n}\n',
"project-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","tonemap-fragment-shader":"#version 300 es\nprecision highp float;\n\nuniform sampler2D Radiance;\nin vec2 vTexCoord;\n\nuniform float exposure;\nuniform float invGamma;\nuniform float saturation;\n\nout vec4 g_outputColor;\n\nfloat toneMap(float L)\n{\n  return L / (1.0 + L);\n}\n\nvoid main()\n{\n    vec3 RGB = texture(Radiance, vTexCoord).rgb;\n\n    // apply gamma correction to convert linear RGB to sRGB\n    RGB = pow(RGB, vec3(invGamma));\n\n    // deal with out-of-gamut RGB.\n    float delta = -min(0.0, min(min(RGB.r, RGB.g), RGB.b));\n    RGB.r += delta;\n    RGB.g += delta;\n    RGB.b += delta;\n\n    // apply tonemapping\n    RGB *= pow(2.0, exposure);\n    float R = RGB.r;\n    float G = RGB.g;\n    float B = RGB.b;\n    R = toneMap(R);\n    G = toneMap(G);\n    B = toneMap(B);\n\n    // apply saturation\n    float mean = (R + G + B)/3.0;\n    float dR = R - mean;\n    float dG = G - mean;\n    float dB = B - mean;\n    R = mean + sign(dR)*pow(abs(dR), 1.0/saturation);\n    G = mean + sign(dG)*pow(abs(dG), 1.0/saturation);\n    B = mean + sign(dB)*pow(abs(dB), 1.0/saturation);\n\n    g_outputColor = vec4(vec3(R,G,B), 1.0);\n}\n",
"tonemap-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\nout vec2 vTexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n    vTexCoord = TexCoord;\n}\n","update-fragment-shader":'#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n// Physics\nuniform float time;\nuniform float timestep;\n\n/////// input buffers ///////\nuniform sampler2D Vair_sampler; // 0, vec3 velocity field\nuniform sampler2D Pair_sampler; // 1, float pressure field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 Vair_output;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords in [W, H]\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    int iu = col*Nx + i;\n    int iv = row*Nz + k;\n    return ivec2(iu, iv);\n}\n\nbool isSolidCell(in ivec3 vsPi)\n{\n    vec3 vsP = vec3(float(vsPi.x)+0.5, float(vsPi.y)+0.5,float(vsPi.z)+0.5);\n    vec3 wsP = vsP*dL;\n    return collisionSDF(wsP, time, L, dL) < 0.0;\n}\n\nvoid main()\n{\n    init();\n\n    // Setup local stencil:\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    ivec3 vsXi = ivec3(floor(mapFragToVs(frag)));\n    int ix = vsXi.x;\n    int iy = vsXi.y;\n    int iz = vsXi.z;\n\n    // Apply Neumann boundary conditions at grid boundaries\n    ivec3 X_ip = ivec3(min(ix+1, Nx-1), iy, iz);\n    ivec3 X_in = ivec3(max(ix-1,    0), iy, iz);\n    ivec3 X_jp = ivec3(ix, min(iy+1, Ny-1), iz);\n    ivec3 X_jn = ivec3(ix, max(iy-1,    0), iz);\n    ivec3 X_kp = ivec3(ix, iy, min(iz+1, Nz-1));\n    ivec3 X_kn = ivec3(ix, iy, max(iz-1,    0));\n\n    // air velocity at voxel\n    vec3 v = texelFetch(Vair_sampler, frag, 0).rgb;\n\n    // Get pressure values at local stencil\n    float  P   = texelFetch(Pair_sampler, frag, 0).r;\n    float P_xp = texelFetch(Pair_sampler, mapVsToFrag(X_ip), 0).r;\n    float P_xn = texelFetch(Pair_sampler, mapVsToFrag(X_in), 0).r;\n    float P_yp = texelFetch(Pair_sampler, mapVsToFrag(X_jp), 0).r;\n    float P_yn = texelFetch(Pair_sampler, mapVsToFrag(X_jn), 0).r;\n    float P_zp = texelFetch(Pair_sampler, mapVsToFrag(X_kp), 0).r;\n    float P_zn = texelFetch(Pair_sampler, mapVsToFrag(X_kn), 0).r;\n\n    // Apply pressure Neumann boundary-condition for solid cells:\n    vec3 vMask = vec3(1.0, 1.0, 1.0);\n    if (isSolidCell(X_ip)) { P_xp = P; vMask.x = 0.0; }\n    if (isSolidCell(X_in)) { P_xn = P; vMask.x = 0.0; }\n    if (isSolidCell(X_jp)) { P_yp = P; vMask.y = 0.0; }\n    if (isSolidCell(X_jn)) { P_yn = P; vMask.y = 0.0; }\n    if (isSolidCell(X_kp)) { P_zp = P; vMask.z = 0.0; }\n    if (isSolidCell(X_kn)) { P_zn = P; vMask.z = 0.0; }\n\n    // Update air velocity accordingly (see "Real-Time Simulation and Rendering of 3D Fluids", Crane et. al)\n    vec3 gradp = 0.5*vec3(P_xp - P_xn, P_yp - P_yn, P_zp - P_zn)/dL;\n    vec3 vnew = v - gradp;\n    vnew = vMask*vnew;\n\n    Vair_output = vec4(vnew, 0.0);\n}\n',
"update-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n","volume-fragment-shader":'#version 300 es\nprecision highp float;\n\nin vec2 vTexCoord;\n\n// Camera\nuniform vec2 resolution;\nuniform vec3 camPos;\nuniform vec3 camDir;\nuniform vec3 camX;\nuniform vec3 camY;\nuniform float camFovy; // degrees\nuniform float camAspect;\nuniform vec3 volMin;\nuniform vec3 volMax;\nuniform vec3 volCenter;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform int W;\nuniform int H;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\nuniform int Nraymarch;\n\n// Physics\nuniform float time;\nuniform float extinctionScale;\nuniform float emissionScale;\nuniform float anisotropy;\n\n// Lighting\nuniform vec3 skyColor;\nuniform vec3 sunColor;\nuniform float sunPower;\nuniform vec3 sunDir;\nuniform vec3 colliderDiffuse;\nuniform vec3 colliderSpec;\nuniform float colliderRoughness;\n\n// Progressive rendering\nuniform int spp;\n\n// Tonemapping\nuniform float exposure;\nuniform float invGamma;\n\n/////// input buffers ///////\nuniform sampler2D Radiance;           // 0 (last frame radiance)\nuniform sampler2D RngData;            // 1 (last frame rng seed)\nuniform sampler2D absorption_sampler; // 2, vec3 absorption field\nuniform sampler2D scattering_sampler; // 3, vec3 scattering field\nuniform sampler2D Tair_sampler;       // 4, float temperature field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 gbuf_rad;\nlayout(location = 1) out vec4 gbuf_rng;\n\n/////////////////////// user-defined code ///////////////////////\n_USER_CODE_\n/////////////////////// user-defined code ///////////////////////\n\n#define sort2(a,b) { vec3 tmp=min(a,b); b=a+b-tmp; a=tmp; }\n#define DENOM_EPSILON 1.0e-7\n\n/// GLSL floating point pseudorandom number generator, from\n/// "Implementing a Photorealistic Rendering System using GLSL", Toshiya Hachisuka\n/// http://arxiv.org/pdf/1505.06022.pdf\nfloat rand(inout vec4 rnd)\n{\n    const vec4 q = vec4(   1225.0,    1585.0,    2457.0,    2098.0);\n    const vec4 r = vec4(   1112.0,     367.0,      92.0,     265.0);\n    const vec4 a = vec4(   3423.0,    2646.0,    1707.0,    1999.0);\n    const vec4 m = vec4(4194287.0, 4194277.0, 4194191.0, 4194167.0);\n    vec4 beta = floor(rnd/q);\n    vec4 p = a*(rnd - beta*q) - beta*r;\n    beta = (1.0 - sign(p))*0.5*m;\n    rnd = p + beta;\n    return fract(dot(rnd/m, vec4(1.0, -1.0, 1.0, -1.0)));\n}\n\nbool boundsIntersect( in vec3 rayPos, in vec3 rayDir, in vec3 bbMin, in vec3 bbMax,\n                      inout float t0, inout float t1 )\n{\n    vec3 dX = vec3(1.0f/rayDir.x, 1.0f/rayDir.y, 1.0f/rayDir.z);\n    vec3 lo = (bbMin - rayPos) * dX;\n    vec3 hi = (bbMax - rayPos) * dX;\n    sort2(lo, hi);\n    bool hit = !( lo.x>hi.y || lo.y>hi.x || lo.x>hi.z || lo.z>hi.x || lo.y>hi.z || lo.z>hi.y );\n    t0 = max(max(lo.x, lo.y), lo.z);\n    t1 = min(min(hi.x, hi.y), hi.z);\n    return hit;\n}\n\nfloat shadowHit(in vec3 rayPos, in vec3 rayDir, in vec3 bbMin, in vec3 bbMax)\n{\n    // (get first hit assuming rayPos is interior to the AABB)\n    vec3 dX = vec3(1.0f/rayDir.x, 1.0f/rayDir.y, 1.0f/rayDir.z);\n    vec3 lo = (bbMin - rayPos) * dX;\n    vec3 hi = (bbMax - rayPos) * dX;\n    sort2(lo, hi);\n    return min(min(hi.x, hi.y), hi.z);\n}\n\nvoid constructPrimaryRay(in vec2 frag,\n                         inout vec3 rayPos, inout vec3 rayDir)\n{\n    // Compute world ray direction for given (possibly jittered) fragment\n    vec2 ndc = -1.0 + 2.0*(frag/resolution.xy);\n    float fh = tan(0.5*radians(camFovy)); // frustum height\n    float fw = camAspect*fh;\n    vec3 s = -fw*ndc.x*camX + fh*ndc.y*camY;\n    rayDir = normalize(camDir + s);\n    rayPos = camPos;\n}\n\nvec2 slicetoUV(int j, vec3 vsP)\n{\n    // Given y-slice index j, and continuous voxel space xz-location,\n    // return corresponding continuous frag UV for interpolation within this slice\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    vec2 uv_ll = vec2(float(col*Nx)/float(W), float(row*Nz)/float(H));\n    float du = vsP.x/float(W);\n    float dv = vsP.z/float(H);\n    return uv_ll + vec2(du, dv);\n}\n\nvec4 interp(in sampler2D S, in vec3 wsP)\n{\n    vec3 vsP = wsP / dL;\n    float pY = vsP.y - 0.5;\n    int jlo = clamp(int(floor(pY)), 0, Ny-1); // lower j-slice\n    int jhi = clamp(         jlo+1, 0, Ny-1); // upper j-slice\n    float flo = float(jhi) - pY;              // lower j fraction\n    float fhi = 1.0 - flo;                    // upper j fraction\n    vec2 uv_lo = slicetoUV(jlo, vsP);\n    vec2 uv_hi = slicetoUV(jhi, vsP);\n    vec4 Slo = texture(S, uv_lo);\n    vec4 Shi = texture(S, uv_hi);\n    return flo*Slo + fhi*Shi;\n}\n\nvec3 clampToBounds(in vec3 wsP)\n{\n    vec3 voxel = vec3(dL);\n    return clamp(wsP, voxel, L-voxel);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int ui = Nx*j + i;\n    int vi = k;\n    return ivec2(ui, vi);\n}\n\nvec3 sun_transmittance(in vec3 pW, float stepSize, vec4 rnd)\n{\n    vec3 Tr = vec3(1.0); // transmittance\n    float t = shadowHit(pW, sunDir, volMin, volMax);\n    float xi = rand(rnd);\n    int numSteps = int(ceil(t/stepSize+xi));\n    for (int n=0; n<256; ++n)\n    {\n        if (n>=numSteps) break;\n        float dt;\n        float tmid;\n        if (numSteps==1)\n        {\n            dt = t;\n            tmid = dt*xi;\n        }\n        else\n        {\n            float tmin = (float(n) - xi)*stepSize;\n            float tmax = min(tmin + stepSize, t);\n            tmin = max(0.0, tmin);\n            dt = tmax - tmin;\n            tmid = 0.5*(tmin+tmax);\n        }\n        vec3 pMarch = pW + tmid*sunDir;\n        vec3 wsP = pMarch - volMin; // transform pMarch into simulation domain:\n        vec3 absorption = interp(absorption_sampler, clampToBounds(wsP)).rgb;\n        vec3 scattering = interp(scattering_sampler, clampToBounds(wsP)).rgb;\n        vec3 sigma_t = (absorption + scattering) * extinctionScale;\n        Tr *= exp(-sigma_t*dt); // transmittance over step\n    }\n    return Tr;\n}\n\nfloat _sdBox(vec3 pW, vec3 bmin, vec3 bmax)\n{\n    vec3 d = abs(pW-0.5*(bmin+bmax)) - 0.5*(bmax-bmin);\n    return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));\n}\n\nfloat _collisionSDF(vec3 wsP)\n{\n    float s = _sdBox(wsP, volMin, volMax);\n    return max(s, collisionSDF(wsP, time, L, dL));\n}\n\nbool traceSDF(in vec3 start, in vec3 dir, float tend, float lengthScale, inout float t)\n{\n    float minMarch = 1.0e-3 * lengthScale;\n    const float HUGE_VAL = 1.0e20;\n    vec3 pW = start;\n    vec3 wsP = pW - volMin;\n    float sdf = _collisionSDF(wsP);\n    float InitialSign = sign(sdf);\n    t = InitialSign * sdf;\n    if (t>=tend) return false;\n    for (int n=0; n<256; n++)\n    {\n        vec3 pW = start + t*dir;\n        wsP = pW - volMin;\n        sdf = abs(_collisionSDF(wsP));\n        if (sdf<minMarch)\n            return true;\n        t += InitialSign * sdf;\n        if (t>=tend) return false;\n    }\n    return false;\n}\n\nvec3 normalSDF(in vec3 pW, float lengthScale)\n{\n    // Compute normal as gradient of SDF\n    float normalEpsilon = 2.0e-3 * lengthScale;\n    vec3 e = vec3(normalEpsilon, 0.0, 0.0);\n    vec3 Xp = pW+e.xyy; vec3 Xn = pW-e.xyy;\n    vec3 Yp = pW+e.yxy; vec3 Yn = pW-e.yxy;\n    vec3 Zp = pW+e.yyx; vec3 Zn = pW-e.yyx;\n    vec3 N;\n    N = vec3(   _collisionSDF(Xp) - _collisionSDF(Xn),\n                _collisionSDF(Yp) - _collisionSDF(Yn),\n                _collisionSDF(Zp) - _collisionSDF(Zn));\n    return normalize(N);\n}\n\n\nvec3 colliderRadiance(in vec3 pW, in vec3 rayDir, float lengthScale, float stepSize, inout vec4 rnd)\n{\n    vec3 N = normalSDF(pW, lengthScale); // local SDF normal\n    vec3 L = sunDir;\n    float LN = max(0.0, dot(L, N));\n    vec3 Li = sunPower * sunColor * sun_transmittance(pW, 3.0*stepSize, rnd); // sun radiance\n    vec3 R = -reflect(L, N);\n    vec3 V = -rayDir;\n    vec3 phong = colliderDiffuse*LN + colliderSpec*pow(max(0.0, dot(R, V)), 1.0/colliderRoughness);\n    vec3 ambient = 0.05*colliderDiffuse;\n    return (phong*Li + ambient);\n}\n\nvoid main()\n{\n    vec2 frag = gl_FragCoord.xy;\n    vec3 rayPos, rayDir;\n    constructPrimaryRay(frag, rayPos, rayDir);\n\n    vec3 L = vec3(0.0);\n    vec3 Lbackground = skyColor;\n    vec3 Tr = vec3(1.0); // transmittance along camera ray\n\n    // jitter raymarch randomly:\n    vec4 rnd = texture(RngData, vTexCoord);\n    float xi = rand(rnd);\n    float lengthScale = length(volMax - volMin);\n    float stepSize = lengthScale / float(Nraymarch);\n\n    // intersect ray with volume bounds\n    float t0, t1;\n    if ( boundsIntersect(rayPos, rayDir, volMin, volMax, t0, t1) )\n    {\n        t0 = max(0.0, t0);\n        float t01 = t1 - t0;\n\n        // Check for hit with collision object\n        vec3 trace_start = rayPos + t0*rayDir;\n        float t_trace;\n        if (traceSDF(trace_start, rayDir, t01, lengthScale, t_trace))\n        {\n            vec3 hit = trace_start + t_trace*rayDir;\n            Lbackground = colliderRadiance(hit, rayDir, lengthScale, stepSize, rnd);\n            t1 = t0 + t_trace;\n            t01 = t1 - t0;\n        }\n\n        int numSteps = int(ceil(t01/stepSize+xi));\n        numSteps = min(256, numSteps);\n        for (int n=0; n<1024; ++n)\n        {\n            if (n>=numSteps) break;\n\n            // Compute step bounds\n            float dt;\n            float tmid;\n            if (numSteps==1)\n            {\n                dt = t01;\n                tmid = t0 + dt*xi;\n            }\n            else\n            {\n                float tmin = t0 + (float(n) - xi)*stepSize;\n                float tmax = min(tmin + stepSize, t1);\n                tmin = max(t0, tmin);\n                dt = tmax - tmin;\n                tmid = 0.5*(tmin+tmax);\n            }\n\n            // transform pMarch into simulation domain:\n            vec3 pMarch = rayPos + tmid*rayDir;\n            vec3 wsP = pMarch - volMin;\n\n            // Compute extinction and albedo at step midpoint\n            vec3 absorption = interp(absorption_sampler, clampToBounds(wsP)).rgb;\n            vec3 scattering = interp(scattering_sampler, clampToBounds(wsP)).rgb;\n            vec3 mediumExtinction = (absorption + scattering);\n            vec3 mediumAlbedo = scattering / max(mediumExtinction, vec3(DENOM_EPSILON));\n            mediumRemap(mediumExtinction, mediumAlbedo);\n            mediumExtinction *= extinctionScale;\n\n            // Compute in-scattered sunlight\n            vec3 Li = sunPower * sunColor * sun_transmittance(pMarch, 3.0*stepSize, rnd);\n            vec3 dTr = exp(-mediumExtinction*dt); // transmittance over step\n            vec3 J = Li * mediumAlbedo * Tr * (vec3(1.0) - dTr); // scattering term integrated over step, assuming constant Li\n            L += J * phaseFunction(dot(sunDir, rayDir), anisotropy);\n\n            // Emit radiation from hot air\n            vec4 T = interp(Tair_sampler, clampToBounds(wsP));\n            vec3 emission = emissionScale * temperatureToEmission(T);\n            L += Tr * emission * dt;\n\n            // Update transmittance for start of next step\n            Tr *= dTr;\n        }\n    }\n\n    // Add background "sky" radiance, attenuated by volume\n    L += Tr * Lbackground;\n\n    // Add latest radiance estimate to the the Monte Carlo average\n    vec4 oldL = vec4(0.0);\n    if (spp>0)\n        oldL = texture(Radiance, vTexCoord);\n    vec3 newL = (float(spp)*oldL.rgb + L) / (float(spp) + 1.0);\n\n    // Output radiance\n    gbuf_rad = vec4(newL, 1.0);\n    gbuf_rng = rnd;\n}\n',
"volume-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nout vec2 vTexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n    vTexCoord = TexCoord;\n}\n","vorticity-fragment-shader":"#version 300 es\nprecision highp float;\n\n// Geometry\nuniform int Nx;\nuniform int Ny;\nuniform int Nz;\nuniform int Ncol;\nuniform vec3 L; // world-space extents of grid (also the upper right corner in world space)\nuniform float dL;\n\n/////// input buffers ///////\nuniform sampler2D Vair_sampler; // 0, vec3 velocity field\n\n/////// output buffers ///////\nlayout(location = 0) out vec4 vorticity_output;\n\nvec3 mapFragToVs(in ivec2 frag)\n{\n    // map fragment coord in [W, H] to continuous position of corresponding voxel center in voxel space\n    int iu = frag.x;\n    int iv = frag.y;\n    int row = int(floor(float(iv)/float(Nz)));\n    int col = int(floor(float(iu)/float(Nx)));\n    int i = iu - col*Nx;\n    int j = col + row*Ncol;\n    int k = iv - row*Nz;\n    return vec3(ivec3(i, j, k)) + vec3(0.5);\n}\n\nivec2 mapVsToFrag(in ivec3 vsP)\n{\n    // map integer voxel space coords to the corresponding fragment coords in [W, H]\n    int i = vsP.x;\n    int j = vsP.y;\n    int k = vsP.z;\n    int row = int(floor(float(j)/float(Ncol)));\n    int col = j - row*Ncol;\n    int iu = col*Nx + i;\n    int iv = row*Nz + k;\n    return ivec2(iu, iv);\n}\n\nvec3 curl_v(in ivec3 vsXi)\n{\n    int ix = vsXi.x;\n    int iy = vsXi.y;\n    int iz = vsXi.z;\n    ivec3 X_ip = ivec3(min(ix+1, Nx-1), iy, iz);\n    ivec3 X_in = ivec3(max(ix-1,    0), iy, iz);\n    ivec3 X_jp = ivec3(ix, min(iy+1, Ny-1), iz);\n    ivec3 X_jn = ivec3(ix, max(iy-1,    0), iz);\n    ivec3 X_kp = ivec3(ix, iy, min(iz+1, Nz-1));\n    ivec3 X_kn = ivec3(ix, iy, max(iz-1,    0));\n\n    // Get velocity values on stencil\n    vec3 v_xp = texelFetch(Vair_sampler, mapVsToFrag(X_ip), 0).rgb;\n    vec3 v_xn = texelFetch(Vair_sampler, mapVsToFrag(X_in), 0).rgb;\n    vec3 v_yp = texelFetch(Vair_sampler, mapVsToFrag(X_jp), 0).rgb;\n    vec3 v_yn = texelFetch(Vair_sampler, mapVsToFrag(X_jn), 0).rgb;\n    vec3 v_zp = texelFetch(Vair_sampler, mapVsToFrag(X_kp), 0).rgb;\n    vec3 v_zn = texelFetch(Vair_sampler, mapVsToFrag(X_kn), 0).rgb;\n\n    // Construct components of curl(v)\n    float inv2dL = 0.5/dL;\n    float dvy_dx = (v_xp.y - v_xn.y) * inv2dL;\n    float dvz_dx = (v_xp.z - v_xn.z) * inv2dL;\n    float dvx_dy = (v_yp.x - v_yn.x) * inv2dL;\n    float dvz_dy = (v_yp.z - v_yn.z) * inv2dL;\n    float dvx_dz = (v_zp.x - v_zn.x) * inv2dL;\n    float dvy_dz = (v_zp.y - v_zn.y) * inv2dL;\n    vec3 curl = vec3(dvz_dy - dvy_dz, dvx_dz - dvz_dx, dvy_dx - dvx_dy);\n    return curl;\n}\n\nvoid main()\n{\n    // Compute vorticity\n    ivec2 frag = ivec2(gl_FragCoord.xy);\n    ivec3 vsX = ivec3(floor(mapFragToVs(frag)));\n    vec3 vorticity = curl_v(vsX);\n    vorticity_output = vec4(vorticity, 0.0);\n}\n",
"vorticity-vertex-shader":"#version 300 es\nprecision highp float;\n\nin vec3 Position;\nin vec2 TexCoord;\n\nvoid main() \n{\n    gl_Position = vec4(Position, 1.0);\n}\n"};var Renderer=function(){this.settings={};this.settings.Nraymarch=100;this.settings.spp_per_frame=1;this.settings.max_spp=256;this.spp=0;this.settings.show_bounds=!0;this.settings.skyColor=[.5,.5,1];this.settings.sunColor=[1,1,.5];this.settings.sunPower=1;this.settings.sunLatitude=60;this.settings.sunLongitude=0;this.settings.colliderSpec=[.5,.5,.5];this.settings.colliderDiffuse=[.8,.2,.2];this.settings.colliderRoughness=.2;this.settings.exposure=-1;this.settings.gamma=2.2;this.settings.saturation=
1;this.settings.anisotropy=0;this.settings.extinctionScale=0;this.settings.emissionScale=3;this.boxVbo=null;this.quadVbo=this.createQuadVbo();this.tonemapProgram=this.lineProgram=this.volumeProgram=null;this.shaderSources=GLU.resolveShaderSource(["volume","tonemap","line"]);var a=trinity.render_canvas;a.width=window.innerWidth;a.height=window.innerHeight;this._width=a.width;this._height=a.height;this.compiled_successfully=!1;this.resize(this._width,this._height)};
Renderer.prototype.createQuadVbo=function(){var a=GLU.gl,b=new GLU.VertexBuffer;b.addAttribute("Position",3,a.FLOAT,!1);b.addAttribute("TexCoord",2,a.FLOAT,!1);b.init(4);b.copy(new Float32Array([1,1,0,1,1,-1,1,0,0,1,-1,-1,0,0,0,1,-1,0,1,0]));return b};
Renderer.prototype.createBoxVbo=function(a,b){var c=GLU.gl;a=[a[0],a[1],a[2],a[0]+b[0],a[1],a[2],a[0]+b[0],a[1],a[2],a[0]+b[0],a[1]+b[1],a[2],a[0]+b[0],a[1]+b[1],a[2],a[0],a[1]+b[1],a[2],a[0],a[1]+b[1],a[2],a[0],a[1],a[2],a[0],a[1],a[2]+b[2],a[0]+b[0],a[1],a[2]+b[2],a[0]+b[0],a[1],a[2]+b[2],a[0]+b[0],a[1]+b[1],a[2]+b[2],a[0]+b[0],a[1]+b[1],a[2]+b[2],a[0],a[1]+b[1],a[2]+b[2],a[0],a[1]+b[1],a[2]+b[2],a[0],a[1],a[2]+b[2],a[0],a[1],a[2],a[0],a[1],a[2]+b[2],a[0]+b[0],a[1],a[2],a[0]+b[0],a[1],a[2]+b[2],
a[0],a[1]+b[1],a[2],a[0],a[1]+b[1],a[2]+b[2],a[0]+b[0],a[1]+b[1],a[2],a[0]+b[0],a[1]+b[1],a[2]+b[2]];b=new GLU.VertexBuffer;b.addAttribute("Position",3,c.FLOAT,!1);b.init(24);b.copy(new Float32Array(a));return b};Renderer.prototype.setBounds=function(a){var b=a.boundsMin;a=a.boundsMax;this.boxVbo=this.createBoxVbo(b,[a[0]-b[0],a[1]-b[1],a[2]-b[2]])};
Renderer.prototype.compileShaders=function(){console.warn("[Trinity] Renderer.prototype.compileShaders");var a=trinity.getGlsl("common")+"\n"+trinity.getGlsl("collide")+"\n"+trinity.getGlsl("render");trinity.show_errors();this.compiled_successfully=!1;this.volumeProgram=new GLU.Shader("volume",this.shaderSources,{_USER_CODE_:a});this.volumeProgram.program?(this.lineProgram=new GLU.Shader("line",this.shaderSources,null),this.lineProgram.program?(this.tonemapProgram=new GLU.Shader("tonemap",this.shaderSources,
null),this.tonemapProgram.program?(this.compiled_successfully=!0,trinity.hide_errors()):this.tonemapProgram=null):this.lineProgram=null):this.volumeProgram=null};
Renderer.prototype.render=function(a){if(this.compiled_successfully&&!(this.spp>=this.settings.max_spp)){var b=GLU.gl;b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.viewport(0,0,this._width,this._height);var c=trinity.getCamera(),d=c.position.clone(),e=c.getWorldDirection(),g=c.up.clone();g.transformDirection(c.matrixWorld);var h=new THREE.Vector3;h.crossVectors(g,e);var k=a.getDomain(),m=a.getTair(),n=a.getAbsorption(),p=a.getScattering(),q=0;this.volumeProgram.bind();n.bind(2);p.bind(3);m.bind(4);
this.volumeProgram.uniformTexture("absorption_sampler",n);this.volumeProgram.uniformTexture("scattering_sampler",p);this.volumeProgram.uniformTexture("Tair_sampler",m);trinity.getSolver().syncUserUniforms(this.volumeProgram);this.volumeProgram.uniform2Fv("resolution",[this._width,this._height]);this.volumeProgram.uniform3Fv("camPos",[d.x,d.y,d.z]);this.volumeProgram.uniform3Fv("camDir",[e.x,e.y,e.z]);this.volumeProgram.uniform3Fv("camX",[h.x,h.y,h.z]);this.volumeProgram.uniform3Fv("camY",[g.x,g.y,
g.z]);this.volumeProgram.uniformF("camFovy",c.fov);this.volumeProgram.uniformF("camAspect",c.aspect);this.volumeProgram.uniform3Fv("volMin",k.boundsMin);this.volumeProgram.uniform3Fv("volMax",k.boundsMax);this.volumeProgram.uniform3Fv("volCenter",k.boundsCenter);this.volumeProgram.uniformI("Nx",k.Nx);this.volumeProgram.uniformI("Ny",k.Ny);this.volumeProgram.uniformI("Nz",k.Nz);this.volumeProgram.uniformI("Ncol",k.Ncol);this.volumeProgram.uniformI("W",k.W);this.volumeProgram.uniformI("H",k.H);this.volumeProgram.uniform3Fv("L",
k.L);this.volumeProgram.uniformF("dL",k.dL);this.volumeProgram.uniformI("Nraymarch",this.settings.Nraymarch);this.volumeProgram.uniformF("time",a.time);this.volumeProgram.uniformF("anisotropy",this.settings.anisotropy);this.volumeProgram.uniformF("extinctionScale",Math.pow(10,this.settings.extinctionScale));this.volumeProgram.uniformF("emissionScale",Math.pow(10,this.settings.emissionScale));a=(90-this.settings.sunLatitude)*Math.PI/180;d=this.settings.sunLongitude*Math.PI/180;e=Math.sin(a);a=[e*Math.cos(d),
Math.cos(a),e*Math.sin(d)];this.volumeProgram.uniform3Fv("skyColor",this.settings.skyColor);this.volumeProgram.uniform3Fv("sunColor",this.settings.sunColor);this.volumeProgram.uniformF("sunPower",Math.pow(10,this.settings.sunPower));this.volumeProgram.uniform3Fv("sunDir",a);this.volumeProgram.uniform3Fv("colliderDiffuse",this.settings.colliderDiffuse);this.volumeProgram.uniform3Fv("colliderSpec",this.settings.colliderSpec);this.volumeProgram.uniformF("colliderRoughness",this.settings.colliderRoughness);
for(a=0;a<this.settings.spp_per_frame;++a)this.fbo.bind(),this.fbo.drawBuffers(2),d=this.spp%2,q=e=1-d,this.progressiveStates[d].bind(this.volumeProgram),this.progressiveStates[e].attach(this.fbo),this.volumeProgram.uniformI("spp",this.spp),this.quadVbo.bind(),this.quadVbo.draw(this.volumeProgram,b.TRIANGLE_FAN),this.spp++;this.spp>this.settings.max_spp&&(this.spp=this.settings.max_spp);this.fbo.unbind();b.bindTexture(b.TEXTURE_2D,null);this.tonemapProgram.bind();q=this.progressiveStates[q].radianceTex;
q.bind(0);this.tonemapProgram.uniformTexture("Radiance",q);this.tonemapProgram.uniformF("exposure",this.settings.exposure);this.tonemapProgram.uniformF("invGamma",1/this.settings.gamma);this.tonemapProgram.uniformF("saturation",this.settings.saturation);b.enable(b.BLEND);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);b.blendEquation(b.FUNC_ADD);this.quadVbo.bind();this.quadVbo.draw(this.tonemapProgram,b.TRIANGLE_FAN);b.disable(b.BLEND);this.settings.show_bounds&&(b.enable(b.BLEND),b.disable(b.DEPTH_TEST),
b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),this.lineProgram.bind(),q=c.projectionMatrix.toArray(),a=this.lineProgram.getUniformLocation("u_projectionMatrix"),b.uniformMatrix4fv(a,!1,q),this.lineProgram.uniform4Fv("color",[.5,.5,.6,.15]),c.updateMatrixWorld(),q=new THREE.Matrix4,q.getInverse(c.matrixWorld),c=q.toArray(),q=this.lineProgram.getUniformLocation("u_modelViewMatrix"),b.uniformMatrix4fv(q,!1,c),this.boxVbo.bind(),this.boxVbo.draw(this.lineProgram,b.LINES),b.disable(b.BLEND));b.finish()}};
Renderer.prototype.resize=function(a,b){this._width=a;this._height=b;void 0!=this.fbo&&this.fbo.unbind();this.fbo=new GLU.RenderTarget;this.progressiveStates=[new ProgressiveState(this._width,this._height),new ProgressiveState(this._width,this._height)];this.quadVbo=this.createQuadVbo();this.reset()};Renderer.prototype.reset=function(){this.spp=0};
var ProgressiveState=function(a,b){for(var c=new Float32Array(a*b*4),d=new Float32Array(a*b*4),e=0;e<a*b;++e)d[4*e+0]=4194167*Math.random(),d[4*e+1]=4194167*Math.random(),d[4*e+2]=4194167*Math.random(),d[4*e+3]=4194167*Math.random();this.radianceTex=new GLU.Texture(a,b,4,!0,!1,!0,c);this.rngTex=new GLU.Texture(a,b,4,!0,!1,!0,d)};ProgressiveState.prototype.bind=function(a){this.radianceTex.bind(0);this.rngTex.bind(1);a.uniformTexture("Radiance",this.radianceTex);a.uniformTexture("RngData",this.rngTex)};
ProgressiveState.prototype.attach=function(a){a.attachTexture(this.radianceTex,0);a.attachTexture(this.rngTex,1)};ProgressiveState.prototype.detach=function(a){a.detachTexture(0);a.detachTexture(1)};ProgressiveState.prototype.clear=function(a){var b=GLU.gl;a.bind();a.drawBuffers(1);a.attachTexture(this.radianceTex,0);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a.unbind()};var Solver=function(){this.shaderSources=GLU.resolveShaderSource("initial inject advect div project copy update vorticity".split(" "));this.fbo=new GLU.RenderTarget;this.quadVbo=this.createQuadVbo();this.settings={};this.settings.timestep=1;this.settings.NprojSteps=16;this.settings.vorticity_scale=.2;this.settings.Nx=0;this.settings.Ny=0;this.settings.Nz=0;this.settings.max_timesteps=100;this.settings.expansion=.001;this.uniforms_float={};this.uniforms_vec3={};this.paused=this.compiled_successfully=
!1};Solver.prototype.syncFloatToShader=function(a,b){this.uniforms_float[a]=b};Solver.prototype.syncColorToShader=function(a,b){this.uniforms_vec3[a]=b};Solver.prototype.syncUserUniforms=function(a){for(var b=$jscomp.makeIterator(Object.keys(this.uniforms_float)),c=b.next();!c.done;c=b.next())c=c.value,a.uniformF(c,this.uniforms_float[c]);b=$jscomp.makeIterator(Object.keys(this.uniforms_vec3));for(c=b.next();!c.done;c=b.next())c=c.value,a.uniform3Fv(c,this.uniforms_vec3[c])};
Solver.prototype.compileShaders=function(){console.warn("[Trinity] Solver.prototype.compileShaders");var a=trinity.getGlsl("common")+"\n",b=a+trinity.getGlsl("collide")+"\n",a=a+trinity.getGlsl("initial"),c=b+trinity.getGlsl("inject"),d=b+trinity.getGlsl("influence");this.uniforms_float={};this.uniforms_vec3={};trinity.getGUI().refresh();trinity.show_errors();this.compiled_successfully=!1;this.initial_program=new GLU.Shader("initial",this.shaderSources,{_USER_CODE_:a});this.initial_program.program?
(this.inject_program=new GLU.Shader("inject",this.shaderSources,{_USER_CODE_:c}),this.inject_program.program?(this.advect_program=new GLU.Shader("advect",this.shaderSources,{_USER_CODE_:d}),this.advect_program.program?(this.project_program=new GLU.Shader("project",this.shaderSources,{_USER_CODE_:b}),this.project_program.program?(this.div_program=new GLU.Shader("div",this.shaderSources,{_USER_CODE_:b}),this.div_program.program?(this.update_program=new GLU.Shader("update",this.shaderSources,{_USER_CODE_:b}),
this.update_program.program?(this.copy_program=new GLU.Shader("copy",this.shaderSources,null),this.copy_program.program?(this.vorticity_program=new GLU.Shader("vorticity",this.shaderSources,null),this.vorticity_program.program?(this.compiled_successfully=!0,trinity.hide_errors()):this.vorticity_program=null):this.copy_program=null):this.update_program=null):this.div_program=null):this.project_program=null):this.advect_program=null):this.inject_program=null):this.initial_program=null};
Solver.prototype.getDomain=function(){return this.domain};Solver.prototype.pauseToggle=function(){this.paused=!this.paused};Solver.prototype.restart=function(){this.time=this.frame=0};Solver.prototype.alloc_texture_pair=function(a,b){return[new GLU.Texture(a,b,4,!0,!0,!0,null),new GLU.Texture(a,b,4,!0,!0,!0,null)]};
Solver.prototype.resize=function(a,b,c){if(a!=this.settings.Nx||b!=this.settings.Ny||c!=this.settings.Nz){this.settings.Nx=a;this.settings.Ny=b;this.settings.Nz=c;var d=GLU.gl;W=d.getParameter(d.MAX_TEXTURE_SIZE);d=Math.floor(W/a);1>d&&GLU.fail("Resolution too high: Nx=",a);var e=Math.ceil(b/d),g=e*c;g>W&&GLU.fail("Resolution too high: Ny=",b);this.W=W;this.H=g;this.dL=1;this.L=[1*a,1*b,1*c];this.Vair=this.alloc_texture_pair(W,g);this.Pair=this.alloc_texture_pair(W,g);this.Tair=this.alloc_texture_pair(W,
g);this.absorption=this.alloc_texture_pair(W,g);this.scattering=this.alloc_texture_pair(W,g);this.divVair=new GLU.Texture(W,g,4,!0,!0,!0,null);this.vorticity=new GLU.Texture(W,g,4,!0,!0,!0,null);this.domain={Nx:a,Ny:b,Nz:c,Ncol:d,Nrow:e,dL:this.dL,L:this.L,W:this.W,H:this.H,boundsMin:[0,0,0],boundsMax:[1*a,1*b,1*c],boundsCenter:[1*a/2,1*b/2,1*c/2]};this.time=this.frame=0;trinity.getRenderer().setBounds(this.domain);trinity.render_dirty()}};
Solver.prototype.createQuadVbo=function(){var a=GLU.gl,b=new GLU.VertexBuffer;b.addAttribute("Position",3,a.FLOAT,!1);b.addAttribute("TexCoord",2,a.FLOAT,!1);b.init(4);b.copy(new Float32Array([1,1,0,1,1,-1,1,0,0,1,-1,-1,0,0,0,1,-1,0,1,0]));return b};Solver.prototype.getVair=function(){return this.Vair[0]};Solver.prototype.getTair=function(){return this.Tair[0]};Solver.prototype.getAbsorption=function(){return this.absorption[0]};Solver.prototype.getScattering=function(){return this.scattering[0]};
Solver.prototype.step=function(){if(this.compiled_successfully&&!this.paused){this.frame>=this.settings.max_timesteps&&this.restart();var a=GLU.gl;a.viewport(0,0,this.W,this.H);this.quadVbo.bind();var b=this.frame%2,c=1-b;0==this.frame&&(this.initial_program.bind(),this.initial_program.uniformI("Nx",this.domain.Nx),this.initial_program.uniformI("Ny",this.domain.Ny),this.initial_program.uniformI("Nz",this.domain.Nz),this.initial_program.uniformI("Ncol",this.domain.Ncol),this.initial_program.uniformI("W",
this.domain.W),this.initial_program.uniformI("H",this.domain.H),this.initial_program.uniform3Fv("L",this.domain.L),this.initial_program.uniformF("dL",this.domain.dL),this.syncUserUniforms(this.initial_program),this.fbo.bind(),this.fbo.drawBuffers(5),this.fbo.attachTexture(this.Vair[b],0),this.fbo.attachTexture(this.Pair[b],1),this.fbo.attachTexture(this.Tair[0],2),this.fbo.attachTexture(this.absorption[0],3),this.fbo.attachTexture(this.scattering[0],4),this.quadVbo.draw(this.advect_program,a.TRIANGLE_FAN),
this.fbo.detachTexture(0),this.fbo.detachTexture(1),this.fbo.detachTexture(2),this.fbo.detachTexture(3),this.fbo.detachTexture(4),this.fbo.unbind());this.inject_program.bind();this.inject_program.uniformI("Nx",this.domain.Nx);this.inject_program.uniformI("Ny",this.domain.Ny);this.inject_program.uniformI("Nz",this.domain.Nz);this.inject_program.uniformI("Ncol",this.domain.Ncol);this.inject_program.uniformI("W",this.domain.W);this.inject_program.uniformI("H",this.domain.H);this.inject_program.uniform3Fv("L",
this.domain.L);this.inject_program.uniformF("dL",this.domain.dL);this.inject_program.uniformF("time",this.time);this.inject_program.uniformF("timestep",this.settings.timestep);this.syncUserUniforms(this.inject_program);this.fbo.bind();this.fbo.drawBuffers(4);this.fbo.attachTexture(this.Vair[c],0);this.fbo.attachTexture(this.Tair[1],1);this.fbo.attachTexture(this.absorption[1],2);this.fbo.attachTexture(this.scattering[1],3);this.Vair[b].bind(0);this.Tair[0].bind(1);this.absorption[0].bind(2);this.scattering[0].bind(3);
this.inject_program.uniformTexture("Vair_sampler",this.Vair[b]);this.inject_program.uniformTexture("Tair_sampler",this.Tair[0]);this.inject_program.uniformTexture("absorption_sampler",this.absorption[0]);this.inject_program.uniformTexture("scattering_sampler",this.scattering[0]);this.quadVbo.draw(this.advect_program,a.TRIANGLE_FAN);this.fbo.detachTexture(0);this.fbo.detachTexture(1);this.fbo.detachTexture(2);this.fbo.detachTexture(3);this.fbo.unbind();0<this.settings.vorticity_scale&&(this.vorticity_program.bind(),
this.vorticity_program.uniformI("Nx",this.domain.Nx),this.vorticity_program.uniformI("Ny",this.domain.Ny),this.vorticity_program.uniformI("Nz",this.domain.Nz),this.vorticity_program.uniformI("Ncol",this.domain.Ncol),this.vorticity_program.uniformI("W",this.domain.W),this.vorticity_program.uniformI("H",this.domain.H),this.vorticity_program.uniform3Fv("L",this.domain.L),this.vorticity_program.uniformF("dL",this.domain.dL),this.fbo.bind(),this.fbo.drawBuffers(1),this.fbo.attachTexture(this.vorticity,
0),this.Vair[c].bind(0),this.vorticity_program.uniformTexture("Vair_sampler",this.Vair[c]),this.quadVbo.draw(this.update_program,a.TRIANGLE_FAN),this.fbo.detachTexture(0),this.fbo.unbind());this.advect_program.bind();this.advect_program.uniformI("Nx",this.domain.Nx);this.advect_program.uniformI("Ny",this.domain.Ny);this.advect_program.uniformI("Nz",this.domain.Nz);this.advect_program.uniformI("Ncol",this.domain.Ncol);this.advect_program.uniformI("W",this.domain.W);this.advect_program.uniformI("H",
this.domain.H);this.advect_program.uniform3Fv("L",this.domain.L);this.advect_program.uniformF("dL",this.domain.dL);this.advect_program.uniformF("time",this.time);this.advect_program.uniformF("timestep",this.settings.timestep);this.advect_program.uniformF("vorticity_scale",this.settings.vorticity_scale);this.syncUserUniforms(this.advect_program);this.fbo.bind();this.fbo.drawBuffers(5);this.fbo.attachTexture(this.Vair[b],0);this.fbo.attachTexture(this.Pair[c],1);this.fbo.attachTexture(this.Tair[0],
2);this.fbo.attachTexture(this.absorption[0],3);this.fbo.attachTexture(this.scattering[0],4);this.Vair[c].bind(0);this.Pair[b].bind(1);this.Tair[1].bind(2);this.absorption[1].bind(3);this.scattering[1].bind(4);this.vorticity.bind(5);this.advect_program.uniformTexture("Vair_sampler",this.Vair[c]);this.advect_program.uniformTexture("Pair_sampler",this.Pair[b]);this.advect_program.uniformTexture("Tair_sampler",this.Tair[1]);this.advect_program.uniformTexture("absorption_sampler",this.absorption[1]);
this.advect_program.uniformTexture("scattering_sampler",this.scattering[1]);this.advect_program.uniformTexture("vorticity_sampler",this.vorticity);this.quadVbo.draw(this.advect_program,a.TRIANGLE_FAN);this.fbo.detachTexture(0);this.fbo.detachTexture(1);this.fbo.detachTexture(2);this.fbo.detachTexture(3);this.fbo.detachTexture(4);this.fbo.unbind();a.bindTexture(a.TEXTURE_2D,null);this.div_program.bind();this.div_program.uniformI("Nx",this.domain.Nx);this.div_program.uniformI("Ny",this.domain.Ny);this.div_program.uniformI("Nz",
this.domain.Nz);this.div_program.uniformI("Ncol",this.domain.Ncol);this.div_program.uniform3Fv("L",this.domain.L);this.div_program.uniformF("dL",this.domain.dL);this.div_program.uniformF("time",this.time);this.syncUserUniforms(this.div_program);this.fbo.bind();this.fbo.drawBuffers(1);this.fbo.attachTexture(this.divVair,0);this.Vair[b].bind(0);this.div_program.uniformTexture("Vair_sampler",this.Vair[b]);this.quadVbo.draw(this.div_program,a.TRIANGLE_FAN);this.fbo.detachTexture(0);this.fbo.unbind();
a.bindTexture(a.TEXTURE_2D,null);this.project_program.bind();this.project_program.uniformI("Nx",this.domain.Nx);this.project_program.uniformI("Ny",this.domain.Ny);this.project_program.uniformI("Nz",this.domain.Nz);this.project_program.uniformI("Ncol",this.domain.Ncol);this.project_program.uniform3Fv("L",this.domain.L);this.project_program.uniformF("dL",this.domain.dL);this.project_program.uniformF("time",this.time);this.project_program.uniformF("timestep",this.settings.timestep);this.project_program.uniformF("expansion",
.01*this.settings.expansion);this.syncUserUniforms(this.project_program);for(var d=0;d<Math.floor(this.settings.NprojSteps);++d)this.fbo.bind(),this.fbo.drawBuffers(1),this.fbo.attachTexture(this.Pair[b],0),this.Pair[c].bind(0),this.Tair[0].bind(1),this.divVair.bind(2),this.project_program.uniformTexture("Pair_sampler",this.Pair[c]),this.project_program.uniformTexture("Tair_sampler",this.Tair[0]),this.project_program.uniformTexture("divVair_sampler",this.divVair),this.quadVbo.draw(this.project_program,
a.TRIANGLE_FAN),this.fbo.detachTexture(0),this.fbo.unbind(),a.bindTexture(a.TEXTURE_2D,null),this.fbo.bind(),this.fbo.drawBuffers(1),this.fbo.attachTexture(this.Pair[c],0),this.Pair[b].bind(0),this.Tair[0].bind(1),this.divVair.bind(2),this.project_program.uniformTexture("Pair_sampler",this.Pair[b]),this.project_program.uniformTexture("Tair_sampler",this.Tair[0]),this.project_program.uniformTexture("divVair_sampler",this.divVair),this.quadVbo.draw(this.project_program,a.TRIANGLE_FAN),this.fbo.detachTexture(0),
this.fbo.unbind(),a.bindTexture(a.TEXTURE_2D,null);this.update_program.bind();this.update_program.uniformI("Nx",this.domain.Nx);this.update_program.uniformI("Ny",this.domain.Ny);this.update_program.uniformI("Nz",this.domain.Nz);this.update_program.uniformI("Ncol",this.domain.Ncol);this.update_program.uniform3Fv("L",this.domain.L);this.update_program.uniformF("dL",this.domain.dL);this.update_program.uniformF("time",this.time);this.update_program.uniformF("timestep",this.timestep);this.syncUserUniforms(this.update_program);
this.fbo.bind();this.fbo.drawBuffers(1);this.fbo.attachTexture(this.Vair[c],0);this.Vair[b].bind(0);this.Pair[c].bind(1);this.update_program.uniformTexture("Vair_sampler",this.Vair[b]);this.update_program.uniformTexture("Pair_sampler",this.Pair[c]);this.quadVbo.draw(this.update_program,a.TRIANGLE_FAN);this.fbo.detachTexture(0);this.fbo.unbind();a.bindTexture(a.TEXTURE_2D,null);this.frame++;this.time+=this.settings.timestep}};var trinity,Trinity=function(a,b){trinity=this;this.editor=a;this.error_editor=b;$(this.error_editor.getWrapperElement()).hide();this.editor_docs={};this.editor_docs.common=CodeMirror.Doc("","x-shader/x-fragment");this.editor_docs.initial=CodeMirror.Doc("","x-shader/x-fragment");this.editor_docs.inject=CodeMirror.Doc("","x-shader/x-fragment");this.editor_docs.influence=CodeMirror.Doc("","x-shader/x-fragment");this.editor_docs.collide=CodeMirror.Doc("","x-shader/x-fragment");this.editor_docs.render=
CodeMirror.Doc("","x-shader/x-fragment");this.editor.swapDoc(this.editor_docs.initial);this.container=document.getElementById("container");this.render_canvas=a=document.getElementById("render-canvas");this.width=a.width;this.height=a.height;a.style.width=a.width;a.style.height=a.height;this.text_canvas=b=document.getElementById("text-canvas");this.text_canvas.style.width=a.width;this.text_canvas.style.height=a.height;this.textCtx=b.getContext("2d");this.onUserLink=this.onTrinityLink=!1;window.addEventListener("resize",
this,!1);this.camera=new THREE.PerspectiveCamera(45,this.width/this.height,1,2E4);this.camera.up.set(0,1,0);this.camera.position.set(1,1,1);this.camera.lookAt(new THREE.Vector3(0,0,0));this.camControls=new THREE.OrbitControls(this.camera,this.container);this.camControls.zoomSpeed=2;this.camControls.flySpeed=.01;this.disable_reset=!1;this.camControls.addEventListener("change",function(){trinity.disable_reset||trinity.render_dirty()});this.camControls.keyPanSpeed=100;this.camControls.saveState=function(){this.target0.copy(this.target);
this.position0.copy(this.object.position);this.zoom0=this.object.zoom};this.gui=null;this.guiVisible=!0;var c=this.renderer=new Renderer;this.solver=new Solver;this.presets=new Presets;this.preset_selection="None";this.gui=new GUI(this.guiVisible);var d=this,e=this.solver;this.editor.on("change",function(a,b){d.loading||(e.compileShaders(),c.compileShaders())});this.loading=this.editing=!1;window.addEventListener("mousemove",this,!1);window.addEventListener("mousedown",this,!1);window.addEventListener("mouseup",
this,!1);window.addEventListener("contextmenu",this,!1);window.addEventListener("click",this,!1);window.addEventListener("keydown",this,!1);this.load_url(window.location.href)||this.presets.load_preset("Plume + sphere collider I")};Trinity.prototype.getVersion=function(){return[1,0,0]};Trinity.prototype.getGUI=function(){return this.gui};Trinity.prototype.getRenderer=function(){return this.renderer};Trinity.prototype.getSolver=function(){return this.solver};Trinity.prototype.getCamera=function(){return this.camera};
Trinity.prototype.getCameraControls=function(){return this.camControls};Trinity.prototype.getGLContext=function(){return GLU.gl};Trinity.prototype.showGUI=function(a){this.guiVisible=a};Trinity.prototype.resetCam=function(){var a=this.getSolver().getDomain(),b=a.boundsMin,c=a.boundsMax,a=a.boundsCenter,b=[c[0]-b[0],c[1]-b[1],c[2]-b[2]],c=[1,.666,5];this.camera.position.set(a[0]+c[0]*b[0],a[1]+c[1]*b[1],a[2]+c[2]*b[2]);this.camControls.target.set(a[0],a[1],a[2]);this.camControls.update()};
Trinity.prototype.get_escaped_stringified_state=function(a){return JSON.stringify(a).replace(/[\\]/g,"\\\\").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")};
Trinity.prototype.get_state=function(){var a=this.camera.position,b=this.camControls.target,a={pos:[a.x,a.y,a.z],tar:[b.x,b.y,b.z],near:this.camera.near,far:this.camera.far},b={common_glsl:trinity.getGlsl("common"),initial_glsl:trinity.getGlsl("initial"),inject_glsl:trinity.getGlsl("inject"),influence_glsl:trinity.getGlsl("influence"),collide_glsl:trinity.getGlsl("collide"),render_glsl:trinity.getGlsl("render")},c={},d=this.getGUI().simulationFolder;void 0!=d&&(c=d.parameters);d={visible:this.getGUI().visible};
return{RENDERER_STATE:this.renderer.settings,SOLVER_STATE:this.solver.settings,SIMULATION_STATE:c,CAMERA_STATE:a,GUI_STATE:d,EDITOR_STATE:b}};
Trinity.prototype.load_scene=function(){var a=this,b=document.createElement("input");b.type="file";b.accept=".json";b.onchange=function(b){var c=b.target.files[0];b=new FileReader;b.readAsText(c,"UTF-8");b.onload=function(b){b=b.target.result;var d=null;try{d=JSON.parse(b)}catch(h){console.log("Failed to parse JSON from file ",c.name,": ",h);return}a.load_state(d)||console.log("Failed to load scene from file ",c.name);console.log("Loaded scene from file ",c.name)}};b.click()};
Trinity.prototype.getQueryParam=function(a,b){var c=a.indexOf("?");if(-1===c)return null;a=a.substring(c+1).split("&");for(c=0;c<a.length;c++){var d=a[c].split("=");if(decodeURIComponent(d.shift())==b)return decodeURIComponent(d.join("="))}return null};Trinity.prototype.load_url=function(a){a=this.getQueryParam(a,"preset");if(!a)return!1;a=a.replace(/^"|"$/g,"");return this.presets.load_preset(a)};
Trinity.prototype.save_scene=function(){var a=this.get_state(),b=JSON.stringify(a),a=new Date,c="trinity-scene-"+(a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear()+"_"+a.getHours()+"-"+a.getMinutes()+"-"+a.getSeconds())+".json",a=document.createElement("a");a.download=c;b=new Blob([b],{type:"text/csv"});a.href=URL.createObjectURL(b);b=new MouseEvent("click");a.dispatchEvent(b);a.dispatchEvent(b);console.log("Saved scene to file ",file)};
Trinity.prototype.load_state=function(a){this.loading=!0;if(!("CAMERA_STATE"in a&&"GUI_STATE"in a&&"EDITOR_STATE"in a&&"RENDERER_STATE"in a&&"SOLVER_STATE"in a&&"SIMULATION_STATE"in a))return!1;var b=a.CAMERA_STATE,c=b.pos,d=b.tar,e=b.near,b=b.far;this.camera.position.copy(new THREE.Vector3(c[0],c[1],c[2]));this.camera.near=e;this.camera.far=b;this.camControls.target.copy(new THREE.Vector3(d[0],d[1],d[2]));this.camControls.saveState();this.initial_camera_position=this.camera.position.clone();this.initial_camera_target=
this.camControls.target.clone();(c=a.GUI_STATE)&&this.showGUI(c.visible);void 0===a.EDITOR_STATE.common_glsl&&(a.EDITOR_STATE.common_glsl="");void 0===a.EDITOR_STATE.initial_glsl&&(a.EDITOR_STATE.initial_glsl="");void 0===a.EDITOR_STATE.inject_glsl&&(a.EDITOR_STATE.inject_glsl="");void 0===a.EDITOR_STATE.influence_glsl&&(a.EDITOR_STATE.influence_glsl="");void 0===a.EDITOR_STATE.collide_glsl&&(a.EDITOR_STATE.collide_glsl="");void 0===a.EDITOR_STATE.render_glsl&&(a.EDITOR_STATE.render_glsl="");trinity.getDoc("common").setValue(a.EDITOR_STATE.common_glsl);
trinity.getDoc("initial").setValue(a.EDITOR_STATE.initial_glsl);trinity.getDoc("inject").setValue(a.EDITOR_STATE.inject_glsl);trinity.getDoc("influence").setValue(a.EDITOR_STATE.influence_glsl);trinity.getDoc("collide").setValue(a.EDITOR_STATE.collide_glsl);trinity.getDoc("render").setValue(a.EDITOR_STATE.render_glsl);this.renderer.settings=Object.assign(this.renderer.settings,a.RENDERER_STATE);this.solver.resize(a.SOLVER_STATE.Nx,a.SOLVER_STATE.Ny,a.SOLVER_STATE.Nz);this.solver.settings=Object.assign(this.solver.settings,
a.SOLVER_STATE);jQuery.isEmptyObject(a.SIMULATION_STATE)||(c={},c=Object.assign(c,a.SIMULATION_STATE),this.getGUI().simulationFolder={parameters:c});this.camControls.update();this.gui.refresh();this.loading=!1;this.solver.compileShaders();this.renderer.compileShaders();this.solver.restart();this.resize();return!0};Trinity.prototype.getDoc=function(a){return a in this.editor_docs?this.editor_docs[a]:null};
Trinity.prototype.getGlsl=function(a){return a in this.editor_docs?this.editor_docs[a].getValue():""};Trinity.prototype.show_errors=function(){$(this.error_editor.getWrapperElement()).show()};Trinity.prototype.hide_errors=function(){this.getRenderer().compiled_successfully&&this.getSolver().compiled_successfully&&$(this.error_editor.getWrapperElement()).hide()};Trinity.prototype.num_lines=function(a){return a.split(/\r\n|\r|\n/).length};
Trinity.prototype.compile_error=function(a,b,c){this.show_errors();this.error_editor.setValue("");this.error_editor.clearHistory();var d=trinity.getGlsl("common")+"\n",e=d+trinity.getGlsl("collide")+"\n",d={initial:this.num_lines(d)+21,inject:this.num_lines(e)+30,advect:this.num_lines(e)+36,volume:this.num_lines(e)+59};program_line_start=0;d.hasOwnProperty(a)&&(program_line_start=d[a]);"advect"==a&&(a="influence");"volume"==a&&(a="render");var g="["+a+" "+b+" shader]",h="",k=/\d+:(\d+):/;c.split("\n").forEach(function(a,
b){if(b=k.exec(a))b=Math.max(b?parseInt(b[1]):0,0)-program_line_start,b+=1,a=a.replace(k,""),a=a.replace("ERROR:",""),(a=a.trim())&&(h+=g+" Error on line "+b+": "+a+"\n")});console.log(h);this.error_editor.setValue(h)};Trinity.prototype.link_error=function(a,b){console.log("Link error: ");console.log("\t\tprogram_info: ",a);console.log("\t\terror_log: ",b)};Trinity.prototype.pauseSimToggle=function(){this.solver.pauseToggle()};Trinity.prototype.restartSim=function(){this.solver.restart()};
Trinity.prototype.runFrame=function(){this.solver.paused||(this.solver.step(),this.render_dirty());this.renderer.render(this.solver);this.update_hud()};Trinity.prototype.render_dirty=function(){this.renderer.reset()};
Trinity.prototype.update_hud=function(){if(this.textCtx&&(this.textCtx.textAlign="left",this.textCtx.textBaseline="middle",this.textCtx.font="12px monospace",this.textCtx.clearRect(0,0,this.textCtx.canvas.width,this.textCtx.canvas.height),this.textCtx.globalAlpha=.95,this.textCtx.strokeStyle="black",this.textCtx.lineWidth=2,this.getGUI().visible)){this.textCtx.fillStyle=this.onTrinityLink?"#ff5500":"#ffff00";var a=this.getVersion(),b=this.textCtx.measureText("Trinity vX.X.X").width,a="Trinity v"+
a[0]+"."+a[1]+"."+a[2];this.textCtx.strokeText(a,this.textCtx.canvas.width-b-14,this.textCtx.canvas.height-20);this.textCtx.fillText(a,this.textCtx.canvas.width-b-14,this.textCtx.canvas.height-20);this.textCtx.fillStyle="#ffaa22";var b=this.renderer.spp,a=this.renderer.settings.max_spp,c=this.solver.frame,d=this.solver.settings.max_timesteps,e=Number(this.solver.time.toPrecision(3)),b=this.solver.paused?"timestep "+c+"/"+d+", time "+e+" ["+b+"/"+a+" spp]":"timestep "+c+"/"+d+", time "+e;this.textCtx.strokeText(b,
14,this.textCtx.canvas.height-25);this.textCtx.fillText(b,14,this.textCtx.canvas.height-25);this.textCtx.fillStyle="#ccaaff";this.textCtx.strokeText("[SPC to pause/play, ESC to restart]",14,this.textCtx.canvas.height-42);this.textCtx.fillText("[SPC to pause/play, ESC to restart]",14,this.textCtx.canvas.height-42)}};
Trinity.prototype._resize=function(a,b){this.width=a;this.height=b;var c=this.render_canvas;c.width=a;c.height=b;c.style.width=a;c.style.height=b;c=this.text_canvas;c.width=a;c.height=b;c.style.width=a;c.style.height=b;this.camera.aspect=a/b;this.camera.updateProjectionMatrix();this.camControls.update();this.renderer.resize(a,b)};Trinity.prototype.resize=function(){this._resize(window.innerWidth,window.innerHeight)};
Trinity.prototype.handleEvent=function(a){switch(a.type){case "resize":this.resize();break;case "mousemove":this.onDocumentMouseMove(a);break;case "mousedown":this.onDocumentMouseDown(a);break;case "mouseup":this.onDocumentMouseUp(a);break;case "contextmenu":this.onDocumentRightClick(a);break;case "click":this.onClick(a);break;case "keydown":this.onkeydown(a)}};Trinity.prototype.onClick=function(a){a.preventDefault()};
Trinity.prototype.onDocumentMouseMove=function(a){var b=document.querySelector(".CodeMirror").getBoundingClientRect();if(a.clientX>=b.left&&a.clientX<=b.right&&a.clientY>=b.top&&a.clientY<=b.bottom)this.disable_reset=!0,this.camControls.reset(),this.camControls.update(),this.disable_reset=!1,this.camControls.enabled=!1;else{if(this.textCtx){b=a.pageX;a=a.pageY;var c=this.textCtx.measureText("Trinity vX.X.X").width,d=this.textCtx.canvas.width-c-14,e=this.textCtx.canvas.height-25,g=this.textCtx.canvas.height-
10;this.onTrinityLink=b>=d&&b<=d+c&&a>=e&&a<=g?!0:!1}this.camControls.update();this.camControls.saveState()}};Trinity.prototype.onDocumentMouseDown=function(a){this.camControls.update()};Trinity.prototype.onDocumentMouseUp=function(a){this.camControls.update();a.preventDefault()};Trinity.prototype.onDocumentRightClick=function(a){};Trinity.prototype.onClick=function(a){this.onTrinityLink&&window.open("https://github.com/portsmouth/Trinity");a.preventDefault()};
Trinity.prototype.onkeydown=function(a){switch(a.which?a.which:a.keyCode){case 122:a=document.body;"webkitCancelFullScreen"in document?a.webkitRequestFullScreen():"mozCancelFullScreen"in document?a.mozRequestFullScreen():console.assert(!1);break;case 72:if(!this.camControls.enabled||trinity.editing)break;this.guiVisible=!this.guiVisible;trinity.getGUI().toggleHide();break;case 79:if(!this.camControls.enabled||trinity.editing)break;console.log(this.get_escaped_stringified_state(this.get_state()));
break;case 70:if(!this.camControls.enabled||trinity.editing)break;this.resetCam();break;case 32:if(!this.camControls.enabled||trinity.editing)break;this.pauseSimToggle();break;case 27:this.restartSim();break;case 80:a=new Date;a="trinity-screenshot-"+(a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear()+"_"+a.getHours()+"-"+a.getMinutes()+"-"+a.getSeconds())+".png";var b=document.createElement("a");b.download=a;this.render_canvas.toBlob(function(a){b.href=URL.createObjectURL(a);a=new MouseEvent("click");
b.dispatchEvent(a)},"image/png",1)}};
